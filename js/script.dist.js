!function e(t,i,n){function o(r,l){if(!i[r]){if(!t[r]){var d="function"==typeof require&&require;if(!l&&d)return d(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e){!function(){function t(){new i($("#container")),new n($("#container"))}var i=e("./classes/Profile"),n=e("./classes/Overview");t()}()},{"./classes/Overview":7,"./classes/Profile":11}],2:[function(e,t){t.exports=function(){function t(e,t){console.log("[App] constructor"),this.$el=e,this.whiteboardId=t,this.types=["postits"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new s,this.whiteboard=new i(this.$el),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),s=e("./DataHandler");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();var t=new o(this.$el,e,this.position);this.newElement(e,t.elementId),bean.on(t,"position-changed",this.positionChangedHandler.bind(this))},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e],this.whiteboardId)},t.prototype.addToElementList=function(){console.log("[App] addToElementList"),this.elementList.push(this.dataHandler.getBoardElements()),this.i++,this.i===this.types.length&&this.addToBoard()},t.prototype.addToBoard=function(){console.log("[App] addToBoard");var e=this.elementList[0][0];for(var t in e){var i=e[t].el_type,n={};n.yPos=Number(e[t].posy),n.xPos=Number(e[t].posx);var s=e[t].id_on_board,r=e[t].id,l=e[t].content,d=new o(this.$el,i,n,s,l,r);bean.on(d,"remove-clicked",this.removeHandler.bind(this)),bean.on(d,"position-changed",this.positionChangedHandler.bind(this))}},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.id)},t.prototype.newElement=function(e,t){console.log("[App] newElementHandler"),console.log(this.whiteboardId),this.dataHandler.newBoardElement(e,t,this.position,this.whiteboardId)},t.prototype.positionChangedHandler=function(e){console.log("[App] positionChangedHandler"),this.dataHandler.positionChange(e.elementType,e.elementId,e.eTarget.css("left"),e.eTarget.css("top"),this.whiteboardId)},t}()},{"./DataHandler":3,"./Element":5,"./ElementPicker":6,"./Whiteboard":13}],3:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost/whiteboard_2/api/index.php/",t=this,this.boardElements=[],this.boardList=[]}var t;return e.prototype.loadBoardElements=function(e,i){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/"+String(i),data:{content:"content"},success:function(e){t.boardElements.push(e),bean.fire(t,"data-success",[e])}})},e.prototype.getBoardElements=function(){return console.log("[DataHandler] getBoardElements"),this.boardElements},e.prototype.removeBoardElement=function(e,t){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t);break;case"static":this.removeElementById("static",t);break;case"motion":this.removeElementById("motion",t)}},e.prototype.removeElementById=function(e,t){$.ajax({type:"GET",url:this.url+e+"/delete/"+t,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.newBoardElement=function(e,t,i,n){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newElement("postits",t,i,n);break;case"static":this.newElement("static",n);break;case"motion":this.newElement("motion",n)}},e.prototype.newElement=function(e,t,i,n){$.ajax({type:"POST",url:this.url+e+"/add",data:{id_on_board:t,xpos:i.xPos,ypos:i.yPos,whiteboardId:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.positionChange=function(e,t,i,n,o){$.ajax({type:"POST",url:this.url+"postits/change/position",data:{whiteboard_id:o,id_on_board:t,xpos:i,ypos:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.getAllBoards=function(){console.log("[DataHandler] getAllBoards"),$.ajax({type:"GET",url:this.url+"/boards/",data:{content:"content"},success:function(e){this.boardElements.push(e)}.bind(this)})},e}()},{}],4:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var s=n(o);this.$el.find("#"+this.elementId).append(s),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked",t),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],5:[function(e,t){t.exports=function(){function t(e,t,i,n,o,s){console.log("[Element] constructor"),this.$el=e,this.content=o,this.elementType=t,this.elementId=n,this.elementId?this.elementId=n:(this.elementId=this.setElementId(),console.log("element id = "+this.elementId)),this.position=i,s&&(this.id=s),this.createElementHolder()}var n=e("./EditMenu"),o=1,s=e("./elements/Postit"),r=e("./elements/Picture"),l=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={};e.top=this.position.yPos,e.left=this.position.xPos,e.zIndex=0,this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new s(this.content),this.$el.find("#"+this.elementId).append(this.element.createPostit),this.bindHandler(this.$el.find("#"+this.elementId));break;case"static":this.element=new r(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createPicture),this.bindHandler(this.$el.find("#"+this.elementId));break;case"motion":this.element=new l(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createMotion),this.bindHandler(this.$el.find("#"+this.elementId))}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),console.log(this.$el.find("#"+this.elementId)),this.mouseDown=!1},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),event.target.id===this.elementId&&(this.mouseDown=!0,this.currentLeft=$(e.target).css("left"),this.currentTop=$(e.target).css("top"),this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++o,this.$el.find("#"+this.elementId).css("zIndex",o),document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler))},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new n(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();var t={};t.id=this.id,t.elementType=this.elementType,bean.fire(this,"remove-clicked",t);break;case"edit":this.element.confirm(),this.editMenu.toggleVisible();break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);this.$el.find("#"+this.elementId).css("left",t-this.offsetX),this.$el.find("#"+this.elementId).css("top",i-this.offsetY)}},t.prototype.mouseUpHandler=function(e){if(console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),this.currentTop!==$(e.target).css("top")||this.currentLeft!==$(e.target).css("left")){var t={};t.eTarget=$(e.target),t.elementType=this.elementType,t.elementId=this.elementId,bean.fire(this,"position-changed",t)}},t.prototype.setElementId=function(){console.log("[Element] setElementId");var e=this.$el.find(".element-holder");if(e.length>0){var t=[];for(i=0;i<e.length;i++)t.push(e[i].id);return t.sort(function(e,t){return t-e}),String(Number(t[0])+1)}return"0"},t}()},{"./EditMenu":4,"./elements/Motion":15,"./elements/Picture":17,"./elements/Postit":19}],6:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],7:[function(e,t){t.exports=function(){function t(e){console.log("[Overview] constructor"),this.$el=e,this.overviewHandler=new s,this.overviewHandler.getAllBoards(),bean.on(this.overviewHandler,"data-success",this.addToBoardList.bind(this)),e.find("#addProject").on("click",this.newWhiteboard.bind(this)),bean.on(this.overviewHandler,"view-whiteboard",this.viewWhiteboard.bind(this))}var n=e("./App"),o=e("./OverviewElement"),s=e("./OverviewHandler");return t.prototype.addToBoardList=function(e){for(console.log("[Overview] getBoards"),this.boardList=[],$(".OverviewThumb").remove(),console.log(e),this.boardList.push(e),i=0;i<this.boardList[0].length;i++)this.overviewElement=new o(this.boardList[0][i]),bean.on(this.overviewElement,"remove-whiteboard",this.removeWhiteboard.bind(this)),bean.on(this.overviewElement,"view-whiteboard",this.viewWhiteboard.bind(this))},t.prototype.viewWhiteboard=function(e){console.log("[Overview] viewWhiteboard"),$("#container").html(""),new n($("#container"),e)},t.prototype.newWhiteboard=function(){console.log("[Overview] newWhiteboard"),this.overviewHandler.addWhiteboard("Untitled","1")},t.prototype.removeWhiteboard=function(e){console.log("[Overview] removeWhiteboard"),this.overviewHandler.removeBoard(e),this.$el.find("#"+e).remove()},t}()},{"./App":2,"./OverviewElement":8,"./OverviewHandler":9}],8:[function(e,t){t.exports=function(){function t(e){console.log("[Overview] constructor"),this.$el=e,this.boardId=e.id,this.boardList=[],this.createOverviewThumb(e)}e("./App");return t.prototype.createOverviewThumb=function(e){console.log("[Overview] createOverviewThumb");var t=$("#overviewThumb-template").text(),i=Handlebars.compile(t),n={};n.title=e.title,n.id=e.id,n.creation_date=e.creation_date;var o=i(n);$("#container").append($(o)),this.bindHandler(e.id,$(o)[0])},t.prototype.bindHandler=function(e){console.log("[Overview] bindHandler"),$("#"+e+" > .remove").on("click",this.removeHandler.bind(this)),$("#"+e+" > .view").on("click",this.viewHandler.bind(this))},t.prototype.removeHandler=function(){console.log("[Overview] removeHandler"),bean.fire(this,"remove-whiteboard",this.boardId)},t.prototype.viewHandler=function(){console.log("[Overview] viewHandler"),bean.fire(this,"view-whiteboard",this.boardId)},t}()},{"./App":2}],9:[function(e,t){t.exports=function(){function e(){console.log("[OverviewHandler] constructor"),this.url="http://localhost/whiteboard_2/api/index.php/"}return e.prototype.getAllBoards=function(){return console.log("[OverviewHandler] getAllBoards"),$.ajax({type:"GET",url:this.url+"/boards/",data:{content:"content"},success:function(e){bean.fire(this,"data-success",[e])}.bind(this)})},e.prototype.removeBoard=function(e){console.log("[OverviewHandler] removeBoard"),$.ajax({type:"GET",url:this.url+"/boards/delete/"+e,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.addWhiteboard=function(e,t){return $.ajax({type:"POST",url:this.url+"/boards/add/"+e+"/"+t,data:{content:"content"},success:function(e){console.log("view-whiteboard "+[e.id]),bean.fire(this,"view-whiteboard",[e.id])}.bind(this)})},e}()},{}],10:[function(e,t){t.exports=function(){function e(e){console.log("[Participant] constructor"),this.$el=e;var t=e.find(".participant-input");if(t.val()){var i=$("#participant-template").text(),n=Handlebars.compile(i),o={participants:[{}]};Handlebars.registerHelper("participant",function(){return new Handlebars.SafeString("<li id=''>"+t.val()+"<button class='btn delete'>X</button></li>")});var s=n(o);this.$el.find("#participant-list").append($(s)),this.bindDeletebutton(),$(".participant-input").val("")}}return e.prototype.bindDeletebutton=function(){console.log("[Participant] bindDeletebutton"),this.deletebuton=document.querySelectorAll(".btn-delete"),this.deletebuton[this.deletebuton.length-1].addEventListener("click",this.deleteClickHandler.bind(this))},e.prototype.deleteClickHandler=function(e){console.log("[Participant] deleteClickHandler"),bean.fire(this,"delete",e.path[1])},e}()},{}],11:[function(e,t){t.exports=function(){function t(e,t,n){console.log("[Profile] constructor"),this.$el=e,this.user=[],this.userHandler=new i,this.username=t,this.email=n;var o=$("#login-template").text(),s=Handlebars.compile(o),r={},l=s(r);$("#container").append($(l));var o=$("#register-template").text(),s=Handlebars.compile(o),r={},l=s(r);$("#container").append($(l)),this.$el.find("#register-button").on("click",this.register.bind(this)),$(".register").on("click",this.addUser.bind(this)),this.$el.find(".login").on("click",this.login.bind(this)),this.$el.find(".logout").on("click",this.logout.bind(this)),bean.on(this.userHandler,"user-found",this.bindUser.bind(this))}var i=e("./UserHandler");return t.prototype.register=function(){console.log("[Profile] register"),$("#register").toggleClass("hidden")},t.prototype.addUser=function(){console.log("[Profile] addUser"),this.username=this.$el.find(".register_name").val(),this.email=this.$el.find(".register_email").val(),this.password=this.$el.find(".register_password").val(),this.password_2=this.$el.find(".register_password_2").val(),this.password==this.password_2&&this.userHandler.register(this.username,this.email,this.password)},t.prototype.login=function(){console.log("[Profile] login"),this.email=this.$el.find(".login_email").val(),this.password=this.$el.find(".login_password").val(),this.userHandler.login(this.email,this.password)},t.prototype.logout=function(){console.log("[Profile] logout"),this.user=[],this.toggleVisible(),$("#register-button").removeClass("hidden")},t.prototype.bindUser=function(e){console.log("[Profile] bindUser"),this.user=[e],this.user[0]&&($("input").val(""),$("#register-button").addClass("hidden"),$("#register").addClass("hidden"),this.toggleVisible())},t.prototype.toggleVisible=function(){console.log("[Profile] toggleVisible"),$("#login").toggleClass("hidden"),$("#logout").toggleClass("hidden")},t}()},{"./UserHandler":12}],12:[function(e,t){t.exports=function(){function e(){console.log("[OverviewHandler] constructor"),this.url="http://localhost/whiteboard_2/api/index.php/"}return e.prototype.login=function(e,t){console.log("[UserHandler] login"),$.ajax({type:"POST",data:{content:"content"},url:this.url+"users/login/"+e+"/"+t,success:function(e){console.log("user found",[e]),bean.fire(this,"user-found",[e])}.bind(this)})},e.prototype.register=function(e,t,i){console.log("[UserHandler] register"),$.ajax({type:"POST",data:{content:"content"},url:this.url+"users/register/"+e+"/"+t+"/"+i,success:function(e){console.log("new user created",[e]),bean.fire(this,"user-found",[e])}.bind(this)})},e}()},{}],13:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e,this.createWhiteboard(),this.addWhiteboardSettings()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el)},t}()},{"./WhiteboardSettings":14}],14:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[WhiteboardSettings] constructor"),this.$el=e,this.$participants=t,this.$title=i;var n=$("#settings-template").text(),o=Handlebars.compile(n),s={};s.title=this.$title?i:"Untitled";var r=o(s);console.log(r),$("#container").append($(r)),this.bindHandler()}var i=e("./Participant");return t.prototype.toggleVisible=function(){console.log("[WhiteboardSettings] toggleVisible"),this.$el.find("#hide").toggleClass("hidden"),this.$el.find("#show").toggleClass("hidden")},t.prototype.bindHandler=function(){console.log("[WhiteboardSettings] bindHandler"),this.$el.find(".hide-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".show-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".add-button").on("click",this.createParticipant.bind(this))},t.prototype.createParticipant=function(){console.log("[WhiteboardSettings] addClickedHandler"),this.participant=new i(this.$el),bean.on(this.participant,"delete",this.deleteParticipant.bind(this))},t.prototype.hideSettingsHandler=function(){console.log("[WhiteboardSettings] hideSettingsHandler"),this.$el.find(".hide_section").toggleClass("hidden"),this.$el.find(".show-button").toggleClass("hidden")},t.prototype.deleteParticipant=function(e){console.log("[WhiteboardSettings] deleteParticipant");var t=document.querySelector("#participant-list");t.removeChild(e)},t}()},{"./Participant":10}],15:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Motion] constructor"),this.$el=e,n&&(this.vidSrc=n)}var i=e("./MotionEdit");return t.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.vidSrc?this.vidSrc:"";var n=t(i);$('#id="whiteboard"').append($(n))},t.prototype.edit=function(e,t){console.log("[Motion] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new i(this.vidSrc,t))},t.prototype.confirm=function(){console.log("[Motion] confirm"),this.vidSrc=this.$el.find("#"+this.elementId+" .motion-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Motion] endEdit"),this.$el.find("#"+this.elementId+" > .motion-edit").remove()},t}()},{"./MotionEdit":16}],16:[function(e,t){t.exports=function(){function e(e,i){console.log("[MotionEdit] constructor");var n=$("#motion-edit-template").text(),o=Handlebars.compile(n),s={};s.vidSrc=e;var r=o(s);return setTimeout(function(){t(i)},100),$(r)}function t(e){console.log("[Motion] initMotionInput");var t=$("#"+e+" > input[type=file]")[0];t.addEventListener("change",i)}function i(e){console.log("[Motion] playSelectedFile");var t=e.target.parentNode.id,i=document.querySelector("#"+t+" > .motion > video"),n=this.files[0],o=n.type,s=i.canPlayType(o);s=""===s?"no":s;if(URL){var r=URL.createObjectURL(n);i.src=r,i.autoPlay=!0}}return e}()},{}],17:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Picture] constructor"),this.$el=e,console.log(e),n&&(this.imgSrc=n)}var i=e("./PictureEdit");return t.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};i.imgSrc=this.txt?this.imgSrc:"";var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Picture] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new i(e,this.imgSrc,t))},t.prototype.confirm=function(){console.log("[Picture] confirm"),this.imgSrc=this.$el.find("#"+this.elementId+" .input-picture").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Picture] endEdit"),console.log(this.elementId),this.$el.find("#"+this.elementId+" > .input-picture").remove()},t}()},{"./PictureEdit":18}],18:[function(e,t){t.exports=function(){function e(e,i,n){console.log("[PictureEdit] constructor"),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support"),this.$el=e;var o=$("#picture-edit-template").text(),s=Handlebars.compile(o),r={};r.txt=i;var l=s(r);return setTimeout(function(){t(n)},100),$(l)}function t(e){console.log("[PictureEdit] initImageInput");var t=$("#"+e+" > .input-picture")[0];t.addEventListener("change",i)}function i(){console.log("[PictureEdit] createThumb");var e=event.target.parentNode.id;if(this.files&&this.files[0]&&this.files[0].type.match("image.*")){var t=new FileReader,i=$("#"+e+"> .picture > #image-preview")[0];t.onload=function(e){i.setAttribute("src",e.target.result),i.setAttribute("width",i.width),i.setAttribute("height",i.height),i.onload=function(){0===n.length?(i.style.backgroundImage="url('"+e.target.result+"')",i.style.height=i.width+"px",i.style.width=i.height+"px"):n=[]}},t.readAsDataURL(this.files[0])}else n.push("File is not a valid image")}var n=[];return e}()},{}],19:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":20}],20:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRGF0YUhhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9FZGl0TWVudS5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9FbGVtZW50UGlja2VyLmpzIiwianMvc3JjL2NsYXNzZXMvT3ZlcnZpZXcuanMiLCJqcy9zcmMvY2xhc3Nlcy9PdmVydmlld0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9PdmVydmlld0hhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9QYXJ0aWNpcGFudC5qcyIsImpzL3NyYy9jbGFzc2VzL1Byb2ZpbGUuanMiLCJqcy9zcmMvY2xhc3Nlcy9Vc2VySGFuZGxlci5qcyIsImpzL3NyYy9jbGFzc2VzL1doaXRlYm9hcmQuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkU2V0dGluZ3MuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Nb3Rpb24uanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Nb3Rpb25FZGl0LmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUGljdHVyZS5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1BpY3R1cmVFZGl0LmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUG9zdGl0LmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUG9zdGl0RWRpdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsR0FBQSxHQUFBLGtCQUFBLFVBQUEsT0FBQSxLQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsR0FBQSxHQUFBLE9BQUEsdUJBQUEsRUFBQSxJQUFBLE1BQUEsR0FBQSxLQUFBLG1CQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxXQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsRUFBQSxRQUFBLFNBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsR0FBQSxHQUFBLGtCQUFBLFVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxPQUFBLEtBQUEsR0FBQSxTQUFBLElDQUEsV0FNQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsZUFDQSxHQUFBLEdBQUEsRUFBQSxlQVJBLEdBQUEsR0FBQSxFQUFBLHFCQUVBLEVBQUEsRUFBQSxxQkFVQSwyRUNiQSxFQUFBLFFBQUEsV0FPQSxRQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLGFBQUEsRUFDQSxLQUFBLE9BQUEsV0FDQSxLQUFBLEVBQUEsRUFDQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLEtBQUEsWUFBQSxHQUFBLEdBQ0EsS0FBQSxXQUFBLEdBQUEsR0FBQSxLQUFBLEtBQ0EsS0FBQSxjQUFBLEdBQUEsR0FBQSxLQUFBLEtBRUEsS0FBQSxHQUFBLEtBQUEsWUFBQSxlQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFdBQUEscUJBQUEsS0FBQSx5QkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsY0FBQSx5QkFBQSxLQUFBLDRCQUFBLEtBQUEsT0FFQSxLQUFBLGFBckJBLEdBQUEsR0FBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEVBQUEsZ0JBNkVBLE9BeERBLEdBQUEsVUFBQSx5QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGtDQUNBLEtBQUEsY0FBQSxnQkFDQSxLQUFBLGNBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsU0FBQSxHQUdBLEVBQUEsVUFBQSw0QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHFDQUNBLEtBQUEsY0FBQSxlQUNBLElBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxTQUNBLE1BQUEsV0FBQSxFQUFBLEVBQUEsV0FDQSxLQUFBLEdBQUEsRUFBQSxtQkFBQSxLQUFBLHVCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsV0FBQSxXQUFBLFFBQUEsSUFBQSxtQkFDQSxLQUFBLEdBQUEsS0FBQSxNQUFBLE1BQ0EsS0FBQSxZQUFBLGtCQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsZUFJQSxFQUFBLFVBQUEsaUJBQUEsV0FBQSxRQUFBLElBQUEsMEJBQ0EsS0FBQSxZQUFBLEtBQUEsS0FBQSxZQUFBLG9CQUNBLEtBQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxNQUFBLFFBQ0EsS0FBQSxjQUlBLEVBQUEsVUFBQSxXQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLElBQUEsR0FBQSxLQUFBLFlBQUEsR0FBQSxFQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLFFBQ0EsSUFDQSxHQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsTUFDQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEdBQUEsS0FDQSxJQUFBLEdBQUEsRUFBQSxHQUFBLFlBQ0EsRUFBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxRQUNBLEVBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQUEsaUJBQUEsS0FBQSxjQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsRUFBQSxtQkFBQSxLQUFBLHVCQUFBLEtBQUEsU0FJQSxFQUFBLFVBQUEsY0FBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHVCQUNBLEtBQUEsWUFBQSxtQkFBQSxFQUFBLFlBQUEsRUFBQSxLQUdBLEVBQUEsVUFBQSxXQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxRQUFBLElBQUEsS0FBQSxjQUVBLEtBQUEsWUFBQSxnQkFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLEtBQUEsZUFHQSxFQUFBLFVBQUEsdUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLFlBQUEsZUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxJQUFBLFFBQUEsRUFBQSxRQUFBLElBQUEsT0FBQSxLQUFBLGVBRUEsZ0dDakZBLEVBQUEsUUFBQSxXQUVBLFFBQUEsS0FBQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxJQUFBLCtDQUNBLEVBQUEsS0FDQSxLQUFBLGlCQUNBLEtBQUEsYUFMQSxHQUFBLEVBeUdBLE9BakdBLEdBQUEsVUFBQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxNQURBLFNBQUEsSUFBQSxtQ0FDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxPQUFBLEdBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsRUFBQSxjQUFBLEtBQUEsR0FDQSxLQUFBLEtBQUEsRUFBQSxnQkFBQSxRQUtBLEVBQUEsVUFBQSxpQkFBQSxXQUNBLE1BREEsU0FBQSxJQUFBLGtDQUNBLEtBQUEsZUFHQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxFQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsb0NBQ0EsR0FDQSxJQUFBLFVBQ0EsS0FBQSxrQkFBQSxVQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxTQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxTQUFBLEtBS0EsRUFBQSxVQUFBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxXQUFBLEVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLGFBQUEsT0FNQSxFQUFBLFVBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGlDQUNBLEdBQ0EsSUFBQSxVQUNBLEtBQUEsV0FBQSxVQUFBLEVBQUEsRUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsV0FBQSxTQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxXQUFBLFNBQUEsS0FLQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsT0FDQSxJQUFBLEtBQUEsSUFBQSxFQUFBLE9BQ0EsTUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEtBQUEsYUFBQSxHQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxXQUFBLElBRUEsTUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLFNBQ0EsUUFBQSxJQUFBLE9BS0EsRUFBQSxVQUFBLGVBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsT0FDQSxJQUFBLEtBQUEsSUFBQSwwQkFDQSxNQUFBLGNBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxTQUNBLFFBQUEsSUFBQSxPQUtBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLDhCQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsV0FDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFNBQUEsR0FDQSxLQUFBLGNBQUEsS0FBQSxJQUNBLEtBQUEsU0FJQSwyQkMxR0EsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMEJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsdUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLEdBQ0EsVUFDQSxTQUFBLFNBQUEsS0FBQSxhQUNBLFNBQUEsT0FBQSxLQUFBLGFBQ0EsU0FBQSxTQUFBLEtBQUEsZ0JBR0EsWUFBQSxlQUFBLFdBQUEsV0FDQSxHQUFBLEdBQUEsV0FBQSxpQkFBQSxLQUFBLFVBQ0EsRUFBQSxXQUFBLGlCQUFBLEtBQUEsS0FFQSxPQUFBLElBQUEsWUFBQSxXQUNBLFVBQUEsRUFBQSxJQUFBLEVBQUEsVUFJQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsR0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxRQUFBLFlBQUEsVUFDQSxLQUFBLGVBQ0EsS0FBQSxnQkEwQkEsTUF2QkEsR0FBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxZQUFBLFVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsZUFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxPQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FDQSxHQURBLFFBQUEsSUFBQSwyQkFDQSxlQUFBLEVBQUEsT0FBQSxVQUNBLEtBQUEsS0FBQSxLQUFBLGVBQUEsR0FDQSxLQUFBLG9CQUNBLENBQ0EsR0FBQSxLQUNBLEdBQUEsU0FBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEtBQUEsS0FBQSxLQUFBLGlCQUFBLEtBS0EsMkJDckRBLEVBQUEsUUFBQSxXQVFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEseUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxVQUNBLEtBQUEsVUFBQSxHQUVBLEtBQUEsVUFBQSxLQUFBLGVBQ0EsUUFBQSxJQUFBLGdCQUFBLEtBQUEsWUFFQSxLQUFBLFNBQUEsRUFDQSxJQUNBLEtBQUEsR0FBQSxHQUVBLEtBQUEsc0JBckJBLEdBQUEsR0FBQSxFQUFBLGNBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxxQkFDQSxFQUFBLEVBQUEsc0JBQ0EsRUFBQSxFQUFBLG9CQThJQSxPQTFIQSxHQUFBLFVBQUEsb0JBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxJQUFBLEtBQUEsZUFBQSxPQUFBLDhDQUNBLEtBQUEsSUFBQSxLQUFBLGdDQUFBLEtBQUEsS0FBQSxLQUFBLFVBQ0EsSUFBQSxLQUNBLEdBQUEsSUFBQSxLQUFBLFNBQUEsS0FDQSxFQUFBLEtBQUEsS0FBQSxTQUFBLEtBQ0EsRUFBQSxPQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxHQUNBLEtBQUEsaUJBQ0EsS0FBQSxpQkFHQSxFQUFBLFVBQUEsY0FBQSxXQUNBLE9BREEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsYUFDQSxJQUFBLFVBQ0EsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsWUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxlQUNBLEtBQUEsWUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGNBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxjQUtBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLEdBQUEsWUFBQSxLQUFBLGlCQUFBLEtBQUEsT0FDQSxRQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxXQUFBLEdBR0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsOEJBQ0EsTUFBQSxPQUFBLEtBQUEsS0FBQSxZQUNBLEtBQUEsV0FBQSxFQUNBLEtBQUEsWUFBQSxFQUFBLEVBQUEsUUFBQSxJQUFBLFFBQ0EsS0FBQSxXQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsT0FDQSxLQUFBLGtCQUFBLEtBQUEsaUJBQUEsS0FBQSxNQUNBLEtBQUEsZ0JBQUEsS0FBQSxlQUFBLEtBQUEsTUFDQSxLQUFBLFFBQUEsRUFBQSxRQUNBLEtBQUEsUUFBQSxFQUFBLFVBQ0EsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLFNBQUEsR0FDQSxTQUFBLEtBQUEsaUJBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxpQkFBQSxVQUFBLEtBQUEsbUJBSUEsRUFBQSxVQUFBLGVBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxTQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxXQUNBLEtBQUEsR0FBQSxLQUFBLFNBQUEsZUFBQSxLQUFBLG1CQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxTQUFBLGlCQUFBLEtBQUEscUJBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxtQkFBQSxXQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLFFBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxZQUdBLEVBQUEsVUFBQSxxQkFBQSxTQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsa0NBQ0EsRUFBQSxVQUNBLElBQUEsU0FDQSxLQUFBLFNBQUEsZ0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFdBQUEsUUFDQSxJQUFBLEtBQ0EsR0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEtBQUEsS0FBQSxLQUFBLGlCQUFBLEVBQ0EsTUFDQSxLQUFBLE9BQ0EsS0FBQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLGVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLGtCQUtBLEVBQUEsVUFBQSxpQkFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsOEJBQ0EsS0FBQSxhQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLEVBQUEsUUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLE9BQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxXQUlBLEVBQUEsVUFBQSxlQUFBLFNBQUEsR0FLQSxHQUxBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLFdBQUEsRUFDQSxTQUFBLEtBQUEsb0JBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxvQkFBQSxVQUFBLEtBQUEsaUJBRUEsS0FBQSxhQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsUUFBQSxLQUFBLGNBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxRQUFBLENBQ0EsR0FBQSxLQUNBLEdBQUEsUUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLEtBQUEsbUJBQUEsS0FJQSxFQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsa0JBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUNBLEdBQUEsS0FDQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsR0FHQSxPQURBLEdBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsSUFDQSxPQUFBLE9BQUEsRUFBQSxJQUFBLEdBRUEsTUFBQSxLQUlBLCtHQ3BKQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsNEJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLEdBQ0EsV0FDQSxRQUFBLFVBQUEsS0FBQSxZQUNBLFFBQUEsU0FBQSxLQUFBLFVBQ0EsUUFBQSxTQUFBLEtBQUEsVUFHQSxZQUFBLGVBQUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxXQUFBLGlCQUFBLEtBQUEsU0FDQSxFQUFBLFdBQUEsaUJBQUEsS0FBQSxLQUVBLE9BQUEsSUFBQSxZQUFBLFdBQ0EsVUFBQSxFQUFBLElBQUEsRUFBQSxVQUlBLElBQUEsR0FBQSxFQUFBLEVBQ0EsTUFBQSxJQUFBLEtBQUEsZUFBQSxPQUFBLEVBQUEsSUFDQSxLQUFBLGdCQUNBLEtBQUEsY0F1QkEsTUFwQkEsR0FBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxJQUFBLEtBQUEsbUJBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSw4QkFDQSxJQUFBLElBQ0EsSUFBQSxFQUNBLEtBQUEsRUFFQSxNQUFBLElBQUEsS0FBQSxtQkFBQSxJQUFBLElBR0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxJQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLEtBQUEsS0FBQSx5QkFBQSxFQUFBLE9BQUEsS0FHQSwyQkNqREEsRUFBQSxRQUFBLFdBTUEsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsSUFBQSxFQUVBLEtBQUEsZ0JBQUEsR0FBQSxHQUNBLEtBQUEsZ0JBQUEsZUFFQSxLQUFBLEdBQUEsS0FBQSxnQkFBQSxlQUFBLEtBQUEsZUFBQSxLQUFBLE9BQ0EsRUFBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLEtBQUEsY0FBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsZ0JBQUEsa0JBQUEsS0FBQSxlQUFBLEtBQUEsT0FaQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxxQkFDQSxFQUFBLEVBQUEsb0JBK0NBLE9BaENBLEdBQUEsVUFBQSxlQUFBLFNBQUEsR0FLQSxJQUxBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLGFBQ0EsRUFBQSxrQkFBQSxTQUNBLFFBQUEsSUFBQSxHQUNBLEtBQUEsVUFBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsS0FBQSxVQUFBLEdBQUEsT0FBQSxJQUNBLEtBQUEsZ0JBQUEsR0FBQSxHQUFBLEtBQUEsVUFBQSxHQUFBLElBQ0EsS0FBQSxHQUFBLEtBQUEsZ0JBQUEsb0JBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsZ0JBQUEsa0JBQUEsS0FBQSxlQUFBLEtBQUEsUUFJQSxFQUFBLFVBQUEsZUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDZCQUNBLEVBQUEsY0FBQSxLQUFBLElBQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxJQUlBLEVBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUdBLEtBQUEsZ0JBQUEsY0FBQSxXQUFBLE1BS0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxnQkFBQSxZQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLFVBSUEsZ0ZDbkRBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwwQkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFFBQUEsRUFBQSxHQUNBLEtBQUEsYUFDQSxLQUFBLG9CQUFBLEdBTkEsRUFBQSxRQW9DQSxPQTNCQSxHQUFBLFVBQUEsb0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxpQ0FDQSxJQUFBLEdBQUEsRUFBQSwyQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxjQUFBLEVBQUEsYUFDQSxJQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsY0FBQSxPQUFBLEVBQUEsSUFDQSxLQUFBLFlBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsVUFBQSxZQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsMEJBQ0EsRUFBQSxJQUFBLEVBQUEsY0FBQSxHQUFBLFFBQUEsS0FBQSxjQUFBLEtBQUEsT0FDQSxFQUFBLElBQUEsRUFBQSxZQUFBLEdBQUEsUUFBQSxLQUFBLFlBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsS0FBQSxLQUFBLG9CQUFBLEtBQUEsVUFHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSwwQkFDQSxLQUFBLEtBQUEsS0FBQSxrQkFBQSxLQUFBLFVBS0Esb0NDckNBLEVBQUEsUUFBQSxXQUNBLFFBQUEsS0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxJQUFBLCtDQXNDQSxNQWxDQSxHQUFBLFVBQUEsYUFBQSxXQUNBLE1BREEsU0FBQSxJQUFBLGtDQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsV0FDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEtBQUEsS0FBQSxnQkFBQSxLQUNBLEtBQUEsU0FJQSxFQUFBLFVBQUEsWUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGlDQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsa0JBQUEsRUFDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsYUFBQSxPQUtBLEVBQUEsVUFBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUNBLEtBQUEsT0FDQSxJQUFBLEtBQUEsSUFBQSxlQUFBLEVBQUEsSUFBQSxFQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxvQkFBQSxFQUFBLEtBQ0EsS0FBQSxLQUFBLEtBQUEsbUJBQUEsRUFBQSxNQUNBLEtBQUEsU0FJQSw0QkN4Q0EsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDZCQUNBLEtBQUEsSUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLEtBQUEscUJBQ0EsSUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsR0FBQSxrQkFDQSxZQUFBLGVBQUEsY0FBQSxXQUNBLE1BQUEsSUFBQSxZQUFBLFdBQ0EsYUFBQSxFQUFBLE1BQUEsK0NBR0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxxQkFBQSxPQUFBLEVBQUEsSUFDQSxLQUFBLG1CQUNBLEVBQUEsc0JBQUEsSUFBQSxLQWFBLE1BVEEsR0FBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLGtDQUNBLEtBQUEsWUFBQSxTQUFBLGlCQUFBLGVBQ0EsS0FBQSxZQUFBLEtBQUEsWUFBQSxPQUFBLEdBQUEsaUJBQUEsUUFBQSxLQUFBLG1CQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLEtBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxLQUdBLDRCQzlCQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsUUFDQSxLQUFBLFlBQUEsR0FBQSxHQUdBLEtBQUEsU0FBQSxFQUNBLEtBQUEsTUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLG1CQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxLQUdBLEVBQUEsRUFBQSxFQUNBLEdBQUEsY0FBQSxPQUFBLEVBQUEsR0FHQSxJQUFBLEdBQUEsRUFBQSxzQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsS0FHQSxFQUFBLEVBQUEsRUFDQSxHQUFBLGNBQUEsT0FBQSxFQUFBLElBRUEsS0FBQSxJQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLEtBQUEsU0FBQSxLQUFBLE9BQ0EsRUFBQSxhQUFBLEdBQUEsUUFBQSxLQUFBLFFBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxLQUFBLFVBQUEsR0FBQSxRQUFBLEtBQUEsTUFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsV0FBQSxHQUFBLFFBQUEsS0FBQSxPQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxZQUFBLGFBQUEsS0FBQSxTQUFBLEtBQUEsT0EvQkEsR0FBQSxHQUFBLEVBQUEsZ0JBNkVBLE9BM0NBLEdBQUEsVUFBQSxTQUFBLFdBQUEsUUFBQSxJQUFBLHNCQUNBLEVBQUEsYUFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxTQUFBLEtBQUEsSUFBQSxLQUFBLGtCQUFBLE1BQ0EsS0FBQSxNQUFBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLE1BQ0EsS0FBQSxTQUFBLEtBQUEsSUFBQSxLQUFBLHNCQUFBLE1BQ0EsS0FBQSxXQUFBLEtBQUEsSUFBQSxLQUFBLHdCQUFBLE1BRUEsS0FBQSxVQUFBLEtBQUEsWUFFQSxLQUFBLFlBQUEsU0FBQSxLQUFBLFNBQUEsS0FBQSxNQUFBLEtBQUEsV0FJQSxFQUFBLFVBQUEsTUFBQSxXQUFBLFFBQUEsSUFBQSxtQkFDQSxLQUFBLE1BQUEsS0FBQSxJQUFBLEtBQUEsZ0JBQUEsTUFDQSxLQUFBLFNBQUEsS0FBQSxJQUFBLEtBQUEsbUJBQUEsTUFDQSxLQUFBLFlBQUEsTUFBQSxLQUFBLE1BQUEsS0FBQSxXQUdBLEVBQUEsVUFBQSxPQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsUUFDQSxLQUFBLGdCQUNBLEVBQUEsb0JBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsc0JBQ0EsS0FBQSxNQUFBLEdBQ0EsS0FBQSxLQUFBLEtBQ0EsRUFBQSxTQUFBLElBQUEsSUFDQSxFQUFBLG9CQUFBLFNBQUEsVUFDQSxFQUFBLGFBQUEsU0FBQSxVQUNBLEtBQUEsa0JBSUEsRUFBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEsMkJBQ0EsRUFBQSxVQUFBLFlBQUEsVUFDQSxFQUFBLFdBQUEsWUFBQSxXQUdBLDhDQzlFQSxFQUFBLFFBQUEsV0FDQSxRQUFBLEtBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSwrQ0EwQkEsTUF2QkEsR0FBQSxVQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHVCQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsTUFBQSxRQUFBLFdBQ0EsSUFBQSxLQUFBLElBQUEsZUFBQSxFQUFBLElBQUEsRUFDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsY0FBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLGNBQUEsS0FDQSxLQUFBLFNBSUEsRUFBQSxVQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMEJBQ0EsRUFBQSxNQUNBLEtBQUEsT0FDQSxNQUFBLFFBQUEsV0FDQSxJQUFBLEtBQUEsSUFBQSxrQkFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLG9CQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsY0FBQSxLQUNBLEtBQUEsU0FHQSw0QkM1QkEsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsbUJBQ0EsS0FBQSx3QkFMQSxHQUFBLEdBQUEsRUFBQSx1QkFnQ0EsT0F4QkEsR0FBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsT0FBQSwrQkFDQSxLQUFBLGVBR0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxNQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLElBQUEsU0FBQSxLQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxTQUFBLElBQ0EsSUFDQSxHQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsRUFDQSxlQUFBLEVBQUEsT0FBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLHFCQUFBLElBSUEsRUFBQSxVQUFBLHNCQUFBLFdBQUEsUUFBQSxJQUFBLHNDQUNBLEtBQUEsbUJBQUEsR0FBQSxHQUFBLEtBQUEsTUFHQSxxRENsQ0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLElBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxzQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFFQSxHQUFBLE1BREEsS0FBQSxPQUNBLEVBRUEsVUFHQSxJQUFBLEdBQUEsRUFBQSxFQUNBLFNBQUEsSUFBQSxHQUNBLEVBQUEsY0FBQSxPQUFBLEVBQUEsSUFFQSxLQUFBLGNBckJBLEdBQUEsR0FBQSxFQUFBLGdCQWtEQSxPQTFCQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSxzQ0FDQSxLQUFBLElBQUEsS0FBQSxTQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxTQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsS0FBQSxvQkFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsZ0JBQUEsR0FBQSxRQUFBLEtBQUEsb0JBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLEtBQUEsa0JBQUEsS0FBQSxRQUVBLEVBQUEsVUFBQSxrQkFBQSxXQUFBLFFBQUEsSUFBQSwwQ0FDQSxLQUFBLFlBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLEdBQUEsS0FBQSxZQUFBLFNBQUEsS0FBQSxrQkFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLG9CQUFBLFdBQUEsUUFBQSxJQUFBLDRDQUNBLEtBQUEsSUFBQSxLQUFBLGlCQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLGtCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEseUNBQ0EsSUFBQSxHQUFBLFNBQUEsY0FBQSxvQkFDQSxHQUFBLFlBQUEsSUFJQSw4Q0NuREEsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHdCQUNBLEtBQUEsSUFBQSxFQUNBLElBQ0EsS0FBQSxPQUFBLEdBTkEsR0FBQSxHQUFBLEVBQUEsZUE0Q0EsT0FsQ0EsR0FBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEsdUJBQ0EsSUFBQSxHQUFBLEVBQUEsb0JBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxPQURBLEtBQUEsT0FDQSxLQUFBLE9BRUEsRUFHQSxJQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsb0JBQUEsT0FBQSxFQUFBLEtBSUEsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGlCQUVBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsS0FJQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLE9BQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsaUJBQUEsTUFDQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsbUJBQUEsVUFJQSw2Q0M3Q0EsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsSUFBQSxHQUFBLEVBQUEseUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxPQUFBLENBRUEsSUFBQSxHQUFBLEVBQUEsRUFHQSxPQUZBLFlBQUEsV0FBQSxFQUFBLElBQ0EsS0FDQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDJCQUNBLElBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSx1QkFBQSxFQUNBLEdBQUEsaUJBQUEsU0FBQSxHQUdBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsRUFBQSxPQUFBLFdBQUEsR0FDQSxFQUFBLFNBQUEsY0FBQSxJQUFBLEVBQUEsc0JBQ0EsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsWUFBQSxFQUNBLEdBQUEsS0FBQSxFQUFBLEtBQUEsQ0FJQSxJQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsSUFBQSxnQkFBQSxFQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsVUFBQSxHQUlBLE1BQUEsNkJDcENBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsRUFDQSxRQUFBLElBQUEsR0FDQSxJQUNBLEtBQUEsT0FBQSxHQU5BLEdBQUEsR0FBQSxFQUFBLGdCQTJDQSxPQWpDQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsRUFBQSxxQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFHQSxHQUFBLE9BREEsS0FBQSxJQUNBLEtBQUEsT0FFQSxFQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBSUEsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGtCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxFQUFBLEtBQUEsT0FBQSxLQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLHFCQUNBLEtBQUEsT0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxtQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxxQkFFQSxRQUFBLElBQUEsS0FBQSxXQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLHFCQUFBLFVBSUEsOENDNUNBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsNkJBRUEsT0FBQSxNQUNBLE9BQUEsWUFDQSxPQUFBLFVBQ0EsT0FBQSxNQUVBLFFBQUEsSUFBQSxxQkFHQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSwwQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUVBLE9BREEsWUFBQSxXQUFBLEVBQUEsSUFBQSxLQUNBLEVBQUEsR0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsSUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLHFCQUFBLEVBQ0EsR0FBQSxpQkFBQSxTQUFBLEdBR0EsUUFBQSxLQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsTUFBQSxPQUFBLFdBQUEsRUFDQSxJQUNBLEtBQUEsT0FDQSxLQUFBLE1BQUEsSUFDQSxLQUFBLE1BQUEsR0FBQSxLQUFBLE1BQUEsV0FDQSxDQUNBLEdBQUEsR0FBQSxHQUFBLFlBQ0EsRUFBQSxFQUFBLElBQUEsRUFBQSwrQkFBQSxFQUVBLEdBQUEsT0FBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLE1BQUEsRUFBQSxPQUFBLFFBQ0EsRUFBQSxhQUFBLFFBQUEsRUFBQSxPQUNBLEVBQUEsYUFBQSxTQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsV0FDQSxJQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsZ0JBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxLQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsTUFBQSxNQUFBLEVBQUEsT0FBQSxNQUVBLE9BSUEsRUFBQSxjQUFBLEtBQUEsTUFBQSxRQUdBLEdBQUEsS0FBQSw2QkF2REEsR0FBQSxLQTJEQSxPQUFBLDZCQzVEQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsd0JBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxNQUNBLEtBQUEsSUFBQSxpQkFMQSxHQUFBLEdBQUEsRUFBQSxlQW9DQSxPQTNCQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx3QkFDQSxJQUFBLEdBQUEsRUFBQSxvQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsS0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBR0EsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxrQkFBQSxZQUFBLFVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEtBQUEsT0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsaUJBQUEsTUFDQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsa0JBQUEsU0FBQSxVQUFBLEtBQUEsS0FBQSxLQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsa0JBQUEsWUFBQSxXQUdBLDZDQ3RDQSxFQUFBLFFBQUEsV0FFQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsSUFBQSxHQUFBLEVBQUEseUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxJQUFBLENBRUEsSUFBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEdBQUEsR0FJQSxNQUFBIiwiZmlsZSI6InNjcmlwdC5kaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKXtcblx0dmFyIFByb2ZpbGUgPSByZXF1aXJlKCcuL2NsYXNzZXMvUHJvZmlsZScpO1xuXHQvL3ZhciBBcHAgPSByZXF1aXJlKCcuL2NsYXNzZXMvQXBwJyk7XG5cdHZhciBPdmVydmlldyA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9PdmVydmlldycpO1xuXG5cblx0ZnVuY3Rpb24gaW5pdCgpwqB7XG5cdFx0Ly9uZXcgQXBwKCQoJyNjb250YWluZXInKSk7XG5cdFx0bmV3IFByb2ZpbGUoJCgnI2NvbnRhaW5lcicpKTtcdFx0XG5cdFx0bmV3IE92ZXJ2aWV3KCQoJyNjb250YWluZXInKSk7XG5cblx0fVxuXG5cdGluaXQoKTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgV2hpdGVib2FyZCA9IHJlcXVpcmUoJy4vV2hpdGVib2FyZCcpO1xuXHR2YXIgRWxlbWVudFBpY2tlciA9IHJlcXVpcmUoJy4vRWxlbWVudFBpY2tlcicpO1xuXHR2YXIgRWxlbWVudCA9IHJlcXVpcmUoJy4vRWxlbWVudCcpO1xuXHR2YXIgRGF0YUhhbmRsZXIgPSByZXF1aXJlKCcuL0RhdGFIYW5kbGVyJyk7XG5cblxuXHRmdW5jdGlvbiBBcHAoJGVsLCBpZCkgeyBjb25zb2xlLmxvZygnW0FwcF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLndoaXRlYm9hcmRJZCA9IGlkO1xuXHRcdHRoaXMudHlwZXMgPSBbJ3Bvc3RpdHMnXTtcblx0XHR0aGlzLmkgPSAwO1xuXHRcdHRoaXMuZWxlbWVudExpc3QgPSBbXTtcblx0XHR0aGlzLnBvc2l0aW9uID0ge307XG5cdFx0dGhpcy5kYXRhSGFuZGxlciA9IG5ldyBEYXRhSGFuZGxlcigpO1xuXHRcdHRoaXMud2hpdGVib2FyZCA9IG5ldyBXaGl0ZWJvYXJkKHRoaXMuJGVsKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIgPSBuZXcgRWxlbWVudFBpY2tlcih0aGlzLiRlbCk7XG5cdFx0Ly9MVUlTVEVSRU5cblx0XHRiZWFuLm9uKHRoaXMuZGF0YUhhbmRsZXIsIFwiZGF0YS1zdWNjZXNzXCIsIHRoaXMuYWRkVG9FbGVtZW50TGlzdC5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMud2hpdGVib2FyZCwgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgdGhpcy53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVsZW1lbnRQaWNrZXIsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCB0aGlzLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQvL1VJVFZPRVJFTlxuXHRcdHRoaXMuYnVpbGRCb2FyZCgpO1xuXHR9XG5cblx0QXBwLnByb3RvdHlwZS53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSB3aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci5zZXRMb2NhdGlvbihldmVudC54UG9zLCBldmVudC55UG9zKTtcblx0XHR0aGlzLnBvc2l0aW9uID0gZXZlbnQ7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBlbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXInKTsgXG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnRvZ2dsZVZpc2libGUoKTtcblx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLGV2ZW50LHRoaXMucG9zaXRpb24pO1xuXHRcdHRoaXMubmV3RWxlbWVudChldmVudCwgZWxlbWVudC5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24oZWxlbWVudCwgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIHRoaXMucG9zaXRpb25DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmJ1aWxkQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYnVpbGRCb2FyZCcpO1xuXHRcdGZvcih2YXIgdHlwZSBpbiB0aGlzLnR5cGVzKSB7XG4gIFx0XHRcdHRoaXMuZGF0YUhhbmRsZXIubG9hZEJvYXJkRWxlbWVudHModGhpcy50eXBlc1t0eXBlXSx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9FbGVtZW50TGlzdCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGFkZFRvRWxlbWVudExpc3QnKTtcblx0XHR0aGlzLmVsZW1lbnRMaXN0LnB1c2godGhpcy5kYXRhSGFuZGxlci5nZXRCb2FyZEVsZW1lbnRzKCkpO1xuXHRcdHRoaXMuaSsrO1xuXHRcdGlmKHRoaXMuaSA9PT0gdGhpcy50eXBlcy5sZW5ndGgpe1xuXHRcdFx0dGhpcy5hZGRUb0JvYXJkKCk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9Cb2FyZCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbQXBwXSBhZGRUb0JvYXJkJyk7IFxuXHRcdHZhciBsaXN0ID0gdGhpcy5lbGVtZW50TGlzdFswXVswXTtcblx0XHRmb3IodmFyIGVsZW1lbnRJdGVtIGluIGxpc3QpIHtcbiAgXHRcdFx0dmFyIHR5cGUgPSBsaXN0W2VsZW1lbnRJdGVtXS5lbF90eXBlO1xuICBcdFx0XHR2YXIgcG9zaXRpb24gPSB7fTtcbiAgXHRcdFx0cG9zaXRpb24ueVBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRJdGVtXS5wb3N5KTtcbiAgXHRcdFx0cG9zaXRpb24ueFBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRJdGVtXS5wb3N4KTtcbiAgXHRcdFx0dmFyIGVsZW1lbnRJZCA9IGxpc3RbZWxlbWVudEl0ZW1dLmlkX29uX2JvYXJkO1xuICBcdFx0XHR2YXIgaWQgPSBsaXN0W2VsZW1lbnRJdGVtXS5pZDtcbiAgXHRcdFx0dmFyIGNvbnRlbnQgPSBsaXN0W2VsZW1lbnRJdGVtXS5jb250ZW50O1xuICBcdFx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLHR5cGUscG9zaXRpb24sZWxlbWVudElkLGNvbnRlbnQsaWQpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicmVtb3ZlLWNsaWNrZWRcIiwgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicG9zaXRpb24tY2hhbmdlZFwiLCB0aGlzLnBvc2l0aW9uQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHJlbW92ZUhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5yZW1vdmVCb2FyZEVsZW1lbnQoZXZlbnQuZWxlbWVudFR5cGUsIGV2ZW50LmlkKTtcblx0fTtcblx0XG5cdEFwcC5wcm90b3R5cGUubmV3RWxlbWVudCA9IGZ1bmN0aW9uKHR5cGUsaWRPbkJvYXJkKXsgY29uc29sZS5sb2coJ1tBcHBdIG5ld0VsZW1lbnRIYW5kbGVyJyk7IFxuXHRcdFx0XHRjb25zb2xlLmxvZyh0aGlzLndoaXRlYm9hcmRJZCk7XG5cblx0XHR0aGlzLmRhdGFIYW5kbGVyLm5ld0JvYXJkRWxlbWVudCh0eXBlLGlkT25Cb2FyZCx0aGlzLnBvc2l0aW9uLHRoaXMud2hpdGVib2FyZElkKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLnBvc2l0aW9uQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBwb3NpdGlvbkNoYW5nZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5kYXRhSGFuZGxlci5wb3NpdGlvbkNoYW5nZShldmVudC5lbGVtZW50VHlwZSxldmVudC5lbGVtZW50SWQsZXZlbnQuZVRhcmdldC5jc3MoJ2xlZnQnKSxldmVudC5lVGFyZ2V0LmNzcygndG9wJyksdGhpcy53aGl0ZWJvYXJkSWQpO1xuXHR9O1xuXHRyZXR1cm4gQXBwO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciB0aGF0O1xuXHRmdW5jdGlvbiBEYXRhSGFuZGxlcigpIHsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnVybCA9IFwiaHR0cDovL2xvY2FsaG9zdC93aGl0ZWJvYXJkXzIvYXBpL2luZGV4LnBocC9cIjtcblx0XHR0aGF0ID0gdGhpcztcblx0XHR0aGlzLmJvYXJkRWxlbWVudHMgPSBbXTtcblx0XHR0aGlzLmJvYXJkTGlzdCA9IFtdO1xuXHR9XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmxvYWRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24odHlwZSx3aGl0ZWJvYXJkSWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBsb2FkQm9hcmRFbGVtZW50cycpO1xuXHRcdHJldHVybiAkLmFqYXgoe1xuXHQgIFx0XHRcdFx0dHlwZTogXCJHRVRcIixcblx0ICBcdFx0XHRcdHVybDogdGhpcy51cmwrdHlwZSsnLycrU3RyaW5nKHdoaXRlYm9hcmRJZCksXG5cdCAgXHRcdFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdFx0XHR0aGF0LmJvYXJkRWxlbWVudHMucHVzaChkYXRhKTtcblx0ICBcdFx0XHRcdFx0YmVhbi5maXJlKHRoYXQsIFwiZGF0YS1zdWNjZXNzXCIsIFtkYXRhXSk7XG5cdCAgXHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5nZXRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0Qm9hcmRFbGVtZW50cycpO1xuXHRcdHJldHVybiB0aGlzLmJvYXJkRWxlbWVudHM7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUJvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gcmVtb3ZlQm9hcmRFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKGVsZW1lbnRUeXBlKSB7XG5cdFx0ICAgIGNhc2UgXCJwb3N0LWl0XCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgncG9zdGl0cycsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdzdGF0aWMnLGlkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgnbW90aW9uJyxpZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUVsZW1lbnRCeUlkID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWQpeyBcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIkdFVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK2VsZW1lbnRUeXBlKycvZGVsZXRlLycraWQsXG5cdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhcImRlbGV0ZWQgPSBcIitkYXRhKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld0JvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHBvc2l0aW9uLHdoaXRlYm9hcmRJZCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIG5ld0JvYXJkRWxlbWVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMubmV3RWxlbWVudCgncG9zdGl0cycsaWRfb25fYm9hcmQsIHBvc2l0aW9uLCB3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ3N0YXRpYycsd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdFbGVtZW50KCdtb3Rpb24nLHdoaXRlYm9hcmRJZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld0VsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZF9vbl9ib2FyZCxwb3NpdGlvbix3aGl0ZWJvYXJkSWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK2VsZW1lbnRUeXBlKycvYWRkJyxcblx0ICBcdFx0ZGF0YToge2lkX29uX2JvYXJkOiBpZF9vbl9ib2FyZCwgeHBvczogcG9zaXRpb24ueFBvcywgeXBvczogcG9zaXRpb24ueVBvcywgd2hpdGVib2FyZElkOiB3aGl0ZWJvYXJkSWR9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3M6JywgZGF0YSk7XG5cdCAgXHRcdH0sXG5cdCAgXHRcdGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5wb3NpdGlvbkNoYW5nZSA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHhwb3MseXBvcyx3aGl0ZWJvYXJkSWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsKydwb3N0aXRzJysnL2NoYW5nZS9wb3NpdGlvbicsXG5cdCAgXHRcdGRhdGE6IHt3aGl0ZWJvYXJkX2lkOiB3aGl0ZWJvYXJkSWQsaWRfb25fYm9hcmQ6IGlkX29uX2JvYXJkLCB4cG9zOiB4cG9zLCB5cG9zOiB5cG9zfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzOicsIGRhdGEpO1xuXHQgIFx0XHR9LFxuXHQgIFx0XHRlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUuZ2V0QWxsQm9hcmRzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0QWxsQm9hcmRzJyk7XG5cdFx0ICQuYWpheCh7XG5cdFx0ICBcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ICBcdHVybDogdGhpcy51cmwrJy9ib2FyZHMvJyxcblx0XHQgIFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdFx0ICBcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgXHRcdHRoaXMuYm9hcmRFbGVtZW50cy5wdXNoKGRhdGEpO1xuXHRcdCAgXHR9LmJpbmQodGhpcylcblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4gRGF0YUhhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBFZGl0TWVudSgkZWwsZWxlbWVudElkKSB7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlZGl0LW1lbnUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBhY3Rpb25zOiBbXHRcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJjYW5jZWxcIiwgbmFtZTogXCJhbm51bGVlclwifSxcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJlZGl0XCIsIG5hbWU6IFwid2lqemlnZW5cIn0sXG5cdFx0ICBcdFx0XHR7YWN0aW9uSWQ6IFwicmVtb3ZlXCIsIG5hbWU6IFwidmVyd2lqZGVyZW5cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlZGl0bWVudScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgYWN0aW9uSWQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5hY3Rpb25JZCksXG5cdFx0XHQgICAgICBuYW1lID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMubmFtZSk7XG5cblx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHQgICAgXCI8bGkgaWQ9XCIrYWN0aW9uSWQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQpLmFwcGVuZChodG1sKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVycygpO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHR9XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyA+IHAnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyAuZWRpdC1tZW51JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdEVkaXRNZW51LnByb3RvdHlwZS5iaW5kSGFuZGxlcnMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBiaW5kSGFuZGxlcnMnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFZGl0TWVudS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBjbGlja0hhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSBcImVkaXRCdXR0b25cIil7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJlZGl0LWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0fWVsc2V7XG5cdFx0XHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcbiAgIFx0XHRcdGFjdGlvbkV2ZW50LnRhcmdldElkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgXHRcdFx0YWN0aW9uRXZlbnQuZWxlbWVudElkID0gdGhpcy5lbGVtZW50SWQ7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJhY3Rpb24tY2xpY2tlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0fVxuXG5cdH07XG5cblx0cmV0dXJuIEVkaXRNZW51O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIEVkaXRNZW51ID0gcmVxdWlyZSgnLi9FZGl0TWVudScpO1xuICAgIHZhciB6SW5kZXhDb3VudGVyID0gMTtcblx0dmFyIFBvc3RpdCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvUG9zdGl0Jyk7XG5cdHZhciBQaWN0dXJlID0gcmVxdWlyZSgnLi9lbGVtZW50cy9QaWN0dXJlJyk7XG5cdHZhciBNb3Rpb24gPSByZXF1aXJlKCcuL2VsZW1lbnRzL01vdGlvbicpO1xuXG5cdGZ1bmN0aW9uIEVsZW1lbnQoJGVsLGVsZW1lbnRUeXBlLHBvc2l0aW9uLGVsZW1lbnRJZCxjb250ZW50LGlkKSB7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdHRoaXMuZWxlbWVudFR5cGUgPSBlbGVtZW50VHlwZTtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHRpZih0aGlzLmVsZW1lbnRJZCl7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR9ZWxzZSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IHRoaXMuc2V0RWxlbWVudElkKCk7XG5cdFx0XHRjb25zb2xlLmxvZyhcImVsZW1lbnQgaWQgPSBcIit0aGlzLmVsZW1lbnRJZCk7XG5cdFx0fVxuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHRpZihpZCl7XG5cdFx0XHR0aGlzLmlkID0gaWQ7XG5cdFx0fVxuXHRcdHRoaXMuY3JlYXRlRWxlbWVudEhvbGRlcigpO1xuXHR9XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudEhvbGRlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWxlbWVudEhvbGRlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoXCI8c2VjdGlvbiBjbGFzcz0nZWxlbWVudC1ob2xkZXInPjwvc2VjdGlvbj5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlcjpsYXN0LW9mLXR5cGVcIikuYXR0cignaWQnLCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge307XG5cdFx0cG9zaXRpb24udG9wID0gdGhpcy5wb3NpdGlvbi55UG9zO1xuXHRcdHBvc2l0aW9uLmxlZnQgPSB0aGlzLnBvc2l0aW9uLnhQb3M7XG5cdFx0cG9zaXRpb24uekluZGV4ID0gMDtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MocG9zaXRpb24pO1xuXHRcdHRoaXMuY3JlYXRlRWRpdE1lbnUoKTtcblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKHRoaXMuZWxlbWVudFR5cGUpIHtcblx0XHRjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQb3N0aXQodGhpcy5jb250ZW50KTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBvc3RpdCk7XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHRcdGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgUGljdHVyZSh0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQaWN0dXJlKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0Y2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBNb3Rpb24odGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkpO1xuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmFwcGVuZCh0aGlzLmVsZW1lbnQuY3JlYXRlTW90aW9uKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCRlbCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5vbignbW91c2Vkb3duJywgdGhpcy5tb3VzZWRvd25IYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHR0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLm1vdXNlZG93bkhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZWRvd25IYW5kbGVyJyk7XG5cdFx0aWYoZXZlbnQudGFyZ2V0LmlkID09PSB0aGlzLmVsZW1lbnRJZCl7XG4gICAgICAgIFx0dGhpcy5tb3VzZURvd24gPSB0cnVlO1xuICAgICAgIFx0XHR0aGlzLmN1cnJlbnRMZWZ0ID0gJChlLnRhcmdldCkuY3NzKCdsZWZ0Jyk7XG4gICAgICAgXHRcdHRoaXMuY3VycmVudFRvcCA9ICQoZS50YXJnZXQpLmNzcygndG9wJyk7XG4gICAgICAgIFx0dGhpcy5fbW91c2VNb3ZlSGFuZGxlciA9IHRoaXMubW91c2VNb3ZlSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgICAgICBcdHRoaXMuX21vdXNlVXBIYW5kbGVyID0gdGhpcy5tb3VzZVVwSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgICAgICBcdHRoaXMub2Zmc2V0WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgXHR0aGlzLm9mZnNldFkgPSBlLm9mZnNldFk7XG4gICAgICAgIFx0Kyt6SW5kZXhDb3VudGVyO1xuICAgICAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcygnekluZGV4JywgekluZGV4Q291bnRlcik7XG4gICAgICAgIFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIH1cblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFZGl0TWVudSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWRpdE1lbnUnKTtcblx0XHR0aGlzLmVkaXRNZW51ID0gbmV3IEVkaXRNZW51KHRoaXMuJGVsLCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0YmVhbi5vbih0aGlzLmVkaXRNZW51LCBcImVkaXQtY2xpY2tlZFwiLCB0aGlzLmVkaXRDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMuZWRpdE1lbnUsIFwiYWN0aW9uLWNsaWNrZWRcIiwgdGhpcy5hY3Rpb25DbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5lZGl0Q2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gZWRpdENsaWNrZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5lbGVtZW50LmVkaXQodGhpcy4kZWwsIHRoaXMuZWxlbWVudElkKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5hY3Rpb25DbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBhY3Rpb25DbGlja2VkSGFuZGxlcicpO1xuXHRcdHN3aXRjaChldmVudC50YXJnZXRJZCkge1xuXHRcdCAgICBjYXNlIFwicmVtb3ZlXCI6XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZCgnIycrZXZlbnQuZWxlbWVudElkKS5yZW1vdmUoKTtcblx0XHQgICAgXHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcblx0XHQgICAgXHRhY3Rpb25FdmVudC5pZCA9IHRoaXMuaWQ7XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQuZWxlbWVudFR5cGUgPSB0aGlzLmVsZW1lbnRUeXBlO1xuXHRcdCAgICBcdGJlYW4uZmlyZSh0aGlzLCBcInJlbW92ZS1jbGlja2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiZWRpdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudC5jb25maXJtKCk7XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcImNhbmNlbFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudC5lbmRFZGl0KCk7XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cbiAgICBFbGVtZW50LnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gbW91c2Vtb3ZlSGFuZGxlcicpO1xuICAgICAgICBpZih0aGlzLm1vdXNlRG93biA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICB2YXIgbW91c2VYID0gcGFyc2VJbnQoZS5jbGllbnRYKTtcbiAgICAgICAgICAgIHZhciBtb3VzZVkgPSBwYXJzZUludChlLmNsaWVudFkpO1xuICAgICAgICAgICAgdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCdsZWZ0JywgbW91c2VYIC0gdGhpcy5vZmZzZXRYKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcygndG9wJywgbW91c2VZIC0gdGhpcy5vZmZzZXRZKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFbGVtZW50LnByb3RvdHlwZS5tb3VzZVVwSGFuZGxlciA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNldXBIYW5kbGVyJyk7XG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblxuICAgICAgICBpZih0aGlzLmN1cnJlbnRUb3AgIT09ICQoZS50YXJnZXQpLmNzcygndG9wJykgfHwgdGhpcy5jdXJyZW50TGVmdCAhPT0gJChlLnRhcmdldCkuY3NzKCdsZWZ0Jykpe1xuICAgICAgICBcdHZhciBhY3Rpb25FdmVudCA9IHt9O1xuICAgICAgICBcdGFjdGlvbkV2ZW50LmVUYXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50VHlwZSA9IHRoaXMuZWxlbWVudFR5cGU7XG4gICAgICAgIFx0YWN0aW9uRXZlbnQuZWxlbWVudElkID0gdGhpcy5lbGVtZW50SWQ7XG4gICAgICAgIFx0YmVhbi5maXJlKHRoaXMsIFwicG9zaXRpb24tY2hhbmdlZFwiLCBhY3Rpb25FdmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgRWxlbWVudC5wcm90b3R5cGUuc2V0RWxlbWVudElkID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gc2V0RWxlbWVudElkJyk7XG4gICAgXHR2YXIgaG9sZGVycyA9IHRoaXMuJGVsLmZpbmQoXCIuZWxlbWVudC1ob2xkZXJcIik7XG4gICAgXHRpZihob2xkZXJzLmxlbmd0aCA+IDApe1xuICAgIFx0XHR2YXIgaWRIb2xkZXIgPVtdO1xuXHRcdFx0Zm9yKGkgPSAwO2kgPCBob2xkZXJzLmxlbmd0aDsgaSsrICl7XG5cdFx0XHRcdGlkSG9sZGVyLnB1c2goaG9sZGVyc1tpXS5pZCk7XG5cdFx0XHR9XG5cdFx0XHRpZEhvbGRlci5zb3J0KGZ1bmN0aW9uKGEsIGIpe3JldHVybiBiLWE7fSk7XG5cdFx0XHRyZXR1cm4gU3RyaW5nKE51bWJlcihpZEhvbGRlclswXSkrMSk7XG4gICAgXHR9IGVsc2V7XG4gICAgXHRcdHJldHVybiBcIjBcIjtcbiAgICBcdH1cblx0fTtcblxuXHRyZXR1cm4gRWxlbWVudDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cblx0ZnVuY3Rpb24gRWxlbWVudFBpY2tlcigkZWwpIHsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjZWxlbWVudC1waWNrZXItdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBlbGVtZW50czogW1x0XG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJwb3N0LWl0XCIsIG5hbWU6IFwicG9zdC1pdFwifSxcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcInN0YXRpY1wiLCBuYW1lOiBcImltYWdlXCJ9LFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwibW90aW9uXCIsIG5hbWU6IFwidmlkZW9cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdwaWNrZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdCAgdmFyIGVsZW1lbnQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5lbGVtZW50KSxcblx0XHRcdCAgICAgIG5hbWUgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5uYW1lKTtcblxuXHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdCAgICBcIjxsaSBpZD1cIitlbGVtZW50K1wiPlwiK25hbWUrXCI8L2xpPlwiXG5cdFx0XHQgICk7XG5cdFx0XHR9KTtcblx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoICQoaHRtbCkgKTtcblx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVyKCk7XG5cdH1cblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS50b2dnbGVWaXNpYmxlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2VsZW1lbnQtcGlja2VyJykudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbih4UG9zLCB5UG9zKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBzZXRMb2NhdGlvbicpO1xuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IHlQb3MsXG5cdFx0XHRsZWZ0IDogeFBvc1xuXHRcdH07XG5cdFx0dGhpcy4kZWwuZmluZChcIiNlbGVtZW50LXBpY2tlclwiKS5jc3MocG9zaXRpb24pO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyNlbGVtZW50LXBpY2tlciA+IHVsID4gbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gY2xpY2tIYW5kbGVyJyk7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCBldmVudC50YXJnZXQuaWQpO1xuXHR9O1xuXG5cdHJldHVybiBFbGVtZW50UGlja2VyO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIEFwcCA9IHJlcXVpcmUoJy4vQXBwJyk7XG5cdHZhciBPdmVydmlld0VsZW1lbnQgPSByZXF1aXJlKCcuL092ZXJ2aWV3RWxlbWVudCcpO1xuXHR2YXIgT3ZlcnZpZXdIYW5kbGVyID0gcmVxdWlyZSgnLi9PdmVydmlld0hhbmRsZXInKTtcblxuXHRmdW5jdGlvbiBPdmVydmlldygkZWwpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gY29uc3RydWN0b3InKTtcblx0dGhpcy4kZWwgPSAkZWw7XG5cdC8vdGhpcy5ib2FyZExpc3QgPSBbXTtcblx0dGhpcy5vdmVydmlld0hhbmRsZXIgPSBuZXcgT3ZlcnZpZXdIYW5kbGVyKCk7XG5cdHRoaXMub3ZlcnZpZXdIYW5kbGVyLmdldEFsbEJvYXJkcygpO1xuXG5cdGJlYW4ub24odGhpcy5vdmVydmlld0hhbmRsZXIsIFwiZGF0YS1zdWNjZXNzXCIsIHRoaXMuYWRkVG9Cb2FyZExpc3QuYmluZCh0aGlzKSk7XG5cdCRlbC5maW5kKFwiI2FkZFByb2plY3RcIikub24oJ2NsaWNrJywgdGhpcy5uZXdXaGl0ZWJvYXJkLmJpbmQodGhpcykpO1xuXHRiZWFuLm9uKHRoaXMub3ZlcnZpZXdIYW5kbGVyLCBcInZpZXctd2hpdGVib2FyZFwiLCB0aGlzLnZpZXdXaGl0ZWJvYXJkLmJpbmQodGhpcykpO1xuXG5cdFxuXHR9XG5cblx0T3ZlcnZpZXcucHJvdG90eXBlLmFkZFRvQm9hcmRMaXN0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gZ2V0Qm9hcmRzJyk7XG5cdFx0dGhpcy5ib2FyZExpc3QgPSBbXTtcblx0XHQkKCcuT3ZlcnZpZXdUaHVtYicpLnJlbW92ZSgpO1xuXHRcdGNvbnNvbGUubG9nKGV2ZW50KTtcblx0XHR0aGlzLmJvYXJkTGlzdC5wdXNoKGV2ZW50KTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgIHRoaXMuYm9hcmRMaXN0WzBdLmxlbmd0aDsgaSsrKSB7IFxuXHRcdFx0dGhpcy5vdmVydmlld0VsZW1lbnQgPSBuZXcgT3ZlcnZpZXdFbGVtZW50KHRoaXMuYm9hcmRMaXN0WzBdW2ldKTtcblx0XHRcdGJlYW4ub24odGhpcy5vdmVydmlld0VsZW1lbnQsIFwicmVtb3ZlLXdoaXRlYm9hcmRcIiwgdGhpcy5yZW1vdmVXaGl0ZWJvYXJkLmJpbmQodGhpcykpO1xuXHRcdFx0YmVhbi5vbih0aGlzLm92ZXJ2aWV3RWxlbWVudCwgXCJ2aWV3LXdoaXRlYm9hcmRcIiwgdGhpcy52aWV3V2hpdGVib2FyZC5iaW5kKHRoaXMpKTtcblx0XHR9XG5cdH07XG5cblx0T3ZlcnZpZXcucHJvdG90eXBlLnZpZXdXaGl0ZWJvYXJkID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gdmlld1doaXRlYm9hcmQnKTtcblx0XHQkKFwiI2NvbnRhaW5lclwiKS5odG1sKFwiXCIpO1xuXHRcdG5ldyBBcHAoJCgnI2NvbnRhaW5lcicpLCBldmVudCk7XG5cblx0fTtcblxuXHRPdmVydmlldy5wcm90b3R5cGUubmV3V2hpdGVib2FyZCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIG5ld1doaXRlYm9hcmQnKTtcblxuXHRcdC8vY3JlYXRvcklkIG5vZyBvcHZyYWdlblxuXHRcdHRoaXMub3ZlcnZpZXdIYW5kbGVyLmFkZFdoaXRlYm9hcmQoXCJVbnRpdGxlZFwiLCBcIjFcIik7XG5cdFx0Ly9uaWV0IG5vZGlnIGFscyBvdmVydmlldyBnZXdpc3Qgd29yZFxuXHRcdC8vdGhpcy5vdmVydmlld0hhbmRsZXIuZ2V0QWxsQm9hcmRzKCk7XG5cdH07XG5cblx0T3ZlcnZpZXcucHJvdG90eXBlLnJlbW92ZVdoaXRlYm9hcmQgPSBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSByZW1vdmVXaGl0ZWJvYXJkJyk7XG5cdFx0dGhpcy5vdmVydmlld0hhbmRsZXIucmVtb3ZlQm9hcmQoZXZlbnQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK2V2ZW50KS5yZW1vdmUoKTtcblx0XHQvL29vayBhbGxlIHBvc3RpdHMgdmVyd2lqZGVyZW4uLi5cblx0fTtcblxuXHRyZXR1cm4gT3ZlcnZpZXc7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIEFwcCA9IHJlcXVpcmUoJy4vQXBwJyk7XG5cblx0ZnVuY3Rpb24gT3ZlcnZpZXdFbGVtZW50KCRlbCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSBjb25zdHJ1Y3RvcicpO1xuXHR0aGlzLiRlbCA9ICRlbDtcblx0dGhpcy5ib2FyZElkID0gJGVsLmlkO1xuXHR0aGlzLmJvYXJkTGlzdCA9IFtdO1xuXHR0aGlzLmNyZWF0ZU92ZXJ2aWV3VGh1bWIoJGVsKTtcblx0fVxuXG5cdE92ZXJ2aWV3RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlT3ZlcnZpZXdUaHVtYiA9IGZ1bmN0aW9uKGJvYXJkKSB7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIGNyZWF0ZU92ZXJ2aWV3VGh1bWInKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI292ZXJ2aWV3VGh1bWItdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnRpdGxlID0gYm9hcmQudGl0bGU7XG5cdFx0Y29udGV4dC5pZCA9IGJvYXJkLmlkO1xuXHRcdGNvbnRleHQuY3JlYXRpb25fZGF0ZSA9IGJvYXJkLmNyZWF0aW9uX2RhdGU7XHRcdFx0XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHQkKCcjY29udGFpbmVyJykuYXBwZW5kKCQoaHRtbCkpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoYm9hcmQuaWQsICQoaHRtbClbMF0pO1xuXHR9O1xuXG5cdE92ZXJ2aWV3RWxlbWVudC5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbihib2FyZElkLCBlbCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIGJpbmRIYW5kbGVyJyk7XG5cdFx0JChcIiNcIitib2FyZElkICtcIiA+IC5yZW1vdmVcIikub24oJ2NsaWNrJywgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdCQoXCIjXCIrYm9hcmRJZCArXCIgPiAudmlld1wiKS5vbignY2xpY2snLCB0aGlzLnZpZXdIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdE92ZXJ2aWV3RWxlbWVudC5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tPdmVydmlld10gcmVtb3ZlSGFuZGxlcicpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCAncmVtb3ZlLXdoaXRlYm9hcmQnLCB0aGlzLmJvYXJkSWQpO1xuXHR9O1xuXG5cdE92ZXJ2aWV3RWxlbWVudC5wcm90b3R5cGUudmlld0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIHZpZXdIYW5kbGVyJyk7XG5cdFx0YmVhbi5maXJlKHRoaXMsICd2aWV3LXdoaXRlYm9hcmQnLCB0aGlzLmJvYXJkSWQpO1xuXHR9O1xuXG5cdFxuXG5cdHJldHVybiBPdmVydmlld0VsZW1lbnQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0ZnVuY3Rpb24gT3ZlcnZpZXdIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnVybCA9IFwiaHR0cDovL2xvY2FsaG9zdC93aGl0ZWJvYXJkXzIvYXBpL2luZGV4LnBocC9cIjtcblx0fVxuXG5cblx0T3ZlcnZpZXdIYW5kbGVyLnByb3RvdHlwZS5nZXRBbGxCb2FyZHMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gZ2V0QWxsQm9hcmRzJyk7XG5cdFx0cmV0dXJuICQuYWpheCh7XG5cdFx0ICBcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ICBcdHVybDogdGhpcy51cmwrJy9ib2FyZHMvJyxcblx0XHQgIFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdFx0ICBcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcImRhdGEtc3VjY2Vzc1wiLCBbZGF0YV0pO1xuXHRcdCAgXHR9LmJpbmQodGhpcylcblx0XHR9KTtcblx0fTtcblxuXHRPdmVydmlld0hhbmRsZXIucHJvdG90eXBlLnJlbW92ZUJvYXJkID0gZnVuY3Rpb24oaWQpeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gcmVtb3ZlQm9hcmQnKTtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIkdFVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsKycvYm9hcmRzLycrJ2RlbGV0ZS8nK2lkLFxuXHQgIFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coXCJkZWxldGVkID0gXCIrZGF0YSk7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRPdmVydmlld0hhbmRsZXIucHJvdG90eXBlLmFkZFdoaXRlYm9hcmQgPSBmdW5jdGlvbih0aXRsZSwgY3JlYXRvcklkKXtcblx0XHRyZXR1cm4gJC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJQT1NUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrJy9ib2FyZHMvJysnYWRkLycrdGl0bGUrJy8nK2NyZWF0b3JJZCxcblx0XHQgIFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhcInZpZXctd2hpdGVib2FyZCBcIitbZGF0YS5pZF0pO1xuXHQgIFx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcInZpZXctd2hpdGVib2FyZFwiLCBbZGF0YS5pZF0pO1xuXHQgIFx0XHR9LmJpbmQodGhpcylcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiBPdmVydmlld0hhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBQYXJ0aWNpcGFudCgkZWwpeyBjb25zb2xlLmxvZygnW1BhcnRpY2lwYW50XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBpbnB1dCA9ICRlbC5maW5kKCcucGFydGljaXBhbnQtaW5wdXQnKTtcblx0XHRpZihpbnB1dC52YWwoKSl7XG5cdFx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3BhcnRpY2lwYW50LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdCBcdFx0dmFyIGNvbnRleHQgPSB7IHBhcnRpY2lwYW50czogW3t9XX07XG5cdFx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BhcnRpY2lwYW50JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHRcdCAgICBcIjxsaSBpZD0nJz5cIitpbnB1dC52YWwoKStcIjxidXR0b24gY2xhc3M9J2J0biBkZWxldGUnPlg8L2J1dHRvbj48L2xpPlwiXG5cdFx0XHRcdCAgKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdFx0dGhpcy4kZWwuZmluZChcIiNwYXJ0aWNpcGFudC1saXN0XCIpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcdHRoaXMuYmluZERlbGV0ZWJ1dHRvbigpO1xuXHRcdFx0JCgnLnBhcnRpY2lwYW50LWlucHV0JykudmFsKFwiXCIpO1xuXHRcdH1cblx0fVxuXG5cdFBhcnRpY2lwYW50LnByb3RvdHlwZS5iaW5kRGVsZXRlYnV0dG9uID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQYXJ0aWNpcGFudF0gYmluZERlbGV0ZWJ1dHRvbicpO1xuXHRcdHRoaXMuZGVsZXRlYnV0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLWRlbGV0ZScpO1xuXHRcdHRoaXMuZGVsZXRlYnV0b25bdGhpcy5kZWxldGVidXRvbi5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRlbGV0ZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRQYXJ0aWNpcGFudC5wcm90b3R5cGUuZGVsZXRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZyhcIltQYXJ0aWNpcGFudF0gZGVsZXRlQ2xpY2tIYW5kbGVyXCIpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCBcImRlbGV0ZVwiLCBldmVudC5wYXRoWzFdKTtcblx0fTtcblxuXHRyZXR1cm4gUGFydGljaXBhbnQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIFVzZXJIYW5kbGVyID0gcmVxdWlyZSgnLi9Vc2VySGFuZGxlcicpO1xuXG5cdGZ1bmN0aW9uIFByb2ZpbGUoJGVsLCB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkKSB7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLnVzZXIgPSAgW107XG5cdFx0dGhpcy51c2VySGFuZGxlciA9IG5ldyBVc2VySGFuZGxlcigpO1xuXHRcdFx0XG5cdFx0Ly9MT0dJTi1URU1QTEFURVxuXHRcdHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcblx0XHR0aGlzLmVtYWlsID0gZW1haWw7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNsb2dpbi10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdC8vY29udGV4dC51c2VybmFtZSA9IHRoaXMudXNlcm5hbWU7XG5cdFx0Ly9jb250ZXh0LmVtYWlsID0gdGhpcy5lbWFpbDtcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoJyNjb250YWluZXInKS5hcHBlbmQoJChodG1sKSk7XG5cblx0XHQvL1JFR0lTVEVSLVRFTVBMQVRFXG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNyZWdpc3Rlci10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdC8vY29udGV4dC51c2VybmFtZSA9IHRoaXMudXNlcm5hbWU7XG5cdFx0Ly9jb250ZXh0LmVtYWlsID0gdGhpcy5lbWFpbDtcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoJyNjb250YWluZXInKS5hcHBlbmQoJChodG1sKSk7XG5cblx0XHR0aGlzLiRlbC5maW5kKFwiI3JlZ2lzdGVyLWJ1dHRvblwiKS5vbignY2xpY2snLCB0aGlzLnJlZ2lzdGVyLmJpbmQodGhpcykpO1xuXHRcdCQoJy5yZWdpc3RlcicpLm9uKFwiY2xpY2tcIiwgdGhpcy5hZGRVc2VyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIubG9naW5cIikub24oJ2NsaWNrJywgdGhpcy5sb2dpbi5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiLmxvZ291dFwiKS5vbignY2xpY2snLCB0aGlzLmxvZ291dC5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMudXNlckhhbmRsZXIsIFwidXNlci1mb3VuZFwiLCB0aGlzLmJpbmRVc2VyLmJpbmQodGhpcykpO1xuXHR9XG5cblx0UHJvZmlsZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSByZWdpc3RlcicpO1xuXHRcdCQoXCIjcmVnaXN0ZXJcIikudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdFByb2ZpbGUucHJvdG90eXBlLmFkZFVzZXIgPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSBhZGRVc2VyJyk7XG5cdFx0dGhpcy51c2VybmFtZSA9IHRoaXMuJGVsLmZpbmQoJy5yZWdpc3Rlcl9uYW1lJykudmFsKCk7XG5cdFx0dGhpcy5lbWFpbCA9IHRoaXMuJGVsLmZpbmQoJy5yZWdpc3Rlcl9lbWFpbCcpLnZhbCgpO1xuXHRcdHRoaXMucGFzc3dvcmQgPSB0aGlzLiRlbC5maW5kKCcucmVnaXN0ZXJfcGFzc3dvcmQnKS52YWwoKTtcblx0XHR0aGlzLnBhc3N3b3JkXzIgPSB0aGlzLiRlbC5maW5kKCcucmVnaXN0ZXJfcGFzc3dvcmRfMicpLnZhbCgpO1xuXG5cdFx0aWYodGhpcy5wYXNzd29yZD09dGhpcy5wYXNzd29yZF8yKXtcblx0XHRcdC8vZXhpc3RpbmcgdXNlciBub2cgY2hlY2tlbiFcblx0XHRcdHRoaXMudXNlckhhbmRsZXIucmVnaXN0ZXIodGhpcy51c2VybmFtZSwgdGhpcy5lbWFpbCwgdGhpcy5wYXNzd29yZCk7XG5cdFx0fVxuXHR9O1xuXG5cdFByb2ZpbGUucHJvdG90eXBlLmxvZ2luID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gbG9naW4nKTtcblx0XHR0aGlzLmVtYWlsID0gdGhpcy4kZWwuZmluZCgnLmxvZ2luX2VtYWlsJykudmFsKCk7XG5cdFx0dGhpcy5wYXNzd29yZCA9IHRoaXMuJGVsLmZpbmQoJy5sb2dpbl9wYXNzd29yZCcpLnZhbCgpO1xuXHRcdHRoaXMudXNlckhhbmRsZXIubG9naW4odGhpcy5lbWFpbCwgdGhpcy5wYXNzd29yZCk7XG5cdH07XG5cblx0UHJvZmlsZS5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gbG9nb3V0Jyk7XG5cdFx0dGhpcy51c2VyID0gW107XG5cdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0JChcIiNyZWdpc3Rlci1idXR0b25cIikucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdFByb2ZpbGUucHJvdG90eXBlLmJpbmRVc2VyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1Byb2ZpbGVdIGJpbmRVc2VyJyk7XG5cdFx0dGhpcy51c2VyPSBbZXZlbnRdO1xuXHRcdGlmKHRoaXMudXNlclswXSl7XG5cdFx0XHQkKCdpbnB1dCcpLnZhbChcIlwiKTtcblx0XHRcdCQoXCIjcmVnaXN0ZXItYnV0dG9uXCIpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0XHRcdCQoXCIjcmVnaXN0ZXJcIikuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0fVxuXHR9XG5cblx0UHJvZmlsZS5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gdG9nZ2xlVmlzaWJsZScpO1xuXHRcdCQoXCIjbG9naW5cIikudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdCQoXCIjbG9nb3V0XCIpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0fTtcblxuXHRyZXR1cm4gUHJvZmlsZTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHRmdW5jdGlvbiBVc2VySGFuZGxlcigpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld0hhbmRsZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy51cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Qvd2hpdGVib2FyZF8yL2FwaS9pbmRleC5waHAvXCI7XG5cdH1cblxuXHRVc2VySGFuZGxlci5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpeyBjb25zb2xlLmxvZygnW1VzZXJIYW5kbGVyXSBsb2dpbicpO1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtcInVzZXJzXCIrJy9sb2dpbi8nK2VtYWlsK1wiL1wiK3Bhc3N3b3JkLFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhcInVzZXIgZm91bmRcIiwgW2RhdGFdKTtcblx0ICBcdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ1c2VyLWZvdW5kXCIsIFtkYXRhXSk7XG5cdCAgXHRcdH0uYmluZCh0aGlzKVxuXHRcdH0pO1xuXHR9O1xuXG5cdFVzZXJIYW5kbGVyLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQpeyBjb25zb2xlLmxvZygnW1VzZXJIYW5kbGVyXSByZWdpc3RlcicpO1xuXHRcdFx0JC5hamF4KHtcblx0XHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0XHQgIFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0XHQgIFx0XHR1cmw6IHRoaXMudXJsK1widXNlcnNcIitcIi9yZWdpc3Rlci9cIit1c2VybmFtZStcIi9cIitlbWFpbCtcIi9cIitwYXNzd29yZCxcblx0XHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0XHQgIFx0XHRcdGNvbnNvbGUubG9nKFwibmV3IHVzZXIgY3JlYXRlZFwiLCBbZGF0YV0pO1xuXHRcdCAgXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwidXNlci1mb3VuZFwiLCBbZGF0YV0pO1xuXHRcdCAgXHRcdH0uYmluZCh0aGlzKVxuXHRcdFx0fSk7XG5cdFx0fTtcblx0cmV0dXJuIFVzZXJIYW5kbGVyO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmRTZXR0aW5ncyA9IHJlcXVpcmUgKCcuL1doaXRlYm9hcmRTZXR0aW5ncycpO1xuXG5cdGZ1bmN0aW9uIFdoaXRlYm9hcmQoJGVsLCBib2FyZE5hbWUpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuY3JlYXRlV2hpdGVib2FyZCgpO1xuXHRcdHRoaXMuYWRkV2hpdGVib2FyZFNldHRpbmdzKCk7XG5cdH1cblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5jcmVhdGVXaGl0ZWJvYXJkID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjcmVhdGVXaGl0ZWJvYXJkJyk7XG5cdFx0dGhpcy5ib2FyZCA9IHRoaXMuJGVsLmFwcGVuZChcIjxkaXYgaWQ9J3doaXRlYm9hcmQnPjwvZGl2PlwiKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVyKCk7XG5cdH07XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy5ib2FyZC5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gY2xpY2tIYW5kbGVyJyk7XG5cdFx0dmFyIHhQb3MgPSBldmVudC5wYWdlWCAtIHRoaXMuJGVsLm9mZnNldCgpLmxlZnQ7XG4gICBcdFx0dmFyIHlQb3MgPSBldmVudC5wYWdlWSAtIHRoaXMuJGVsLm9mZnNldCgpLnRvcDtcbiAgIFx0XHR2YXIgcG9zaXRpb24gPSB7fTtcbiAgIFx0XHRwb3NpdGlvbi54UG9zID0geFBvcztcbiAgIFx0XHRwb3NpdGlvbi55UG9zID0geVBvcztcblx0XHRpZihldmVudC50YXJnZXQuaWQgPT09IFwid2hpdGVib2FyZFwiKXtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcIndoaXRlYm9hcmQtY2xpY2tlZFwiLCBwb3NpdGlvbik7XG5cdFx0fVxuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmFkZFdoaXRlYm9hcmRTZXR0aW5ncyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gYWRkV2hpdGVib2FyZFNldHRpbmdzJyk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkU2V0dGluZ3MgPSBuZXcgV2hpdGVib2FyZFNldHRpbmdzKHRoaXMuJGVsKTtcblx0fTtcblxuXHRyZXR1cm4gV2hpdGVib2FyZDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgUGFydGljaXBhbnQgPSByZXF1aXJlICgnLi9QYXJ0aWNpcGFudCcpO1xuXG5cblx0ZnVuY3Rpb24gV2hpdGVib2FyZFNldHRpbmdzKCRlbCwgJHBhcnRpY2lwYW50cywgJHRpdGxlKSB7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuJHBhcnRpY2lwYW50cyA9ICRwYXJ0aWNpcGFudHM7XG5cdFx0dGhpcy4kdGl0bGUgPSAkdGl0bGU7XG5cblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3NldHRpbmdzLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHQgXHR2YXIgY29udGV4dCA9IHt9O1xuXHQgXHRpZih0aGlzLiR0aXRsZSl7XG5cdCBcdFx0Y29udGV4dC50aXRsZSA9ICR0aXRsZTtcblx0IFx0fWVsc2V7XG5cdCBcdFx0Y29udGV4dC50aXRsZSA9IFwiVW50aXRsZWRcIjtcblx0IFx0fVxuXHRcdFx0XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRjb25zb2xlLmxvZyhodG1sKTtcblx0XHQkKFwiI2NvbnRhaW5lclwiKS5hcHBlbmQoJChodG1sKSk7XG5cblx0XHR0aGlzLmJpbmRIYW5kbGVyKCk7XG5cdH1cblxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gdG9nZ2xlVmlzaWJsZScpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyNoaWRlJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyNzaG93JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuaGlkZS1idXR0b24nKS5vbignY2xpY2snLCB0aGlzLmhpZGVTZXR0aW5nc0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLnNob3ctYnV0dG9uJykub24oJ2NsaWNrJywgdGhpcy5oaWRlU2V0dGluZ3NIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5hZGQtYnV0dG9uJykub24oJ2NsaWNrJywgdGhpcy5jcmVhdGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKTtcblx0fTtcblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5jcmVhdGVQYXJ0aWNpcGFudCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGFkZENsaWNrZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5wYXJ0aWNpcGFudCA9IG5ldyBQYXJ0aWNpcGFudCh0aGlzLiRlbCk7XG5cdFx0YmVhbi5vbih0aGlzLnBhcnRpY2lwYW50LCBcImRlbGV0ZVwiLCB0aGlzLmRlbGV0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuaGlkZVNldHRpbmdzSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGhpZGVTZXR0aW5nc0hhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuaGlkZV9zZWN0aW9uJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5zaG93LWJ1dHRvbicpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0fTtcblx0XG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuZGVsZXRlUGFydGljaXBhbnQgPSBmdW5jdGlvbihwYXJ0aWNpcGFudCkgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gZGVsZXRlUGFydGljaXBhbnQnKTtcblx0XHR2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFydGljaXBhbnQtbGlzdCcpO1xuXHRcdGVsLnJlbW92ZUNoaWxkKHBhcnRpY2lwYW50KTtcblx0XHRyZXR1cm47XG5cdH07XG5cblx0cmV0dXJuIFdoaXRlYm9hcmRTZXR0aW5ncztcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgTW90aW9uRWRpdCA9IHJlcXVpcmUoJy4vTW90aW9uRWRpdCcpO1xuXG5cblx0ZnVuY3Rpb24gTW90aW9uKCRlbCx4UG9zLHlQb3MsdmlkU3JjKSB7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdGlmKHZpZFNyYyl7XG5cdFx0dGhpcy52aWRTcmMgPSB2aWRTcmM7XG5cdFx0fVxuXHR9XG5cblx0TW90aW9uLnByb3RvdHlwZS5jcmVhdGVNb3Rpb24gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gY3JlYXRNb3Rpb24nKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI21vdGlvbi10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXG5cdFx0aWYodGhpcy52aWRTcmMpe1xuXHRcdFx0Y29udGV4dC52aWRTcmMgPSB0aGlzLnZpZFNyYztcblx0XHR9ZWxzZXtcblx0XHRcdGNvbnRleHQudmlkU3JjID0gXCJcIjtcblx0XHR9XG5cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoJyNpZD1cIndoaXRlYm9hcmRcIicpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcblx0fTtcblx0XG5cdE1vdGlvbi5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKCRlbCxlbGVtZW50SWQpeyAgY29uc29sZS5sb2coJ1tNb3Rpb25dIGVkaXQnKTtcblxuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1x0XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitlbGVtZW50SWQpLmFwcGVuZChuZXcgTW90aW9uRWRpdCh0aGlzLnZpZFNyYywgZWxlbWVudElkKSk7XG5cblx0fTtcblxuXHRNb3Rpb24ucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gY29uZmlybScpO1xuXHRcdHRoaXMudmlkU3JjID0gdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiAubW90aW9uLWVkaXRcIikudmFsKCk7XG5cdFx0dGhpcy5lbmRFZGl0KCk7XG5cdH07XG5cblx0TW90aW9uLnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGVuZEVkaXQnKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLm1vdGlvbi1lZGl0XCIpLnJlbW92ZSgpO1xuXHR9O1xuXG5cblx0cmV0dXJuIE1vdGlvbjtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIE1vdGlvbkVkaXQodmlkU3JjLCBlbGVtZW50SWQpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25FZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbW90aW9uLWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnZpZFNyYyA9IHZpZFNyYztcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpe2luaXRNb3Rpb25JbnB1dChlbGVtZW50SWQpO1xuIFx0XHR9LCAxMDApO1xuXHRcdHJldHVybiAoJChodG1sKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0TW90aW9uSW5wdXQoZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGluaXRNb3Rpb25JbnB1dCcpO1xuXHRcdHZhciBmaWxlSW5wdXQgPSAkKCcjJytlbGVtZW50SWQrJyA+IGlucHV0W3R5cGU9ZmlsZV0nKVswXTtcblx0ICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBwbGF5U2VsZWN0ZWRGaWxlKTtcblx0fVxuXG4gXHRmdW5jdGlvbiBwbGF5U2VsZWN0ZWRGaWxlKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBwbGF5U2VsZWN0ZWRGaWxlJyk7XG5cdFx0XHR2YXIgZWxlbWVudElkID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuaWQ7XG5cdFx0XHR2YXIgdmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycrZWxlbWVudElkKycgPiAubW90aW9uID4gdmlkZW8nKTtcbiAgICAgICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZmlsZS50eXBlO1xuICAgICAgICAgICAgdmFyIGNhblBsYXkgPSB2aWQuY2FuUGxheVR5cGUodHlwZSk7XG4gICAgICAgICAgICBjYW5QbGF5ID0gKGNhblBsYXkgPT09ICcnID8gJ25vJyA6IGNhblBsYXkpO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnQ2FuIHBsYXkgdHlwZSBcIicgKyB0eXBlICsgJ1wiOiAnICsgY2FuUGxheTtcbiAgICAgICAgICAgIHZhciBpc0Vycm9yID0gY2FuUGxheSA9PT0gJ25vJztcblxuICAgICAgICAgICAgaWYoVVJMKXtcbiAgICAgICAgICAgIHZhciBmaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgICAgIHZpZC5zcmMgPSBmaWxlVVJMO1xuICAgICAgICAgICAgdmlkLmF1dG9QbGF5ID0gdHJ1ZTtcbiAgICAgICAgXHR9XG5cdH1cblx0XG5cdHJldHVybiBNb3Rpb25FZGl0O1xuXG59KSgpO1xuXG5cbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBQaWN0dXJlRWRpdCA9IHJlcXVpcmUoJy4vUGljdHVyZUVkaXQnKTtcblxuXHRmdW5jdGlvbiBQaWN0dXJlKCRlbCx4UG9zLHlQb3MsIGltZ1NyYykgeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0Y29uc29sZS5sb2coJGVsKTtcblx0XHRpZihpbWdTcmMpe1xuXHRcdHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuXHRcdH1cblx0fVxuXG5cdFBpY3R1cmUucHJvdG90eXBlLmNyZWF0ZVBpY3R1cmUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNyZWF0UGljdHVyZScpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcGljdHVyZS10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXG5cdFx0aWYodGhpcy50eHQpe1xuXHRcdFx0Y29udGV4dC5pbWdTcmMgPSB0aGlzLmltZ1NyYztcblx0XHR9ZWxzZXtcblx0XHRcdGNvbnRleHQuaW1nU3JjID0gXCJcIjtcblx0XHR9XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRyZXR1cm4oJChodG1sKSk7XG5cdH07XG5cdFxuXG5cdFBpY3R1cmUucHJvdG90eXBlLmVkaXQgPSBmdW5jdGlvbigkZWwsZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBlZGl0Jyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHRcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBQaWN0dXJlRWRpdCgkZWwsIHRoaXMuaW1nU3JjLGVsZW1lbnRJZCkpO1xuXHR9O1xuXG5cdFBpY3R1cmUucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNvbmZpcm0nKTtcblx0XHR0aGlzLmltZ1NyYyA9IHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgLmlucHV0LXBpY3R1cmVcIikudmFsKCk7XG5cdFx0dGhpcy5lbmRFZGl0KCk7XG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gZW5kRWRpdCcpO1xuXG5cdGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudElkKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLmlucHV0LXBpY3R1cmVcIikucmVtb3ZlKCk7XG5cblx0fTtcblxuXHRyZXR1cm4gUGljdHVyZTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgZXJyb3JzID0gW107XG5cblx0ZnVuY3Rpb24gUGljdHVyZUVkaXQoJGVsLHR4dCxlbGVtZW50SWQpIHsgY29uc29sZS5sb2coJ1tQaWN0dXJlRWRpdF0gY29uc3RydWN0b3InKTtcblx0XHRpZiAoXG5cdFx0XHR3aW5kb3cuRmlsZSAmJiBcblx0XHRcdHdpbmRvdy5GaWxlUmVhZGVyICYmIFxuXHRcdFx0d2luZG93LkZpbGVMaXN0ICYmIFxuXHRcdFx0d2luZG93LkJsb2Jcblx0XHQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiRnVsbCBmaWxlIHN1cHBvcnRcIik7XG5cdFx0fVxuXG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwaWN0dXJlLWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHR4dDtcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyBpbml0SW1hZ2VJbnB1dChlbGVtZW50SWQpO30sIDEwMCk7XG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdEltYWdlSW5wdXQoZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlRWRpdF0gaW5pdEltYWdlSW5wdXQnKTtcblx0XHR2YXIgaW1nSW5wdXRzID0gJCgnIycrZWxlbWVudElkKycgPiAuaW5wdXQtcGljdHVyZScpWzBdO1xuXHRcdGltZ0lucHV0cy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjcmVhdGVUaHVtYik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVRodW1iKGUpe2NvbnNvbGUubG9nKCdbUGljdHVyZUVkaXRdIGNyZWF0ZVRodW1iJyk7XG5cdFx0dmFyIGVsZW1lbnRJZCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmlkO1xuXHRcdGlmIChcblx0XHRcdHRoaXMuZmlsZXMgJiYgXG5cdFx0XHR0aGlzLmZpbGVzWzBdICYmIFxuXHRcdFx0dGhpcy5maWxlc1swXS50eXBlLm1hdGNoKCdpbWFnZS4qJylcblx0XHQpIHtcblx0XHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0dmFyIGltZyA9ICQoJyMnK2VsZW1lbnRJZCsnPiAucGljdHVyZSA+ICNpbWFnZS1wcmV2aWV3JylbMF07XG5cblx0XHRcdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKXtcblx0XHRcdFx0aW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgZS50YXJnZXQucmVzdWx0KTtcblx0XHRcdFx0aW1nLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBpbWcud2lkdGgpO1xuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBpbWcuaGVpZ2h0KTtcblx0XHRcdFx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0aWYoZXJyb3JzLmxlbmd0aCA9PT0gMCl7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiKyBlLnRhcmdldC5yZXN1bHQgK1wiJylcIjtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS5oZWlnaHQgPSBpbWcud2lkdGgrXCJweFwiO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLndpZHRoID0gaW1nLmhlaWdodCtcInB4XCI7XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRlcnJvcnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1swXSk7XG5cblx0XHR9ZWxzZXtcblx0XHRcdGVycm9ycy5wdXNoKFwiRmlsZSBpcyBub3QgYSB2YWxpZCBpbWFnZVwiKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gUGljdHVyZUVkaXQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgUG9zdGl0RWRpdCA9IHJlcXVpcmUoJy4vUG9zdGl0RWRpdCcpO1xuXG5cdGZ1bmN0aW9uIFBvc3RpdCh0eHQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy50eHQgPSB0eHQ7XG5cdFx0aWYoIXRoaXMudHh0KXtcblx0XHRcdHRoaXMudHh0ID0gXCJOaWV1d2UgUG9zdGl0XCI7XG5cdFx0fVxuXHR9XG5cblx0UG9zdGl0LnByb3RvdHlwZS5jcmVhdGVQb3N0aXQgPSBmdW5jdGlvbih0eHQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY3JlYXRlUG9zdGl0Jyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwb3N0aXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHRoaXMudHh0O1xuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmVkaXQgPSBmdW5jdGlvbigkZWwsZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGVkaXQnKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCtcIiA+IC5wb3N0aXQgPiBwXCIpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkKS5hcHBlbmQobmV3IFBvc3RpdEVkaXQodGhpcy50eHQpKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY29uZmlybScpO1xuXHRcdHRoaXMudHh0ID0gdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiAucG9zdGl0LWVkaXRcIikudmFsKCk7XG5cdFx0dGhpcy5lbmRFZGl0KCk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGVuZEVkaXQnKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikuYWRkQ2xhc3MoXCJoaWRkZW5cIikudGV4dCh0aGlzLnR4dCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiA+IC5wb3N0aXQtZWRpdFwiKS5yZW1vdmUoKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdH07XG5cblx0cmV0dXJuIFBvc3RpdDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFBvc3RpdEVkaXQodHh0KSB7IGNvbnNvbGUubG9nKCdbUG9zdGl0RWRpdF0gY29uc3RydWN0b3InKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC1lZGl0LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Y29udGV4dC50eHQgPSB0eHQ7XG5cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblxuXHR9XG5cdFxuXHRyZXR1cm4gUG9zdGl0RWRpdDtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=