!function e(t,i,n){function o(r,l){if(!i[r]){if(!t[r]){var d="function"==typeof require&&require;if(!l&&d)return d(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e){!function(){function t(){new i($("#container"))}{var i=(e("./classes/Profile"),e("./classes/App"));e("./classes/Overview")}t()}()},{"./classes/App":2,"./classes/Overview":7,"./classes/Profile":11}],2:[function(e,t){t.exports=function(){function t(e){console.log("[App] constructor"),this.$el=e,this.whiteboardId=1,this.types=["postits","statics"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new s,this.whiteboard=new i(this.$el),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),s=e("./DataHandler");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();var t=new o(this.$el,e,this.position);this.newElement(e,t.elementId),bean.on(t,"position-changed",this.positionChangedHandler.bind(this)),bean.on(t,"image-changed",this.imageChangedHandler.bind(this))},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e],this.whiteboardId)},t.prototype.addToElementList=function(e){console.log("[App] addToElementList"),this.addToBoard(e)},t.prototype.addToBoard=function(e){console.log("[App] addToBoard");var t=e;for(var i in t){console.log(t[i]);var n=t[i].el_type,s={};s.yPos=Number(t[i].posy),s.xPos=Number(t[i].posx);var r=t[i].id_on_board,l=t[i].id,d=t[i].content,a=new o(this.$el,n,s,r,d,l);bean.on(a,"remove-clicked",this.removeHandler.bind(this)),bean.on(a,"edit-clicked",this.editHandler.bind(this)),bean.on(a,"position-changed",this.positionChangedHandler.bind(this)),bean.on(a,"image-changed",this.imageChangedHandler.bind(this))}},t.prototype.imageChangedHandler=function(e){console.log("[App] imageChangedHandler"),this.dataHandler.editContent(e.elementType,e.elementId,e.content,this.whiteboardId)},t.prototype.editHandler=function(e){console.log("[App] editHandler"),this.dataHandler.editContent(e.elementType,e.elementId,e.content,this.whiteboardId)},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.id)},t.prototype.newElement=function(e,t){console.log("[App] newElementHandler"),this.dataHandler.newBoardElement(e,t,this.position,this.whiteboardId)},t.prototype.positionChangedHandler=function(e){console.log("[App] positionChangedHandler"),this.dataHandler.positionChange(e.elementType,e.elementId,e.eTarget.css("left"),e.eTarget.css("top"),this.whiteboardId)},t}()},{"./DataHandler":3,"./Element":5,"./ElementPicker":6,"./Whiteboard":13}],3:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/",t=this,this.boardList=[]}var t;return e.prototype.loadBoardElements=function(e,i){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/"+String(i),data:{content:"content"},success:function(e){bean.fire(t,"data-success",[e])}})},e.prototype.removeBoardElement=function(e,t){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t);break;case"static":this.removeElementById("statics",t);break;case"motion":this.removeElementById("motion",t)}},e.prototype.removeElementById=function(e,t){$.ajax({type:"GET",url:this.url+e+"/delete/"+t,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.newBoardElement=function(e,t,i,n){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newElement("postits",t,i,n);break;case"static":this.newElement("statics",t,i,n);break;case"motion":this.newElement("motion",n)}},e.prototype.newElement=function(e,t,i,n){$.ajax({type:"POST",url:this.url+e+"/add",data:{id_on_board:t,xpos:i.xPos,ypos:i.yPos,whiteboardId:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.positionChange=function(e,t,i,n,o){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newPosition("postits",t,i,n,o);break;case"static":this.newPosition("statics",t,i,n,o);break;case"motion":this.newPosition("motion",o)}},e.prototype.newPosition=function(e,t,i,n,o){$.ajax({type:"POST",url:this.url+e+"/change/position",data:{whiteboard_id:o,id_on_board:t,xpos:i,ypos:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.editContent=function(e,t,i,n){switch(console.log("[DataHandler] editContent"),e){case"post-it":this.newContent("postits",t,i,n);break;case"static":this.newContent("statics",t,i,n);break;case"motion":this.newPosition("motion",n)}},e.prototype.newContent=function(e,t,i,n){$.ajax({type:"POST",url:this.url+e+"/change/content",data:{whiteboard_id:n,id_on_board:t,content:i},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.getAllBoards=function(){console.log("[DataHandler] getAllBoards"),$.ajax({type:"GET",url:this.url+"/boards/",data:{content:"content"},success:function(e){this.boardElements.push(e)}.bind(this)})},e}()},{}],4:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var s=n(o);this.$el.find("#"+this.elementId).append(s),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked"),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],5:[function(e,t){t.exports=function(){function t(e,t,i,n,o,s){console.log("[Element] constructor"),this.$el=e,console.log("ocntenen ==== "+o),this.content=o,this.elementType=t,this.elementId=n,this.elementId=this.elementId?n:this.setElementId(),this.position=i,s&&(this.id=s),this.createElementHolder()}var n=e("./EditMenu"),o=1,s=e("./elements/Postit"),r=e("./elements/Picture"),l=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={};e.top=this.position.yPos,e.left=this.position.xPos,e.zIndex=0,this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new s(this.content),this.content?this.$el.find("#"+this.elementId).append(this.element.createPostit()):(this.$el.find("#"+this.elementId).append(this.element.createPostit()),this.element.edit(this.$el,this.elementId),this.editMenu.toggleVisible()),this.$el.find("#"+this.elementId).append(this.element.createPostit),this.bindHandler(this.$el.find("#"+this.elementId));break;case"static":this.element=new r(this.content,this.elementId),this.content?(this.$el.find("#"+this.elementId).append(this.element.createPicture()),bean.on(this.element,"image-changed",this.imageChangedHandler.bind(this))):(this.$el.find("#"+this.elementId).append(this.element.createPicture()),this.element.edit(this.$el,this.elementId),bean.on(this.element,"image-changed",this.imageChangedHandler.bind(this)),this.editMenu.toggleVisible()),this.bindHandler(this.$el.find("#"+this.elementId));break;case"motion":this.element=new l(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createMotion),this.bindHandler(this.$el.find("#"+this.elementId))}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),this.mouseDown=!1},t.prototype.imageChangedHandler=function(e){console.log("[Element] imageChangedHandler");var t={};t.content=e,t.elementId=this.elementId,t.elementType=this.elementType,bean.fire(this,"image-changed",t)},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),event.target.id===this.elementId&&(this.mouseDown=!0,this.currentLeft=$(e.target).css("left"),this.currentTop=$(e.target).css("top"),this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++o,this.$el.find("#"+this.elementId).css("zIndex",o),document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler))},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new n(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();var t={};t.id=this.id,t.elementType=this.elementType,bean.fire(this,"remove-clicked",t);break;case"edit":this.element.confirm(),this.editMenu.toggleVisible(),t={},t.elementType=this.elementType,t.elementId=this.elementId,t.content=this.element.txt,bean.fire(this,"edit-clicked",t);break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);this.$el.find("#"+this.elementId).css("left",t-this.offsetX),this.$el.find("#"+this.elementId).css("top",i-this.offsetY)}},t.prototype.mouseUpHandler=function(e){if(console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),this.currentTop!==$(e.target).css("top")||this.currentLeft!==$(e.target).css("left")){var t={};t.eTarget=$(e.target),t.elementType=this.elementType,t.elementId=this.elementId,bean.fire(this,"position-changed",t)}},t.prototype.setElementId=function(){console.log("[Element] setElementId");var e=this.$el.find(".element-holder");if(e.length>0){var t=[];for(i=0;i<e.length;i++)t.push(e[i].id);return t.sort(function(e,t){return t-e}),String(Number(t[0])+1)}return"0"},t}()},{"./EditMenu":4,"./elements/Motion":15,"./elements/Picture":17,"./elements/Postit":19}],6:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],7:[function(e,t){t.exports=function(){function t(e){console.log("[Overview] constructor"),this.$el=e,this.overviewHandler=new s,this.overviewHandler.getAllBoards(),bean.on(this.overviewHandler,"data-success",this.addToBoardList.bind(this)),e.find("#addProject").on("click",this.newWhiteboard.bind(this)),bean.on(this.overviewHandler,"view-whiteboard",this.viewWhiteboard.bind(this))}var n=e("./App"),o=e("./OverviewElement"),s=e("./OverviewHandler");return t.prototype.addToBoardList=function(e){for(console.log("[Overview] getBoards"),this.boardList=[],$(".OverviewThumb").remove(),console.log(e),this.boardList.push(e),i=0;i<this.boardList[0].length;i++)this.overviewElement=new o(this.boardList[0][i]),bean.on(this.overviewElement,"remove-whiteboard",this.removeWhiteboard.bind(this)),bean.on(this.overviewElement,"view-whiteboard",this.viewWhiteboard.bind(this))},t.prototype.viewWhiteboard=function(e){console.log("[Overview] viewWhiteboard"),$("#container").html(""),new n($("#container"),e)},t.prototype.newWhiteboard=function(){console.log("[Overview] newWhiteboard"),this.overviewHandler.addWhiteboard("Untitled","1")},t.prototype.removeWhiteboard=function(e){console.log("[Overview] removeWhiteboard"),this.overviewHandler.removeBoard(e),this.$el.find("#"+e).remove()},t}()},{"./App":2,"./OverviewElement":8,"./OverviewHandler":9}],8:[function(e,t){t.exports=function(){function t(e){console.log("[Overview] constructor"),this.$el=e,this.boardId=e.id,this.boardList=[],this.createOverviewThumb(e)}e("./App");return t.prototype.createOverviewThumb=function(e){console.log("[Overview] createOverviewThumb");var t=$("#overviewThumb-template").text(),i=Handlebars.compile(t),n={};n.title=e.title,n.id=e.id,n.creation_date=e.creation_date;var o=i(n);$("#container").append($(o)),this.bindHandler(e.id,$(o)[0])},t.prototype.bindHandler=function(e){console.log("[Overview] bindHandler"),$("#"+e+" > .remove").on("click",this.removeHandler.bind(this)),$("#"+e+" > .view").on("click",this.viewHandler.bind(this))},t.prototype.removeHandler=function(){console.log("[Overview] removeHandler"),bean.fire(this,"remove-whiteboard",this.boardId)},t.prototype.viewHandler=function(){console.log("[Overview] viewHandler"),bean.fire(this,"view-whiteboard",this.boardId)},t}()},{"./App":2}],9:[function(e,t){t.exports=function(){function e(){console.log("[OverviewHandler] constructor"),this.url="http://localhost/whiteboard_2/api/index.php/"}return e.prototype.getAllBoards=function(){return console.log("[OverviewHandler] getAllBoards"),$.ajax({type:"GET",url:this.url+"/boards/",data:{content:"content"},success:function(e){bean.fire(this,"data-success",[e])}.bind(this)})},e.prototype.removeBoard=function(e){console.log("[OverviewHandler] removeBoard"),$.ajax({type:"GET",url:this.url+"/boards/delete/"+e,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.addWhiteboard=function(e,t){return $.ajax({type:"POST",url:this.url+"/boards/add/"+e+"/"+t,data:{content:"content"},success:function(e){console.log("view-whiteboard "+[e.id]),bean.fire(this,"view-whiteboard",[e.id])}.bind(this)})},e}()},{}],10:[function(e,t){t.exports=function(){function e(e){console.log("[Participant] constructor"),this.$el=e;var t=e.find(".participant-input");if(t.val()){var i=$("#participant-template").text(),n=Handlebars.compile(i),o={participants:[{}]};Handlebars.registerHelper("participant",function(){return new Handlebars.SafeString("<li id=''>"+t.val()+"<button class='btn delete'>X</button></li>")});var s=n(o);this.$el.find("#participant-list").append($(s)),this.bindDeletebutton(),$(".participant-input").val("")}}return e.prototype.bindDeletebutton=function(){console.log("[Participant] bindDeletebutton"),this.deletebuton=document.querySelectorAll(".btn-delete"),this.deletebuton[this.deletebuton.length-1].addEventListener("click",this.deleteClickHandler.bind(this))},e.prototype.deleteClickHandler=function(e){console.log("[Participant] deleteClickHandler"),bean.fire(this,"delete",e.path[1])},e}()},{}],11:[function(e,t){t.exports=function(){function t(e,t,n){console.log("[Profile] constructor"),this.$el=e,this.user=[],this.userHandler=new i,this.username=t,this.email=n;var o=$("#login-template").text(),s=Handlebars.compile(o),r={},l=s(r);$("#container").append($(l));var o=$("#register-template").text(),s=Handlebars.compile(o),r={},l=s(r);$("#container").append($(l)),this.$el.find("#register-button").on("click",this.register.bind(this)),$(".register").on("click",this.addUser.bind(this)),this.$el.find(".login").on("click",this.login.bind(this)),this.$el.find(".logout").on("click",this.logout.bind(this)),bean.on(this.userHandler,"user-found",this.bindUser.bind(this))}var i=e("./UserHandler");return t.prototype.register=function(){console.log("[Profile] register"),$("#register").toggleClass("hidden")},t.prototype.addUser=function(){console.log("[Profile] addUser"),this.username=this.$el.find(".register_name").val(),this.email=this.$el.find(".register_email").val(),this.password=this.$el.find(".register_password").val(),this.password_2=this.$el.find(".register_password_2").val(),this.password==this.password_2&&this.userHandler.register(this.username,this.email,this.password)},t.prototype.login=function(){console.log("[Profile] login"),this.email=this.$el.find(".login_email").val(),this.password=this.$el.find(".login_password").val(),this.userHandler.login(this.email,this.password)},t.prototype.logout=function(){console.log("[Profile] logout"),this.user=[],this.toggleVisible(),$("#register-button").removeClass("hidden")},t.prototype.bindUser=function(e){console.log("[Profile] bindUser"),this.user=[e],this.user[0]&&($("input").val(""),$("#register-button").addClass("hidden"),$("#register").addClass("hidden"),this.toggleVisible())},t.prototype.toggleVisible=function(){console.log("[Profile] toggleVisible"),$("#login").toggleClass("hidden"),$("#logout").toggleClass("hidden")},t}()},{"./UserHandler":12}],12:[function(e,t){t.exports=function(){function e(){console.log("[OverviewHandler] constructor"),this.url="http://localhost/whiteboard_2/api/index.php/"}return e.prototype.login=function(e,t){console.log("[UserHandler] login"),$.ajax({type:"POST",data:{content:"content"},url:this.url+"users/login/"+e+"/"+t,success:function(e){console.log("user found",[e]),bean.fire(this,"user-found",[e])}.bind(this)})},e.prototype.register=function(e,t,i){console.log("[UserHandler] register"),$.ajax({type:"POST",data:{content:"content"},url:this.url+"users/register/"+e+"/"+t+"/"+i,success:function(e){console.log("new user created",[e]),bean.fire(this,"user-found",[e])}.bind(this)})},e}()},{}],13:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e,this.createWhiteboard(),this.addWhiteboardSettings()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el)},t}()},{"./WhiteboardSettings":14}],14:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[WhiteboardSettings] constructor"),this.$el=e,this.$participants=t,this.$title=i;var n=$("#settings-template").text(),o=Handlebars.compile(n),s={};s.title=this.$title?i:"Untitled";var r=o(s);$("#container").append($(r)),this.bindHandler()}var i=e("./Participant");return t.prototype.toggleVisible=function(){console.log("[WhiteboardSettings] toggleVisible"),this.$el.find("#hide").toggleClass("hidden"),this.$el.find("#show").toggleClass("hidden")},t.prototype.bindHandler=function(){console.log("[WhiteboardSettings] bindHandler"),this.$el.find(".hide-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".show-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".add-button").on("click",this.createParticipant.bind(this))},t.prototype.createParticipant=function(){console.log("[WhiteboardSettings] addClickedHandler"),this.participant=new i(this.$el),bean.on(this.participant,"delete",this.deleteParticipant.bind(this))},t.prototype.hideSettingsHandler=function(){console.log("[WhiteboardSettings] hideSettingsHandler"),this.$el.find(".hide_section").toggleClass("hidden"),this.$el.find(".show-button").toggleClass("hidden")},t.prototype.deleteParticipant=function(e){console.log("[WhiteboardSettings] deleteParticipant");var t=document.querySelector("#participant-list");t.removeChild(e)},t}()},{"./Participant":10}],15:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Motion] constructor"),this.$el=e,n&&(this.vidSrc=n)}var i=e("./MotionEdit");return t.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.vidSrc?this.vidSrc:"";var n=t(i);$('#id="whiteboard"').append($(n))},t.prototype.edit=function(e,t){console.log("[Motion] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new i(this.vidSrc,t))},t.prototype.confirm=function(){console.log("[Motion] confirm"),this.vidSrc=this.$el.find("#"+this.elementId+" .motion-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Motion] endEdit"),this.$el.find("#"+this.elementId+" > .motion-edit").remove()},t}()},{"./MotionEdit":16}],16:[function(e,t){t.exports=function(){function e(e,i){console.log("[MotionEdit] constructor");var n=$("#motion-edit-template").text(),o=Handlebars.compile(n),s={};s.vidSrc=e;var r=o(s);return setTimeout(function(){t(i)},100),$(r)}function t(e){console.log("[Motion] initMotionInput");var t=$("#"+e+" > input[type=file]")[0];t.addEventListener("change",i)}function i(e){console.log("[Motion] playSelectedFile");var t=e.target.parentNode.id,i=document.querySelector("#"+t+" > .motion > video"),n=this.files[0],o=n.type,s=i.canPlayType(o);s=""===s?"no":s;if(URL){var r=URL.createObjectURL(n);i.src=r,i.autoPlay=!0}}return e}()},{}],17:[function(e,t){t.exports=function(){function t(e){console.log("[Picture] constructor"),i=this,this.imgSrc=e,this.imgSrc||(this.imgSrc=""),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support")}var i,n=e("./PictureEdit");return t.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};if(this.imgSrc){i.imgSrc="statics/"+this.imgSrc+".png";var n=t(i);return $(n)}},t.prototype.edit=function(e,t){console.log("[Picture] edit"),this.$el=e,this.elementId=t;var o=new n(this.$el,this.imgSrc,t);this.$el.find("#"+t).append(o),this.imgInputs=this.$el.find("#"+t+" >.input-picture"),this.imgInputs.change(function(){var e=this.files[0];i.createThumb(e)})},t.prototype.createThumb=function(e){console.log("[Picture] createThumb");var t=new FileReader;t.onload=function(e){console.log("loaded");var t=i.$el.find("#"+i.elementId+" >.picture .image-preview");t.attr("src",e.target.result),i.confirm(e.target.result)},t.readAsDataURL(e)},t.prototype.confirm=function(e){console.log("[Picture] confirm"),this.imgSrc=this.$el.find("#"+this.elementId+" .input-picture").val(),bean.fire(this,"image-changed",e),this.endEdit()},t.prototype.endEdit=function(){console.log("[Picture] endEdit"),this.$el.find("#"+this.elementId+" > .input-picture").remove()},t}()},{"./PictureEdit":18}],18:[function(e,t){t.exports=function(){function e(e,t){console.log("[PictureEdit] constructor"),this.$el=e;var i=$("#picture-edit-template").text(),n=Handlebars.compile(i),o={};o.txt=t;var s=n(o);return $(s)}return e}()},{}],19:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":20}],20:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRGF0YUhhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9FZGl0TWVudS5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9FbGVtZW50UGlja2VyLmpzIiwianMvc3JjL2NsYXNzZXMvT3ZlcnZpZXcuanMiLCJqcy9zcmMvY2xhc3Nlcy9PdmVydmlld0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9PdmVydmlld0hhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9QYXJ0aWNpcGFudC5qcyIsImpzL3NyYy9jbGFzc2VzL1Byb2ZpbGUuanMiLCJqcy9zcmMvY2xhc3Nlcy9Vc2VySGFuZGxlci5qcyIsImpzL3NyYy9jbGFzc2VzL1doaXRlYm9hcmQuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkU2V0dGluZ3MuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Nb3Rpb24uanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Nb3Rpb25FZGl0LmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUGljdHVyZS5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1BpY3R1cmVFZGl0LmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUG9zdGl0LmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUG9zdGl0RWRpdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsR0FBQSxHQUFBLGtCQUFBLFVBQUEsT0FBQSxLQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsR0FBQSxHQUFBLE9BQUEsdUJBQUEsRUFBQSxJQUFBLE1BQUEsR0FBQSxLQUFBLG1CQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxXQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsRUFBQSxRQUFBLFNBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsR0FBQSxHQUFBLGtCQUFBLFVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxPQUFBLEtBQUEsR0FBQSxTQUFBLElDQUEsV0FNQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsZUFOQSxDQUFBLEdBQ0EsSUFEQSxFQUFBLHFCQUNBLEVBQUEsaUJBQ0EsR0FBQSxzQkFVQSw0RkNiQSxFQUFBLFFBQUEsV0FPQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxhQUFBLEVBQ0EsS0FBQSxPQUFBLFVBQUEsV0FDQSxLQUFBLEVBQUEsRUFDQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLEtBQUEsWUFBQSxHQUFBLEdBQ0EsS0FBQSxXQUFBLEdBQUEsR0FBQSxLQUFBLEtBQ0EsS0FBQSxjQUFBLEdBQUEsR0FBQSxLQUFBLEtBRUEsS0FBQSxHQUFBLEtBQUEsWUFBQSxlQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFdBQUEscUJBQUEsS0FBQSx5QkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsY0FBQSx5QkFBQSxLQUFBLDRCQUFBLEtBQUEsT0FFQSxLQUFBLGFBcEJBLEdBQUEsR0FBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEVBQUEsZ0JBa0ZBLE9BOURBLEdBQUEsVUFBQSx5QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGtDQUNBLEtBQUEsY0FBQSxnQkFDQSxLQUFBLGNBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsU0FBQSxHQUdBLEVBQUEsVUFBQSw0QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHFDQUNBLEtBQUEsY0FBQSxlQUNBLElBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxTQUNBLE1BQUEsV0FBQSxFQUFBLEVBQUEsV0FDQSxLQUFBLEdBQUEsRUFBQSxtQkFBQSxLQUFBLHVCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsRUFBQSxnQkFBQSxLQUFBLG9CQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsV0FBQSxXQUFBLFFBQUEsSUFBQSxtQkFDQSxLQUFBLEdBQUEsS0FBQSxNQUFBLE1BQ0EsS0FBQSxZQUFBLGtCQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsZUFJQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSwwQkFDQSxLQUFBLFdBQUEsSUFHQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLG1CQUNBLElBQUEsR0FBQSxDQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsQ0FDQSxRQUFBLElBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsUUFDQSxJQUNBLEdBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxLQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsWUFDQSxFQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLFFBQ0EsRUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxNQUFBLEdBQUEsRUFBQSxpQkFBQSxLQUFBLGNBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLGVBQUEsS0FBQSxZQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsRUFBQSxtQkFBQSxLQUFBLHVCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsRUFBQSxnQkFBQSxLQUFBLG9CQUFBLEtBQUEsU0FJQSxFQUFBLFVBQUEsb0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLFlBQUEsWUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxLQUFBLGVBR0EsRUFBQSxVQUFBLFlBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLFlBQUEsWUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxLQUFBLGVBR0EsRUFBQSxVQUFBLGNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLFlBQUEsbUJBQUEsRUFBQSxZQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxZQUFBLGdCQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsS0FBQSxlQUdBLEVBQUEsVUFBQSx1QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsWUFBQSxlQUFBLEVBQUEsWUFBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLElBQUEsUUFBQSxFQUFBLFFBQUEsSUFBQSxPQUFBLEtBQUEsZUFFQSxnR0N2RkEsRUFBQSxRQUFBLFdBRUEsUUFBQSxLQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsaUVBQ0EsRUFBQSxLQUNBLEtBQUEsYUFKQSxHQUFBLEVBK0lBLE9BeElBLEdBQUEsVUFBQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxNQURBLFNBQUEsSUFBQSxtQ0FDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxPQUFBLEdBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsS0FBQSxLQUFBLEVBQUEsZ0JBQUEsUUFNQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxFQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsb0NBQ0EsR0FDQSxJQUFBLFVBQ0EsS0FBQSxrQkFBQSxVQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxVQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxTQUFBLEtBS0EsRUFBQSxVQUFBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxXQUFBLEVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLGFBQUEsT0FNQSxFQUFBLFVBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGlDQUNBLEdBQ0EsSUFBQSxVQUNBLEtBQUEsV0FBQSxVQUFBLEVBQUEsRUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsV0FBQSxVQUFBLEVBQUEsRUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsV0FBQSxTQUFBLEtBS0EsRUFBQSxVQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxPQUNBLE1BQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLGFBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxTQUNBLFFBQUEsSUFBQSxPQUtBLEVBQUEsVUFBQSxlQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGlDQUNBLEdBQ0EsSUFBQSxVQUNBLEtBQUEsWUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxZQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFlBQUEsU0FBQSxLQUtBLEVBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxtQkFDQSxNQUFBLGNBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxTQUNBLFFBQUEsSUFBQSxPQUtBLEVBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSw2QkFDQSxHQUNBLElBQUEsVUFDQSxLQUFBLFdBQUEsVUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFdBQUEsVUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFlBQUEsU0FBQSxLQUtBLEVBQUEsVUFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsa0JBQ0EsTUFBQSxjQUFBLEVBQUEsWUFBQSxFQUFBLFFBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxTQUNBLFFBQUEsSUFBQSxPQUtBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLDhCQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsV0FDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFNBQUEsR0FDQSxLQUFBLGNBQUEsS0FBQSxJQUNBLEtBQUEsU0FJQSwyQkNoSkEsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMEJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsdUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLEdBQ0EsVUFDQSxTQUFBLFNBQUEsS0FBQSxhQUNBLFNBQUEsT0FBQSxLQUFBLGFBQ0EsU0FBQSxTQUFBLEtBQUEsZ0JBR0EsWUFBQSxlQUFBLFdBQUEsV0FDQSxHQUFBLEdBQUEsV0FBQSxpQkFBQSxLQUFBLFVBQ0EsRUFBQSxXQUFBLGlCQUFBLEtBQUEsS0FFQSxPQUFBLElBQUEsWUFBQSxXQUNBLFVBQUEsRUFBQSxJQUFBLEVBQUEsVUFJQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsR0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxRQUFBLFlBQUEsVUFDQSxLQUFBLGVBQ0EsS0FBQSxnQkEwQkEsTUF2QkEsR0FBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxZQUFBLFVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsZUFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxPQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FDQSxHQURBLFFBQUEsSUFBQSwyQkFDQSxlQUFBLEVBQUEsT0FBQSxVQUNBLEtBQUEsS0FBQSxLQUFBLGdCQUNBLEtBQUEsb0JBQ0EsQ0FDQSxHQUFBLEtBQ0EsR0FBQSxTQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLEtBQUEsaUJBQUEsS0FLQSwyQkNyREEsRUFBQSxRQUFBLFdBUUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsRUFDQSxRQUFBLElBQUEsaUJBQUEsR0FDQSxLQUFBLFFBQUEsRUFDQSxLQUFBLFlBQUEsRUFDQSxLQUFBLFVBQUEsRUFFQSxLQUFBLFVBREEsS0FBQSxVQUNBLEVBRUEsS0FBQSxlQUVBLEtBQUEsU0FBQSxFQUNBLElBQ0EsS0FBQSxHQUFBLEdBRUEsS0FBQSxzQkFyQkEsR0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxzQkFDQSxFQUFBLEVBQUEsb0JBeUtBLE9BckpBLEdBQUEsVUFBQSxvQkFBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLElBQUEsS0FBQSxlQUFBLE9BQUEsOENBQ0EsS0FBQSxJQUFBLEtBQUEsZ0NBQUEsS0FBQSxLQUFBLEtBQUEsVUFDQSxJQUFBLEtBQ0EsR0FBQSxJQUFBLEtBQUEsU0FBQSxLQUNBLEVBQUEsS0FBQSxLQUFBLFNBQUEsS0FDQSxFQUFBLE9BQUEsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLEdBQ0EsS0FBQSxpQkFDQSxLQUFBLGlCQUdBLEVBQUEsVUFBQSxjQUFBLFdBQ0EsT0FEQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxhQUNBLElBQUEsVUFDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsU0FDQSxLQUFBLFFBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsaUJBRUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsZ0JBQ0EsS0FBQSxRQUFBLEtBQUEsS0FBQSxJQUFBLEtBQUEsV0FDQSxLQUFBLFNBQUEsaUJBRUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsS0FBQSxXQUNBLEtBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxpQkFDQSxLQUFBLEdBQUEsS0FBQSxRQUFBLGdCQUFBLEtBQUEsb0JBQUEsS0FBQSxTQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGlCQUNBLEtBQUEsUUFBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsS0FBQSxHQUFBLEtBQUEsUUFBQSxnQkFBQSxLQUFBLG9CQUFBLEtBQUEsT0FDQSxLQUFBLFNBQUEsaUJBRUEsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsUUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLGNBS0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEseUJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsR0FBQSxZQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsV0FBQSxHQUdBLEVBQUEsVUFBQSxvQkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLElBQUEsS0FDQSxHQUFBLFFBQUEsRUFDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsWUFBQSxLQUFBLFlBQ0EsS0FBQSxLQUFBLEtBQUEsZ0JBQUEsSUFHQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw4QkFDQSxNQUFBLE9BQUEsS0FBQSxLQUFBLFlBQ0EsS0FBQSxXQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsUUFDQSxLQUFBLFdBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxPQUNBLEtBQUEsa0JBQUEsS0FBQSxpQkFBQSxLQUFBLE1BQ0EsS0FBQSxnQkFBQSxLQUFBLGVBQUEsS0FBQSxNQUNBLEtBQUEsUUFBQSxFQUFBLFFBQ0EsS0FBQSxRQUFBLEVBQUEsVUFDQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsU0FBQSxHQUNBLFNBQUEsS0FBQSxpQkFBQSxZQUFBLEtBQUEsbUJBQ0EsU0FBQSxLQUFBLGlCQUFBLFVBQUEsS0FBQSxtQkFJQSxFQUFBLFVBQUEsZUFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLFNBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsS0FBQSxHQUFBLEtBQUEsU0FBQSxlQUFBLEtBQUEsbUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFNBQUEsaUJBQUEsS0FBQSxxQkFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLG1CQUFBLFdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsUUFBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFlBR0EsRUFBQSxVQUFBLHFCQUFBLFNBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSxrQ0FDQSxFQUFBLFVBQ0EsSUFBQSxTQUNBLEtBQUEsU0FBQSxnQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsV0FBQSxRQUNBLElBQUEsS0FDQSxHQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsWUFBQSxLQUFBLFlBQ0EsS0FBQSxLQUFBLEtBQUEsaUJBQUEsRUFDQSxNQUNBLEtBQUEsT0FDQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsZ0JBQ0EsS0FDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxRQUFBLEtBQUEsUUFBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLGVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsa0JBS0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FDQSxHQURBLFFBQUEsSUFBQSw4QkFDQSxLQUFBLGFBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUNBLE1BQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLFdBSUEsRUFBQSxVQUFBLGVBQUEsU0FBQSxHQUtBLEdBTEEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsV0FBQSxFQUNBLFNBQUEsS0FBQSxvQkFBQSxZQUFBLEtBQUEsbUJBQ0EsU0FBQSxLQUFBLG9CQUFBLFVBQUEsS0FBQSxpQkFFQSxLQUFBLGFBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxRQUFBLEtBQUEsY0FBQSxFQUFBLEVBQUEsUUFBQSxJQUFBLFFBQUEsQ0FDQSxHQUFBLEtBQ0EsR0FBQSxRQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxLQUFBLFlBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxtQkFBQSxLQUlBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHlCQUNBLElBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxrQkFDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxHQUdBLE9BREEsR0FBQSxLQUFBLFNBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxJQUNBLE9BQUEsT0FBQSxFQUFBLElBQUEsR0FFQSxNQUFBLEtBSUEsK0dDL0tBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwrQkFDQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSw0QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsR0FDQSxXQUNBLFFBQUEsVUFBQSxLQUFBLFlBQ0EsUUFBQSxTQUFBLEtBQUEsVUFDQSxRQUFBLFNBQUEsS0FBQSxVQUdBLFlBQUEsZUFBQSxTQUFBLFdBQ0EsR0FBQSxHQUFBLFdBQUEsaUJBQUEsS0FBQSxTQUNBLEVBQUEsV0FBQSxpQkFBQSxLQUFBLEtBRUEsT0FBQSxJQUFBLFlBQUEsV0FDQSxVQUFBLEVBQUEsSUFBQSxFQUFBLFVBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxlQUFBLE9BQUEsRUFBQSxJQUNBLEtBQUEsZ0JBQ0EsS0FBQSxjQXVCQSxNQXBCQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLFlBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDhCQUNBLElBQUEsSUFDQSxJQUFBLEVBQ0EsS0FBQSxFQUVBLE1BQUEsSUFBQSxLQUFBLG1CQUFBLElBQUEsSUFHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSwrQkFDQSxLQUFBLElBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsS0FBQSxLQUFBLHlCQUFBLEVBQUEsT0FBQSxLQUdBLDJCQ2pEQSxFQUFBLFFBQUEsV0FNQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsMEJBQ0EsS0FBQSxJQUFBLEVBRUEsS0FBQSxnQkFBQSxHQUFBLEdBQ0EsS0FBQSxnQkFBQSxlQUVBLEtBQUEsR0FBQSxLQUFBLGdCQUFBLGVBQUEsS0FBQSxlQUFBLEtBQUEsT0FDQSxFQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsS0FBQSxjQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxnQkFBQSxrQkFBQSxLQUFBLGVBQUEsS0FBQSxPQVpBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxvQkErQ0EsT0FoQ0EsR0FBQSxVQUFBLGVBQUEsU0FBQSxHQUtBLElBTEEsUUFBQSxJQUFBLHdCQUNBLEtBQUEsYUFDQSxFQUFBLGtCQUFBLFNBQ0EsUUFBQSxJQUFBLEdBQ0EsS0FBQSxVQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFVBQUEsR0FBQSxPQUFBLElBQ0EsS0FBQSxnQkFBQSxHQUFBLEdBQUEsS0FBQSxVQUFBLEdBQUEsSUFDQSxLQUFBLEdBQUEsS0FBQSxnQkFBQSxvQkFBQSxLQUFBLGlCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxnQkFB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SUFBQSwwQkFDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLE1BQUEsUUFBQSxXQUNBLElBQUEsS0FBQSxJQUFBLGtCQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsb0JBQUEsSUFDQSxLQUFBLEtBQUEsS0FBQSxjQUFBLEtBQ0EsS0FBQSxTQUdBLDRCQzVCQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxtQkFDQSxLQUFBLHdCQUxBLEdBQUEsR0FBQSxFQUFBLHVCQWdDQSxPQXhCQSxHQUFBLFVBQUEsaUJBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxNQUFBLEtBQUEsSUFBQSxPQUFBLCtCQUNBLEtBQUEsZUFHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLE1BQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxTQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLFNBQUEsSUFDQSxJQUNBLEdBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUNBLGVBQUEsRUFBQSxPQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEscUJBQUEsSUFJQSxFQUFBLFVBQUEsc0JBQUEsV0FBQSxRQUFBLElBQUEsc0NBQ0EsS0FBQSxtQkFBQSxHQUFBLEdBQUEsS0FBQSxNQUdBLHFEQ2xDQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLG9DQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsY0FBQSxFQUNBLEtBQUEsT0FBQSxDQUVBLElBQUEsR0FBQSxFQUFBLHNCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUVBLEdBQUEsTUFEQSxLQUFBLE9BQ0EsRUFFQSxVQUdBLElBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxjQUFBLE9BQUEsRUFBQSxJQUVBLEtBQUEsY0FwQkEsR0FBQSxHQUFBLEVBQUEsZ0JBaURBLE9BMUJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLHNDQUNBLEtBQUEsSUFBQSxLQUFBLFNBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLFNBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLG9DQUNBLEtBQUEsSUFBQSxLQUFBLGdCQUFBLEdBQUEsUUFBQSxLQUFBLG9CQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsS0FBQSxvQkFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsS0FBQSxrQkFBQSxLQUFBLFFBRUEsRUFBQSxVQUFBLGtCQUFBLFdBQUEsUUFBQSxJQUFBLDBDQUNBLEtBQUEsWUFBQSxHQUFBLEdBQUEsS0FBQSxLQUNBLEtBQUEsR0FBQSxLQUFBLFlBQUEsU0FBQSxLQUFBLGtCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsb0JBQUEsV0FBQSxRQUFBLElBQUEsNENBQ0EsS0FBQSxJQUFBLEtBQUEsaUJBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLGdCQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsa0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx5Q0FDQSxJQUFBLEdBQUEsU0FBQSxjQUFBLG9CQUNBLEdBQUEsWUFBQSxJQUlBLDhDQ2xEQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsd0JBQ0EsS0FBQSxJQUFBLEVBQ0EsSUFDQSxLQUFBLE9BQUEsR0FOQSxHQUFBLEdBQUEsRUFBQSxlQTRDQSxPQWxDQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx1QkFDQSxJQUFBLEdBQUEsRUFBQSxvQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFHQSxHQUFBLE9BREEsS0FBQSxPQUNBLEtBQUEsT0FFQSxFQUdBLElBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxvQkFBQSxPQUFBLEVBQUEsS0FJQSxFQUFBLFVBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsaUJBRUEsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEtBQUEsT0FBQSxLQUlBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsT0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxpQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxtQkFBQSxVQUlBLDZDQzdDQSxFQUFBLFFBQUEsV0FFQSxRQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxJQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUdBLE9BRkEsWUFBQSxXQUFBLEVBQUEsSUFDQSxLQUNBLEVBQUEsR0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsSUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLHVCQUFBLEVBQ0EsR0FBQSxpQkFBQSxTQUFBLEdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLElBQUEsR0FBQSxFQUFBLE9BQUEsV0FBQSxHQUNBLEVBQUEsU0FBQSxjQUFBLElBQUEsRUFBQSxzQkFDQSxFQUFBLEtBQUEsTUFBQSxHQUNBLEVBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxZQUFBLEVBQ0EsR0FBQSxLQUFBLEVBQUEsS0FBQSxDQUlBLElBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxJQUFBLGdCQUFBLEVBQ0EsR0FBQSxJQUFBLEVBQ0EsRUFBQSxVQUFBLEdBSUEsTUFBQSw2QkNwQ0EsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLHlCQUNBLEVBQUEsS0FDQSxLQUFBLE9BQUEsRUFDQSxLQUFBLFNBQ0EsS0FBQSxPQUFBLElBR0EsT0FBQSxNQUNBLE9BQUEsWUFDQSxPQUFBLFVBQ0EsT0FBQSxNQUVBLFFBQUEsSUFBQSxxQkFkQSxHQUNBLEdBREEsRUFBQSxFQUFBLGdCQTZEQSxPQTNDQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsRUFBQSxxQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxJQUFBLEtBQUEsT0FBQSxDQUNBLEVBQUEsT0FBQSxXQUFBLEtBQUEsT0FBQSxNQUNBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLEtBSUEsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGtCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsT0FBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxPQUFBLEdBQ0EsS0FBQSxVQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxvQkFDQSxLQUFBLFVBQUEsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLE1BQUEsRUFDQSxHQUFBLFlBQUEsTUFJQSxFQUFBLFVBQUEsWUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHdCQUNBLElBQUEsR0FBQSxHQUFBLFdBQ0EsR0FBQSxPQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFVBQUEsNEJBQ0EsR0FBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLFFBQ0EsRUFBQSxRQUFBLEVBQUEsT0FBQSxTQUVBLEVBQUEsY0FBQSxJQUdBLEVBQUEsVUFBQSxRQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxPQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLE1BQ0EsS0FBQSxLQUFBLEtBQUEsZ0JBQUEsR0FDQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEscUJBQUEsVUFHQSw4Q0M5REEsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsMEJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsR0FHQSxNQUFBLDZCQ1pBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLE1BQ0EsS0FBQSxJQUFBLGlCQUxBLEdBQUEsR0FBQSxFQUFBLGVBb0NBLE9BM0JBLEdBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHdCQUNBLElBQUEsR0FBQSxFQUFBLG9CQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUNBLEdBQUEsSUFBQSxLQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsSUFHQSxFQUFBLFVBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsaUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLGtCQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsS0FBQSxPQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxpQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxTQUFBLFVBQUEsS0FBQSxLQUFBLEtBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsbUJBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxZQUFBLFdBR0EsNkNDdENBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxJQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUVBLE9BQUEsR0FBQSxHQUlBLE1BQUEiLCJmaWxlIjoic2NyaXB0LmRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpe1xuXHR2YXIgUHJvZmlsZSA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9Qcm9maWxlJyk7XG5cdHZhciBBcHAgPSByZXF1aXJlKCcuL2NsYXNzZXMvQXBwJyk7XG5cdHZhciBPdmVydmlldyA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9PdmVydmlldycpO1xuXG5cblx0ZnVuY3Rpb24gaW5pdCgpwqB7XG5cdFx0bmV3IEFwcCgkKCcjY29udGFpbmVyJykpO1xuXHRcdC8vbmV3IFByb2ZpbGUoJCgnI2NvbnRhaW5lcicpKTtcdFx0XG5cdFx0Ly9uZXcgT3ZlcnZpZXcoJCgnI2NvbnRhaW5lcicpKTtcblxuXHR9XG5cblx0aW5pdCgpO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmQgPSByZXF1aXJlKCcuL1doaXRlYm9hcmQnKTtcblx0dmFyIEVsZW1lbnRQaWNrZXIgPSByZXF1aXJlKCcuL0VsZW1lbnRQaWNrZXInKTtcblx0dmFyIEVsZW1lbnQgPSByZXF1aXJlKCcuL0VsZW1lbnQnKTtcblx0dmFyIERhdGFIYW5kbGVyID0gcmVxdWlyZSgnLi9EYXRhSGFuZGxlcicpO1xuXG5cdGZ1bmN0aW9uIEFwcCgkZWwpIHsgY29uc29sZS5sb2coJ1tBcHBdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy53aGl0ZWJvYXJkSWQgPSAxO1xuXHRcdHRoaXMudHlwZXMgPSBbJ3Bvc3RpdHMnLCAnc3RhdGljcyddO1xuXHRcdHRoaXMuaSA9IDA7XG5cdFx0dGhpcy5lbGVtZW50TGlzdCA9IFtdO1xuXHRcdHRoaXMucG9zaXRpb24gPSB7fTtcblx0XHR0aGlzLmRhdGFIYW5kbGVyID0gbmV3IERhdGFIYW5kbGVyKCk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkID0gbmV3IFdoaXRlYm9hcmQodGhpcy4kZWwpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlciA9IG5ldyBFbGVtZW50UGlja2VyKHRoaXMuJGVsKTtcblx0XHQvL0xVSVNURVJFTlxuXHRcdGJlYW4ub24odGhpcy5kYXRhSGFuZGxlciwgXCJkYXRhLXN1Y2Nlc3NcIiwgdGhpcy5hZGRUb0VsZW1lbnRMaXN0LmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24odGhpcy53aGl0ZWJvYXJkLCBcIndoaXRlYm9hcmQtY2xpY2tlZFwiLCB0aGlzLndoaXRlYm9hcmRDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMuZWxlbWVudFBpY2tlciwgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIHRoaXMuZWxlbWVudFBpY2tlckNsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdC8vVUlUVk9FUkVOXG5cdFx0dGhpcy5idWlsZEJvYXJkKCk7XG5cdH1cblxuXHRBcHAucHJvdG90eXBlLndoaXRlYm9hcmRDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHdoaXRlYm9hcmRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci50b2dnbGVWaXNpYmxlKCk7XG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnNldExvY2F0aW9uKGV2ZW50LnhQb3MsIGV2ZW50LnlQb3MpO1xuXHRcdHRoaXMucG9zaXRpb24gPSBldmVudDtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlcicpOyBcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHZhciBlbGVtZW50ID0gbmV3IEVsZW1lbnQodGhpcy4kZWwsZXZlbnQsdGhpcy5wb3NpdGlvbik7XG5cdFx0dGhpcy5uZXdFbGVtZW50KGV2ZW50LCBlbGVtZW50LmVsZW1lbnRJZCk7XG5cdFx0YmVhbi5vbihlbGVtZW50LCBcInBvc2l0aW9uLWNoYW5nZWRcIiwgdGhpcy5wb3NpdGlvbkNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24oZWxlbWVudCwgXCJpbWFnZS1jaGFuZ2VkXCIsIHRoaXMuaW1hZ2VDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmJ1aWxkQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYnVpbGRCb2FyZCcpO1xuXHRcdGZvcih2YXIgdHlwZSBpbiB0aGlzLnR5cGVzKSB7XG4gIFx0XHRcdHRoaXMuZGF0YUhhbmRsZXIubG9hZEJvYXJkRWxlbWVudHModGhpcy50eXBlc1t0eXBlXSx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9FbGVtZW50TGlzdCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGFkZFRvRWxlbWVudExpc3QnKTtcblx0XHR0aGlzLmFkZFRvQm9hcmQoZXZlbnQpO1xuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9Cb2FyZCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGFkZFRvQm9hcmQnKTsgXG5cdFx0dmFyIGxpc3QgPSBldmVudDtcblx0XHRmb3IodmFyIGVsZW1lbnRJdGVtIGluIGxpc3QpIHtcblx0XHRcdGNvbnNvbGUubG9nKGxpc3RbZWxlbWVudEl0ZW1dKTtcbiAgXHRcdFx0dmFyIHR5cGUgPSBsaXN0W2VsZW1lbnRJdGVtXS5lbF90eXBlO1xuICBcdFx0XHR2YXIgcG9zaXRpb24gPSB7fTtcbiAgXHRcdFx0cG9zaXRpb24ueVBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRJdGVtXS5wb3N5KTtcbiAgXHRcdFx0cG9zaXRpb24ueFBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRJdGVtXS5wb3N4KTtcbiAgXHRcdFx0dmFyIGVsZW1lbnRJZCA9IGxpc3RbZWxlbWVudEl0ZW1dLmlkX29uX2JvYXJkO1xuICBcdFx0XHR2YXIgaWQgPSBsaXN0W2VsZW1lbnRJdGVtXS5pZDtcbiAgXHRcdFx0dmFyIGNvbnRlbnQgPSBsaXN0W2VsZW1lbnRJdGVtXS5jb250ZW50O1xuICBcdFx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLHR5cGUscG9zaXRpb24sZWxlbWVudElkLGNvbnRlbnQsaWQpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicmVtb3ZlLWNsaWNrZWRcIiwgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwiZWRpdC1jbGlja2VkXCIsIHRoaXMuZWRpdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIFx0XHRcdGJlYW4ub24oZWxlbWVudCwgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIHRoaXMucG9zaXRpb25DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgXHRcdFx0YmVhbi5vbihlbGVtZW50LCBcImltYWdlLWNoYW5nZWRcIiwgdGhpcy5pbWFnZUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdH1cblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmltYWdlQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBpbWFnZUNoYW5nZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5kYXRhSGFuZGxlci5lZGl0Q29udGVudChldmVudC5lbGVtZW50VHlwZSxldmVudC5lbGVtZW50SWQsZXZlbnQuY29udGVudCx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lZGl0SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGVkaXRIYW5kbGVyJyk7XG5cdFx0dGhpcy5kYXRhSGFuZGxlci5lZGl0Q29udGVudChldmVudC5lbGVtZW50VHlwZSxldmVudC5lbGVtZW50SWQsZXZlbnQuY29udGVudCx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5yZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gcmVtb3ZlSGFuZGxlcicpOyBcblx0XHR0aGlzLmRhdGFIYW5kbGVyLnJlbW92ZUJvYXJkRWxlbWVudChldmVudC5lbGVtZW50VHlwZSwgZXZlbnQuaWQpO1xuXHR9O1xuXHRcblx0QXBwLnByb3RvdHlwZS5uZXdFbGVtZW50ID0gZnVuY3Rpb24odHlwZSxpZE9uQm9hcmQpeyBjb25zb2xlLmxvZygnW0FwcF0gbmV3RWxlbWVudEhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5uZXdCb2FyZEVsZW1lbnQodHlwZSxpZE9uQm9hcmQsdGhpcy5wb3NpdGlvbix0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5wb3NpdGlvbkNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gcG9zaXRpb25DaGFuZ2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZGF0YUhhbmRsZXIucG9zaXRpb25DaGFuZ2UoZXZlbnQuZWxlbWVudFR5cGUsZXZlbnQuZWxlbWVudElkLGV2ZW50LmVUYXJnZXQuY3NzKCdsZWZ0JyksZXZlbnQuZVRhcmdldC5jc3MoJ3RvcCcpLHRoaXMud2hpdGVib2FyZElkKTtcblx0fTtcblx0cmV0dXJuIEFwcDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgdGhhdDtcblx0ZnVuY3Rpb24gRGF0YUhhbmRsZXIoKSB7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy51cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODg4OC9jcDMvd2hpdGVib2FyZC93aGl0ZWJvYXJkL2FwaS9pbmRleC5waHAvXCI7XG5cdFx0dGhhdCA9IHRoaXM7XG5cdFx0dGhpcy5ib2FyZExpc3QgPSBbXTtcblx0fVxuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5sb2FkQm9hcmRFbGVtZW50cyA9IGZ1bmN0aW9uKHR5cGUsd2hpdGVib2FyZElkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gbG9hZEJvYXJkRWxlbWVudHMnKTtcblx0XHRyZXR1cm4gJC5hamF4KHtcblx0ICBcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG5cdCAgXHRcdFx0XHR1cmw6IHRoaXMudXJsK3R5cGUrJy8nK1N0cmluZyh3aGl0ZWJvYXJkSWQpLFxuXHQgIFx0XHRcdFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdCAgXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0ICBcdFx0XHRcdFx0YmVhbi5maXJlKHRoYXQsIFwiZGF0YS1zdWNjZXNzXCIsIFtkYXRhXSk7XG5cdCAgXHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHR9O1xuXG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUJvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gcmVtb3ZlQm9hcmRFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKGVsZW1lbnRUeXBlKSB7XG5cdFx0ICAgIGNhc2UgXCJwb3N0LWl0XCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgncG9zdGl0cycsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdzdGF0aWNzJyxpZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICBcdHRoaXMucmVtb3ZlRWxlbWVudEJ5SWQoJ21vdGlvbicsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5yZW1vdmVFbGVtZW50QnlJZCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkKXsgXG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJHRVRcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtlbGVtZW50VHlwZSsnL2RlbGV0ZS8nK2lkLFxuXHQgIFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coXCJkZWxldGVkID0gXCIrZGF0YSk7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5uZXdCb2FyZEVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZF9vbl9ib2FyZCxwb3NpdGlvbix3aGl0ZWJvYXJkSWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBuZXdCb2FyZEVsZW1lbnQnKTtcblx0XHRzd2l0Y2goZWxlbWVudFR5cGUpIHtcblx0XHQgICAgY2FzZSBcInBvc3QtaXRcIjpcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ3Bvc3RpdHMnLGlkX29uX2JvYXJkLCBwb3NpdGlvbiwgd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwic3RhdGljXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdFbGVtZW50KCdzdGF0aWNzJyxpZF9vbl9ib2FyZCwgcG9zaXRpb24sIHdoaXRlYm9hcmRJZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICBcdHRoaXMubmV3RWxlbWVudCgnbW90aW9uJyx3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5uZXdFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWRfb25fYm9hcmQscG9zaXRpb24sd2hpdGVib2FyZElkKXtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtlbGVtZW50VHlwZSsnL2FkZCcsXG5cdCAgXHRcdGRhdGE6IHtpZF9vbl9ib2FyZDogaWRfb25fYm9hcmQsIHhwb3M6IHBvc2l0aW9uLnhQb3MsIHlwb3M6IHBvc2l0aW9uLnlQb3MsIHdoaXRlYm9hcmRJZDogd2hpdGVib2FyZElkfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzOicsIGRhdGEpO1xuXHQgIFx0XHR9LFxuXHQgIFx0XHRlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUucG9zaXRpb25DaGFuZ2UgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZF9vbl9ib2FyZCx4cG9zLHlwb3Msd2hpdGVib2FyZElkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gbmV3Qm9hcmRFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKGVsZW1lbnRUeXBlKSB7XG5cdFx0ICAgIGNhc2UgXCJwb3N0LWl0XCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdQb3NpdGlvbigncG9zdGl0cycsaWRfb25fYm9hcmQsIHhwb3MsIHlwb3Msd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwic3RhdGljXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdQb3NpdGlvbignc3RhdGljcycsaWRfb25fYm9hcmQsIHhwb3MsIHlwb3Msd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdQb3NpdGlvbignbW90aW9uJyx3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5uZXdQb3NpdGlvbiA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHhwb3MseXBvcyx3aGl0ZWJvYXJkSWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK2VsZW1lbnRUeXBlKycvY2hhbmdlL3Bvc2l0aW9uJyxcblx0ICBcdFx0ZGF0YToge3doaXRlYm9hcmRfaWQ6IHdoaXRlYm9hcmRJZCxpZF9vbl9ib2FyZDogaWRfb25fYm9hcmQsIHhwb3M6IHhwb3MsIHlwb3M6IHlwb3N9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3M6JywgZGF0YSk7XG5cdCAgXHRcdH0sXG5cdCAgXHRcdGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5lZGl0Q29udGVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLGNvbnRlbnQsd2hpdGVib2FyZElkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZWRpdENvbnRlbnQnKTtcblx0XHRzd2l0Y2goZWxlbWVudFR5cGUpIHtcblx0XHQgICAgY2FzZSBcInBvc3QtaXRcIjpcblx0XHQgICAgXHR0aGlzLm5ld0NvbnRlbnQoJ3Bvc3RpdHMnLGlkX29uX2JvYXJkLGNvbnRlbnQsd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwic3RhdGljXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdDb250ZW50KCdzdGF0aWNzJyxpZF9vbl9ib2FyZCxjb250ZW50LHdoaXRlYm9hcmRJZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICBcdHRoaXMubmV3UG9zaXRpb24oJ21vdGlvbicsd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUubmV3Q29udGVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLGNvbnRlbnQsd2hpdGVib2FyZElkKXtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtlbGVtZW50VHlwZSsnL2NoYW5nZS9jb250ZW50Jyxcblx0ICBcdFx0ZGF0YToge3doaXRlYm9hcmRfaWQ6IHdoaXRlYm9hcmRJZCxpZF9vbl9ib2FyZDogaWRfb25fYm9hcmQsIGNvbnRlbnQ6IGNvbnRlbnR9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3M6JywgZGF0YSk7XG5cdCAgXHRcdH0sXG5cdCAgXHRcdGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0ICBcdFx0fVxuXHQgIFx0fSk7XG5cdCAgfTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUuZ2V0QWxsQm9hcmRzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0QWxsQm9hcmRzJyk7XG5cdFx0ICQuYWpheCh7XG5cdFx0ICBcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ICBcdHVybDogdGhpcy51cmwrJy9ib2FyZHMvJyxcblx0XHQgIFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdFx0ICBcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgXHRcdHRoaXMuYm9hcmRFbGVtZW50cy5wdXNoKGRhdGEpO1xuXHRcdCAgXHR9LmJpbmQodGhpcylcblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4gRGF0YUhhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBFZGl0TWVudSgkZWwsZWxlbWVudElkKSB7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlZGl0LW1lbnUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBhY3Rpb25zOiBbXHRcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJjYW5jZWxcIiwgbmFtZTogXCJhbm51bGVlclwifSxcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJlZGl0XCIsIG5hbWU6IFwid2lqemlnZW5cIn0sXG5cdFx0ICBcdFx0XHR7YWN0aW9uSWQ6IFwicmVtb3ZlXCIsIG5hbWU6IFwidmVyd2lqZGVyZW5cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlZGl0bWVudScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgYWN0aW9uSWQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5hY3Rpb25JZCksXG5cdFx0XHQgICAgICBuYW1lID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMubmFtZSk7XG5cblx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHQgICAgXCI8bGkgaWQ9XCIrYWN0aW9uSWQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQpLmFwcGVuZChodG1sKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVycygpO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHR9XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyA+IHAnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyAuZWRpdC1tZW51JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdEVkaXRNZW51LnByb3RvdHlwZS5iaW5kSGFuZGxlcnMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBiaW5kSGFuZGxlcnMnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFZGl0TWVudS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBjbGlja0hhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSBcImVkaXRCdXR0b25cIil7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJlZGl0LWNsaWNrZWRcIik7XG5cdFx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHR9ZWxzZXtcblx0XHRcdHZhciBhY3Rpb25FdmVudCA9IHt9O1xuICAgXHRcdFx0YWN0aW9uRXZlbnQudGFyZ2V0SWQgPSBldmVudC50YXJnZXQuaWQ7XG4gICBcdFx0XHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcImFjdGlvbi1jbGlja2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHR9XG5cblx0fTtcblxuXHRyZXR1cm4gRWRpdE1lbnU7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgRWRpdE1lbnUgPSByZXF1aXJlKCcuL0VkaXRNZW51Jyk7XG4gICAgdmFyIHpJbmRleENvdW50ZXIgPSAxO1xuXHR2YXIgUG9zdGl0ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9Qb3N0aXQnKTtcblx0dmFyIFBpY3R1cmUgPSByZXF1aXJlKCcuL2VsZW1lbnRzL1BpY3R1cmUnKTtcblx0dmFyIE1vdGlvbiA9IHJlcXVpcmUoJy4vZWxlbWVudHMvTW90aW9uJyk7XG5cblx0ZnVuY3Rpb24gRWxlbWVudCgkZWwsZWxlbWVudFR5cGUscG9zaXRpb24sZWxlbWVudElkLGNvbnRlbnQsaWQpIHsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdGNvbnNvbGUubG9nKFwib2NudGVuZW4gPT09PSBcIitjb250ZW50KTtcblx0XHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdHRoaXMuZWxlbWVudFR5cGUgPSBlbGVtZW50VHlwZTtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHRpZih0aGlzLmVsZW1lbnRJZCl7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR9ZWxzZSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IHRoaXMuc2V0RWxlbWVudElkKCk7XG5cdFx0fVxuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHRpZihpZCl7XG5cdFx0XHR0aGlzLmlkID0gaWQ7XG5cdFx0fVxuXHRcdHRoaXMuY3JlYXRlRWxlbWVudEhvbGRlcigpO1xuXHR9XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudEhvbGRlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWxlbWVudEhvbGRlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoXCI8c2VjdGlvbiBjbGFzcz0nZWxlbWVudC1ob2xkZXInPjwvc2VjdGlvbj5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlcjpsYXN0LW9mLXR5cGVcIikuYXR0cignaWQnLCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge307XG5cdFx0cG9zaXRpb24udG9wID0gdGhpcy5wb3NpdGlvbi55UG9zO1xuXHRcdHBvc2l0aW9uLmxlZnQgPSB0aGlzLnBvc2l0aW9uLnhQb3M7XG5cdFx0cG9zaXRpb24uekluZGV4ID0gMDtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MocG9zaXRpb24pO1xuXHRcdHRoaXMuY3JlYXRlRWRpdE1lbnUoKTtcblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKHRoaXMuZWxlbWVudFR5cGUpIHtcblx0XHRjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQb3N0aXQodGhpcy5jb250ZW50KTtcblx0XHQgICAgXHRpZih0aGlzLmNvbnRlbnQpe1xuXHRcdCAgICBcdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQb3N0aXQoKSk7XG5cdFx0ICAgIFx0fSBlbHNle1xuXHRcdCAgICBcdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQb3N0aXQoKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVsZW1lbnQuZWRpdCh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0fVxuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmFwcGVuZCh0aGlzLmVsZW1lbnQuY3JlYXRlUG9zdGl0KTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0Y2FzZSBcInN0YXRpY1wiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQaWN0dXJlKHRoaXMuY29udGVudCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdGlmKHRoaXMuY29udGVudCl7XG5cdFx0ICAgIFx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBpY3R1cmUoKSk7XG5cdFx0ICAgIFx0XHRiZWFuLm9uKHRoaXMuZWxlbWVudCwgXCJpbWFnZS1jaGFuZ2VkXCIsIHRoaXMuaW1hZ2VDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQgICAgXHR9IGVsc2V7XG5cdFx0ICAgIFx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBpY3R1cmUoKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVsZW1lbnQuZWRpdCh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdFx0YmVhbi5vbih0aGlzLmVsZW1lbnQsIFwiaW1hZ2UtY2hhbmdlZFwiLCB0aGlzLmltYWdlQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHRcdGNhc2UgXCJtb3Rpb25cIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgTW90aW9uKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZU1vdGlvbik7XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigkZWwpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkub24oJ21vdXNlZG93bicsIHRoaXMubW91c2Vkb3duSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmltYWdlQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gaW1hZ2VDaGFuZ2VkSGFuZGxlcicpO1xuXHRcdHZhciBhY3Rpb25FdmVudCA9IHt9O1xuXHRcdGFjdGlvbkV2ZW50LmNvbnRlbnQgPSBldmVudDtcblx0XHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcblx0XHRhY3Rpb25FdmVudC5lbGVtZW50VHlwZSA9IHRoaXMuZWxlbWVudFR5cGU7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiaW1hZ2UtY2hhbmdlZFwiLCBhY3Rpb25FdmVudCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUubW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNlZG93bkhhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuaWQgPT09IHRoaXMuZWxlbWVudElkKXtcbiAgICAgICAgXHR0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgXHRcdHRoaXMuY3VycmVudExlZnQgPSAkKGUudGFyZ2V0KS5jc3MoJ2xlZnQnKTtcbiAgICAgICBcdFx0dGhpcy5jdXJyZW50VG9wID0gJChlLnRhcmdldCkuY3NzKCd0b3AnKTtcbiAgICAgICAgXHR0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5tb3VzZU1vdmVIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIFx0dGhpcy5fbW91c2VVcEhhbmRsZXIgPSB0aGlzLm1vdXNlVXBIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIFx0dGhpcy5vZmZzZXRYID0gZS5vZmZzZXRYO1xuICAgICAgICBcdHRoaXMub2Zmc2V0WSA9IGUub2Zmc2V0WTtcbiAgICAgICAgXHQrK3pJbmRleENvdW50ZXI7XG4gICAgICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCd6SW5kZXgnLCB6SW5kZXhDb3VudGVyKTtcbiAgICAgICAgXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgfVxuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUVkaXRNZW51ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFZGl0TWVudScpO1xuXHRcdHRoaXMuZWRpdE1lbnUgPSBuZXcgRWRpdE1lbnUodGhpcy4kZWwsIHRoaXMuZWxlbWVudElkKTtcblx0XHRiZWFuLm9uKHRoaXMuZWRpdE1lbnUsIFwiZWRpdC1jbGlja2VkXCIsIHRoaXMuZWRpdENsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24odGhpcy5lZGl0TWVudSwgXCJhY3Rpb24tY2xpY2tlZFwiLCB0aGlzLmFjdGlvbkNsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmVkaXRDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gZWRpdENsaWNrZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5lbGVtZW50LmVkaXQodGhpcy4kZWwsIHRoaXMuZWxlbWVudElkKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5hY3Rpb25DbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBhY3Rpb25DbGlja2VkSGFuZGxlcicpO1xuXHRcdHN3aXRjaChldmVudC50YXJnZXRJZCkge1xuXHRcdCAgICBjYXNlIFwicmVtb3ZlXCI6XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZCgnIycrZXZlbnQuZWxlbWVudElkKS5yZW1vdmUoKTtcblx0XHQgICAgXHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcblx0XHQgICAgXHRhY3Rpb25FdmVudC5pZCA9IHRoaXMuaWQ7XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQuZWxlbWVudFR5cGUgPSB0aGlzLmVsZW1lbnRUeXBlO1xuXHRcdCAgICBcdGJlYW4uZmlyZSh0aGlzLCBcInJlbW92ZS1jbGlja2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiZWRpdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudC5jb25maXJtKCk7XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQgPSB7fTtcblx0XHQgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50VHlwZSA9IHRoaXMuZWxlbWVudFR5cGU7XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQuZWxlbWVudElkID0gdGhpcy5lbGVtZW50SWQ7XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQuY29udGVudCA9IHRoaXMuZWxlbWVudC50eHQ7XG5cdFx0ICAgIFx0YmVhbi5maXJlKHRoaXMsIFwiZWRpdC1jbGlja2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiY2FuY2VsXCI6XG5cdFx0ICAgIFx0dGhpcy5lbGVtZW50LmVuZEVkaXQoKTtcblx0XHQgICAgXHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZW1vdmVIYW5kbGVyJyk7XG4gICAgICAgIGlmKHRoaXMubW91c2VEb3duID09PSB0cnVlKXtcbiAgICAgICAgICAgIHZhciBtb3VzZVggPSBwYXJzZUludChlLmNsaWVudFgpO1xuICAgICAgICAgICAgdmFyIG1vdXNlWSA9IHBhcnNlSW50KGUuY2xpZW50WSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MoJ2xlZnQnLCBtb3VzZVggLSB0aGlzLm9mZnNldFgpO1xuICAgICAgICAgICAgdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCd0b3AnLCBtb3VzZVkgLSB0aGlzLm9mZnNldFkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gbW91c2V1cEhhbmRsZXInKTtcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFRvcCAhPT0gJChlLnRhcmdldCkuY3NzKCd0b3AnKSB8fCB0aGlzLmN1cnJlbnRMZWZ0ICE9PSAkKGUudGFyZ2V0KS5jc3MoJ2xlZnQnKSl7XG4gICAgICAgIFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG4gICAgICAgIFx0YWN0aW9uRXZlbnQuZVRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICBcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcbiAgICAgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcbiAgICAgICAgXHRiZWFuLmZpcmUodGhpcywgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIGFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRFbGVtZW50SWQgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBzZXRFbGVtZW50SWQnKTtcbiAgICBcdHZhciBob2xkZXJzID0gdGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlclwiKTtcbiAgICBcdGlmKGhvbGRlcnMubGVuZ3RoID4gMCl7XG4gICAgXHRcdHZhciBpZEhvbGRlciA9W107XG5cdFx0XHRmb3IoaSA9IDA7aSA8IGhvbGRlcnMubGVuZ3RoOyBpKysgKXtcblx0XHRcdFx0aWRIb2xkZXIucHVzaChob2xkZXJzW2ldLmlkKTtcblx0XHRcdH1cblx0XHRcdGlkSG9sZGVyLnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGItYTt9KTtcblx0XHRcdHJldHVybiBTdHJpbmcoTnVtYmVyKGlkSG9sZGVyWzBdKSsxKTtcbiAgICBcdH0gZWxzZXtcbiAgICBcdFx0cmV0dXJuIFwiMFwiO1xuICAgIFx0fVxuXHR9O1xuXG5cdHJldHVybiBFbGVtZW50O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblxuXHRmdW5jdGlvbiBFbGVtZW50UGlja2VyKCRlbCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlbGVtZW50LXBpY2tlci10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHtcblx0XHQgIGVsZW1lbnRzOiBbXHRcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcInBvc3QtaXRcIiwgbmFtZTogXCJwb3N0LWl0XCJ9LFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwic3RhdGljXCIsIG5hbWU6IFwiaW1hZ2VcIn0sXG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJtb3Rpb25cIiwgbmFtZTogXCJ2aWRlb1wifVxuICBcdFx0XHRcdF1cbiAgXHRcdFx0fTtcblx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BpY2tlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgZWxlbWVudCA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLmVsZW1lbnQpLFxuXHRcdFx0ICAgICAgbmFtZSA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLm5hbWUpO1xuXG5cdFx0XHQgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKFxuXHRcdFx0ICAgIFwiPGxpIGlkPVwiK2VsZW1lbnQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLmFwcGVuZCggJChodG1sKSApO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fVxuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIHRvZ2dsZVZpc2libGUnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjZWxlbWVudC1waWNrZXInKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIHNldExvY2F0aW9uJyk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge1xuXHRcdFx0dG9wIDogeVBvcyxcblx0XHRcdGxlZnQgOiB4UG9zXG5cdFx0fTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLmNzcyhwb3NpdGlvbik7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2VsZW1lbnQtcGlja2VyID4gdWwgPiBsaScpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjbGlja0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIGV2ZW50LnRhcmdldC5pZCk7XG5cdH07XG5cblx0cmV0dXJuIEVsZW1lbnRQaWNrZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9BcHAnKTtcblx0dmFyIE92ZXJ2aWV3RWxlbWVudCA9IHJlcXVpcmUoJy4vT3ZlcnZpZXdFbGVtZW50Jyk7XG5cdHZhciBPdmVydmlld0hhbmRsZXIgPSByZXF1aXJlKCcuL092ZXJ2aWV3SGFuZGxlcicpO1xuXG5cdGZ1bmN0aW9uIE92ZXJ2aWV3KCRlbCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSBjb25zdHJ1Y3RvcicpO1xuXHR0aGlzLiRlbCA9ICRlbDtcblx0Ly90aGlzLmJvYXJkTGlzdCA9IFtdO1xuXHR0aGlzLm92ZXJ2aWV3SGFuZGxlciA9IG5ldyBPdmVydmlld0hhbmRsZXIoKTtcblx0dGhpcy5vdmVydmlld0hhbmRsZXIuZ2V0QWxsQm9hcmRzKCk7XG5cblx0YmVhbi5vbih0aGlzLm92ZXJ2aWV3SGFuZGxlciwgXCJkYXRhLXN1Y2Nlc3NcIiwgdGhpcy5hZGRUb0JvYXJkTGlzdC5iaW5kKHRoaXMpKTtcblx0JGVsLmZpbmQoXCIjYWRkUHJvamVjdFwiKS5vbignY2xpY2snLCB0aGlzLm5ld1doaXRlYm9hcmQuYmluZCh0aGlzKSk7XG5cdGJlYW4ub24odGhpcy5vdmVydmlld0hhbmRsZXIsIFwidmlldy13aGl0ZWJvYXJkXCIsIHRoaXMudmlld1doaXRlYm9hcmQuYmluZCh0aGlzKSk7XG5cblx0XG5cdH1cblxuXHRPdmVydmlldy5wcm90b3R5cGUuYWRkVG9Cb2FyZExpc3QgPSBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSBnZXRCb2FyZHMnKTtcblx0XHR0aGlzLmJvYXJkTGlzdCA9IFtdO1xuXHRcdCQoJy5PdmVydmlld1RodW1iJykucmVtb3ZlKCk7XG5cdFx0Y29uc29sZS5sb2coZXZlbnQpO1xuXHRcdHRoaXMuYm9hcmRMaXN0LnB1c2goZXZlbnQpO1xuXHRcdGZvciAoaSA9IDA7IGkgPCAgdGhpcy5ib2FyZExpc3RbMF0ubGVuZ3RoOyBpKyspIHsgXG5cdFx0XHR0aGlzLm92ZXJ2aWV3RWxlbWVudCA9IG5ldyBPdmVydmlld0VsZW1lbnQodGhpcy5ib2FyZExpc3RbMF1baV0pO1xuXHRcdFx0YmVhbi5vbih0aGlzLm92ZXJ2aWV3RWxlbWVudCwgXCJyZW1vdmUtd2hpdGVib2FyZFwiLCB0aGlzLnJlbW92ZVdoaXRlYm9hcmQuYmluZCh0aGlzKSk7XG5cdFx0XHRiZWFuLm9uKHRoaXMub3ZlcnZpZXdFbGVtZW50LCBcInZpZXctd2hpdGVib2FyZFwiLCB0aGlzLnZpZXdXaGl0ZWJvYXJkLmJpbmQodGhpcykpO1xuXHRcdH1cblx0fTtcblxuXHRPdmVydmlldy5wcm90b3R5cGUudmlld1doaXRlYm9hcmQgPSBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSB2aWV3V2hpdGVib2FyZCcpO1xuXHRcdCQoXCIjY29udGFpbmVyXCIpLmh0bWwoXCJcIik7XG5cdFx0bmV3IEFwcCgkKCcjY29udGFpbmVyJyksIGV2ZW50KTtcblxuXHR9O1xuXG5cdE92ZXJ2aWV3LnByb3RvdHlwZS5uZXdXaGl0ZWJvYXJkID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gbmV3V2hpdGVib2FyZCcpO1xuXG5cdFx0Ly9jcmVhdG9ySWQgbm9nIG9wdnJhZ2VuXG5cdFx0dGhpcy5vdmVydmlld0hhbmRsZXIuYWRkV2hpdGVib2FyZChcIlVudGl0bGVkXCIsIFwiMVwiKTtcblx0XHQvL25pZXQgbm9kaWcgYWxzIG92ZXJ2aWV3IGdld2lzdCB3b3JkXG5cdFx0Ly90aGlzLm92ZXJ2aWV3SGFuZGxlci5nZXRBbGxCb2FyZHMoKTtcblx0fTtcblxuXHRPdmVydmlldy5wcm90b3R5cGUucmVtb3ZlV2hpdGVib2FyZCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIHJlbW92ZVdoaXRlYm9hcmQnKTtcblx0XHR0aGlzLm92ZXJ2aWV3SGFuZGxlci5yZW1vdmVCb2FyZChldmVudCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrZXZlbnQpLnJlbW92ZSgpO1xuXHRcdC8vb29rIGFsbGUgcG9zdGl0cyB2ZXJ3aWpkZXJlbi4uLlxuXHR9O1xuXG5cdHJldHVybiBPdmVydmlldztcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9BcHAnKTtcblxuXHRmdW5jdGlvbiBPdmVydmlld0VsZW1lbnQoJGVsKSB7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIGNvbnN0cnVjdG9yJyk7XG5cdHRoaXMuJGVsID0gJGVsO1xuXHR0aGlzLmJvYXJkSWQgPSAkZWwuaWQ7XG5cdHRoaXMuYm9hcmRMaXN0ID0gW107XG5cdHRoaXMuY3JlYXRlT3ZlcnZpZXdUaHVtYigkZWwpO1xuXHR9XG5cblx0T3ZlcnZpZXdFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVPdmVydmlld1RodW1iID0gZnVuY3Rpb24oYm9hcmQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gY3JlYXRlT3ZlcnZpZXdUaHVtYicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjb3ZlcnZpZXdUaHVtYi10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudGl0bGUgPSBib2FyZC50aXRsZTtcblx0XHRjb250ZXh0LmlkID0gYm9hcmQuaWQ7XG5cdFx0Y29udGV4dC5jcmVhdGlvbl9kYXRlID0gYm9hcmQuY3JlYXRpb25fZGF0ZTtcdFx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoJyNjb250YWluZXInKS5hcHBlbmQoJChodG1sKSk7XG5cdFx0dGhpcy5iaW5kSGFuZGxlcihib2FyZC5pZCwgJChodG1sKVswXSk7XG5cdH07XG5cblx0T3ZlcnZpZXdFbGVtZW50LnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKGJvYXJkSWQsIGVsKXsgY29uc29sZS5sb2coJ1tPdmVydmlld10gYmluZEhhbmRsZXInKTtcblx0XHQkKFwiI1wiK2JvYXJkSWQgK1wiID4gLnJlbW92ZVwiKS5vbignY2xpY2snLCB0aGlzLnJlbW92ZUhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0JChcIiNcIitib2FyZElkICtcIiA+IC52aWV3XCIpLm9uKCdjbGljaycsIHRoaXMudmlld0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0T3ZlcnZpZXdFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSByZW1vdmVIYW5kbGVyJyk7XG5cdFx0YmVhbi5maXJlKHRoaXMsICdyZW1vdmUtd2hpdGVib2FyZCcsIHRoaXMuYm9hcmRJZCk7XG5cdH07XG5cblx0T3ZlcnZpZXdFbGVtZW50LnByb3RvdHlwZS52aWV3SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tPdmVydmlld10gdmlld0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgJ3ZpZXctd2hpdGVib2FyZCcsIHRoaXMuYm9hcmRJZCk7XG5cdH07XG5cblx0XG5cblx0cmV0dXJuIE92ZXJ2aWV3RWxlbWVudDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHRmdW5jdGlvbiBPdmVydmlld0hhbmRsZXIoKSB7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXdIYW5kbGVyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMudXJsID0gXCJodHRwOi8vbG9jYWxob3N0L3doaXRlYm9hcmRfMi9hcGkvaW5kZXgucGhwL1wiO1xuXHR9XG5cblxuXHRPdmVydmlld0hhbmRsZXIucHJvdG90eXBlLmdldEFsbEJvYXJkcyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXdIYW5kbGVyXSBnZXRBbGxCb2FyZHMnKTtcblx0XHRyZXR1cm4gJC5hamF4KHtcblx0XHQgIFx0dHlwZTogXCJHRVRcIixcblx0XHQgIFx0dXJsOiB0aGlzLnVybCsnL2JvYXJkcy8nLFxuXHRcdCAgXHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0XHQgIFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwiZGF0YS1zdWNjZXNzXCIsIFtkYXRhXSk7XG5cdFx0ICBcdH0uYmluZCh0aGlzKVxuXHRcdH0pO1xuXHR9O1xuXG5cdE92ZXJ2aWV3SGFuZGxlci5wcm90b3R5cGUucmVtb3ZlQm9hcmQgPSBmdW5jdGlvbihpZCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXdIYW5kbGVyXSByZW1vdmVCb2FyZCcpO1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiR0VUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrJy9ib2FyZHMvJysnZGVsZXRlLycraWQsXG5cdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhcImRlbGV0ZWQgPSBcIitkYXRhKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdE92ZXJ2aWV3SGFuZGxlci5wcm90b3R5cGUuYWRkV2hpdGVib2FyZCA9IGZ1bmN0aW9uKHRpdGxlLCBjcmVhdG9ySWQpe1xuXHRcdHJldHVybiAkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCsnL2JvYXJkcy8nKydhZGQvJyt0aXRsZSsnLycrY3JlYXRvcklkLFxuXHRcdCAgXHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwidmlldy13aGl0ZWJvYXJkIFwiK1tkYXRhLmlkXSk7XG5cdCAgXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwidmlldy13aGl0ZWJvYXJkXCIsIFtkYXRhLmlkXSk7XG5cdCAgXHRcdH0uYmluZCh0aGlzKVxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIE92ZXJ2aWV3SGFuZGxlcjtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFBhcnRpY2lwYW50KCRlbCl7IGNvbnNvbGUubG9nKCdbUGFydGljaXBhbnRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGlucHV0ID0gJGVsLmZpbmQoJy5wYXJ0aWNpcGFudC1pbnB1dCcpO1xuXHRcdGlmKGlucHV0LnZhbCgpKXtcblx0XHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcGFydGljaXBhbnQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0IFx0XHR2YXIgY29udGV4dCA9IHsgcGFydGljaXBhbnRzOiBbe31dfTtcblx0XHRcdFx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncGFydGljaXBhbnQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdFx0ICAgIFwiPGxpIGlkPScnPlwiK2lucHV0LnZhbCgpK1wiPGJ1dHRvbiBjbGFzcz0nYnRuIGRlbGV0ZSc+WDwvYnV0dG9uPjwvbGk+XCJcblx0XHRcdFx0ICApO1xuXHRcdFx0XHR9KTtcblx0XHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0XHR0aGlzLiRlbC5maW5kKFwiI3BhcnRpY2lwYW50LWxpc3RcIikuYXBwZW5kKCQoaHRtbCkpO1xuXHRcdFx0dGhpcy5iaW5kRGVsZXRlYnV0dG9uKCk7XG5cdFx0XHQkKCcucGFydGljaXBhbnQtaW5wdXQnKS52YWwoXCJcIik7XG5cdFx0fVxuXHR9XG5cblx0UGFydGljaXBhbnQucHJvdG90eXBlLmJpbmREZWxldGVidXR0b24gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BhcnRpY2lwYW50XSBiaW5kRGVsZXRlYnV0dG9uJyk7XG5cdFx0dGhpcy5kZWxldGVidXRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tZGVsZXRlJyk7XG5cdFx0dGhpcy5kZWxldGVidXRvblt0aGlzLmRlbGV0ZWJ1dG9uLmxlbmd0aC0xXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZGVsZXRlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFBhcnRpY2lwYW50LnByb3RvdHlwZS5kZWxldGVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKFwiW1BhcnRpY2lwYW50XSBkZWxldGVDbGlja0hhbmRsZXJcIik7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiZGVsZXRlXCIsIGV2ZW50LnBhdGhbMV0pO1xuXHR9O1xuXG5cdHJldHVybiBQYXJ0aWNpcGFudDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgVXNlckhhbmRsZXIgPSByZXF1aXJlKCcuL1VzZXJIYW5kbGVyJyk7XG5cblx0ZnVuY3Rpb24gUHJvZmlsZSgkZWwsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMudXNlciA9ICBbXTtcblx0XHR0aGlzLnVzZXJIYW5kbGVyID0gbmV3IFVzZXJIYW5kbGVyKCk7XG5cdFx0XHRcblx0XHQvL0xPR0lOLVRFTVBMQVRFXG5cdFx0dGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuXHRcdHRoaXMuZW1haWwgPSBlbWFpbDtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI2xvZ2luLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Ly9jb250ZXh0LnVzZXJuYW1lID0gdGhpcy51c2VybmFtZTtcblx0XHQvL2NvbnRleHQuZW1haWwgPSB0aGlzLmVtYWlsO1xuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnI2NvbnRhaW5lcicpLmFwcGVuZCgkKGh0bWwpKTtcblxuXHRcdC8vUkVHSVNURVItVEVNUExBVEVcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3JlZ2lzdGVyLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Ly9jb250ZXh0LnVzZXJuYW1lID0gdGhpcy51c2VybmFtZTtcblx0XHQvL2NvbnRleHQuZW1haWwgPSB0aGlzLmVtYWlsO1xuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnI2NvbnRhaW5lcicpLmFwcGVuZCgkKGh0bWwpKTtcblxuXHRcdHRoaXMuJGVsLmZpbmQoXCIjcmVnaXN0ZXItYnV0dG9uXCIpLm9uKCdjbGljaycsIHRoaXMucmVnaXN0ZXIuYmluZCh0aGlzKSk7XG5cdFx0JCgnLnJlZ2lzdGVyJykub24oXCJjbGlja1wiLCB0aGlzLmFkZFVzZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZChcIi5sb2dpblwiKS5vbignY2xpY2snLCB0aGlzLmxvZ2luLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIubG9nb3V0XCIpLm9uKCdjbGljaycsIHRoaXMubG9nb3V0LmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24odGhpcy51c2VySGFuZGxlciwgXCJ1c2VyLWZvdW5kXCIsIHRoaXMuYmluZFVzZXIuYmluZCh0aGlzKSk7XG5cdH1cblxuXHRQcm9maWxlLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnW1Byb2ZpbGVdIHJlZ2lzdGVyJyk7XG5cdFx0JChcIiNyZWdpc3RlclwiKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0UHJvZmlsZS5wcm90b3R5cGUuYWRkVXNlciA9IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnW1Byb2ZpbGVdIGFkZFVzZXInKTtcblx0XHR0aGlzLnVzZXJuYW1lID0gdGhpcy4kZWwuZmluZCgnLnJlZ2lzdGVyX25hbWUnKS52YWwoKTtcblx0XHR0aGlzLmVtYWlsID0gdGhpcy4kZWwuZmluZCgnLnJlZ2lzdGVyX2VtYWlsJykudmFsKCk7XG5cdFx0dGhpcy5wYXNzd29yZCA9IHRoaXMuJGVsLmZpbmQoJy5yZWdpc3Rlcl9wYXNzd29yZCcpLnZhbCgpO1xuXHRcdHRoaXMucGFzc3dvcmRfMiA9IHRoaXMuJGVsLmZpbmQoJy5yZWdpc3Rlcl9wYXNzd29yZF8yJykudmFsKCk7XG5cblx0XHRpZih0aGlzLnBhc3N3b3JkPT10aGlzLnBhc3N3b3JkXzIpe1xuXHRcdFx0Ly9leGlzdGluZyB1c2VyIG5vZyBjaGVja2VuIVxuXHRcdFx0dGhpcy51c2VySGFuZGxlci5yZWdpc3Rlcih0aGlzLnVzZXJuYW1lLCB0aGlzLmVtYWlsLCB0aGlzLnBhc3N3b3JkKTtcblx0XHR9XG5cdH07XG5cblx0UHJvZmlsZS5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSBsb2dpbicpO1xuXHRcdHRoaXMuZW1haWwgPSB0aGlzLiRlbC5maW5kKCcubG9naW5fZW1haWwnKS52YWwoKTtcblx0XHR0aGlzLnBhc3N3b3JkID0gdGhpcy4kZWwuZmluZCgnLmxvZ2luX3Bhc3N3b3JkJykudmFsKCk7XG5cdFx0dGhpcy51c2VySGFuZGxlci5sb2dpbih0aGlzLmVtYWlsLCB0aGlzLnBhc3N3b3JkKTtcblx0fTtcblxuXHRQcm9maWxlLnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSBsb2dvdXQnKTtcblx0XHR0aGlzLnVzZXIgPSBbXTtcblx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHQkKFwiI3JlZ2lzdGVyLWJ1dHRvblwiKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0UHJvZmlsZS5wcm90b3R5cGUuYmluZFVzZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gYmluZFVzZXInKTtcblx0XHR0aGlzLnVzZXI9IFtldmVudF07XG5cdFx0aWYodGhpcy51c2VyWzBdKXtcblx0XHRcdCQoJ2lucHV0JykudmFsKFwiXCIpO1xuXHRcdFx0JChcIiNyZWdpc3Rlci1idXR0b25cIikuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0JChcIiNyZWdpc3RlclwiKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHR9XG5cdH1cblxuXHRQcm9maWxlLnByb3RvdHlwZS50b2dnbGVWaXNpYmxlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQcm9maWxlXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0JChcIiNsb2dpblwiKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0JChcIiNsb2dvdXRcIikudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdHJldHVybiBQcm9maWxlO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdGZ1bmN0aW9uIFVzZXJIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnVybCA9IFwiaHR0cDovL2xvY2FsaG9zdC93aGl0ZWJvYXJkXzIvYXBpL2luZGV4LnBocC9cIjtcblx0fVxuXG5cdFVzZXJIYW5kbGVyLnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzd29yZCl7IGNvbnNvbGUubG9nKCdbVXNlckhhbmRsZXJdIGxvZ2luJyk7XG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJQT1NUXCIsXG5cdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK1widXNlcnNcIisnL2xvZ2luLycrZW1haWwrXCIvXCIrcGFzc3dvcmQsXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwidXNlciBmb3VuZFwiLCBbZGF0YV0pO1xuXHQgIFx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcInVzZXItZm91bmRcIiwgW2RhdGFdKTtcblx0ICBcdFx0fS5iaW5kKHRoaXMpXG5cdFx0fSk7XG5cdH07XG5cblx0VXNlckhhbmRsZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCl7IGNvbnNvbGUubG9nKCdbVXNlckhhbmRsZXJdIHJlZ2lzdGVyJyk7XG5cdFx0XHQkLmFqYXgoe1xuXHRcdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHRcdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHRcdCAgXHRcdHVybDogdGhpcy51cmwrXCJ1c2Vyc1wiK1wiL3JlZ2lzdGVyL1wiK3VzZXJuYW1lK1wiL1wiK2VtYWlsK1wiL1wiK3Bhc3N3b3JkLFxuXHRcdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgXHRcdFx0Y29uc29sZS5sb2coXCJuZXcgdXNlciBjcmVhdGVkXCIsIFtkYXRhXSk7XG5cdFx0ICBcdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ1c2VyLWZvdW5kXCIsIFtkYXRhXSk7XG5cdFx0ICBcdFx0fS5iaW5kKHRoaXMpXG5cdFx0XHR9KTtcblx0XHR9O1xuXHRyZXR1cm4gVXNlckhhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgV2hpdGVib2FyZFNldHRpbmdzID0gcmVxdWlyZSAoJy4vV2hpdGVib2FyZFNldHRpbmdzJyk7XG5cblx0ZnVuY3Rpb24gV2hpdGVib2FyZCgkZWwsIGJvYXJkTmFtZSkgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jcmVhdGVXaGl0ZWJvYXJkKCk7XG5cdFx0dGhpcy5hZGRXaGl0ZWJvYXJkU2V0dGluZ3MoKTtcblx0fVxuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNyZWF0ZVdoaXRlYm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNyZWF0ZVdoaXRlYm9hcmQnKTtcblx0XHR0aGlzLmJvYXJkID0gdGhpcy4kZWwuYXBwZW5kKFwiPGRpdiBpZD0nd2hpdGVib2FyZCc+PC9kaXY+XCIpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLmJvYXJkLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjbGlja0hhbmRsZXInKTtcblx0XHR2YXIgeFBvcyA9IGV2ZW50LnBhZ2VYIC0gdGhpcy4kZWwub2Zmc2V0KCkubGVmdDtcbiAgIFx0XHR2YXIgeVBvcyA9IGV2ZW50LnBhZ2VZIC0gdGhpcy4kZWwub2Zmc2V0KCkudG9wO1xuICAgXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICAgXHRcdHBvc2l0aW9uLnhQb3MgPSB4UG9zO1xuICAgXHRcdHBvc2l0aW9uLnlQb3MgPSB5UG9zO1xuXHRcdGlmKGV2ZW50LnRhcmdldC5pZCA9PT0gXCJ3aGl0ZWJvYXJkXCIpe1xuXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwid2hpdGVib2FyZC1jbGlja2VkXCIsIHBvc2l0aW9uKTtcblx0XHR9XG5cdH07XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuYWRkV2hpdGVib2FyZFNldHRpbmdzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBhZGRXaGl0ZWJvYXJkU2V0dGluZ3MnKTtcblx0XHR0aGlzLndoaXRlYm9hcmRTZXR0aW5ncyA9IG5ldyBXaGl0ZWJvYXJkU2V0dGluZ3ModGhpcy4kZWwpO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBQYXJ0aWNpcGFudCA9IHJlcXVpcmUgKCcuL1BhcnRpY2lwYW50Jyk7XG5cblxuXHRmdW5jdGlvbiBXaGl0ZWJvYXJkU2V0dGluZ3MoJGVsLCAkcGFydGljaXBhbnRzLCAkdGl0bGUpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy4kcGFydGljaXBhbnRzID0gJHBhcnRpY2lwYW50cztcblx0XHR0aGlzLiR0aXRsZSA9ICR0aXRsZTtcblxuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjc2V0dGluZ3MtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdCBcdHZhciBjb250ZXh0ID0ge307XG5cdCBcdGlmKHRoaXMuJHRpdGxlKXtcblx0IFx0XHRjb250ZXh0LnRpdGxlID0gJHRpdGxlO1xuXHQgXHR9ZWxzZXtcblx0IFx0XHRjb250ZXh0LnRpdGxlID0gXCJVbnRpdGxlZFwiO1xuXHQgXHR9XG5cdFx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoXCIjY29udGFpbmVyXCIpLmFwcGVuZCgkKGh0bWwpKTtcblxuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fVxuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2hpZGUnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI3Nob3cnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5oaWRlLWJ1dHRvbicpLm9uKCdjbGljaycsIHRoaXMuaGlkZVNldHRpbmdzSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuc2hvdy1idXR0b24nKS5vbignY2xpY2snLCB0aGlzLmhpZGVTZXR0aW5nc0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmFkZC1idXR0b24nKS5vbignY2xpY2snLCB0aGlzLmNyZWF0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpO1xuXHR9O1xuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmNyZWF0ZVBhcnRpY2lwYW50ID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gYWRkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLnBhcnRpY2lwYW50ID0gbmV3IFBhcnRpY2lwYW50KHRoaXMuJGVsKTtcblx0XHRiZWFuLm9uKHRoaXMucGFydGljaXBhbnQsIFwiZGVsZXRlXCIsIHRoaXMuZGVsZXRlUGFydGljaXBhbnQuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5oaWRlU2V0dGluZ3NIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gaGlkZVNldHRpbmdzSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5oaWRlX3NlY3Rpb24nKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLnNob3ctYnV0dG9uJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXHRcblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5kZWxldGVQYXJ0aWNpcGFudCA9IGZ1bmN0aW9uKHBhcnRpY2lwYW50KSB7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBkZWxldGVQYXJ0aWNpcGFudCcpO1xuXHRcdHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYXJ0aWNpcGFudC1saXN0Jyk7XG5cdFx0ZWwucmVtb3ZlQ2hpbGQocGFydGljaXBhbnQpO1xuXHRcdHJldHVybjtcblx0fTtcblxuXHRyZXR1cm4gV2hpdGVib2FyZFNldHRpbmdzO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBNb3Rpb25FZGl0ID0gcmVxdWlyZSgnLi9Nb3Rpb25FZGl0Jyk7XG5cblxuXHRmdW5jdGlvbiBNb3Rpb24oJGVsLHhQb3MseVBvcyx2aWRTcmMpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0aWYodmlkU3JjKXtcblx0XHR0aGlzLnZpZFNyYyA9IHZpZFNyYztcblx0XHR9XG5cdH1cblxuXHRNb3Rpb24ucHJvdG90eXBlLmNyZWF0ZU1vdGlvbiA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjcmVhdE1vdGlvbicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbW90aW9uLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnZpZFNyYyl7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9IHRoaXMudmlkU3JjO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC52aWRTcmMgPSBcIlwiO1xuXHRcdH1cblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnI2lkPVwid2hpdGVib2FyZFwiJykuYXBwZW5kKCQoaHRtbCkpO1xuXHRcdFxuXHR9O1xuXHRcblx0TW90aW9uLnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7ICBjb25zb2xlLmxvZygnW01vdGlvbl0gZWRpdCcpO1xuXG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHRcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBNb3Rpb25FZGl0KHRoaXMudmlkU3JjLCBlbGVtZW50SWQpKTtcblxuXHR9O1xuXG5cdE1vdGlvbi5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjb25maXJtJyk7XG5cdFx0dGhpcy52aWRTcmMgPSB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiIC5tb3Rpb24tZWRpdFwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRNb3Rpb24ucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAubW90aW9uLWVkaXRcIikucmVtb3ZlKCk7XG5cdH07XG5cblxuXHRyZXR1cm4gTW90aW9uO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gTW90aW9uRWRpdCh2aWRTcmMsIGVsZW1lbnRJZCkgeyBjb25zb2xlLmxvZygnW01vdGlvbkVkaXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNtb3Rpb24tZWRpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudmlkU3JjID0gdmlkU3JjO1xuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aW5pdE1vdGlvbklucHV0KGVsZW1lbnRJZCk7XG4gXHRcdH0sIDEwMCk7XG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRNb3Rpb25JbnB1dChlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gaW5pdE1vdGlvbklucHV0Jyk7XG5cdFx0dmFyIGZpbGVJbnB1dCA9ICQoJyMnK2VsZW1lbnRJZCsnID4gaW5wdXRbdHlwZT1maWxlXScpWzBdO1xuXHQgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHBsYXlTZWxlY3RlZEZpbGUpO1xuXHR9XG5cbiBcdGZ1bmN0aW9uIHBsYXlTZWxlY3RlZEZpbGUoZXZlbnQpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIHBsYXlTZWxlY3RlZEZpbGUnKTtcblx0XHRcdHZhciBlbGVtZW50SWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZDtcblx0XHRcdHZhciB2aWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytlbGVtZW50SWQrJyA+IC5tb3Rpb24gPiB2aWRlbycpO1xuICAgICAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWxlLnR5cGU7XG4gICAgICAgICAgICB2YXIgY2FuUGxheSA9IHZpZC5jYW5QbGF5VHlwZSh0eXBlKTtcbiAgICAgICAgICAgIGNhblBsYXkgPSAoY2FuUGxheSA9PT0gJycgPyAnbm8nIDogY2FuUGxheSk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdDYW4gcGxheSB0eXBlIFwiJyArIHR5cGUgKyAnXCI6ICcgKyBjYW5QbGF5O1xuICAgICAgICAgICAgdmFyIGlzRXJyb3IgPSBjYW5QbGF5ID09PSAnbm8nO1xuXG4gICAgICAgICAgICBpZihVUkwpe1xuICAgICAgICAgICAgdmFyIGZpbGVVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICAgICAgdmlkLnNyYyA9IGZpbGVVUkw7XG4gICAgICAgICAgICB2aWQuYXV0b1BsYXkgPSB0cnVlO1xuICAgICAgICBcdH1cblx0fVxuXHRcblx0cmV0dXJuIE1vdGlvbkVkaXQ7XG5cbn0pKCk7XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIFBpY3R1cmVFZGl0ID0gcmVxdWlyZSgnLi9QaWN0dXJlRWRpdCcpO1xuXHR2YXIgdGhhdDtcblx0ZnVuY3Rpb24gUGljdHVyZShpbWdTcmMpIHsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoYXQgPSB0aGlzO1xuXHRcdHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuXHRcdGlmKCF0aGlzLmltZ1NyYyl7XG5cdFx0XHR0aGlzLmltZ1NyYyA9IFwiXCI7XG5cdFx0fVxuXHRcdGlmIChcblx0XHRcdHdpbmRvdy5GaWxlICYmIFxuXHRcdFx0d2luZG93LkZpbGVSZWFkZXIgJiYgXG5cdFx0XHR3aW5kb3cuRmlsZUxpc3QgJiYgXG5cdFx0XHR3aW5kb3cuQmxvYlxuXHRcdCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJGdWxsIGZpbGUgc3VwcG9ydFwiKTtcblx0XHR9XG5cdH1cblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jcmVhdGVQaWN0dXJlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjcmVhdFBpY3R1cmUnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3BpY3R1cmUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRpZih0aGlzLmltZ1NyYyl7XG5cdFx0XHRjb250ZXh0LmltZ1NyYyA9ICdzdGF0aWNzLycrdGhpcy5pbWdTcmMrXCIucG5nXCI7XG5cdFx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpOyBcblx0XHRcdHJldHVybigkKGh0bWwpKTtcblx0XHR9XG5cdH07XG5cdFxuXHRQaWN0dXJlLnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gZWRpdCcpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuXHRcdHZhciBwaWN0dXJlRWRpdCA9IG5ldyBQaWN0dXJlRWRpdCh0aGlzLiRlbCx0aGlzLmltZ1NyYyxlbGVtZW50SWQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkKS5hcHBlbmQocGljdHVyZUVkaXQpO1xuXHRcdHRoaXMuaW1nSW5wdXRzID0gdGhpcy4kZWwuZmluZCgnIycrZWxlbWVudElkKycgPi5pbnB1dC1waWN0dXJlJyk7XG5cdFx0dGhpcy5pbWdJbnB1dHMuY2hhbmdlKGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XG5cdFx0XHR0aGF0LmNyZWF0ZVRodW1iKGZpbGUpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdFBpY3R1cmUucHJvdG90eXBlLmNyZWF0ZVRodW1iID0gZnVuY3Rpb24oZmlsZSl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY3JlYXRlVGh1bWInKTtcblx0XHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGZpbGUpeyBjb25zb2xlLmxvZygnbG9hZGVkJyk7XG5cdFx0XHRcdHZhciBpbWcgPSB0aGF0LiRlbC5maW5kKFwiI1wiK3RoYXQuZWxlbWVudElkKycgPi5waWN0dXJlJysnIC5pbWFnZS1wcmV2aWV3Jyk7XG5cdFx0XHRcdGltZy5hdHRyKCdzcmMnLCBmaWxlLnRhcmdldC5yZXN1bHQpO1xuXHRcdFx0XHR0aGF0LmNvbmZpcm0oZmlsZS50YXJnZXQucmVzdWx0KTtcblx0XHRcdH07XG5cdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblx0fTtcblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oZmlsZSl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY29uZmlybScpO1xuXHRcdHRoaXMuaW1nU3JjID0gdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiAuaW5wdXQtcGljdHVyZVwiKS52YWwoKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJpbWFnZS1jaGFuZ2VkXCIsIGZpbGUpO1xuXHRcdHRoaXMuZW5kRWRpdCgpO1xuXHR9O1xuXG5cdFBpY3R1cmUucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGVuZEVkaXQnKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLmlucHV0LXBpY3R1cmVcIikucmVtb3ZlKCk7XG5cdH07XG5cblx0cmV0dXJuIFBpY3R1cmU7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBQaWN0dXJlRWRpdCgkZWwsdHh0LGVsZW1lbnRJZCkgeyBjb25zb2xlLmxvZygnW1BpY3R1cmVFZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcGljdHVyZS1lZGl0LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Y29udGV4dC50eHQgPSB0eHQ7XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXHR9XG5cblx0cmV0dXJuIFBpY3R1cmVFZGl0O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFBvc3RpdEVkaXQgPSByZXF1aXJlKCcuL1Bvc3RpdEVkaXQnKTtcblxuXHRmdW5jdGlvbiBQb3N0aXQodHh0KSB7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMudHh0ID0gdHh0O1xuXHRcdGlmKCF0aGlzLnR4dCl7XG5cdFx0XHR0aGlzLnR4dCA9IFwiTmlldXdlIFBvc3RpdFwiO1xuXHRcdH1cblx0fVxuXG5cdFBvc3RpdC5wcm90b3R5cGUuY3JlYXRlUG9zdGl0ID0gZnVuY3Rpb24odHh0KXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNyZWF0ZVBvc3RpdCcpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcG9zdGl0LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Y29udGV4dC50eHQgPSB0aGlzLnR4dDtcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHJldHVybiAoJChodG1sKSk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBlZGl0Jyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitlbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBQb3N0aXRFZGl0KHRoaXMudHh0KSk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNvbmZpcm0nKTtcblx0XHR0aGlzLnR4dCA9IHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgLnBvc3RpdC1lZGl0XCIpLnZhbCgpO1xuXHRcdHRoaXMuZW5kRWRpdCgpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBlbmRFZGl0Jyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiA+IC5wb3N0aXQgPiBwXCIpLmFkZENsYXNzKFwiaGlkZGVuXCIpLnRleHQodGhpcy50eHQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0LWVkaXRcIikucmVtb3ZlKCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiA+IC5wb3N0aXQgPiBwXCIpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHR9O1xuXG5cdHJldHVybiBQb3N0aXQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBQb3N0aXRFZGl0KHR4dCkgeyBjb25zb2xlLmxvZygnW1Bvc3RpdEVkaXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwb3N0aXQtZWRpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudHh0ID0gdHh0O1xuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblxuXHRcdHJldHVybiAoJChodG1sKSk7XG5cblx0fVxuXHRcblx0cmV0dXJuIFBvc3RpdEVkaXQ7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9