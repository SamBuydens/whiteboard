!function e(t,i,n){function o(l,r){if(!i[l]){if(!t[l]){var d="function"==typeof require&&require;if(!r&&d)return d(l,!0);if(s)return s(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[l]={exports:{}};t[l][0].call(c.exports,function(e){var i=t[l][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[l].exports}for(var s="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(e){!function(){function t(){new i($("#container"))}var i=e("./classes/App");t()}()},{"./classes/App":2}],2:[function(e,t){t.exports=function(){function t(e){console.log("[App] constructor"),this.$el=e,this.whiteboardId=1,this.types=["postits"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new s,this.whiteboard=new i(this.$el),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),s=e("./DataHandler");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();var t=new o(this.$el,e,this.position);this.newElement(e,t.elementId),bean.on(t,"position-changed",this.positionChangedHandler.bind(this))},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e],this.whiteboardId)},t.prototype.addToElementList=function(){console.log("[App] addToElementList"),this.elementList.push(this.dataHandler.getBoardElements()),this.i++,this.i===this.types.length&&this.addToBoard()},t.prototype.addToBoard=function(){console.log("[App] addToBoard");var e=this.elementList[0][0];console.log(e);for(var t in e){var i=e[t].el_type,n={};n.yPos=Number(e[t].posy),n.xPos=Number(e[t].posx);var s=e[t].id_on_board,l=e[t].id,r=e[t].content,d=new o(this.$el,i,n,s,r,l);bean.on(d,"remove-clicked",this.removeHandler.bind(this)),bean.on(d,"position-changed",this.positionChangedHandler.bind(this))}},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.id)},t.prototype.newElement=function(e,t){console.log("[App] newElementHandler"),this.dataHandler.newBoardElement(e,t,this.position,this.whiteboardId)},t.prototype.positionChangedHandler=function(e){console.log("[App] positionChangedHandler"),this.dataHandler.positionChange(e.elementType,e.elementId,e.eTarget.css("left"),e.eTarget.css("top"),this.whiteboardId)},t}()},{"./DataHandler":3,"./Element":5,"./ElementPicker":6,"./Whiteboard":8}],3:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/",t=this,this.boardElements=[]}var t;return e.prototype.loadBoardElements=function(e,i){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/"+String(i),data:{content:"content"},success:function(e){t.boardElements.push(e),bean.fire(t,"data-success",[e])}})},e.prototype.getBoardElements=function(){return console.log("[DataHandler] getBoardElements"),this.boardElements},e.prototype.removeBoardElement=function(e,t){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t);break;case"static":this.removeElementById("static",t);break;case"motion":this.removeElementById("motion",t)}},e.prototype.removeElementById=function(e,t){$.ajax({type:"GET",url:this.url+e+"/delete/"+t,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.newBoardElement=function(e,t,i,n){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newElement("postits",t,i,n);break;case"static":this.newElement("static",n);break;case"motion":this.newElement("motion",n)}},e.prototype.newElement=function(e,t,i,n){$.ajax({type:"POST",url:this.url+e+"/add",data:{id_on_board:t,xpos:i.xPos,ypos:i.yPos,whiteboardId:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.positionChange=function(e,t,i,n,o){$.ajax({type:"POST",url:this.url+"postits/change/position",data:{whiteboard_id:o,id_on_board:t,xpos:i,ypos:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e}()},{}],4:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var s=n(o);this.$el.find("#"+this.elementId).append(s),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked",t),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],5:[function(e,t){t.exports=function(){function t(e,t,i,n,o,s){console.log("[Element] constructor"),this.$el=e,this.content=o,this.elementType=t,this.elementId=n,this.elementId?this.elementId=n:(this.elementId=this.setElementId(),console.log("element id = "+this.elementId)),this.position=i,s&&(this.id=s),this.createElementHolder()}var n=e("./EditMenu"),o=1,s=e("./elements/Postit"),l=e("./elements/Picture"),r=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={};e.top=this.position.yPos,e.left=this.position.xPos,e.zIndex=0,this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new s(this.content),this.$el.find("#"+this.elementId).append(this.element.createPostit()),this.$el.find("#"+this.elementId).append(this.element.createPostit),this.bindHandler(this.$el.find("#"+this.elementId));break;case"static":this.element=new l(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createPicture),this.bindHandler(this.$el.find("#"+this.elementId));break;case"motion":this.element=new r(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createMotion),this.bindHandler(this.$el.find("#"+this.elementId))}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),this.mouseDown=!1},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),event.target.id===this.elementId&&(this.mouseDown=!0,this.currentLeft=$(e.target).css("left"),this.currentTop=$(e.target).css("top"),this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++o,this.$el.find("#"+this.elementId).css("zIndex",o),document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler))},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new n(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();var t={};t.id=this.id,t.elementType=this.elementType,bean.fire(this,"remove-clicked",t);break;case"edit":this.element.confirm(),this.editMenu.toggleVisible();break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);this.$el.find("#"+this.elementId).css("left",t-this.offsetX),this.$el.find("#"+this.elementId).css("top",i-this.offsetY)}},t.prototype.mouseUpHandler=function(e){if(console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),this.currentTop!==$(e.target).css("top")||this.currentLeft!==$(e.target).css("left")){var t={};t.eTarget=$(e.target),t.elementType=this.elementType,t.elementId=this.elementId,bean.fire(this,"position-changed",t)}},t.prototype.setElementId=function(){console.log("[Element] setElementId");var e=this.$el.find(".element-holder");if(e.length>0){var t=[];for(i=0;i<e.length;i++)t.push(e[i].id);return t.sort(function(e,t){return t-e}),String(Number(t[0])+1)}return"0"},t}()},{"./EditMenu":4,"./elements/Motion":10,"./elements/Picture":12,"./elements/Postit":14}],6:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],7:[function(e,t){t.exports=function(){function e(e){console.log("[Participant] constructor"),this.$el=e;var t=e.find(".participant-input");if(console.log(t.val()),t.val()){var i=$("#settings-template").text(),n=Handlebars.compile(i),o={elements:[{}]};Handlebars.registerHelper("picker",function(){return new Handlebars.SafeString("<li id=''>"+t.val()+"<button class='btn btn-delete'>X</button></li>")});var s=n(o);this.$el.find("#participant-list").append($(s)),this.bindDeletebutton(),$(".participant-input").val("")}}return e.prototype.bindDeletebutton=function(){console.log("[Participant] bindDeletebutton"),this.deletebuton=document.querySelectorAll(".btn-delete"),this.deletebuton[this.deletebuton.length-1].addEventListener("click",this.deleteClickHandler.bind(this))},e.prototype.deleteClickHandler=function(e){console.log("[Participant] deleteClickHandler"),bean.fire(this,"delete",e.path[1])},e}()},{}],8:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e,this.createWhiteboard(),this.addWhiteboardSettings()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el)},t}()},{"./WhiteboardSettings":9}],9:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[WhiteboardSettings] constructor"),this.$el=e,this.$participants=t,this.$title=i,this.bindHandler()}var i=e("./Participant");return t.prototype.toggleVisible=function(){console.log("[WhiteboardSettings] toggleVisible"),this.$el.find("#hide").toggleClass("hidden"),this.$el.find("#show").toggleClass("hidden")},t.prototype.bindHandler=function(){console.log("[WhiteboardSettings] bindHandler"),this.$el.find(".hide-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".show-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".add-button").on("click",this.createParticipant.bind(this))},t.prototype.createParticipant=function(){console.log("[WhiteboardSettings] addClickedHandler"),this.participant=new i(this.$el),bean.on(this.participant,"delete",this.deleteParticipant.bind(this))},t.prototype.hideSettingsHandler=function(){console.log("[WhiteboardSettings] hideSettingsHandler"),this.$el.find(".hide_section").toggleClass("hidden"),this.$el.find(".show-button").toggleClass("hidden")},t.prototype.deleteParticipant=function(e){console.log("[WhiteboardSettings] deleteParticipant");var t=document.querySelector("#participant-list");t.removeChild(e)},t}()},{"./Participant":7}],10:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Motion] constructor"),this.$el=e,n&&(this.vidSrc=n)}var i=e("./MotionEdit");return t.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.vidSrc?this.vidSrc:"";var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Motion] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new i(this.vidSrc,t))},t.prototype.confirm=function(){console.log("[Motion] confirm"),this.vidSrc=this.$el.find("#"+this.elementId+" .motion-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Motion] endEdit"),this.$el.find("#"+this.elementId+" > .motion-edit").remove()},t}()},{"./MotionEdit":11}],11:[function(e,t){t.exports=function(){function e(e,i){console.log("[MotionEdit] constructor");var n=$("#motion-edit-template").text(),o=Handlebars.compile(n),s={};s.vidSrc=e;var l=o(s);return setTimeout(function(){t(i)},100),$(l)}function t(e){console.log("[Motion] initMotionInput");var t=document.querySelector("#"+e+" > input[type=file]");t.addEventListener("change",i)}function i(e){console.log("[Motion] playSelectedFile");var t=e.target.parentNode.id,i=document.querySelector("#"+t+" > .motion > video"),n=this.files[0],o=n.type,s=i.canPlayType(o);s=""===s?"no":s;if(URL){var l=URL.createObjectURL(n);i.src=l,i.autoPlay=!0}}return e}()},{}],12:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Picture] constructor"),this.$el=e,console.log(e),n&&(this.imgSrc=n)}var i=e("./PictureEdit");return t.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};i.imgSrc=this.txt?this.imgSrc:"";var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Picture] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new i(e,this.imgSrc,t))},t.prototype.confirm=function(){console.log("[Picture] confirm"),this.imgSrc=this.$el.find("#"+this.elementId+" .input-picture").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Picture] endEdit"),console.log(this.elementId),this.$el.find("#"+this.elementId+" > .input-picture").remove()},t}()},{"./PictureEdit":13}],13:[function(e,t){t.exports=function(){function e(e,i,n){console.log("[PictureEdit] constructor"),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support"),this.$el=e;var o=$("#picture-edit-template").text(),s=Handlebars.compile(o),l={};l.txt=i;var r=s(l);return setTimeout(function(){t(n)},100),$(r)}function t(e){console.log("[PictureEdit] initImageInput");var t=document.querySelector("#"+e+" > .input-picture");t.addEventListener("change",i)}function i(){console.log("[PictureEdit] createThumb");var e=event.target.parentNode.id;if(this.files&&this.files[0]&&this.files[0].type.match("image.*")){var t=new FileReader,i=document.querySelector("#"+e+"> .picture > #image-preview");t.onload=function(e){i.setAttribute("src",e.target.result),i.setAttribute("width",i.width),i.setAttribute("height",i.height),i.onload=function(){0===n.length?(i.style.backgroundImage="url('"+e.target.result+"')",i.style.height=i.width+"px",i.style.width=i.height+"px"):(alert(n.join("\n")),n=[])}},t.readAsDataURL(this.files[0])}else n.push("File is not a valid image")}var n=[];return e}()},{}],14:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":15}],15:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRGF0YUhhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9FZGl0TWVudS5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9FbGVtZW50UGlja2VyLmpzIiwianMvc3JjL2NsYXNzZXMvUGFydGljaXBhbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkLmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZFNldHRpbmdzLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uRWRpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1BpY3R1cmUuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9QaWN0dXJlRWRpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdEVkaXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLE9BQUEsS0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLHVCQUFBLEVBQUEsSUFBQSxNQUFBLEdBQUEsS0FBQSxtQkFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsU0FBQSxJQ0FBLFdBSUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLGVBSEEsR0FBQSxHQUFBLEVBQUEsZ0JBTUEsK0NDUkEsRUFBQSxRQUFBLFdBT0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLHFCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsYUFBQSxFQUNBLEtBQUEsT0FBQSxXQUNBLEtBQUEsRUFBQSxFQUNBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsS0FBQSxZQUFBLEdBQUEsR0FDQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLGNBQUEsR0FBQSxHQUFBLEtBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxZQUFBLGVBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsV0FBQSxxQkFBQSxLQUFBLHlCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxjQUFBLHlCQUFBLEtBQUEsNEJBQUEsS0FBQSxPQUVBLEtBQUEsYUFwQkEsR0FBQSxHQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLG1CQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxnQkEyRUEsT0F2REEsR0FBQSxVQUFBLHlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsa0NBQ0EsS0FBQSxjQUFBLGdCQUNBLEtBQUEsY0FBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxTQUFBLEdBR0EsRUFBQSxVQUFBLDRCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEscUNBQ0EsS0FBQSxjQUFBLGVBQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsTUFBQSxXQUFBLEVBQUEsRUFBQSxXQUNBLEtBQUEsR0FBQSxFQUFBLG1CQUFBLEtBQUEsdUJBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxXQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLEtBQUEsR0FBQSxLQUFBLE1BQUEsTUFDQSxLQUFBLFlBQUEsa0JBQUEsS0FBQSxNQUFBLEdBQUEsS0FBQSxlQUlBLEVBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSwwQkFDQSxLQUFBLFlBQUEsS0FBQSxLQUFBLFlBQUEsb0JBQ0EsS0FBQSxJQUNBLEtBQUEsSUFBQSxLQUFBLE1BQUEsUUFDQSxLQUFBLGNBSUEsRUFBQSxVQUFBLFdBQUEsV0FBQSxRQUFBLElBQUEsbUJBQ0EsSUFBQSxHQUFBLEtBQUEsWUFBQSxHQUFBLEVBQ0EsU0FBQSxJQUFBLEVBQ0EsS0FBQSxHQUFBLEtBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsUUFDQSxJQUNBLEdBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsR0FBQSxLQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsWUFDQSxFQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLFFBQ0EsRUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxNQUFBLEdBQUEsRUFBQSxpQkFBQSxLQUFBLGNBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLG1CQUFBLEtBQUEsdUJBQUEsS0FBQSxTQUlBLEVBQUEsVUFBQSxjQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsdUJBQ0EsS0FBQSxZQUFBLG1CQUFBLEVBQUEsWUFBQSxFQUFBLEtBR0EsRUFBQSxVQUFBLFdBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsWUFBQSxnQkFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLEtBQUEsZUFHQSxFQUFBLFVBQUEsdUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLFlBQUEsZUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxJQUFBLFFBQUEsRUFBQSxRQUFBLElBQUEsT0FBQSxLQUFBLGVBRUEsK0ZDaEZBLEVBQUEsUUFBQSxXQUVBLFFBQUEsS0FBQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxJQUFBLGlFQUNBLEVBQUEsS0FDQSxLQUFBLGlCQUpBLEdBQUEsRUE0RkEsT0FyRkEsR0FBQSxVQUFBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLE1BREEsU0FBQSxJQUFBLG1DQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLE9BQUEsR0FDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGNBQUEsS0FBQSxHQUNBLEtBQUEsS0FBQSxFQUFBLGdCQUFBLFFBS0EsRUFBQSxVQUFBLGlCQUFBLFdBQ0EsTUFEQSxTQUFBLElBQUEsa0NBQ0EsS0FBQSxlQUdBLEVBQUEsVUFBQSxtQkFBQSxTQUFBLEVBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSxvQ0FDQSxHQUNBLElBQUEsVUFDQSxLQUFBLGtCQUFBLFVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLGtCQUFBLFNBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLGtCQUFBLFNBQUEsS0FLQSxFQUFBLFVBQUEsa0JBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsTUFDQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFdBQUEsRUFDQSxNQUFBLFFBQUEsV0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsYUFBQSxPQUtBLEVBQUEsVUFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsaUNBQ0EsR0FDQSxJQUFBLFVBQ0EsS0FBQSxXQUFBLFVBQUEsRUFBQSxFQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxXQUFBLFNBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFdBQUEsU0FBQSxLQUtBLEVBQUEsVUFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsT0FDQSxNQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FBQSxhQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLFdBQUEsSUFFQSxNQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsU0FDQSxRQUFBLElBQUEsT0FLQSxFQUFBLFVBQUEsZUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLDBCQUNBLE1BQUEsY0FBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxHQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxXQUFBLElBRUEsTUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLFNBQ0EsUUFBQSxJQUFBLE9BS0EsMkJDN0ZBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLHVCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFVBQ0EsU0FBQSxTQUFBLEtBQUEsYUFDQSxTQUFBLE9BQUEsS0FBQSxhQUNBLFNBQUEsU0FBQSxLQUFBLGdCQUdBLFlBQUEsZUFBQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLFdBQUEsaUJBQUEsS0FBQSxVQUNBLEVBQUEsV0FBQSxpQkFBQSxLQUFBLEtBRUEsT0FBQSxJQUFBLFlBQUEsV0FDQSxVQUFBLEVBQUEsSUFBQSxFQUFBLFVBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxZQUFBLFVBQ0EsS0FBQSxlQUNBLEtBQUEsZ0JBMEJBLE1BdkJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLGVBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsT0FBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsMkJBQ0EsZUFBQSxFQUFBLE9BQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxlQUFBLEdBQ0EsS0FBQSxvQkFDQSxDQUNBLEdBQUEsS0FDQSxHQUFBLFNBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxpQkFBQSxLQUtBLDJCQ3JEQSxFQUFBLFFBQUEsV0FRQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLEtBQUEsWUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsVUFDQSxLQUFBLFVBQUEsR0FFQSxLQUFBLFVBQUEsS0FBQSxlQUNBLFFBQUEsSUFBQSxnQkFBQSxLQUFBLFlBRUEsS0FBQSxTQUFBLEVBQ0EsSUFDQSxLQUFBLEdBQUEsR0FFQSxLQUFBLHNCQXJCQSxHQUFBLEdBQUEsRUFBQSxjQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLHNCQUNBLEVBQUEsRUFBQSxvQkFnSkEsT0E1SEEsR0FBQSxVQUFBLG9CQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxLQUFBLGVBQUEsT0FBQSw4Q0FDQSxLQUFBLElBQUEsS0FBQSxnQ0FBQSxLQUFBLEtBQUEsS0FBQSxVQUNBLElBQUEsS0FDQSxHQUFBLElBQUEsS0FBQSxTQUFBLEtBQ0EsRUFBQSxLQUFBLEtBQUEsU0FBQSxLQUNBLEVBQUEsT0FBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsR0FDQSxLQUFBLGlCQUNBLEtBQUEsaUJBR0EsRUFBQSxVQUFBLGNBQUEsV0FDQSxPQURBLFFBQUEsSUFBQSwyQkFDQSxLQUFBLGFBQ0EsSUFBQSxVQUNBLEtBQUEsUUFBQSxHQUFBLEdBQUEsS0FBQSxTQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGdCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGNBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsUUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsZUFDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsWUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxjQUNBLEtBQUEsWUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsY0FLQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxHQUFBLFlBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxXQUFBLEdBR0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsOEJBRUEsTUFBQSxPQUFBLEtBQUEsS0FBQSxZQUVBLEtBQUEsV0FBQSxFQUNBLEtBQUEsWUFBQSxFQUFBLEVBQUEsUUFBQSxJQUFBLFFBQ0EsS0FBQSxXQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsT0FDQSxLQUFBLGtCQUFBLEtBQUEsaUJBQUEsS0FBQSxNQUNBLEtBQUEsZ0JBQUEsS0FBQSxlQUFBLEtBQUEsTUFDQSxLQUFBLFFBQUEsRUFBQSxRQUNBLEtBQUEsUUFBQSxFQUFBLFVBQ0EsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLFNBQUEsR0FDQSxTQUFBLEtBQUEsaUJBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxpQkFBQSxVQUFBLEtBQUEsbUJBSUEsRUFBQSxVQUFBLGVBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxTQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxXQUNBLEtBQUEsR0FBQSxLQUFBLFNBQUEsZUFBQSxLQUFBLG1CQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxTQUFBLGlCQUFBLEtBQUEscUJBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxtQkFBQSxXQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLFFBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxZQUdBLEVBQUEsVUFBQSxxQkFBQSxTQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsa0NBQ0EsRUFBQSxVQUNBLElBQUEsU0FDQSxLQUFBLFNBQUEsZ0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFdBQUEsUUFDQSxJQUFBLEtBQ0EsR0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEtBQUEsS0FBQSxLQUFBLGlCQUFBLEVBQ0EsTUFDQSxLQUFBLE9BQ0EsS0FBQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLGVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLGtCQUtBLEVBQUEsVUFBQSxpQkFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsOEJBQ0EsS0FBQSxhQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLEVBQUEsUUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLE9BQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxXQUlBLEVBQUEsVUFBQSxlQUFBLFNBQUEsR0FLQSxHQUxBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLFdBQUEsRUFDQSxTQUFBLEtBQUEsb0JBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxvQkFBQSxVQUFBLEtBQUEsaUJBRUEsS0FBQSxhQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsUUFBQSxLQUFBLGNBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxRQUFBLENBQ0EsR0FBQSxLQUNBLEdBQUEsUUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLEtBQUEsbUJBQUEsS0FJQSxFQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsa0JBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUNBLEdBQUEsS0FDQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsR0FHQSxPQURBLEdBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxNQUFBLEdBQUEsSUFDQSxPQUFBLE9BQUEsRUFBQSxJQUFBLEdBRUEsTUFBQSxLQUlBLCtHQ3RKQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsNEJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLEdBQ0EsV0FDQSxRQUFBLFVBQUEsS0FBQSxZQUNBLFFBQUEsU0FBQSxLQUFBLFVBQ0EsUUFBQSxTQUFBLEtBQUEsVUFHQSxZQUFBLGVBQUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxXQUFBLGlCQUFBLEtBQUEsU0FDQSxFQUFBLFdBQUEsaUJBQUEsS0FBQSxLQUVBLE9BQUEsSUFBQSxZQUFBLFdBQ0EsVUFBQSxFQUFBLElBQUEsRUFBQSxVQUlBLElBQUEsR0FBQSxFQUFBLEVBQ0EsTUFBQSxJQUFBLEtBQUEsZUFBQSxPQUFBLEVBQUEsSUFDQSxLQUFBLGdCQUNBLEtBQUEsY0F1QkEsTUFwQkEsR0FBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxJQUFBLEtBQUEsbUJBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSw4QkFDQSxJQUFBLElBQ0EsSUFBQSxFQUNBLEtBQUEsRUFFQSxNQUFBLElBQUEsS0FBQSxtQkFBQSxJQUFBLElBR0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxJQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLEtBQUEsS0FBQSx5QkFBQSxFQUFBLE9BQUEsS0FHQSwyQkNqREEsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDZCQUNBLEtBQUEsSUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLEtBQUEscUJBRUEsSUFEQSxRQUFBLElBQUEsRUFBQSxPQUNBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLHNCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUFBLGNBQ0EsWUFBQSxlQUFBLFNBQUEsV0FDQSxNQUFBLElBQUEsWUFBQSxXQUNBLGFBQUEsRUFBQSxNQUFBLG1EQUlBLElBQUEsR0FBQSxFQUFBLEVBQ0EsTUFBQSxJQUFBLEtBQUEscUJBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxtQkFDQSxFQUFBLHNCQUFBLElBQUEsS0FhQSxNQVRBLEdBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSxrQ0FDQSxLQUFBLFlBQUEsU0FBQSxpQkFBQSxlQUNBLEtBQUEsWUFBQSxLQUFBLFlBQUEsT0FBQSxHQUFBLGlCQUFBLFFBQUEsS0FBQSxtQkFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLG1CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsb0NBQ0EsS0FBQSxLQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsS0FHQSwyQkNoQ0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsbUJBQ0EsS0FBQSx3QkFMQSxHQUFBLEdBQUEsRUFBQSx1QkFnQ0EsT0F4QkEsR0FBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsT0FBQSwrQkFDQSxLQUFBLGVBR0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxNQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLElBQUEsU0FBQSxLQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxTQUFBLElBQ0EsSUFDQSxHQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsRUFDQSxlQUFBLEVBQUEsT0FBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLHFCQUFBLElBSUEsRUFBQSxVQUFBLHNCQUFBLFdBQUEsUUFBQSxJQUFBLHNDQUNBLEtBQUEsbUJBQUEsR0FBQSxHQUFBLEtBQUEsTUFHQSxtRENsQ0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLElBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLE9BQUEsRUFDQSxLQUFBLGNBUEEsR0FBQSxHQUFBLEVBQUEsZ0JBcUNBLE9BMUJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLHNDQUNBLEtBQUEsSUFBQSxLQUFBLFNBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLFNBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLG9DQUNBLEtBQUEsSUFBQSxLQUFBLGdCQUFBLEdBQUEsUUFBQSxLQUFBLG9CQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsS0FBQSxvQkFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsS0FBQSxrQkFBQSxLQUFBLFFBRUEsRUFBQSxVQUFBLGtCQUFBLFdBQUEsUUFBQSxJQUFBLDBDQUNBLEtBQUEsWUFBQSxHQUFBLEdBQUEsS0FBQSxLQUNBLEtBQUEsR0FBQSxLQUFBLFlBQUEsU0FBQSxLQUFBLGtCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsb0JBQUEsV0FBQSxRQUFBLElBQUEsNENBQ0EsS0FBQSxJQUFBLEtBQUEsaUJBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLGdCQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsa0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx5Q0FDQSxJQUFBLEdBQUEsU0FBQSxjQUFBLG9CQUNBLEdBQUEsWUFBQSxJQUlBLDZDQ3RDQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsd0JBQ0EsS0FBQSxJQUFBLEVBQ0EsSUFDQSxLQUFBLE9BQUEsR0FOQSxHQUFBLEdBQUEsRUFBQSxlQTZDQSxPQWxDQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx1QkFDQSxJQUFBLEdBQUEsRUFBQSxvQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFHQSxHQUFBLE9BREEsS0FBQSxPQUNBLEtBQUEsT0FFQSxFQUdBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBSUEsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGlCQUVBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsS0FJQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLE9BQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsaUJBQUEsTUFDQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsbUJBQUEsVUFJQSw2Q0M5Q0EsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsSUFBQSxHQUFBLEVBQUEseUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxPQUFBLENBRUEsSUFBQSxHQUFBLEVBQUEsRUFHQSxPQUZBLFlBQUEsV0FBQSxFQUFBLElBQ0EsS0FDQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDJCQUNBLElBQUEsR0FBQSxTQUFBLGNBQUEsSUFBQSxFQUFBLHNCQUNBLEdBQUEsaUJBQUEsU0FBQSxHQUdBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsRUFBQSxPQUFBLFdBQUEsR0FDQSxFQUFBLFNBQUEsY0FBQSxJQUFBLEVBQUEsc0JBQ0EsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsWUFBQSxFQUNBLEdBQUEsS0FBQSxFQUFBLEtBQUEsQ0FJQSxJQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsSUFBQSxnQkFBQSxFQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsVUFBQSxHQUlBLE1BQUEsNkJDcENBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsRUFDQSxRQUFBLElBQUEsR0FDQSxJQUNBLEtBQUEsT0FBQSxHQU5BLEdBQUEsR0FBQSxFQUFBLGdCQTJDQSxPQWpDQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsRUFBQSxxQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFHQSxHQUFBLE9BREEsS0FBQSxJQUNBLEtBQUEsT0FFQSxFQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBSUEsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGtCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxFQUFBLEtBQUEsT0FBQSxLQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLHFCQUNBLEtBQUEsT0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxtQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxxQkFFQSxRQUFBLElBQUEsS0FBQSxXQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLHFCQUFBLFVBSUEsOENDNUNBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsNkJBRUEsT0FBQSxNQUNBLE9BQUEsWUFDQSxPQUFBLFVBQ0EsT0FBQSxNQUVBLFFBQUEsSUFBQSxxQkFHQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSwwQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUVBLE9BREEsWUFBQSxXQUFBLEVBQUEsSUFBQSxLQUNBLEVBQUEsR0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsSUFBQSxHQUFBLFNBQUEsY0FBQSxJQUFBLEVBQUEsb0JBQ0EsR0FBQSxpQkFBQSxTQUFBLEdBR0EsUUFBQSxLQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsTUFBQSxPQUFBLFdBQUEsRUFDQSxJQUNBLEtBQUEsT0FDQSxLQUFBLE1BQUEsSUFDQSxLQUFBLE1BQUEsR0FBQSxLQUFBLE1BQUEsV0FDQSxDQUNBLEdBQUEsR0FBQSxHQUFBLFlBQ0EsRUFBQSxTQUFBLGNBQUEsSUFBQSxFQUFBLDhCQUVBLEdBQUEsT0FBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLE1BQUEsRUFBQSxPQUFBLFFBQ0EsRUFBQSxhQUFBLFFBQUEsRUFBQSxPQUNBLEVBQUEsYUFBQSxTQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsV0FDQSxJQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsZ0JBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxLQUNBLEVBQUEsTUFBQSxPQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsTUFBQSxNQUFBLEVBQUEsT0FBQSxPQUVBLE1BQUEsRUFBQSxLQUFBLE9BQ0EsUUFJQSxFQUFBLGNBQUEsS0FBQSxNQUFBLFFBR0EsR0FBQSxLQUFBLDZCQXhEQSxHQUFBLEtBNERBLE9BQUEsNkJDN0RBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLE1BQ0EsS0FBQSxJQUFBLGlCQUxBLEdBQUEsR0FBQSxFQUFBLGVBb0NBLE9BM0JBLEdBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHdCQUNBLElBQUEsR0FBQSxFQUFBLG9CQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUNBLEdBQUEsSUFBQSxLQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsSUFHQSxFQUFBLFVBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsaUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLGtCQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsS0FBQSxPQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxpQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxTQUFBLFVBQUEsS0FBQSxLQUFBLEtBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsbUJBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxZQUFBLFdBR0EsNkNDdENBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxJQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUVBLE9BQUEsR0FBQSxHQUlBLE1BQUEiLCJmaWxlIjoic2NyaXB0LmRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpe1xuXG5cdHZhciBBcHAgPSByZXF1aXJlKCcuL2NsYXNzZXMvQXBwJyk7XG5cblx0ZnVuY3Rpb24gaW5pdCgpwqB7XG5cdFx0bmV3IEFwcCgkKCcjY29udGFpbmVyJykpO1xuXHR9XG5cblx0aW5pdCgpO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmQgPSByZXF1aXJlKCcuL1doaXRlYm9hcmQnKTtcblx0dmFyIEVsZW1lbnRQaWNrZXIgPSByZXF1aXJlKCcuL0VsZW1lbnRQaWNrZXInKTtcblx0dmFyIEVsZW1lbnQgPSByZXF1aXJlKCcuL0VsZW1lbnQnKTtcblx0dmFyIERhdGFIYW5kbGVyID0gcmVxdWlyZSgnLi9EYXRhSGFuZGxlcicpO1xuXG5cdGZ1bmN0aW9uIEFwcCgkZWwpIHsgY29uc29sZS5sb2coJ1tBcHBdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy53aGl0ZWJvYXJkSWQgPSAxO1xuXHRcdHRoaXMudHlwZXMgPSBbJ3Bvc3RpdHMnXTtcblx0XHR0aGlzLmkgPSAwO1xuXHRcdHRoaXMuZWxlbWVudExpc3QgPSBbXTtcblx0XHR0aGlzLnBvc2l0aW9uID0ge307XG5cdFx0dGhpcy5kYXRhSGFuZGxlciA9IG5ldyBEYXRhSGFuZGxlcigpO1xuXHRcdHRoaXMud2hpdGVib2FyZCA9IG5ldyBXaGl0ZWJvYXJkKHRoaXMuJGVsKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIgPSBuZXcgRWxlbWVudFBpY2tlcih0aGlzLiRlbCk7XG5cdFx0Ly9MVUlTVEVSRU5cblx0XHRiZWFuLm9uKHRoaXMuZGF0YUhhbmRsZXIsIFwiZGF0YS1zdWNjZXNzXCIsIHRoaXMuYWRkVG9FbGVtZW50TGlzdC5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMud2hpdGVib2FyZCwgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgdGhpcy53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVsZW1lbnRQaWNrZXIsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCB0aGlzLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQvL1VJVFZPRVJFTlxuXHRcdHRoaXMuYnVpbGRCb2FyZCgpO1xuXHR9XG5cblx0QXBwLnByb3RvdHlwZS53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSB3aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci5zZXRMb2NhdGlvbihldmVudC54UG9zLCBldmVudC55UG9zKTtcblx0XHR0aGlzLnBvc2l0aW9uID0gZXZlbnQ7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBlbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXInKTsgXG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnRvZ2dsZVZpc2libGUoKTtcblx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLGV2ZW50LHRoaXMucG9zaXRpb24pO1xuXHRcdHRoaXMubmV3RWxlbWVudChldmVudCwgZWxlbWVudC5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24oZWxlbWVudCwgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIHRoaXMucG9zaXRpb25DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmJ1aWxkQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYnVpbGRCb2FyZCcpO1xuXHRcdGZvcih2YXIgdHlwZSBpbiB0aGlzLnR5cGVzKSB7XG4gIFx0XHRcdHRoaXMuZGF0YUhhbmRsZXIubG9hZEJvYXJkRWxlbWVudHModGhpcy50eXBlc1t0eXBlXSx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9FbGVtZW50TGlzdCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGFkZFRvRWxlbWVudExpc3QnKTtcblx0XHR0aGlzLmVsZW1lbnRMaXN0LnB1c2godGhpcy5kYXRhSGFuZGxlci5nZXRCb2FyZEVsZW1lbnRzKCkpO1xuXHRcdHRoaXMuaSsrO1xuXHRcdGlmKHRoaXMuaSA9PT0gdGhpcy50eXBlcy5sZW5ndGgpe1xuXHRcdFx0dGhpcy5hZGRUb0JvYXJkKCk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9Cb2FyZCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbQXBwXSBhZGRUb0JvYXJkJyk7IFxuXHRcdHZhciBsaXN0ID0gdGhpcy5lbGVtZW50TGlzdFswXVswXTtcblx0XHRjb25zb2xlLmxvZyhsaXN0KTtcblx0XHRmb3IodmFyIGVsZW1lbnRJdGVtIGluIGxpc3QpIHtcbiAgXHRcdFx0dmFyIHR5cGUgPSBsaXN0W2VsZW1lbnRJdGVtXS5lbF90eXBlO1xuICBcdFx0XHR2YXIgcG9zaXRpb24gPSB7fTtcbiAgXHRcdFx0cG9zaXRpb24ueVBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRJdGVtXS5wb3N5KTtcbiAgXHRcdFx0cG9zaXRpb24ueFBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRJdGVtXS5wb3N4KTtcbiAgXHRcdFx0dmFyIGVsZW1lbnRJZCA9IGxpc3RbZWxlbWVudEl0ZW1dLmlkX29uX2JvYXJkO1xuICBcdFx0XHR2YXIgaWQgPSBsaXN0W2VsZW1lbnRJdGVtXS5pZDtcbiAgXHRcdFx0dmFyIGNvbnRlbnQgPSBsaXN0W2VsZW1lbnRJdGVtXS5jb250ZW50O1xuICBcdFx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLHR5cGUscG9zaXRpb24sZWxlbWVudElkLGNvbnRlbnQsaWQpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicmVtb3ZlLWNsaWNrZWRcIiwgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicG9zaXRpb24tY2hhbmdlZFwiLCB0aGlzLnBvc2l0aW9uQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHJlbW92ZUhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5yZW1vdmVCb2FyZEVsZW1lbnQoZXZlbnQuZWxlbWVudFR5cGUsIGV2ZW50LmlkKTtcblx0fTtcblx0XG5cdEFwcC5wcm90b3R5cGUubmV3RWxlbWVudCA9IGZ1bmN0aW9uKHR5cGUsaWRPbkJvYXJkKXsgY29uc29sZS5sb2coJ1tBcHBdIG5ld0VsZW1lbnRIYW5kbGVyJyk7IFxuXHRcdHRoaXMuZGF0YUhhbmRsZXIubmV3Qm9hcmRFbGVtZW50KHR5cGUsaWRPbkJvYXJkLHRoaXMucG9zaXRpb24sdGhpcy53aGl0ZWJvYXJkSWQpO1xuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUucG9zaXRpb25DaGFuZ2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHBvc2l0aW9uQ2hhbmdlZEhhbmRsZXInKTtcblx0XHR0aGlzLmRhdGFIYW5kbGVyLnBvc2l0aW9uQ2hhbmdlKGV2ZW50LmVsZW1lbnRUeXBlLGV2ZW50LmVsZW1lbnRJZCxldmVudC5lVGFyZ2V0LmNzcygnbGVmdCcpLGV2ZW50LmVUYXJnZXQuY3NzKCd0b3AnKSx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cdHJldHVybiBBcHA7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIHRoYXQ7XG5cdGZ1bmN0aW9uIERhdGFIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMudXJsID0gXCJodHRwOi8vbG9jYWxob3N0Ojg4ODgvY3AzL3doaXRlYm9hcmQvd2hpdGVib2FyZC9hcGkvaW5kZXgucGhwL1wiO1xuXHRcdHRoYXQgPSB0aGlzO1xuXHRcdHRoaXMuYm9hcmRFbGVtZW50cyA9IFtdO1xuXHR9XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmxvYWRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24odHlwZSx3aGl0ZWJvYXJkSWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBsb2FkQm9hcmRFbGVtZW50cycpO1xuXHRcdHJldHVybiAkLmFqYXgoe1xuXHQgIFx0XHRcdFx0dHlwZTogXCJHRVRcIixcblx0ICBcdFx0XHRcdHVybDogdGhpcy51cmwrdHlwZSsnLycrU3RyaW5nKHdoaXRlYm9hcmRJZCksXG5cdCAgXHRcdFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdFx0XHR0aGF0LmJvYXJkRWxlbWVudHMucHVzaChkYXRhKTtcblx0ICBcdFx0XHRcdFx0YmVhbi5maXJlKHRoYXQsIFwiZGF0YS1zdWNjZXNzXCIsIFtkYXRhXSk7XG5cdCAgXHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5nZXRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0Qm9hcmRFbGVtZW50cycpO1xuXHRcdHJldHVybiB0aGlzLmJvYXJkRWxlbWVudHM7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUJvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gcmVtb3ZlQm9hcmRFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKGVsZW1lbnRUeXBlKSB7XG5cdFx0ICAgIGNhc2UgXCJwb3N0LWl0XCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgncG9zdGl0cycsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdzdGF0aWMnLGlkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgnbW90aW9uJyxpZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUVsZW1lbnRCeUlkID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiR0VUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrZWxlbWVudFR5cGUrJy9kZWxldGUvJytpZCxcblx0ICBcdFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwiZGVsZXRlZCA9IFwiK2RhdGEpO1xuXHQgIFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld0JvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHBvc2l0aW9uLHdoaXRlYm9hcmRJZCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIG5ld0JvYXJkRWxlbWVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMubmV3RWxlbWVudCgncG9zdGl0cycsaWRfb25fYm9hcmQsIHBvc2l0aW9uLCB3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ3N0YXRpYycsd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdFbGVtZW50KCdtb3Rpb24nLHdoaXRlYm9hcmRJZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld0VsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZF9vbl9ib2FyZCxwb3NpdGlvbix3aGl0ZWJvYXJkSWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK2VsZW1lbnRUeXBlKycvYWRkJyxcblx0ICBcdFx0ZGF0YToge2lkX29uX2JvYXJkOiBpZF9vbl9ib2FyZCwgeHBvczogcG9zaXRpb24ueFBvcywgeXBvczogcG9zaXRpb24ueVBvcywgd2hpdGVib2FyZElkOiB3aGl0ZWJvYXJkSWR9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3M6JywgZGF0YSk7XG5cdCAgXHRcdH0sXG5cdCAgXHRcdGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5wb3NpdGlvbkNoYW5nZSA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHhwb3MseXBvcyx3aGl0ZWJvYXJkSWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsKydwb3N0aXRzJysnL2NoYW5nZS9wb3NpdGlvbicsXG5cdCAgXHRcdGRhdGE6IHt3aGl0ZWJvYXJkX2lkOiB3aGl0ZWJvYXJkSWQsaWRfb25fYm9hcmQ6IGlkX29uX2JvYXJkLCB4cG9zOiB4cG9zLCB5cG9zOiB5cG9zfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzOicsIGRhdGEpO1xuXHQgIFx0XHR9LFxuXHQgIFx0XHRlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4gRGF0YUhhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBFZGl0TWVudSgkZWwsZWxlbWVudElkKSB7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlZGl0LW1lbnUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBhY3Rpb25zOiBbXHRcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJjYW5jZWxcIiwgbmFtZTogXCJhbm51bGVlclwifSxcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJlZGl0XCIsIG5hbWU6IFwid2lqemlnZW5cIn0sXG5cdFx0ICBcdFx0XHR7YWN0aW9uSWQ6IFwicmVtb3ZlXCIsIG5hbWU6IFwidmVyd2lqZGVyZW5cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlZGl0bWVudScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgYWN0aW9uSWQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5hY3Rpb25JZCksXG5cdFx0XHQgICAgICBuYW1lID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMubmFtZSk7XG5cblx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHQgICAgXCI8bGkgaWQ9XCIrYWN0aW9uSWQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQpLmFwcGVuZChodG1sKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVycygpO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHR9XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyA+IHAnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyAuZWRpdC1tZW51JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdEVkaXRNZW51LnByb3RvdHlwZS5iaW5kSGFuZGxlcnMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBiaW5kSGFuZGxlcnMnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFZGl0TWVudS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBjbGlja0hhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSBcImVkaXRCdXR0b25cIil7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJlZGl0LWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0fWVsc2V7XG5cdFx0XHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcbiAgIFx0XHRcdGFjdGlvbkV2ZW50LnRhcmdldElkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgXHRcdFx0YWN0aW9uRXZlbnQuZWxlbWVudElkID0gdGhpcy5lbGVtZW50SWQ7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJhY3Rpb24tY2xpY2tlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0fVxuXG5cdH07XG5cblx0cmV0dXJuIEVkaXRNZW51O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIEVkaXRNZW51ID0gcmVxdWlyZSgnLi9FZGl0TWVudScpO1xuICAgIHZhciB6SW5kZXhDb3VudGVyID0gMTtcblx0dmFyIFBvc3RpdCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvUG9zdGl0Jyk7XG5cdHZhciBQaWN0dXJlID0gcmVxdWlyZSgnLi9lbGVtZW50cy9QaWN0dXJlJyk7XG5cdHZhciBNb3Rpb24gPSByZXF1aXJlKCcuL2VsZW1lbnRzL01vdGlvbicpO1xuXG5cdGZ1bmN0aW9uIEVsZW1lbnQoJGVsLGVsZW1lbnRUeXBlLHBvc2l0aW9uLGVsZW1lbnRJZCxjb250ZW50LGlkKSB7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdHRoaXMuZWxlbWVudFR5cGUgPSBlbGVtZW50VHlwZTtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHRpZih0aGlzLmVsZW1lbnRJZCl7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR9ZWxzZSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IHRoaXMuc2V0RWxlbWVudElkKCk7XG5cdFx0XHRjb25zb2xlLmxvZyhcImVsZW1lbnQgaWQgPSBcIit0aGlzLmVsZW1lbnRJZCk7XG5cdFx0fVxuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHRpZihpZCl7XG5cdFx0XHR0aGlzLmlkID0gaWQ7XG5cdFx0fVxuXHRcdHRoaXMuY3JlYXRlRWxlbWVudEhvbGRlcigpO1xuXHR9XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudEhvbGRlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWxlbWVudEhvbGRlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoXCI8c2VjdGlvbiBjbGFzcz0nZWxlbWVudC1ob2xkZXInPjwvc2VjdGlvbj5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlcjpsYXN0LW9mLXR5cGVcIikuYXR0cignaWQnLCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge307XG5cdFx0cG9zaXRpb24udG9wID0gdGhpcy5wb3NpdGlvbi55UG9zO1xuXHRcdHBvc2l0aW9uLmxlZnQgPSB0aGlzLnBvc2l0aW9uLnhQb3M7XG5cdFx0cG9zaXRpb24uekluZGV4ID0gMDtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MocG9zaXRpb24pO1xuXHRcdHRoaXMuY3JlYXRlRWRpdE1lbnUoKTtcblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKHRoaXMuZWxlbWVudFR5cGUpIHtcblx0XHRjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQb3N0aXQodGhpcy5jb250ZW50KTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBvc3RpdCgpKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBvc3RpdCk7XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHRcdGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgUGljdHVyZSh0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQaWN0dXJlKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0Y2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBNb3Rpb24odGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkpO1xuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmFwcGVuZCh0aGlzLmVsZW1lbnQuY3JlYXRlTW90aW9uKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCRlbCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5vbignbW91c2Vkb3duJywgdGhpcy5tb3VzZWRvd25IYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMubW91c2VEb3duID0gZmFsc2U7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUubW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNlZG93bkhhbmRsZXInKTtcblxuXHRcdGlmKGV2ZW50LnRhcmdldC5pZCA9PT0gdGhpcy5lbGVtZW50SWQpe1xuXHRcbiAgICAgICAgXHR0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgXHRcdHRoaXMuY3VycmVudExlZnQgPSAkKGUudGFyZ2V0KS5jc3MoJ2xlZnQnKTtcbiAgICAgICBcdFx0dGhpcy5jdXJyZW50VG9wID0gJChlLnRhcmdldCkuY3NzKCd0b3AnKTtcbiAgICAgICAgXHR0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5tb3VzZU1vdmVIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIFx0dGhpcy5fbW91c2VVcEhhbmRsZXIgPSB0aGlzLm1vdXNlVXBIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIFx0dGhpcy5vZmZzZXRYID0gZS5vZmZzZXRYO1xuICAgICAgICBcdHRoaXMub2Zmc2V0WSA9IGUub2Zmc2V0WTtcbiAgICAgICAgXHQrK3pJbmRleENvdW50ZXI7XG4gICAgICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCd6SW5kZXgnLCB6SW5kZXhDb3VudGVyKTtcbiAgICAgICAgXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgfVxuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUVkaXRNZW51ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFZGl0TWVudScpO1xuXHRcdHRoaXMuZWRpdE1lbnUgPSBuZXcgRWRpdE1lbnUodGhpcy4kZWwsIHRoaXMuZWxlbWVudElkKTtcblx0XHRiZWFuLm9uKHRoaXMuZWRpdE1lbnUsIFwiZWRpdC1jbGlja2VkXCIsIHRoaXMuZWRpdENsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24odGhpcy5lZGl0TWVudSwgXCJhY3Rpb24tY2xpY2tlZFwiLCB0aGlzLmFjdGlvbkNsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmVkaXRDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBlZGl0Q2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLmVsZW1lbnQuZWRpdCh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmFjdGlvbkNsaWNrZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGFjdGlvbkNsaWNrZWRIYW5kbGVyJyk7XG5cdFx0c3dpdGNoKGV2ZW50LnRhcmdldElkKSB7XG5cdFx0ICAgIGNhc2UgXCJyZW1vdmVcIjpcblx0XHQgICAgXHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKCcjJytldmVudC5lbGVtZW50SWQpLnJlbW92ZSgpO1xuXHRcdCAgICBcdHZhciBhY3Rpb25FdmVudCA9IHt9O1xuXHRcdCAgICBcdGFjdGlvbkV2ZW50LmlkID0gdGhpcy5pZDtcblx0XHQgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50VHlwZSA9IHRoaXMuZWxlbWVudFR5cGU7XG5cdFx0ICAgIFx0YmVhbi5maXJlKHRoaXMsIFwicmVtb3ZlLWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJlZGl0XCI6XG5cdFx0ICAgIFx0dGhpcy5lbGVtZW50LmNvbmZpcm0oKTtcblx0XHQgICAgXHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiY2FuY2VsXCI6XG5cdFx0ICAgIFx0dGhpcy5lbGVtZW50LmVuZEVkaXQoKTtcblx0XHQgICAgXHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZW1vdmVIYW5kbGVyJyk7XG4gICAgICAgIGlmKHRoaXMubW91c2VEb3duID09PSB0cnVlKXtcbiAgICAgICAgICAgIHZhciBtb3VzZVggPSBwYXJzZUludChlLmNsaWVudFgpO1xuICAgICAgICAgICAgdmFyIG1vdXNlWSA9IHBhcnNlSW50KGUuY2xpZW50WSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MoJ2xlZnQnLCBtb3VzZVggLSB0aGlzLm9mZnNldFgpO1xuICAgICAgICAgICAgdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCd0b3AnLCBtb3VzZVkgLSB0aGlzLm9mZnNldFkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gbW91c2V1cEhhbmRsZXInKTtcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFRvcCAhPT0gJChlLnRhcmdldCkuY3NzKCd0b3AnKSB8fCB0aGlzLmN1cnJlbnRMZWZ0ICE9PSAkKGUudGFyZ2V0KS5jc3MoJ2xlZnQnKSl7XG4gICAgICAgIFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG4gICAgICAgIFx0YWN0aW9uRXZlbnQuZVRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICBcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcbiAgICAgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcbiAgICAgICAgXHRiZWFuLmZpcmUodGhpcywgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIGFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRFbGVtZW50SWQgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBzZXRFbGVtZW50SWQnKTtcbiAgICBcdHZhciBob2xkZXJzID0gdGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlclwiKTtcbiAgICBcdGlmKGhvbGRlcnMubGVuZ3RoID4gMCl7XG4gICAgXHRcdHZhciBpZEhvbGRlciA9W107XG5cdFx0XHRmb3IoaSA9IDA7aSA8IGhvbGRlcnMubGVuZ3RoOyBpKysgKXtcblx0XHRcdFx0aWRIb2xkZXIucHVzaChob2xkZXJzW2ldLmlkKTtcblx0XHRcdH1cblx0XHRcdGlkSG9sZGVyLnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGItYTt9KTtcblx0XHRcdHJldHVybiBTdHJpbmcoTnVtYmVyKGlkSG9sZGVyWzBdKSsxKTtcbiAgICBcdH0gZWxzZXtcbiAgICBcdFx0cmV0dXJuIFwiMFwiO1xuICAgIFx0fVxuXHR9O1xuXG5cdHJldHVybiBFbGVtZW50O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblxuXHRmdW5jdGlvbiBFbGVtZW50UGlja2VyKCRlbCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlbGVtZW50LXBpY2tlci10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHtcblx0XHQgIGVsZW1lbnRzOiBbXHRcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcInBvc3QtaXRcIiwgbmFtZTogXCJwb3N0LWl0XCJ9LFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwic3RhdGljXCIsIG5hbWU6IFwiaW1hZ2VcIn0sXG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJtb3Rpb25cIiwgbmFtZTogXCJ2aWRlb1wifVxuICBcdFx0XHRcdF1cbiAgXHRcdFx0fTtcblx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BpY2tlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgZWxlbWVudCA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLmVsZW1lbnQpLFxuXHRcdFx0ICAgICAgbmFtZSA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLm5hbWUpO1xuXG5cdFx0XHQgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKFxuXHRcdFx0ICAgIFwiPGxpIGlkPVwiK2VsZW1lbnQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLmFwcGVuZCggJChodG1sKSApO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fVxuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIHRvZ2dsZVZpc2libGUnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjZWxlbWVudC1waWNrZXInKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIHNldExvY2F0aW9uJyk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge1xuXHRcdFx0dG9wIDogeVBvcyxcblx0XHRcdGxlZnQgOiB4UG9zXG5cdFx0fTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLmNzcyhwb3NpdGlvbik7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2VsZW1lbnQtcGlja2VyID4gdWwgPiBsaScpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjbGlja0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIGV2ZW50LnRhcmdldC5pZCk7XG5cdH07XG5cblx0cmV0dXJuIEVsZW1lbnRQaWNrZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBQYXJ0aWNpcGFudCgkZWwpeyBjb25zb2xlLmxvZygnW1BhcnRpY2lwYW50XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBpbnB1dCA9ICRlbC5maW5kKCcucGFydGljaXBhbnQtaW5wdXQnKTtcblx0XHRjb25zb2xlLmxvZyhpbnB1dC52YWwoKSlcblx0XHRpZihpbnB1dC52YWwoKSl7XG5cdFx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3NldHRpbmdzLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdCBcdFx0dmFyIGNvbnRleHQgPSB7IGVsZW1lbnRzOiBbe31dfTtcblx0XHRcdFx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncGlja2VyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHRcdCAgICBcIjxsaSBpZD0nJz5cIitpbnB1dC52YWwoKStcIjxidXR0b24gY2xhc3M9J2J0biBidG4tZGVsZXRlJz5YPC9idXR0b24+PC9saT5cIlxuXHRcdFx0XHQgICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdFx0dGhpcy4kZWwuZmluZChcIiNwYXJ0aWNpcGFudC1saXN0XCIpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcdHRoaXMuYmluZERlbGV0ZWJ1dHRvbigpO1xuXHRcdFx0JCgnLnBhcnRpY2lwYW50LWlucHV0JykudmFsKFwiXCIpO1xuXHRcdH1cblx0fVxuXG5cdFBhcnRpY2lwYW50LnByb3RvdHlwZS5iaW5kRGVsZXRlYnV0dG9uID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQYXJ0aWNpcGFudF0gYmluZERlbGV0ZWJ1dHRvbicpO1xuXHRcdHRoaXMuZGVsZXRlYnV0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLWRlbGV0ZScpO1xuXHRcdHRoaXMuZGVsZXRlYnV0b25bdGhpcy5kZWxldGVidXRvbi5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRlbGV0ZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRQYXJ0aWNpcGFudC5wcm90b3R5cGUuZGVsZXRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZyhcIltQYXJ0aWNpcGFudF0gZGVsZXRlQ2xpY2tIYW5kbGVyXCIpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCBcImRlbGV0ZVwiLCBldmVudC5wYXRoWzFdKTtcblx0fTtcblxuXHRyZXR1cm4gUGFydGljaXBhbnQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgV2hpdGVib2FyZFNldHRpbmdzID0gcmVxdWlyZSAoJy4vV2hpdGVib2FyZFNldHRpbmdzJyk7XG5cblx0ZnVuY3Rpb24gV2hpdGVib2FyZCgkZWwsIGJvYXJkTmFtZSkgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jcmVhdGVXaGl0ZWJvYXJkKCk7XG5cdFx0dGhpcy5hZGRXaGl0ZWJvYXJkU2V0dGluZ3MoKTtcblx0fVxuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNyZWF0ZVdoaXRlYm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNyZWF0ZVdoaXRlYm9hcmQnKTtcblx0XHR0aGlzLmJvYXJkID0gdGhpcy4kZWwuYXBwZW5kKFwiPGRpdiBpZD0nd2hpdGVib2FyZCc+PC9kaXY+XCIpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLmJvYXJkLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjbGlja0hhbmRsZXInKTtcblx0XHR2YXIgeFBvcyA9IGV2ZW50LnBhZ2VYIC0gdGhpcy4kZWwub2Zmc2V0KCkubGVmdDtcbiAgIFx0XHR2YXIgeVBvcyA9IGV2ZW50LnBhZ2VZIC0gdGhpcy4kZWwub2Zmc2V0KCkudG9wO1xuICAgXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICAgXHRcdHBvc2l0aW9uLnhQb3MgPSB4UG9zO1xuICAgXHRcdHBvc2l0aW9uLnlQb3MgPSB5UG9zO1xuXHRcdGlmKGV2ZW50LnRhcmdldC5pZCA9PT0gXCJ3aGl0ZWJvYXJkXCIpe1xuXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwid2hpdGVib2FyZC1jbGlja2VkXCIsIHBvc2l0aW9uKTtcblx0XHR9XG5cdH07XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuYWRkV2hpdGVib2FyZFNldHRpbmdzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBhZGRXaGl0ZWJvYXJkU2V0dGluZ3MnKTtcblx0XHR0aGlzLndoaXRlYm9hcmRTZXR0aW5ncyA9IG5ldyBXaGl0ZWJvYXJkU2V0dGluZ3ModGhpcy4kZWwpO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBQYXJ0aWNpcGFudCA9IHJlcXVpcmUgKCcuL1BhcnRpY2lwYW50Jyk7XG5cblxuXHRmdW5jdGlvbiBXaGl0ZWJvYXJkU2V0dGluZ3MoJGVsLCAkcGFydGljaXBhbnRzLCAkdGl0bGUpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy4kcGFydGljaXBhbnRzID0gJHBhcnRpY2lwYW50cztcblx0XHR0aGlzLiR0aXRsZSA9ICR0aXRsZTtcblx0XHR0aGlzLmJpbmRIYW5kbGVyKCk7XG5cblx0fVxuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2hpZGUnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI3Nob3cnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5oaWRlLWJ1dHRvbicpLm9uKCdjbGljaycsIHRoaXMuaGlkZVNldHRpbmdzSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuc2hvdy1idXR0b24nKS5vbignY2xpY2snLCB0aGlzLmhpZGVTZXR0aW5nc0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmFkZC1idXR0b24nKS5vbignY2xpY2snLCB0aGlzLmNyZWF0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpO1xuXHR9O1xuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmNyZWF0ZVBhcnRpY2lwYW50ID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gYWRkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLnBhcnRpY2lwYW50ID0gbmV3IFBhcnRpY2lwYW50KHRoaXMuJGVsKTtcblx0XHRiZWFuLm9uKHRoaXMucGFydGljaXBhbnQsIFwiZGVsZXRlXCIsIHRoaXMuZGVsZXRlUGFydGljaXBhbnQuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5oaWRlU2V0dGluZ3NIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gaGlkZVNldHRpbmdzSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5oaWRlX3NlY3Rpb24nKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLnNob3ctYnV0dG9uJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXHRcblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5kZWxldGVQYXJ0aWNpcGFudCA9IGZ1bmN0aW9uKHBhcnRpY2lwYW50KSB7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBkZWxldGVQYXJ0aWNpcGFudCcpO1xuXHRcdHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYXJ0aWNpcGFudC1saXN0Jyk7XG5cdFx0ZWwucmVtb3ZlQ2hpbGQocGFydGljaXBhbnQpO1xuXHRcdHJldHVybjtcblx0fTtcblxuXHRyZXR1cm4gV2hpdGVib2FyZFNldHRpbmdzO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBNb3Rpb25FZGl0ID0gcmVxdWlyZSgnLi9Nb3Rpb25FZGl0Jyk7XG5cblxuXHRmdW5jdGlvbiBNb3Rpb24oJGVsLHhQb3MseVBvcyx2aWRTcmMpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0aWYodmlkU3JjKXtcblx0XHR0aGlzLnZpZFNyYyA9IHZpZFNyYztcblx0XHR9XG5cdFx0XG5cdH1cblxuXHRNb3Rpb24ucHJvdG90eXBlLmNyZWF0ZU1vdGlvbiA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjcmVhdE1vdGlvbicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbW90aW9uLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnZpZFNyYyl7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9IHRoaXMudmlkU3JjO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC52aWRTcmMgPSBcIlwiO1xuXHRcdH1cblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuKCQoaHRtbCkpO1xuXHRcdFxuXHR9O1xuXHRcblx0TW90aW9uLnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7ICBjb25zb2xlLmxvZygnW01vdGlvbl0gZWRpdCcpO1xuXG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHRcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBNb3Rpb25FZGl0KHRoaXMudmlkU3JjLCBlbGVtZW50SWQpKTtcblxuXHR9O1xuXG5cdE1vdGlvbi5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjb25maXJtJyk7XG5cdFx0dGhpcy52aWRTcmMgPSB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiIC5tb3Rpb24tZWRpdFwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRNb3Rpb24ucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAubW90aW9uLWVkaXRcIikucmVtb3ZlKCk7XG5cdH07XG5cblxuXHRyZXR1cm4gTW90aW9uO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gTW90aW9uRWRpdCh2aWRTcmMsIGVsZW1lbnRJZCkgeyBjb25zb2xlLmxvZygnW01vdGlvbkVkaXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNtb3Rpb24tZWRpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudmlkU3JjID0gdmlkU3JjO1xuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aW5pdE1vdGlvbklucHV0KGVsZW1lbnRJZCk7XG4gXHRcdH0sIDEwMCk7XG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRNb3Rpb25JbnB1dChlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gaW5pdE1vdGlvbklucHV0Jyk7XG5cdFx0dmFyIGZpbGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnK2VsZW1lbnRJZCsnID4gaW5wdXRbdHlwZT1maWxlXScpO1xuXHQgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHBsYXlTZWxlY3RlZEZpbGUpO1xuXHR9XG5cbiBcdGZ1bmN0aW9uIHBsYXlTZWxlY3RlZEZpbGUoZXZlbnQpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIHBsYXlTZWxlY3RlZEZpbGUnKTtcblx0XHRcdHZhciBlbGVtZW50SWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZDtcblx0XHRcdHZhciB2aWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytlbGVtZW50SWQrJyA+IC5tb3Rpb24gPiB2aWRlbycpO1xuICAgICAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWxlLnR5cGU7XG4gICAgICAgICAgICB2YXIgY2FuUGxheSA9IHZpZC5jYW5QbGF5VHlwZSh0eXBlKTtcbiAgICAgICAgICAgIGNhblBsYXkgPSAoY2FuUGxheSA9PT0gJycgPyAnbm8nIDogY2FuUGxheSk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdDYW4gcGxheSB0eXBlIFwiJyArIHR5cGUgKyAnXCI6ICcgKyBjYW5QbGF5O1xuICAgICAgICAgICAgdmFyIGlzRXJyb3IgPSBjYW5QbGF5ID09PSAnbm8nO1xuXG4gICAgICAgICAgICBpZihVUkwpe1xuICAgICAgICAgICAgdmFyIGZpbGVVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICAgICAgdmlkLnNyYyA9IGZpbGVVUkw7XG4gICAgICAgICAgICB2aWQuYXV0b1BsYXkgPSB0cnVlO1xuICAgICAgICBcdH1cblx0fVxuXHRcblx0cmV0dXJuIE1vdGlvbkVkaXQ7XG5cbn0pKCk7XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIFBpY3R1cmVFZGl0ID0gcmVxdWlyZSgnLi9QaWN0dXJlRWRpdCcpO1xuXG5cdGZ1bmN0aW9uIFBpY3R1cmUoJGVsLHhQb3MseVBvcywgaW1nU3JjKSB7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHRjb25zb2xlLmxvZygkZWwpO1xuXHRcdGlmKGltZ1NyYyl7XG5cdFx0dGhpcy5pbWdTcmMgPSBpbWdTcmM7XG5cdFx0fVxuXHR9XG5cblx0UGljdHVyZS5wcm90b3R5cGUuY3JlYXRlUGljdHVyZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY3JlYXRQaWN0dXJlJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwaWN0dXJlLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnR4dCl7XG5cdFx0XHRjb250ZXh0LmltZ1NyYyA9IHRoaXMuaW1nU3JjO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC5pbWdTcmMgPSBcIlwiO1xuXHRcdH1cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHJldHVybigkKGh0bWwpKTtcblx0fTtcblx0XG5cblx0UGljdHVyZS5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKCRlbCxlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGVkaXQnKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcdFxuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkKS5hcHBlbmQobmV3IFBpY3R1cmVFZGl0KCRlbCwgdGhpcy5pbWdTcmMsZWxlbWVudElkKSk7XG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY29uZmlybScpO1xuXHRcdHRoaXMuaW1nU3JjID0gdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiAuaW5wdXQtcGljdHVyZVwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRQaWN0dXJlLnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBlbmRFZGl0Jyk7XG5cblx0Y29uc29sZS5sb2codGhpcy5lbGVtZW50SWQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAuaW5wdXQtcGljdHVyZVwiKS5yZW1vdmUoKTtcblxuXHR9O1xuXG5cdHJldHVybiBQaWN0dXJlO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBlcnJvcnMgPSBbXTtcblxuXHRmdW5jdGlvbiBQaWN0dXJlRWRpdCgkZWwsdHh0LGVsZW1lbnRJZCkgeyBjb25zb2xlLmxvZygnW1BpY3R1cmVFZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdGlmIChcblx0XHRcdHdpbmRvdy5GaWxlICYmIFxuXHRcdFx0d2luZG93LkZpbGVSZWFkZXIgJiYgXG5cdFx0XHR3aW5kb3cuRmlsZUxpc3QgJiYgXG5cdFx0XHR3aW5kb3cuQmxvYlxuXHRcdCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJGdWxsIGZpbGUgc3VwcG9ydFwiKTtcblx0XHR9XG5cblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3BpY3R1cmUtZWRpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudHh0ID0gdHh0O1xuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGluaXRJbWFnZUlucHV0KGVsZW1lbnRJZCk7fSwgMTAwKTtcblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbml0SW1hZ2VJbnB1dChlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVFZGl0XSBpbml0SW1hZ2VJbnB1dCcpO1xuXHRcdHZhciBpbWdJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytlbGVtZW50SWQrJyA+IC5pbnB1dC1waWN0dXJlJyk7XG5cdFx0aW1nSW5wdXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNyZWF0ZVRodW1iKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVGh1bWIoZSl7Y29uc29sZS5sb2coJ1tQaWN0dXJlRWRpdF0gY3JlYXRlVGh1bWInKTtcblx0XHR2YXIgZWxlbWVudElkID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuaWQ7XG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5maWxlcyAmJiBcblx0XHRcdHRoaXMuZmlsZXNbMF0gJiYgXG5cdFx0XHR0aGlzLmZpbGVzWzBdLnR5cGUubWF0Y2goJ2ltYWdlLionKVxuXHRcdCkge1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycrZWxlbWVudElkKyc+IC5waWN0dXJlID4gI2ltYWdlLXByZXZpZXcnKTtcblxuXHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGltZy53aWR0aCk7XG5cdFx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGltZy5oZWlnaHQpO1xuXHRcdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpZihlcnJvcnMubGVuZ3RoID09PSAwKXtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIrIGUudGFyZ2V0LnJlc3VsdCArXCInKVwiO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLmhlaWdodCA9IGltZy53aWR0aCtcInB4XCI7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUud2lkdGggPSBpbWcuaGVpZ2h0K1wicHhcIjtcblx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdGFsZXJ0KGVycm9ycy5qb2luKFwiXFxuXCIpKTtcblx0XHRcdFx0XHRcdGVycm9ycyA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmZpbGVzWzBdKTtcblxuXHRcdH1lbHNle1xuXHRcdFx0ZXJyb3JzLnB1c2goXCJGaWxlIGlzIG5vdCBhIHZhbGlkIGltYWdlXCIpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBQaWN0dXJlRWRpdDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBQb3N0aXRFZGl0ID0gcmVxdWlyZSgnLi9Qb3N0aXRFZGl0Jyk7XG5cblx0ZnVuY3Rpb24gUG9zdGl0KHR4dCkgeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnR4dCA9IHR4dDtcblx0XHRpZighdGhpcy50eHQpe1xuXHRcdFx0dGhpcy50eHQgPSBcIk5pZXV3ZSBQb3N0aXRcIjtcblx0XHR9XG5cdH1cblxuXHRQb3N0aXQucHJvdG90eXBlLmNyZWF0ZVBvc3RpdCA9IGZ1bmN0aW9uKHR4dCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjcmVhdGVQb3N0aXQnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudHh0ID0gdGhpcy50eHQ7XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKCRlbCxlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gZWRpdCcpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitlbGVtZW50SWQpLmFwcGVuZChuZXcgUG9zdGl0RWRpdCh0aGlzLnR4dCkpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjb25maXJtJyk7XG5cdFx0dGhpcy50eHQgPSB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiIC5wb3N0aXQtZWRpdFwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS5hZGRDbGFzcyhcImhpZGRlblwiKS50ZXh0KHRoaXMudHh0KTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdC1lZGl0XCIpLnJlbW92ZSgpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0fTtcblxuXHRyZXR1cm4gUG9zdGl0O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gUG9zdGl0RWRpdCh0eHQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRFZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcG9zdGl0LWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHR4dDtcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXG5cdH1cblx0XG5cdHJldHVybiBQb3N0aXRFZGl0O1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==