!function e(t,i,n){function o(l,r){if(!i[l]){if(!t[l]){var d="function"==typeof require&&require;if(!r&&d)return d(l,!0);if(s)return s(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[l]={exports:{}};t[l][0].call(c.exports,function(e){var i=t[l][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[l].exports}for(var s="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(e){!function(){function t(){new i($("#container"))}var i=e("./classes/App");t()}()},{"./classes/App":3}],2:[function(e,t){t.exports=function(){function e(e){console.log("[AddContributor] constructor"),this.$el=e,this.input=this.$el.find(".input-contributor")[0],this.$el.find(".input-contributor")[0].addEventListener("submit",this.submitHandler.bind(this))}return e.prototype.submitHandler=function(e){e.preventDefault(),console.log("SUBMUT"),this.input.value=""},e}()},{}],3:[function(e,t){t.exports=function(){function t(e){console.log("[App] constructor"),this.$el=e,this.whiteboardId=1,this.types=["postits"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new s,this.whiteboard=new i(this.$el),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),s=e("./DataHandler");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();var t=new o(this.$el,e,this.position);this.newElement(e,t.elementId)},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e])},t.prototype.addToElementList=function(){console.log("[App] addToElementList"),this.elementList.push(this.dataHandler.getBoardElements()),this.i++,this.i==this.types.length&&this.addToBoard()},t.prototype.addToBoard=function(){console.log("[App] addToBoard");var e=this.elementList[0][0];for(var t in e){var i=e[t].el_type,n={};n.yPos=Number(e[t].posy),n.xPos=Number(e[t].posx);var s=e[t].id_on_board,l=e[t].id,r=e[t].content,t=new o(this.$el,i,n,s,r,l);bean.on(t,"remove-clicked",this.removeHandler.bind(this))}},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.id)},t.prototype.newElement=function(e,t){console.log("[App] newElementHandler"),this.dataHandler.newBoardElement(e,t,this.position,this.whiteboardId)},t}()},{"./DataHandler":4,"./Element":6,"./ElementPicker":7,"./Whiteboard":8}],4:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/",t=this,this.boardElements=[]}var t;return e.prototype.loadBoardElements=function(e){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/1",data:{content:"content"},success:function(e){t.boardElements.push(e),bean.fire(t,"data-success",[e])}})},e.prototype.getBoardElements=function(){return console.log("[DataHandler] getBoardElements"),this.boardElements},e.prototype.removeBoardElement=function(e,t){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t);break;case"static":this.removeElementById("static",t);break;case"motion":this.removeElementById("motion",t)}},e.prototype.removeElementById=function(e,t){$.ajax({type:"GET",url:this.url+e+"/delete/"+t,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.newBoardElement=function(e,t,i,n){$.ajax({type:"POST",url:this.url+"postits/add/"+n+"/"+t+"/"+i.xPos+"/"+i.yPos,success:function(){console.log("new element posted")}})},e}()},{}],5:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var s=n(o);this.$el.find("#"+this.elementId).append(s),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked",t),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],6:[function(e,t){t.exports=function(){function t(e,t,i,n,o,s){console.log("[Element] constructor"),this.$el=e,this.content=o,this.elementType=t,this.elementId=n,this.elementId=this.elementId?n:this.setElementId(),this.position=i,s&&(this.id=s),this.createElementHolder()}var n=e("./EditMenu"),o=1,s=e("./elements/Postit"),l=e("./elements/Picture"),r=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={};e.top=this.position.yPos,e.left=this.position.xPos,e.zIndex=0,this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new s(this.content),this.$el.find("#"+this.elementId).append(this.element.createPostit()),this.$el.find("#"+this.elementId).append(this.element.createPostit),this.bindHandler(this.$el.find("#"+this.elementId));break;case"static":this.element=new l(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createPicture),this.bindHandler(this.$el.find("#"+this.elementId)),this.element.initImageInputs();break;case"motion":this.element=new r(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createMotion),this.bindHandler(this.$el.find("#"+this.elementId)),this.element.initMotionInputs()}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),this.mouseDown=!1},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),"whiteboard"!==e.target.id&&this.$el.find("#element-picker").removeClass("hidden"),this.mouseDown=!0,this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++o,this.$el.find("#"+this.elementId).css("zIndex",o),document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler)},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new n(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();var t={};t.id=this.id,t.elementType=this.elementType,bean.fire(this,"remove-clicked",t);break;case"edit":console.log("EDITE"),this.element.confirm(),this.editMenu.toggleVisible();break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);this.$el.find("#"+this.elementId).css("left",t-this.offsetX),this.$el.find("#"+this.elementId).css("top",i-this.offsetY)}},t.prototype.mouseUpHandler=function(){console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler)},t.prototype.setElementId=function(){console.log("[Element] setElementId");var e=this.$el.find(".element-holder"),t=[];for(i=0;i<e.length;i++)t.push(e[i].id);return t.sort(function(e,t){return t-e}),Number(t[0])+1},t}()},{"./EditMenu":5,"./elements/Motion":10,"./elements/Picture":11,"./elements/Postit":12}],7:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],8:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e,this.createWhiteboard()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el),this.whiteboardSettings.createSettingPanel(),this.whiteboardSettings.addContributor()},t}()},{"./WhiteboardSettings":9}],9:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[WhiteboardSettings] constructor"),this.$el=e,this.contributors=t,i&&(this.prjct_title=i)}var i=e("./AddContributor");return t.prototype.createSettingPanel=function(){console.log("[WhiteboardSettings] createSettingPanel");var e=$("#setting-template").text(),t=Handlebars.compile(e),i={};i.prjct_title=this.prjct_title?this.prjct_title:"Untitled",i.contributor=this.contributor;var n=t(i);$("#whiteboard").append($(n))},t.prototype.addContributor=function(){console.log("[WhiteboardSettings] addContributor"),this.addContributor=new i(this.$el.find(".contributor-form")),console.log(this.$el)},t}()},{"./AddContributor":2}],10:[function(e,t){t.exports=function(){function e(e,t,i,n){console.log("[Motion] constructor"),this.$el=e,console.log(e),n&&(this.vidSrc=n),window.File&&window.FileReader&&window.FileList&&window.Blob}function t(e){console.log("[Motion] initMotionInput"),e.classList.add("motion-input-js");var t=e.querySelector("input[type=file]");t.addEventListener("change",i);var n=document.createElement("div");n.classList.add("motion-input-preview"),e.insertBefore(n,t)}function i(){if(console.log("Input changed"),this.files&&this.files[0]&&this.files[0].type.match("video.*")){var e=new FileReader,t=this.parentNode.querySelector(".motion-input-preview");e.onload=function(e){var i=document.createElement("video");i.onload=function(){console.log(i),i.width>300?(newWidth=i.width/img.width*300,newHeight=i.height/img.width*300):(newWidth=i.width,newHeight=i.height),0===errors.length?t.style.src="'"+e.target.result+"'":(alert(errors.join("\n")),errors=[])},i.setAttribute("src",e.target.result)},e.readAsDataURL(this.files[0])}else errors.push("File is not a valid video")}return e.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.txt?this.vidSrc:"";var n=t(i);return $(n)},e.prototype.initMotionInputs=function(){console.log("[Motion] initMotionInputs");var e=this.$el.find(".motion-input")[0];t(e)},e}()},{}],11:[function(e,t){t.exports=function(){function e(e,t,i,n){console.log("[Picture] constructor"),this.$el=e,console.log(e),n&&(this.imgSrc=n),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support")}function t(e){e.classList.add("image-input-js");var t=e.querySelector("input[type=file]");t.addEventListener("change",i);var n=document.createElement("div");n.classList.add("image-input-preview"),e.insertBefore(n,t)}function i(){if(console.log("Input changed"),this.files&&this.files[0]&&this.files[0].type.match("image.*")){var e=new FileReader,t=this.parentNode.querySelector(".image-input-preview");e.onload=function(e){var i=document.createElement("img");i.onload=function(){i.width>300?(newWidth=i.width/i.width*300,newHeight=i.height/i.width*300):(newWidth=i.width,newHeight=i.height),0===n.length?(t.style.backgroundImage="url('"+e.target.result+"')",t.style.height=newHeight+"px",t.style.width=newWidth+"px"):(alert(n.join("\n")),n=[])},i.setAttribute("src",e.target.result),i.setAttribute("width",i.width),i.setAttribute("height",i.height)},e.readAsDataURL(this.files[0])}else n.push("File is not a valid image")}var n=[];return e.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};i.imgSrc=this.txt?this.imgSrc:"";var n=t(i);return $(n)},e.prototype.initImageInputs=function(){console.log("[Picture] initImageinputs");var e=this.$el.find(".image-input")[0];t(e)},e.prototype.edit=function(){console.log("[Picture] edit")},e.prototype.confirm=function(){console.log("[Picture] confirm")},e.prototype.endEdit=function(){console.log("[Picture] endEdit")},e}()},{}],12:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":13}],13:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQWRkQ29udHJpYnV0b3IuanMiLCJqcy9zcmMvY2xhc3Nlcy9BcHAuanMiLCJqcy9zcmMvY2xhc3Nlcy9EYXRhSGFuZGxlci5qcyIsImpzL3NyYy9jbGFzc2VzL0VkaXRNZW51LmpzIiwianMvc3JjL2NsYXNzZXMvRWxlbWVudC5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnRQaWNrZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkLmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZFNldHRpbmdzLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUGljdHVyZS5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdEVkaXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLE9BQUEsS0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLHVCQUFBLEVBQUEsSUFBQSxNQUFBLEdBQUEsS0FBQSxtQkFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsU0FBQSxJQ0FBLFdBSUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLGVBSEEsR0FBQSxHQUFBLEVBQUEsZ0JBTUEsK0NDUkEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsS0FBQSxzQkFBQSxHQUNBLEtBQUEsSUFBQSxLQUFBLHNCQUFBLEdBQUEsaUJBQUEsU0FBQSxLQUFBLGNBQUEsS0FBQSxPQVdBLE1BUkEsR0FBQSxVQUFBLGNBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQ0EsUUFBQSxJQUFBLFVBRUEsS0FBQSxNQUFBLE1BQUEsSUFJQSwyQkNqQkEsRUFBQSxRQUFBLFdBT0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLHFCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsYUFBQSxFQUNBLEtBQUEsT0FBQSxXQUNBLEtBQUEsRUFBQSxFQUNBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsS0FBQSxZQUFBLEdBQUEsR0FDQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLGNBQUEsR0FBQSxHQUFBLEtBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxZQUFBLGVBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsV0FBQSxxQkFBQSxLQUFBLHlCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxjQUFBLHlCQUFBLEtBQUEsNEJBQUEsS0FBQSxPQUVBLEtBQUEsYUFwQkEsR0FBQSxHQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLG1CQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxnQkFxRUEsT0FqREEsR0FBQSxVQUFBLHlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsa0NBQ0EsS0FBQSxjQUFBLGdCQUNBLEtBQUEsY0FBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxTQUFBLEdBR0EsRUFBQSxVQUFBLDRCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEscUNBQ0EsS0FBQSxjQUFBLGVBQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsTUFBQSxXQUFBLEVBQUEsRUFBQSxZQUdBLEVBQUEsVUFBQSxXQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLEtBQUEsR0FBQSxLQUFBLE1BQUEsTUFDQSxLQUFBLFlBQUEsa0JBQUEsS0FBQSxNQUFBLEtBSUEsRUFBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsWUFBQSxLQUFBLEtBQUEsWUFBQSxvQkFDQSxLQUFBLElBQ0EsS0FBQSxHQUFBLEtBQUEsTUFBQSxRQUNBLEtBQUEsY0FJQSxFQUFBLFVBQUEsV0FBQSxXQUFBLFFBQUEsSUFBQSxtQkFDQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEdBQUEsRUFDQSxLQUFBLEdBQUEsS0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxRQUNBLElBQ0EsR0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLEtBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxZQUNBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsUUFDQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLE1BQUEsR0FBQSxFQUFBLGlCQUFBLEtBQUEsY0FBQSxLQUFBLFNBSUEsRUFBQSxVQUFBLGNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLFlBQUEsbUJBQUEsRUFBQSxZQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxZQUFBLGdCQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsS0FBQSxlQUdBLCtGQzFFQSxFQUFBLFFBQUEsV0FFQSxRQUFBLEtBQUEsUUFBQSxJQUFBLDZCQUNBLEtBQUEsSUFBQSxpRUFDQSxFQUFBLEtBQ0EsS0FBQSxpQkFKQSxHQUFBLEVBMERBLE9BbkRBLEdBQUEsVUFBQSxrQkFBQSxTQUFBLEdBQ0EsTUFEQSxTQUFBLElBQUEsbUNBQ0EsRUFBQSxNQUNBLEtBQUEsTUFDQSxJQUFBLEtBQUEsSUFBQSxFQUFBLEtBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsRUFBQSxjQUFBLEtBQUEsR0FDQSxLQUFBLEtBQUEsRUFBQSxnQkFBQSxRQUtBLEVBQUEsVUFBQSxpQkFBQSxXQUNBLE1BREEsU0FBQSxJQUFBLGtDQUNBLEtBQUEsZUFHQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxFQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsb0NBQ0EsR0FDQSxJQUFBLFVBQ0EsS0FBQSxrQkFBQSxVQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxTQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxTQUFBLEtBS0EsRUFBQSxVQUFBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxXQUFBLEVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLGFBQUEsT0FLQSxFQUFBLFVBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLElBQUEsZUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsS0FDQSxRQUFBLFdBQ0EsUUFBQSxJQUFBLDBCQUtBLDJCQzNEQSxFQUFBLFFBQUEsV0FFQSxRQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSwwQkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFVBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSx1QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsR0FDQSxVQUNBLFNBQUEsU0FBQSxLQUFBLGFBQ0EsU0FBQSxPQUFBLEtBQUEsYUFDQSxTQUFBLFNBQUEsS0FBQSxnQkFHQSxZQUFBLGVBQUEsV0FBQSxXQUNBLEdBQUEsR0FBQSxXQUFBLGlCQUFBLEtBQUEsVUFDQSxFQUFBLFdBQUEsaUJBQUEsS0FBQSxLQUVBLE9BQUEsSUFBQSxZQUFBLFdBQ0EsVUFBQSxFQUFBLElBQUEsRUFBQSxVQUlBLElBQUEsR0FBQSxFQUFBLEVBQ0EsTUFBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxHQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsWUFBQSxVQUNBLEtBQUEsZUFDQSxLQUFBLGdCQTBCQSxNQXZCQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxRQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxlQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSwyQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxRQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLE9BQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUNBLEdBREEsUUFBQSxJQUFBLDJCQUNBLGVBQUEsRUFBQSxPQUFBLFVBQ0EsS0FBQSxLQUFBLEtBQUEsZUFBQSxHQUNBLEtBQUEsb0JBQ0EsQ0FDQSxHQUFBLEtBQ0EsR0FBQSxTQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLEtBQUEsaUJBQUEsS0FLQSwyQkNyREEsRUFBQSxRQUFBLFdBUUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFFBQUEsRUFDQSxLQUFBLFlBQUEsRUFDQSxLQUFBLFVBQUEsRUFFQSxLQUFBLFVBREEsS0FBQSxVQUNBLEVBRUEsS0FBQSxlQUVBLEtBQUEsU0FBQSxFQUNBLElBQ0EsS0FBQSxHQUFBLEdBRUEsS0FBQSxzQkFwQkEsR0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxzQkFDQSxFQUFBLEVBQUEsb0JBd0lBLE9BckhBLEdBQUEsVUFBQSxvQkFBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLElBQUEsS0FBQSxlQUFBLE9BQUEsOENBQ0EsS0FBQSxJQUFBLEtBQUEsZ0NBQUEsS0FBQSxLQUFBLEtBQUEsVUFDQSxJQUFBLEtBQ0EsR0FBQSxJQUFBLEtBQUEsU0FBQSxLQUNBLEVBQUEsS0FBQSxLQUFBLFNBQUEsS0FDQSxFQUFBLE9BQUEsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLEdBQ0EsS0FBQSxpQkFDQSxLQUFBLGlCQUdBLEVBQUEsVUFBQSxjQUFBLFdBQ0EsT0FEQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxhQUNBLElBQUEsVUFDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxnQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxjQUNBLEtBQUEsWUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGVBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsUUFBQSxpQkFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGNBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsUUFBQSxxQkFLQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxHQUFBLFlBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxXQUFBLEdBR0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsOEJBQ0EsZUFBQSxFQUFBLE9BQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxZQUFBLFVBR0EsS0FBQSxXQUFBLEVBRUEsS0FBQSxrQkFBQSxLQUFBLGlCQUFBLEtBQUEsTUFDQSxLQUFBLGdCQUFBLEtBQUEsZUFBQSxLQUFBLE1BRUEsS0FBQSxRQUFBLEVBQUEsUUFDQSxLQUFBLFFBQUEsRUFBQSxVQUVBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxTQUFBLEdBRUEsU0FBQSxLQUFBLGlCQUFBLFlBQUEsS0FBQSxtQkFDQSxTQUFBLEtBQUEsaUJBQUEsVUFBQSxLQUFBLGtCQUdBLEVBQUEsVUFBQSxlQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsV0FDQSxLQUFBLEdBQUEsS0FBQSxTQUFBLGVBQUEsS0FBQSxtQkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsU0FBQSxpQkFBQSxLQUFBLHFCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsbUJBQUEsV0FBQSxRQUFBLElBQUEsZ0NBQ0EsS0FBQSxRQUFBLEtBQUEsS0FBQSxJQUFBLEtBQUEsWUFHQSxFQUFBLFVBQUEscUJBQUEsU0FBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGtDQUNBLEVBQUEsVUFDQSxJQUFBLFNBQ0EsS0FBQSxTQUFBLGdCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxXQUFBLFFBQ0EsSUFBQSxLQUNBLEdBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxZQUFBLEtBQUEsWUFDQSxLQUFBLEtBQUEsS0FBQSxpQkFBQSxFQUNBLE1BQ0EsS0FBQSxPQUFBLFFBQUEsSUFBQSxTQUNBLEtBQUEsUUFBQSxVQUNBLEtBQUEsU0FBQSxlQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsUUFBQSxVQUNBLEtBQUEsU0FBQSxrQkFJQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUNBLEdBREEsUUFBQSxJQUFBLDhCQUNBLEtBQUEsYUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsTUFBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxPQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsV0FJQSxFQUFBLFVBQUEsZUFBQSxXQUFBLFFBQUEsSUFBQSw0QkFFQSxLQUFBLFdBQUEsRUFFQSxTQUFBLEtBQUEsb0JBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxvQkFBQSxVQUFBLEtBQUEsa0JBR0EsRUFBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEseUJBQ0EsSUFBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLG1CQUNBLElBQ0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBR0EsT0FEQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLElBQ0EsT0FBQSxFQUFBLElBQUEsR0FHQSwrR0M5SUEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLCtCQUNBLEtBQUEsSUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLDRCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFdBQ0EsUUFBQSxVQUFBLEtBQUEsWUFDQSxRQUFBLFNBQUEsS0FBQSxVQUNBLFFBQUEsU0FBQSxLQUFBLFVBR0EsWUFBQSxlQUFBLFNBQUEsV0FDQSxHQUFBLEdBQUEsV0FBQSxpQkFBQSxLQUFBLFNBQ0EsRUFBQSxXQUFBLGlCQUFBLEtBQUEsS0FFQSxPQUFBLElBQUEsWUFBQSxXQUNBLFVBQUEsRUFBQSxJQUFBLEVBQUEsVUFJQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLGVBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxnQkFDQSxLQUFBLGNBdUJBLE1BcEJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsOEJBQ0EsSUFBQSxJQUNBLElBQUEsRUFDQSxLQUFBLEVBRUEsTUFBQSxJQUFBLEtBQUEsbUJBQUEsSUFBQSxJQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLCtCQUNBLEtBQUEsSUFBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsZ0NBQ0EsS0FBQSxLQUFBLEtBQUEseUJBQUEsRUFBQSxPQUFBLEtBR0EsMkJDakRBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLG1CQUpBLEdBQUEsR0FBQSxFQUFBLHVCQWtDQSxPQTFCQSxHQUFBLFVBQUEsaUJBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxNQUFBLEtBQUEsSUFBQSxPQUFBLCtCQUNBLEtBQUEsZUFHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLE1BQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxTQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLFNBQUEsSUFDQSxJQUNBLEdBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUNBLGVBQUEsRUFBQSxPQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEscUJBQUEsSUFJQSxFQUFBLFVBQUEsc0JBQUEsV0FBQSxRQUFBLElBQUEsc0NBQ0EsS0FBQSxtQkFBQSxHQUFBLEdBQUEsS0FBQSxLQUNBLEtBQUEsbUJBQUEscUJBQ0EsS0FBQSxtQkFBQSxrQkFHQSxtRENwQ0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLElBQUEsRUFDQSxLQUFBLGFBQUEsRUFDQSxJQUNBLEtBQUEsWUFBQSxHQU5BLEdBQUEsR0FBQSxFQUFBLG1CQWtDQSxPQXZCQSxHQUFBLFVBQUEsbUJBQUEsV0FBQSxRQUFBLElBQUEsMENBQ0EsSUFBQSxHQUFBLEVBQUEscUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxZQURBLEtBQUEsWUFDQSxLQUFBLFlBRUEsV0FHQSxFQUFBLFlBQUEsS0FBQSxXQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxlQUFBLE9BQUEsRUFBQSxLQUdBLEVBQUEsVUFBQSxlQUFBLFdBQUEsUUFBQSxJQUFBLHVDQUNBLEtBQUEsZUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsc0JBQ0EsUUFBQSxJQUFBLEtBQUEsTUFJQSxnRENwQ0EsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHdCQUNBLEtBQUEsSUFBQSxFQUNBLFFBQUEsSUFBQSxHQUNBLElBQ0EsS0FBQSxPQUFBLEdBSUEsT0FBQSxNQUNBLE9BQUEsWUFDQSxPQUFBLFVBQ0EsT0FBQSxLQTJCQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsRUFBQSxVQUFBLElBQUEsa0JBRUEsSUFBQSxHQUFBLEVBQUEsY0FBQSxtQkFDQSxHQUFBLGlCQUFBLFNBQUEsRUFFQSxJQUFBLEdBQUEsU0FBQSxjQUFBLE1BQ0EsR0FBQSxVQUFBLElBQUEsd0JBR0EsRUFBQSxhQUFBLEVBQUEsR0FHQSxRQUFBLEtBR0EsR0FGQSxRQUFBLElBQUEsaUJBR0EsS0FBQSxPQUNBLEtBQUEsTUFBQSxJQUNBLEtBQUEsTUFBQSxHQUFBLEtBQUEsTUFBQSxXQUNBLENBQ0EsR0FBQSxHQUFBLEdBQUEsWUFDQSxFQUFBLEtBQUEsV0FBQSxjQUFBLHdCQUVBLEdBQUEsT0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsY0FBQSxRQUVBLEdBQUEsT0FBQSxXQUNBLFFBQUEsSUFBQSxHQUVBLEVBQUEsTUFBQSxLQUNBLFNBQUEsRUFBQSxNQUFBLElBQUEsTUFBQSxJQUNBLFVBQUEsRUFBQSxPQUFBLElBQUEsTUFBQSxNQUVBLFNBQUEsRUFBQSxNQUNBLFVBQUEsRUFBQSxRQUdBLElBQUEsT0FBQSxPQUNBLEVBQUEsTUFBQSxJQUFBLElBQUEsRUFBQSxPQUFBLE9BQUEsS0FPQSxNQUFBLE9BQUEsS0FBQSxPQUNBLFlBR0EsRUFBQSxhQUFBLE1BQUEsRUFBQSxPQUFBLFNBT0EsRUFBQSxjQUFBLEtBQUEsTUFBQSxRQUVBLFFBQUEsS0FBQSw2QkFjQSxNQTlGQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx1QkFDQSxJQUFBLEdBQUEsRUFBQSxvQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFHQSxHQUFBLE9BREEsS0FBQSxJQUNBLEtBQUEsT0FFQSxFQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBS0EsRUFBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLElBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxpQkFBQSxFQUNBLEdBQUEsSUE0RUEsNEJDakhBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsRUFDQSxRQUFBLElBQUEsR0FDQSxJQUNBLEtBQUEsT0FBQSxHQUlBLE9BQUEsTUFDQSxPQUFBLFlBQ0EsT0FBQSxVQUNBLE9BQUEsTUFFQSxRQUFBLElBQUEscUJBeUJBLFFBQUEsR0FBQSxHQUNBLEVBQUEsVUFBQSxJQUFBLGlCQUVBLElBQUEsR0FBQSxFQUFBLGNBQUEsbUJBQ0EsR0FBQSxpQkFBQSxTQUFBLEVBRUEsSUFBQSxHQUFBLFNBQUEsY0FBQSxNQUNBLEdBQUEsVUFBQSxJQUFBLHVCQUVBLEVBQUEsYUFBQSxFQUFBLEdBR0EsUUFBQSxLQUdBLEdBRkEsUUFBQSxJQUFBLGlCQUdBLEtBQUEsT0FDQSxLQUFBLE1BQUEsSUFDQSxLQUFBLE1BQUEsR0FBQSxLQUFBLE1BQUEsV0FDQSxDQUNBLEdBQUEsR0FBQSxHQUFBLFlBQ0EsRUFBQSxLQUFBLFdBQUEsY0FBQSx1QkFFQSxHQUFBLE9BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsTUFFQSxHQUFBLE9BQUEsV0FFQSxFQUFBLE1BQUEsS0FDQSxTQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsSUFDQSxVQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsTUFFQSxTQUFBLEVBQUEsTUFDQSxVQUFBLEVBQUEsUUFHQSxJQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsZ0JBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxLQUNBLEVBQUEsTUFBQSxPQUFBLFVBQUEsS0FDQSxFQUFBLE1BQUEsTUFBQSxTQUFBLE9BR0EsTUFBQSxFQUFBLEtBQUEsT0FDQSxPQUlBLEVBQUEsYUFBQSxNQUFBLEVBQUEsT0FBQSxRQUNBLEVBQUEsYUFBQSxRQUFBLEVBQUEsT0FDQSxFQUFBLGFBQUEsU0FBQSxFQUFBLFNBR0EsRUFBQSxjQUFBLEtBQUEsTUFBQSxRQUdBLEdBQUEsS0FBQSw2QkEvRkEsR0FBQSxLQW9IQSxPQWhHQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsRUFBQSxxQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFHQSxHQUFBLE9BREEsS0FBQSxJQUNBLEtBQUEsT0FFQSxFQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBSUEsRUFBQSxVQUFBLGdCQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLElBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxFQUNBLEdBQUEsSUFzRUEsRUFBQSxVQUFBLEtBQUEsV0FBQSxRQUFBLElBQUEsbUJBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsc0JBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsc0JBR0EsNEJDckhBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLE1BQ0EsS0FBQSxJQUFBLGlCQUxBLEdBQUEsR0FBQSxFQUFBLGVBb0NBLE9BM0JBLEdBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHdCQUNBLElBQUEsR0FBQSxFQUFBLG9CQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUNBLEdBQUEsSUFBQSxLQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsSUFHQSxFQUFBLFVBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsaUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLGtCQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsS0FBQSxPQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxpQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxTQUFBLFVBQUEsS0FBQSxLQUFBLEtBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsbUJBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxZQUFBLFdBR0EsNkNDdENBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxJQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUVBLE9BQUEsR0FBQSxHQUlBLE1BQUEiLCJmaWxlIjoic2NyaXB0LmRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpe1xuXG5cdHZhciBBcHAgPSByZXF1aXJlKCcuL2NsYXNzZXMvQXBwJyk7XG5cblx0ZnVuY3Rpb24gaW5pdCgpwqB7XG5cdFx0bmV3IEFwcCgkKCcjY29udGFpbmVyJykpO1xuXHR9XG5cblx0aW5pdCgpO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblxuXHRmdW5jdGlvbiBBZGRDb250cmlidXRvcigkZWwpIHsgY29uc29sZS5sb2coJ1tBZGRDb250cmlidXRvcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmlucHV0ID0gdGhpcy4kZWwuZmluZCgnLmlucHV0LWNvbnRyaWJ1dG9yJylbMF07XG5cdFx0dGhpcy4kZWwuZmluZCgnLmlucHV0LWNvbnRyaWJ1dG9yJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9XG5cblx0QWRkQ29udHJpYnV0b3IucHJvdG90eXBlLnN1Ym1pdEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Y29uc29sZS5sb2coXCJTVUJNVVRcIik7XG5cdFx0Ly9iZWFuLmZpcmUodGhpcywgXCJhZGRDb250cmlidXRvclwiLCB0aGlzLmlucHV0LnZhbHVlKTtcblx0XHR0aGlzLmlucHV0LnZhbHVlID0gJyc7XG5cdH07XG5cblxuXHRyZXR1cm4gQWRkQ29udHJpYnV0b3I7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgV2hpdGVib2FyZCA9IHJlcXVpcmUoJy4vV2hpdGVib2FyZCcpO1xuXHR2YXIgRWxlbWVudFBpY2tlciA9IHJlcXVpcmUoJy4vRWxlbWVudFBpY2tlcicpO1xuXHR2YXIgRWxlbWVudCA9IHJlcXVpcmUoJy4vRWxlbWVudCcpO1xuXHR2YXIgRGF0YUhhbmRsZXIgPSByZXF1aXJlKCcuL0RhdGFIYW5kbGVyJyk7XG5cblx0ZnVuY3Rpb24gQXBwKCRlbCkgeyBjb25zb2xlLmxvZygnW0FwcF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLndoaXRlYm9hcmRJZCA9IDE7XG5cdFx0dGhpcy50eXBlcyA9IFsncG9zdGl0cyddO1xuXHRcdHRoaXMuaSA9IDA7XG5cdFx0dGhpcy5lbGVtZW50TGlzdCA9IFtdO1xuXHRcdHRoaXMucG9zaXRpb24gPSB7fTtcblx0XHR0aGlzLmRhdGFIYW5kbGVyID0gbmV3IERhdGFIYW5kbGVyKCk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkID0gbmV3IFdoaXRlYm9hcmQodGhpcy4kZWwpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlciA9IG5ldyBFbGVtZW50UGlja2VyKHRoaXMuJGVsKTtcblx0XHQvL0xVSVNURVJFTlxuXHRcdGJlYW4ub24odGhpcy5kYXRhSGFuZGxlciwgXCJkYXRhLXN1Y2Nlc3NcIiwgdGhpcy5hZGRUb0VsZW1lbnRMaXN0LmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24odGhpcy53aGl0ZWJvYXJkLCBcIndoaXRlYm9hcmQtY2xpY2tlZFwiLCB0aGlzLndoaXRlYm9hcmRDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMuZWxlbWVudFBpY2tlciwgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIHRoaXMuZWxlbWVudFBpY2tlckNsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdC8vVUlUVk9FUkVOXG5cdFx0dGhpcy5idWlsZEJvYXJkKCk7XG5cdH1cblxuXHRBcHAucHJvdG90eXBlLndoaXRlYm9hcmRDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHdoaXRlYm9hcmRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci50b2dnbGVWaXNpYmxlKCk7XG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnNldExvY2F0aW9uKGV2ZW50LnhQb3MsIGV2ZW50LnlQb3MpO1xuXHRcdHRoaXMucG9zaXRpb24gPSBldmVudDtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlcicpOyBcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHZhciBlbGVtZW50ID0gbmV3IEVsZW1lbnQodGhpcy4kZWwsZXZlbnQsdGhpcy5wb3NpdGlvbik7XG5cdFx0dGhpcy5uZXdFbGVtZW50KGV2ZW50LCBlbGVtZW50LmVsZW1lbnRJZClcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmJ1aWxkQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYnVpbGRCb2FyZCcpO1xuXHRcdGZvcih2YXIgdHlwZSBpbiB0aGlzLnR5cGVzKSB7XG4gIFx0XHRcdHRoaXMuZGF0YUhhbmRsZXIubG9hZEJvYXJkRWxlbWVudHModGhpcy50eXBlc1t0eXBlXSk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9FbGVtZW50TGlzdCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGFkZFRvRWxlbWVudExpc3QnKTtcblx0XHR0aGlzLmVsZW1lbnRMaXN0LnB1c2godGhpcy5kYXRhSGFuZGxlci5nZXRCb2FyZEVsZW1lbnRzKCkpO1xuXHRcdHRoaXMuaSsrXG5cdFx0aWYodGhpcy5pID09IHRoaXMudHlwZXMubGVuZ3RoKXtcblx0XHRcdHRoaXMuYWRkVG9Cb2FyZCgpO1xuXHRcdH1cblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmFkZFRvQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYWRkVG9Cb2FyZCcpOyBcblx0XHR2YXIgbGlzdCA9IHRoaXMuZWxlbWVudExpc3RbMF1bMF07XG5cdFx0Zm9yKHZhciBlbGVtZW50IGluIGxpc3QpIHtcbiAgXHRcdFx0dmFyIHR5cGUgPSBsaXN0W2VsZW1lbnRdLmVsX3R5cGU7XG4gIFx0XHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICBcdFx0XHRwb3NpdGlvbi55UG9zID0gTnVtYmVyKGxpc3RbZWxlbWVudF0ucG9zeSk7XG4gIFx0XHRcdHBvc2l0aW9uLnhQb3MgPSBOdW1iZXIobGlzdFtlbGVtZW50XS5wb3N4KTtcbiAgXHRcdFx0dmFyIGVsZW1lbnRJZCA9IGxpc3RbZWxlbWVudF0uaWRfb25fYm9hcmQ7XG4gIFx0XHRcdHZhciBpZCA9IGxpc3RbZWxlbWVudF0uaWQ7XG4gIFx0XHRcdHZhciBjb250ZW50ID0gbGlzdFtlbGVtZW50XS5jb250ZW50O1xuICBcdFx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLHR5cGUscG9zaXRpb24sZWxlbWVudElkLGNvbnRlbnQsaWQpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicmVtb3ZlLWNsaWNrZWRcIiwgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdH1cblx0fTtcblxuXHRBcHAucHJvdG90eXBlLnJlbW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSByZW1vdmVIYW5kbGVyJyk7IFxuXHRcdHRoaXMuZGF0YUhhbmRsZXIucmVtb3ZlQm9hcmRFbGVtZW50KGV2ZW50LmVsZW1lbnRUeXBlLCBldmVudC5pZCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5uZXdFbGVtZW50ID0gZnVuY3Rpb24odHlwZSxpZE9uQm9hcmQpeyBjb25zb2xlLmxvZygnW0FwcF0gbmV3RWxlbWVudEhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5uZXdCb2FyZEVsZW1lbnQodHlwZSxpZE9uQm9hcmQsdGhpcy5wb3NpdGlvbix0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cblx0cmV0dXJuIEFwcDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgdGhhdDtcblx0ZnVuY3Rpb24gRGF0YUhhbmRsZXIoKSB7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy51cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODg4OC9jcDMvd2hpdGVib2FyZC93aGl0ZWJvYXJkL2FwaS9pbmRleC5waHAvXCI7XG5cdFx0dGhhdCA9IHRoaXM7XG5cdFx0dGhpcy5ib2FyZEVsZW1lbnRzID0gW107XG5cdH1cblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUubG9hZEJvYXJkRWxlbWVudHMgPSBmdW5jdGlvbih0eXBlKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gbG9hZEJvYXJkRWxlbWVudHMnKTtcblx0XHRyZXR1cm4gJC5hamF4KHtcblx0ICBcdFx0XHRcdHR5cGU6IFwiR0VUXCIsXG5cdCAgXHRcdFx0XHR1cmw6IHRoaXMudXJsK3R5cGUrJy8xJyxcblx0ICBcdFx0XHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0XHRcdHRoYXQuYm9hcmRFbGVtZW50cy5wdXNoKGRhdGEpO1xuXHQgIFx0XHRcdFx0XHRiZWFuLmZpcmUodGhhdCwgXCJkYXRhLXN1Y2Nlc3NcIiwgW2RhdGFdKTtcblx0ICBcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmdldEJvYXJkRWxlbWVudHMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBnZXRCb2FyZEVsZW1lbnRzJyk7XG5cdFx0cmV0dXJuIHRoaXMuYm9hcmRFbGVtZW50cztcblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUucmVtb3ZlQm9hcmRFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSByZW1vdmVCb2FyZEVsZW1lbnQnKTtcblx0XHRzd2l0Y2goZWxlbWVudFR5cGUpIHtcblx0XHQgICAgY2FzZSBcInBvc3QtaXRcIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdwb3N0aXRzJyxpZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcInN0YXRpY1wiOlxuXHRcdCAgICBcdHRoaXMucmVtb3ZlRWxlbWVudEJ5SWQoJ3N0YXRpYycsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJtb3Rpb25cIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdtb3Rpb24nLGlkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUucmVtb3ZlRWxlbWVudEJ5SWQgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZCl7XG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJHRVRcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtlbGVtZW50VHlwZSsnL2RlbGV0ZS8nK2lkLFxuXHQgIFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coXCJkZWxldGVkID0gXCIrZGF0YSk7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUubmV3Qm9hcmRFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWRfb25fYm9hcmQscG9zaXRpb24sd2hpdGVib2FyZElkKXtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtcInBvc3RpdHNcIisnL2FkZC8nK3doaXRlYm9hcmRJZCtcIi9cIitpZF9vbl9ib2FyZCtcIi9cIitwb3NpdGlvbi54UG9zK1wiL1wiK3Bvc2l0aW9uLnlQb3MsXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCl7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coXCJuZXcgZWxlbWVudCBwb3N0ZWRcIik7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRyZXR1cm4gRGF0YUhhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBFZGl0TWVudSgkZWwsZWxlbWVudElkKSB7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlZGl0LW1lbnUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBhY3Rpb25zOiBbXHRcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJjYW5jZWxcIiwgbmFtZTogXCJhbm51bGVlclwifSxcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJlZGl0XCIsIG5hbWU6IFwid2lqemlnZW5cIn0sXG5cdFx0ICBcdFx0XHR7YWN0aW9uSWQ6IFwicmVtb3ZlXCIsIG5hbWU6IFwidmVyd2lqZGVyZW5cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlZGl0bWVudScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgYWN0aW9uSWQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5hY3Rpb25JZCksXG5cdFx0XHQgICAgICBuYW1lID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMubmFtZSk7XG5cblx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHQgICAgXCI8bGkgaWQ9XCIrYWN0aW9uSWQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQpLmFwcGVuZChodG1sKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVycygpO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHR9XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyA+IHAnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyAuZWRpdC1tZW51JykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdEVkaXRNZW51LnByb3RvdHlwZS5iaW5kSGFuZGxlcnMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBiaW5kSGFuZGxlcnMnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFZGl0TWVudS5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBjbGlja0hhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSBcImVkaXRCdXR0b25cIil7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJlZGl0LWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0fWVsc2V7XG5cdFx0XHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcbiAgIFx0XHRcdGFjdGlvbkV2ZW50LnRhcmdldElkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgXHRcdFx0YWN0aW9uRXZlbnQuZWxlbWVudElkID0gdGhpcy5lbGVtZW50SWQ7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJhY3Rpb24tY2xpY2tlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0fVxuXG5cdH07XG5cblx0cmV0dXJuIEVkaXRNZW51O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIEVkaXRNZW51ID0gcmVxdWlyZSgnLi9FZGl0TWVudScpO1xuICAgIHZhciB6SW5kZXhDb3VudGVyID0gMTtcblx0dmFyIFBvc3RpdCA9IHJlcXVpcmUoJy4vZWxlbWVudHMvUG9zdGl0Jyk7XG5cdHZhciBQaWN0dXJlID0gcmVxdWlyZSgnLi9lbGVtZW50cy9QaWN0dXJlJyk7XG5cdHZhciBNb3Rpb24gPSByZXF1aXJlKCcuL2VsZW1lbnRzL01vdGlvbicpO1xuXG5cdGZ1bmN0aW9uIEVsZW1lbnQoJGVsLGVsZW1lbnRUeXBlLHBvc2l0aW9uLGVsZW1lbnRJZCxjb250ZW50LGlkKSB7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdHRoaXMuZWxlbWVudFR5cGUgPSBlbGVtZW50VHlwZTtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHRpZih0aGlzLmVsZW1lbnRJZCl7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR9ZWxzZSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IHRoaXMuc2V0RWxlbWVudElkKCk7XG5cdFx0fVxuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHRpZihpZCl7XG5cdFx0XHR0aGlzLmlkID0gaWQ7XG5cdFx0fVxuXHRcdHRoaXMuY3JlYXRlRWxlbWVudEhvbGRlcigpO1xuXHR9XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudEhvbGRlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWxlbWVudEhvbGRlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoXCI8c2VjdGlvbiBjbGFzcz0nZWxlbWVudC1ob2xkZXInPjwvc2VjdGlvbj5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlcjpsYXN0LW9mLXR5cGVcIikuYXR0cignaWQnLCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge307XG5cdFx0cG9zaXRpb24udG9wID0gdGhpcy5wb3NpdGlvbi55UG9zO1xuXHRcdHBvc2l0aW9uLmxlZnQgPSB0aGlzLnBvc2l0aW9uLnhQb3M7XG5cdFx0cG9zaXRpb24uekluZGV4ID0gMDtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MocG9zaXRpb24pO1xuXHRcdHRoaXMuY3JlYXRlRWRpdE1lbnUoKTtcblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKHRoaXMuZWxlbWVudFR5cGUpIHtcblx0XHQgICAgY2FzZSBcInBvc3QtaXRcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgUG9zdGl0KHRoaXMuY29udGVudCk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQb3N0aXQoKSk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQb3N0aXQpO1xuXHRcdCAgICBcdHRoaXMuYmluZEhhbmRsZXIodGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgUGljdHVyZSh0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQaWN0dXJlKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuaW5pdEltYWdlSW5wdXRzKCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBNb3Rpb24odGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkpO1xuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmFwcGVuZCh0aGlzLmVsZW1lbnQuY3JlYXRlTW90aW9uKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuaW5pdE1vdGlvbklucHV0cygpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oJGVsKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLm9uKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlZG93bkhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy5tb3VzZURvd24gPSBmYWxzZTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5tb3VzZWRvd25IYW5kbGVyID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gbW91c2Vkb3duSGFuZGxlcicpO1xuXHRcdGlmKGUudGFyZ2V0LmlkICE9PSBcIndoaXRlYm9hcmRcIil7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHRcdH1cblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5tb3VzZU1vdmVIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX21vdXNlVXBIYW5kbGVyID0gdGhpcy5tb3VzZVVwSGFuZGxlci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gZS5vZmZzZXRZO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICArK3pJbmRleENvdW50ZXI7XG4gICAgICAgIHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcygnekluZGV4JywgekluZGV4Q291bnRlcik7XG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWRpdE1lbnUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNyZWF0ZUVkaXRNZW51Jyk7XG5cdFx0dGhpcy5lZGl0TWVudSA9IG5ldyBFZGl0TWVudSh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24odGhpcy5lZGl0TWVudSwgXCJlZGl0LWNsaWNrZWRcIiwgdGhpcy5lZGl0Q2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVkaXRNZW51LCBcImFjdGlvbi1jbGlja2VkXCIsIHRoaXMuYWN0aW9uQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuZWRpdENsaWNrZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGVkaXRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZWxlbWVudC5lZGl0KHRoaXMuJGVsLCB0aGlzLmVsZW1lbnRJZCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuYWN0aW9uQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYWN0aW9uQ2xpY2tlZEhhbmRsZXInKTtcblx0XHRzd2l0Y2goZXZlbnQudGFyZ2V0SWQpIHtcblx0XHQgICAgY2FzZSBcInJlbW92ZVwiOlxuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoJyMnK2V2ZW50LmVsZW1lbnRJZCkucmVtb3ZlKCk7XG5cdFx0ICAgIFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQuaWQgPSB0aGlzLmlkO1xuXHRcdCAgICBcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcblx0XHQgICAgXHRiZWFuLmZpcmUodGhpcywgXCJyZW1vdmUtY2xpY2tlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcImVkaXRcIjogY29uc29sZS5sb2coXCJFRElURVwiKTtcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuY29uZmlybSgpO1xuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJjYW5jZWxcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuZW5kRWRpdCgpO1xuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZW1vdmVIYW5kbGVyJyk7XG4gICAgICAgIGlmKHRoaXMubW91c2VEb3duID09PSB0cnVlKXtcbiAgICAgICAgICAgIHZhciBtb3VzZVggPSBwYXJzZUludChlLmNsaWVudFgpO1xuICAgICAgICAgICAgdmFyIG1vdXNlWSA9IHBhcnNlSW50KGUuY2xpZW50WSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MoJ2xlZnQnLCBtb3VzZVggLSB0aGlzLm9mZnNldFgpO1xuICAgICAgICAgICAgdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCd0b3AnLCBtb3VzZVkgLSB0aGlzLm9mZnNldFkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gbW91c2V1cEhhbmRsZXInKTtcblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuICAgIH07XG5cbiAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRFbGVtZW50SWQgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBzZXRFbGVtZW50SWQnKTtcbiAgICBcdHZhciBob2xkZXJzID0gdGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlclwiKTtcblx0XHRcdHZhciBpZEhvbGRlciA9W107XG5cdFx0XHRmb3IoaSA9IDA7aSA8IGhvbGRlcnMubGVuZ3RoOyBpKysgKXtcblx0XHRcdFx0aWRIb2xkZXIucHVzaChob2xkZXJzW2ldLmlkKTtcblx0XHRcdH1cblx0XHRcdGlkSG9sZGVyLnNvcnQoZnVuY3Rpb24oYSwgYil7cmV0dXJuIGItYX0pO1xuXHRcdFx0cmV0dXJuIE51bWJlcihpZEhvbGRlclswXSkrMTtcblx0XHR9O1xuXG5cdHJldHVybiBFbGVtZW50O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblxuXHRmdW5jdGlvbiBFbGVtZW50UGlja2VyKCRlbCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNlbGVtZW50LXBpY2tlci10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHtcblx0XHQgIGVsZW1lbnRzOiBbXHRcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcInBvc3QtaXRcIiwgbmFtZTogXCJwb3N0LWl0XCJ9LFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwic3RhdGljXCIsIG5hbWU6IFwiaW1hZ2VcIn0sXG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJtb3Rpb25cIiwgbmFtZTogXCJ2aWRlb1wifVxuICBcdFx0XHRcdF1cbiAgXHRcdFx0fTtcblx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BpY2tlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0ICB2YXIgZWxlbWVudCA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLmVsZW1lbnQpLFxuXHRcdFx0ICAgICAgbmFtZSA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLm5hbWUpO1xuXG5cdFx0XHQgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKFxuXHRcdFx0ICAgIFwiPGxpIGlkPVwiK2VsZW1lbnQrXCI+XCIrbmFtZStcIjwvbGk+XCJcblx0XHRcdCAgKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLmFwcGVuZCggJChodG1sKSApO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fVxuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIHRvZ2dsZVZpc2libGUnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjZWxlbWVudC1waWNrZXInKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHhQb3MsIHlQb3MpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIHNldExvY2F0aW9uJyk7XG5cdFx0dmFyIHBvc2l0aW9uID0ge1xuXHRcdFx0dG9wIDogeVBvcyxcblx0XHRcdGxlZnQgOiB4UG9zXG5cdFx0fTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLmNzcyhwb3NpdGlvbik7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2VsZW1lbnQtcGlja2VyID4gdWwgPiBsaScpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjbGlja0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIGV2ZW50LnRhcmdldC5pZCk7XG5cdH07XG5cblx0cmV0dXJuIEVsZW1lbnRQaWNrZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgV2hpdGVib2FyZFNldHRpbmdzID0gcmVxdWlyZSAoJy4vV2hpdGVib2FyZFNldHRpbmdzJyk7XG5cblx0ZnVuY3Rpb24gV2hpdGVib2FyZCgkZWwsIGJvYXJkTmFtZSkgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jcmVhdGVXaGl0ZWJvYXJkKCk7XG5cblx0fVxuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNyZWF0ZVdoaXRlYm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNyZWF0ZVdoaXRlYm9hcmQnKTtcblx0XHR0aGlzLmJvYXJkID0gdGhpcy4kZWwuYXBwZW5kKFwiPGRpdiBpZD0nd2hpdGVib2FyZCc+PC9kaXY+XCIpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLmJvYXJkLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjbGlja0hhbmRsZXInKTtcblx0XHR2YXIgeFBvcyA9IGV2ZW50LnBhZ2VYIC0gdGhpcy4kZWwub2Zmc2V0KCkubGVmdDtcbiAgIFx0XHR2YXIgeVBvcyA9IGV2ZW50LnBhZ2VZIC0gdGhpcy4kZWwub2Zmc2V0KCkudG9wO1xuICAgXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICAgXHRcdHBvc2l0aW9uLnhQb3MgPSB4UG9zO1xuICAgXHRcdHBvc2l0aW9uLnlQb3MgPSB5UG9zO1xuXHRcdGlmKGV2ZW50LnRhcmdldC5pZCA9PT0gXCJ3aGl0ZWJvYXJkXCIpeyAvL2FuZGVycyBrbGlrdCBoaWogXCJkb29yXCIgZWxlbWVudGVuXG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgcG9zaXRpb24pO1xuXHRcdH1cblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5hZGRXaGl0ZWJvYXJkU2V0dGluZ3MgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGFkZFdoaXRlYm9hcmRTZXR0aW5ncycpO1xuXHRcdHRoaXMud2hpdGVib2FyZFNldHRpbmdzID0gbmV3IFdoaXRlYm9hcmRTZXR0aW5ncyh0aGlzLiRlbCk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkU2V0dGluZ3MuY3JlYXRlU2V0dGluZ1BhbmVsKCk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkU2V0dGluZ3MuYWRkQ29udHJpYnV0b3IoKTtcblx0fTtcblxuXHRyZXR1cm4gV2hpdGVib2FyZDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBBZGRDb250cmlidXRvciA9IHJlcXVpcmUoJy4vQWRkQ29udHJpYnV0b3InKTtcblxuXHRmdW5jdGlvbiBXaGl0ZWJvYXJkU2V0dGluZ3MoJGVsLCBjb250cmlidXRvcnMsIHByamN0X3RpdGxlKSB7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuY29udHJpYnV0b3JzID0gY29udHJpYnV0b3JzO1xuXHRcdGlmKHByamN0X3RpdGxlKXtcblx0XHRcdHRoaXMucHJqY3RfdGl0bGUgPSBwcmpjdF90aXRsZTtcblx0XHR9XG5cblx0fVxuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuY3JlYXRlU2V0dGluZ1BhbmVsID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGNyZWF0ZVNldHRpbmdQYW5lbCcpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjc2V0dGluZy10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXG5cdFx0aWYodGhpcy5wcmpjdF90aXRsZSl7XG5cdFx0XHRjb250ZXh0LnByamN0X3RpdGxlID0gdGhpcy5wcmpjdF90aXRsZTtcblx0XHR9ZWxzZXtcblx0XHRcdGNvbnRleHQucHJqY3RfdGl0bGUgPSBcIlVudGl0bGVkXCI7XG5cdFx0fVxuXG5cdFx0Y29udGV4dC5jb250cmlidXRvciA9IHRoaXMuY29udHJpYnV0b3I7XG5cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoJyN3aGl0ZWJvYXJkJykuYXBwZW5kKCAkKGh0bWwpICk7XG5cdH07XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5hZGRDb250cmlidXRvciA9IGZ1bmN0aW9uKCl7Y29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGFkZENvbnRyaWJ1dG9yJyk7XG5cdFx0dGhpcy5hZGRDb250cmlidXRvciA9IG5ldyBBZGRDb250cmlidXRvcih0aGlzLiRlbC5maW5kKCcuY29udHJpYnV0b3ItZm9ybScpKTtcblx0XHRjb25zb2xlLmxvZyh0aGlzLiRlbCk7XG5cdFx0Ly90aGlzLkFkZENvbnRyaWJ1dG9yLmNyZWF0ZVNldHRpbmdQYW5lbCgpO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkU2V0dGluZ3M7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBNb3Rpb24oJGVsLHhQb3MseVBvcyx2aWRTcmMpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0Y29uc29sZS5sb2coJGVsKTtcblx0XHRpZih2aWRTcmMpe1xuXHRcdHRoaXMudmlkU3JjID0gdmlkU3JjO1xuXHRcdH07XG5cblx0XHRpZiAoXG5cdFx0XHR3aW5kb3cuRmlsZSAmJiBcblx0XHRcdHdpbmRvdy5GaWxlUmVhZGVyICYmIFxuXHRcdFx0d2luZG93LkZpbGVMaXN0ICYmIFxuXHRcdFx0d2luZG93LkJsb2Jcblx0XHQpIHtcblxuXHRcdH07XG5cdH1cblxuXHRNb3Rpb24ucHJvdG90eXBlLmNyZWF0ZU1vdGlvbiA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjcmVhdE1vdGlvbicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbW90aW9uLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnR4dCl7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9IHRoaXMudmlkU3JjO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC52aWRTcmMgPSBcIlwiO1xuXHRcdH1cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHJldHVybigkKGh0bWwpKTtcblxuXHR9O1xuXG5cdFxuXHRNb3Rpb24ucHJvdG90eXBlLmluaXRNb3Rpb25JbnB1dHM9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBpbml0TW90aW9uSW5wdXRzJyk7XG5cdFx0XHR2YXIgbW90aW9uSW5wdXRzID0gdGhpcy4kZWwuZmluZCgnLm1vdGlvbi1pbnB1dCcpWzBdO1xuXHRcdFx0aW5pdE1vdGlvbklucHV0KG1vdGlvbklucHV0cyk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbml0TW90aW9uSW5wdXQoZWwpeyAgY29uc29sZS5sb2coJ1tNb3Rpb25dIGluaXRNb3Rpb25JbnB1dCcpO1xuXHRcdGVsLmNsYXNzTGlzdC5hZGQoJ21vdGlvbi1pbnB1dC1qcycpO1xuXG5cdFx0dmFyIGZpbGVJbnB1dCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9ZmlsZV0nKTtcblx0XHRmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY3JlYXRlVGh1bWIpO1xuXHRcdFxuXHRcdHZhciBwcmV2aWV3Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0cHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtb3Rpb24taW5wdXQtcHJldmlldycpO1xuXG5cdFx0XG5cdFx0ZWwuaW5zZXJ0QmVmb3JlKHByZXZpZXdDb250YWluZXIsIGZpbGVJbnB1dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVRodW1iKGUpe1xuXHRcdGNvbnNvbGUubG9nKFwiSW5wdXQgY2hhbmdlZFwiKTtcblxuXHRcdGlmIChcblx0XHRcdHRoaXMuZmlsZXMgJiYgXG5cdFx0XHR0aGlzLmZpbGVzWzBdICYmIFxuXHRcdFx0dGhpcy5maWxlc1swXS50eXBlLm1hdGNoKCd2aWRlby4qJylcblx0XHQpIHtcblx0XHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0dmFyIHByZXZpZXdDb250YWluZXIgPSB0aGlzLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLm1vdGlvbi1pbnB1dC1wcmV2aWV3Jyk7XG5cblx0XHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHR2YXIgdmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcblxuXHRcdFx0XHR2aWQub25sb2FkID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0Y29uc29sZS5sb2codmlkKTtcblxuXHRcdFx0XHRcdGlmKHZpZC53aWR0aCA+IDMwMCApe1xuXHRcdFx0XHRcdFx0bmV3V2lkdGggPSB2aWQud2lkdGgvaW1nLndpZHRoKjMwMDtcblx0XHRcdFx0XHRcdG5ld0hlaWdodCA9IHZpZC5oZWlnaHQvaW1nLndpZHRoKjMwMDtcblx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdG5ld1dpZHRoID0gdmlkLndpZHRoO1xuXHRcdFx0XHRcdFx0bmV3SGVpZ2h0ID0gdmlkLmhlaWdodDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihlcnJvcnMubGVuZ3RoID09PSAwKXtcblx0XHRcdFx0XHRcdHByZXZpZXdDb250YWluZXIuc3R5bGUuc3JjID0gXCInXCIrIGUudGFyZ2V0LnJlc3VsdCArXCInXCI7XG5cdFx0XHRcdFx0XHQvL3ByZXZpZXdDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHRcdFx0XHRcdFx0Ly9wcmV2aWV3Q29udGFpbmVyLnN0eWxlLndpZHRoID0gbmV3V2lkdGg7XG5cblxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRhbGVydChlcnJvcnMuam9pbihcIlxcblwiKSk7XG5cdFx0XHRcdFx0XHRlcnJvcnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dmlkLnNldEF0dHJpYnV0ZSgnc3JjJywgZS50YXJnZXQucmVzdWx0KTtcblx0XHRcdFx0Ly92aWQuc2V0QXR0cmlidXRlKCd3aWR0aCcsIG5ld0hlaWdodCk7XG5cdFx0XHRcdC8vdmlkLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgbmV3SGVpZ2h0KTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvL3JlYWRlci5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbMF0pO1xuXHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1swXSk7XG5cdFx0fWVsc2V7XG5cdFx0XHRlcnJvcnMucHVzaChcIkZpbGUgaXMgbm90IGEgdmFsaWQgdmlkZW9cIik7XG5cdFx0fVxuXHRcdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0Vycm9ycygpe1xuXHRcdGlmKGVycm9ycy5sZW5ndGggPT09IDApe1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1lbHNle1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblxuXHRyZXR1cm4gTW90aW9uO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBlcnJvcnMgPSBbXTtcblxuXHRmdW5jdGlvbiBQaWN0dXJlKCRlbCx4UG9zLHlQb3MsIGltZ1NyYykgeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0Y29uc29sZS5sb2coJGVsKTtcblx0XHRpZihpbWdTcmMpe1xuXHRcdHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuXHRcdH07XG5cblx0XHRpZiAoXG5cdFx0XHR3aW5kb3cuRmlsZSAmJiBcblx0XHRcdHdpbmRvdy5GaWxlUmVhZGVyICYmIFxuXHRcdFx0d2luZG93LkZpbGVMaXN0ICYmIFxuXHRcdFx0d2luZG93LkJsb2Jcblx0XHQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiRnVsbCBmaWxlIHN1cHBvcnRcIik7XG5cblx0XHR9O1xuXHR9XG5cblx0UGljdHVyZS5wcm90b3R5cGUuY3JlYXRlUGljdHVyZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY3JlYXRQaWN0dXJlJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwaWN0dXJlLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnR4dCl7XG5cdFx0XHRjb250ZXh0LmltZ1NyYyA9IHRoaXMuaW1nU3JjO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC5pbWdTcmMgPSBcIlwiO1xuXHRcdH1cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHJldHVybigkKGh0bWwpKTtcblxuXHR9O1xuXG5cdFBpY3R1cmUucHJvdG90eXBlLmluaXRJbWFnZUlucHV0cz0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBpbml0SW1hZ2VpbnB1dHMnKTtcblx0XHRcdHZhciBpbWdJbnB1dHMgPSB0aGlzLiRlbC5maW5kKCcuaW1hZ2UtaW5wdXQnKVswXTtcblx0XHRcdGluaXRJbWFnZUltcHV0KGltZ0lucHV0cyk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbml0SW1hZ2VJbXB1dChlbCl7XG5cdFx0ZWwuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtaW5wdXQtanMnKTtcblxuXHRcdHZhciBmaWxlSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWZpbGVdJyk7XG5cdFx0ZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNyZWF0ZVRodW1iKTtcblx0XHRcblx0XHR2YXIgcHJldmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtaW5wdXQtcHJldmlldycpO1xuXHRcdFxuXHRcdGVsLmluc2VydEJlZm9yZShwcmV2aWV3Q29udGFpbmVyLCBmaWxlSW5wdXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVUaHVtYihlKXtcblx0XHRjb25zb2xlLmxvZyhcIklucHV0IGNoYW5nZWRcIik7XG5cblx0XHRpZiAoXG5cdFx0XHR0aGlzLmZpbGVzICYmIFxuXHRcdFx0dGhpcy5maWxlc1swXSAmJiBcblx0XHRcdHRoaXMuZmlsZXNbMF0udHlwZS5tYXRjaCgnaW1hZ2UuKicpXG5cdFx0KSB7XG5cdFx0XHR2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdHZhciBwcmV2aWV3Q29udGFpbmVyID0gdGhpcy5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1pbnB1dC1wcmV2aWV3Jyk7XG5cblx0XHRcdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKXtcblx0XHRcdFx0dmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG5cdFx0XHRcdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuXG5cdFx0XHRcdFx0aWYoaW1nLndpZHRoID4gMzAwICl7XG5cdFx0XHRcdFx0XHRuZXdXaWR0aCA9IGltZy53aWR0aC9pbWcud2lkdGgqMzAwO1xuXHRcdFx0XHRcdFx0bmV3SGVpZ2h0ID0gaW1nLmhlaWdodC9pbWcud2lkdGgqMzAwO1xuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0bmV3V2lkdGggPSBpbWcud2lkdGg7XG5cdFx0XHRcdFx0XHRuZXdIZWlnaHQgPSBpbWcuaGVpZ2h0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGVycm9ycy5sZW5ndGggPT09IDApe1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIrIGUudGFyZ2V0LnJlc3VsdCArXCInKVwiO1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQrXCJweFwiO1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IG5ld1dpZHRoK1wicHhcIjtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0YWxlcnQoZXJyb3JzLmpvaW4oXCJcXG5cIikpO1xuXHRcdFx0XHRcdFx0ZXJyb3JzID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGltZy53aWR0aCk7XG5cdFx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGltZy5oZWlnaHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmZpbGVzWzBdKTtcblxuXHRcdH1lbHNle1xuXHRcdFx0ZXJyb3JzLnB1c2goXCJGaWxlIGlzIG5vdCBhIHZhbGlkIGltYWdlXCIpO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY2hlY2tFcnJvcnMoKXtcblx0XHRpZihlcnJvcnMubGVuZ3RoID09PSAwKXtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9ZWxzZXtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdFBpY3R1cmUucHJvdG90eXBlLmVkaXQgPSBmdW5jdGlvbigkZWwsZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBlZGl0Jyk7XG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY29uZmlybScpO1xuXHR9O1xuXG5cdFBpY3R1cmUucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGVuZEVkaXQnKTtcblx0fTtcblxuXHRyZXR1cm4gUGljdHVyZTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBQb3N0aXRFZGl0ID0gcmVxdWlyZSgnLi9Qb3N0aXRFZGl0Jyk7XG5cblx0ZnVuY3Rpb24gUG9zdGl0KHR4dCkgeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnR4dCA9IHR4dDtcblx0XHRpZighdGhpcy50eHQpe1xuXHRcdFx0dGhpcy50eHQgPSBcIk5pZXV3ZSBQb3N0aXRcIjtcblx0XHR9XG5cdH1cblxuXHRQb3N0aXQucHJvdG90eXBlLmNyZWF0ZVBvc3RpdCA9IGZ1bmN0aW9uKHR4dCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjcmVhdGVQb3N0aXQnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudHh0ID0gdGhpcy50eHQ7XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKCRlbCxlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gZWRpdCcpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitlbGVtZW50SWQpLmFwcGVuZChuZXcgUG9zdGl0RWRpdCh0aGlzLnR4dCkpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjb25maXJtJyk7XG5cdFx0dGhpcy50eHQgPSB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiIC5wb3N0aXQtZWRpdFwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS5hZGRDbGFzcyhcImhpZGRlblwiKS50ZXh0KHRoaXMudHh0KTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdC1lZGl0XCIpLnJlbW92ZSgpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0fTtcblxuXHRyZXR1cm4gUG9zdGl0O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gUG9zdGl0RWRpdCh0eHQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRFZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcG9zdGl0LWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHR4dDtcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXG5cdH1cblx0XG5cdHJldHVybiBQb3N0aXRFZGl0O1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==