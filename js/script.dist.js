!function e(t,i,n){function o(r,l){if(!i[r]){if(!t[r]){var a="function"==typeof require&&require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e){!function(){function t(){this.overview=new r($("#container"),this.user),this.profile=new o($("#profile")),bean.on(this.profile,"refresh",n.bind(this)),bean.on(this.overview,"leak-boardData",i.bind(this))}function i(e){console.log("[Script] storeBoardInfo"),this.boardInfo=e}function n(e){console.log("[Script] windowRefresh"),$("#container").html(""),"undefined"!=typeof this.boardInfo&&(this.app=new s($("#container"),this.boardInfo,e)),this.overview="undefined"!=typeof e?new r($("#container"),e.id):new r($("#container"))}var o=e("./classes/Profile"),s=e("./classes/App"),r=e("./classes/Overview");this.user=[],t()}()},{"./classes/App":2,"./classes/Overview":7,"./classes/Profile":11}],2:[function(e,t){t.exports=function(){function t(e,t,o){console.log("[App] constructor"),this.$el=e,this.whiteboardId=t.id,this.userId=o,this.admin=Boolean(t.creator===this.userId),this.boardInfo=t,this.types=["postits","statics","motion"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new s,this.whiteboard=new i(this.$el,this.boardInfo,this.admin),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.$el.find(".close-button").on("click",this.closeProject.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),s=e("./DataHandler");return t.prototype.closeProject=function(){console.log("[WhiteboardSettings] closeProject"),$("#container").html("");var t=e("./Overview");new t($("#container"),this.userId)},t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();var t=new o(this.$el,e,this.position);this.newElement(e,t.elementId),bean.on(t,"position-changed",this.positionChangedHandler.bind(this)),bean.on(t,"image-changed",this.imageChangedHandler.bind(this)),bean.on(t,"video-changed",this.videoChangedHandler.bind(this)),bean.on(t,"remove-clicked",this.removeHandler.bind(this)),bean.on(t,"edit-clicked",this.editHandler.bind(this))},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e],this.whiteboardId)},t.prototype.addToElementList=function(e){console.log("[App] addToElementList"),this.addToBoard(e)},t.prototype.addToBoard=function(e){console.log("[App] addToBoard");var t=e;for(var i in t){console.log(t[i]);var n=t[i].el_type,s={};s.yPos=Number(t[i].posy),s.xPos=Number(t[i].posx);var r=t[i].id_on_board,l=t[i].id,a=t[i].content,d=new o(this.$el,n,s,r,a,l);this.admin===!0&&(bean.on(d,"remove-clicked",this.removeHandler.bind(this)),bean.on(d,"edit-clicked",this.editHandler.bind(this)),bean.on(d,"position-changed",this.positionChangedHandler.bind(this)),bean.on(d,"image-changed",this.imageChangedHandler.bind(this)),bean.on(d,"video-changed",this.videoChangedHandler.bind(this)))}},t.prototype.videoChangedHandler=function(e){console.log("[App] videoChangedHandler"),this.dataHandler.editContent(e.elementType,e.elementId,e.content,this.whiteboardId)},t.prototype.imageChangedHandler=function(e){console.log("[App] imageChangedHandler"),this.dataHandler.editContent(e.elementType,e.elementId,e.content,this.whiteboardId)},t.prototype.editHandler=function(e){console.log("[App] editHandler"),this.dataHandler.editContent(e.elementType,e.elementId,e.content,this.whiteboardId)},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.elementId,this.whiteboardId)},t.prototype.newElement=function(e,t){console.log("[App] newElementHandler"),this.dataHandler.newBoardElement(e,t,this.position,this.whiteboardId)},t.prototype.positionChangedHandler=function(e){console.log("[App] positionChangedHandler"),this.dataHandler.positionChange(e.elementType,e.elementId,e.eTarget.css("left"),e.eTarget.css("top"),this.whiteboardId)},t}()},{"./DataHandler":3,"./Element":5,"./ElementPicker":6,"./Overview":7,"./Whiteboard":14}],3:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/",t=this,this.boardList=[]}var t;return e.prototype.getBoardInfo=function(e){return console.log("[DataHandler] getBoardInfo"),$.ajax({type:"GET",url:this.url+"boards/"+e,data:{content:"content"},success:function(e){bean.fire(t,"board-info",[e])}})},e.prototype.loadBoardElements=function(e,i){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/"+String(i),data:{content:"content"},success:function(e){bean.fire(t,"data-success",[e])}})},e.prototype.removeBoardElement=function(e,t,i){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t,i);break;case"static":this.removeElementById("statics",t,i);break;case"motion":this.removeElementById("motion",t,i)}},e.prototype.removeElementById=function(e,t,i){$.ajax({type:"POST",url:this.url+e+"/delete/",data:{id_on_board:t,whiteboard_id:i},success:function(e){console.log("deleted = "+e)}})},e.prototype.newBoardElement=function(e,t,i,n){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newElement("postits",t,i,n);break;case"static":this.newElement("statics",t,i,n);break;case"motion":console.log("type : "+e),this.newElement("motion",t,i,n)}},e.prototype.newElement=function(e,t,i,n){console.log("NEWELEMENT"),$.ajax({type:"POST",url:this.url+e+"/add",data:{id_on_board:t,xpos:i.xPos,ypos:i.yPos,whiteboardId:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.positionChange=function(e,t,i,n,o){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newPosition("postits",t,i,n,o);break;case"static":this.newPosition("statics",t,i,n,o);break;case"motion":this.newPosition("motion",t,i,n,o)}},e.prototype.newPosition=function(e,t,i,n,o){$.ajax({type:"POST",url:this.url+e+"/change/position",data:{whiteboard_id:o,id_on_board:t,xpos:i,ypos:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.editContent=function(e,t,i,n){switch(console.log("[DataHandler] editContent"),e){case"post-it":this.newContent("postits",t,i,n);break;case"static":this.newContent("statics",t,i,n);break;case"motion":this.newContent("motion",t,i,n)}},e.prototype.newContent=function(e,t,i,n){$.ajax({type:"POST",url:this.url+e+"/change/content",data:{whiteboard_id:n,id_on_board:t,content:i},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.getAllBoards=function(){console.log("[DataHandler] getAllBoards"),$.ajax({type:"GET",url:this.url+"boards/",data:{content:"content"},success:function(e){this.boardElements.push(e)}.bind(this)})},e}()},{}],4:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var s=n(o);this.$el.find("#"+this.elementId).append(s),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked"),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],5:[function(e,t){t.exports=function(){function t(e,t,i,n,o){console.log("[Element] constructor"),this.$el=e,this.content=o,this.elementType=t,this.elementId=n,this.elementId=this.elementId?n:this.setElementId(),this.position=i,this.createElementHolder()}var i=e("./EditMenu"),n=1,o=e("./elements/Postit"),s=e("./elements/Picture"),r=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={};e.top=this.position.yPos,e.left=this.position.xPos,e.zIndex=0,this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.bindHandler(this.$el.find("#"+this.elementId)),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new o(this.content),this.content?this.$el.find("#"+this.elementId).append(this.element.createPostit()):(this.$el.find("#"+this.elementId).append(this.element.createPostit()),this.element.edit(this.$el,this.elementId),this.editMenu.toggleVisible()),this.$el.find("#"+this.elementId).append(this.element.createPostit);break;case"static":this.element=new s(this.content,this.elementId),this.content?(this.$el.find("#"+this.elementId).append(this.element.createPicture()),bean.on(this.element,"image-changed",this.imageChangedHandler.bind(this))):(this.$el.find("#"+this.elementId).append(this.element.createPicture()),this.element.edit(this.$el,this.elementId),bean.on(this.element,"image-changed",this.imageChangedHandler.bind(this)),this.editMenu.toggleVisible());break;case"motion":this.element=new r(this.$el,this.content,this.elementId),this.content?(this.$el.find("#"+this.elementId).append(this.element.createMotion()),bean.on(this.element,"video-changed",this.videoChangedHandler.bind(this))):(this.$el.find("#"+this.elementId).append(this.element.createMotion()),this.element.edit(this.$el,this.elementId),bean.on(this.element,"video-changed",this.videoChangedHandler.bind(this)),this.editMenu.toggleVisible()),this.bindHandler(this.$el.find("#"+this.elementId))}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),this.mouseDown=!1},t.prototype.videoChangedHandler=function(e){console.log("[Element] videoChangedHandler");var t={};t.content=e,t.elementId=this.elementId,t.elementType=this.elementType,bean.fire(this,"video-changed",t),this.editMenu.toggleVisible()},t.prototype.imageChangedHandler=function(e){console.log("[Element] imageChangedHandler");var t={};t.content=e,t.elementId=this.elementId,t.elementType=this.elementType,bean.fire(this,"image-changed",t),this.editMenu.toggleVisible()},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),e.target.id===this.elementId&&(this.mouseDown=!0,this.currentLeft=$(e.target).css("left"),this.currentTop=$(e.target).css("top"),this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++n,this.$el.find("#"+this.elementId).css("zIndex",n),document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler))},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new i(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":console.log("remove"),this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();var t={};t.elementId=this.elementId,t.elementType=this.elementType,bean.fire(this,"remove-clicked",t),console.log(t);break;case"edit":this.element.confirm(),this.editMenu.toggleVisible(),this.element.changed===!0&&(t={},t.elementType=this.elementType,t.elementId=this.elementId,t.content=this.element.txt,bean.fire(this,"edit-clicked",t));break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);this.$el.find("#"+this.elementId).css("left",t-this.offsetX),this.$el.find("#"+this.elementId).css("top",i-this.offsetY)}},t.prototype.mouseUpHandler=function(e){if(console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),this.currentTop!==$(e.target).css("top")||this.currentLeft!==$(e.target).css("left")){var t={};t.eTarget=$(e.target),t.elementType=this.elementType,t.elementId=this.elementId,bean.fire(this,"position-changed",t)}},t.prototype.setElementId=function(){console.log("[Element] setElementId");var e=this.$el.find(".element-holder");if(e.length>0){var t=[],i=0;for(i=0;i<e.length;i++)t.push(e[i].id);return t.sort(function(e,t){return t-e}),String(Number(t[0])+1)}return"0"},t}()},{"./EditMenu":4,"./elements/Motion":16,"./elements/Picture":18,"./elements/Postit":20}],6:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],7:[function(e,t){t.exports=function(){function t(e,t){if(console.log("[Overview] constructor"),this.$el=e,this.user=t,this.overviewHandler=new s,t>0){var i=$("#overviewBtns-template").text();$("#container").append(i),e.find(".addBoard").on("click",this.addBoard.bind(this)),e.find(".myBoards").on("click",this.myBoards.bind(this)),e.find(".allBoards").on("click",this.allBoards.bind(this))}bean.on(this.overviewHandler,"data-success",this.addToBoardList.bind(this)),bean.on(this.overviewHandler,"view-whiteboard",this.viewWhiteboard.bind(this)),this.overviewHandler.getAllBoards()}var n=e("./App"),o=e("./OverviewElement"),s=e("./OverviewHandler");return t.prototype.addToBoardList=function(e){for(console.log("[Overview] addToBoardList"),this.boardList=[],$(".overviewThumb").remove(),this.boardList.push(e),i=0;i<this.boardList[0].length;i++)this.overviewElement=new o(this.boardList[0][i],this.user),bean.on(this.overviewElement,"remove-whiteboard",this.removeWhiteboard.bind(this)),bean.on(this.overviewElement,"view-whiteboard",this.viewWhiteboard.bind(this))},t.prototype.viewWhiteboard=function(e){console.log("[Overview] viewWhiteboard"),bean.fire(this,"leak-boardData",e),console.log(e),$("#container").html(""),new n($("#container"),e,this.user),bean.fire(this,"leak-boardData",e)},t.prototype.addBoard=function(){console.log("[Overview] addBoard"),console.log(this.user),this.user&&this.overviewHandler.addWhiteboard("Untitled",this.user)},t.prototype.removeWhiteboard=function(e){console.log("[Overview] removeWhiteboard"),this.overviewHandler.removeBoard(e),this.$el.find("#"+e).remove()},t.prototype.myBoards=function(e){console.log("[Overview] myBoards"),this.overviewHandler.getMyBoards(this.user),console.log(this.user),this.toggleVisible(e),this.$el.find(".allBoards").removeClass("selected")},t.prototype.allBoards=function(e){console.log("[Overview] allBoards"),this.overviewHandler.getAllBoards(),this.toggleVisible(e),this.$el.find(".myBoards").removeClass("selected")},t.prototype.sendUser=function(e){console.log("[Overview] sendUser"),this.user=e.id,this.overviewHandler.getAllBoards()},t.prototype.toggleVisible=function(e){this.$el.find("."+e.target.classList[0]).addClass("selected")},t}()},{"./App":2,"./OverviewElement":8,"./OverviewHandler":9}],8:[function(e,t){t.exports=function(){function t(e,t){console.log("[OverviewElement] constructor"),this.board=e,this.boardId=e.id,this.userId=t,this.createOverviewThumb(e)}e("./App");return t.prototype.createOverviewThumb=function(e){console.log("[OverviewElement] createOverviewThumb");var t=$("#overviewThumb-template").text(),i=Handlebars.compile(t),n={};n.title=e.title,n.id=e.id,n.creator="CREATOR",n.creation_date=e.creation_date;var o=i(n);$("#container").append($(o)),this.bindHandler(e,$(o)[0])},t.prototype.bindHandler=function(e){console.log("[OverviewElement] bindHandler"),e.creator==this.userId&&($("#"+e.id+" > .remove").removeClass("hidden"),$("#"+e.id+" > .remove").on("click",this.removeHandler.bind(this))),$("#"+e.id+" > .view").on("click",this.viewHandler.bind(this))},t.prototype.removeHandler=function(){console.log("[OverviewElement] removeHandler"),bean.fire(this,"remove-whiteboard",this.boardId)},t.prototype.viewHandler=function(){console.log("[OverviewElement] viewHandler"),bean.fire(this,"view-whiteboard",this.board)},t}()},{"./App":2}],9:[function(e,t){t.exports=function(){function e(){console.log("[OverviewHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/"}return e.prototype.getAllBoards=function(){return console.log("[OverviewHandler] getAllBoards"),$.ajax({type:"GET",url:this.url+"boards/",data:{content:"content"},success:function(e){console.log("view-whiteboard "+[e]),bean.fire(this,"data-success",[e])}.bind(this)})},e.prototype.getMyBoards=function(e){return console.log("[OverviewHandler] getMyBoards"),$.ajax({type:"GET",url:this.url+"boards/"+e,data:{content:"content"},success:function(e){bean.fire(this,"data-success",[e])}.bind(this)})},e.prototype.removeBoard=function(e){console.log("[OverviewHandler] removeBoard"),$.ajax({type:"GET",url:this.url+"boards/delete/"+e,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.addWhiteboard=function(e,t){return $.ajax({type:"POST",url:this.url+"boards/add/"+e+"/"+t,data:{content:"content"},success:function(e){console.log("view-whiteboard "+[e]),bean.fire(this,"view-whiteboard",[e])}.bind(this)})},e}()},{}],10:[function(e,t){t.exports=function(){function e(e){console.log("[Participant] constructor"),this.$el=e;var t=e.find(".participant-input");if(t.val()){var i=$("#participant-template").text(),n=Handlebars.compile(i),o={participants:[{}]};Handlebars.registerHelper("participant",function(){return new Handlebars.SafeString("<li id=''>"+t.val()+"<button class='btn deletePart'>X</button></li>")});var s=n(o);this.$el.find("#participant-list").append($(s)),this.bindDeletebutton(),$(".participant-input").val("")}}return e.prototype.bindDeletebutton=function(){console.log("[Participant] bindDeletebutton"),this.deletebuton=document.querySelectorAll(".deletePart"),this.deletebuton[this.deletebuton.length-1].addEventListener("click",this.deleteClickHandler.bind(this))},e.prototype.deleteClickHandler=function(e){console.log("[Participant] deleteClickHandler"),bean.fire(this,"delete",e.path[1])},e}()},{}],11:[function(e,t){t.exports=function(){function t(e,t,n){console.log("[Profile] constructor"),this.$el=e,this.user=[],this.userHandler=new i,this.username=t,this.email=n;var o=$("#login-template").text(),s=Handlebars.compile(o),r={},l=s(r);$("#profile").append($(l));var o=$("#register-template").text(),s=Handlebars.compile(o),r={},l=s(r);$("#profile").append($(l)),this.$el.find("#register-button").on("click",this.register.bind(this)),$(".register").on("click",this.addUser.bind(this)),this.$el.find(".login").on("click",this.login.bind(this)),bean.on(this.userHandler,"user-found",this.bindUser.bind(this))}var i=e("./UserHandler");return t.prototype.register=function(){console.log("[Profile] register"),$("#register").toggleClass("hidden")},t.prototype.addUser=function(){console.log("[Profile] addUser"),this.username=this.$el.find(".register_name").val(),this.email=this.$el.find(".register_email").val(),this.password=this.$el.find(".register_password").val(),this.password_2=this.$el.find(".register_password_2").val(),this.password==this.password_2&&this.userHandler.register(this.username,this.email,this.password)},t.prototype.login=function(){console.log("[Profile] login"),this.email=this.$el.find(".login_email").val(),this.password=this.$el.find(".login_password").val(),this.userHandler.login(this.email,this.password)},t.prototype.logout=function(){console.log("[Profile] logout"),this.user=[],this.toggleVisible(),$("#register-button").removeClass("hidden"),$("#logout").remove(),bean.fire(this,"refresh",this.user)},t.prototype.bindUser=function(e){if(console.log("[Profile] bindUser"),this.user=[e],this.user[0]){$("input").val(""),$("#register-button").addClass("hidden"),$("#register").addClass("hidden"),this.toggleVisible(),bean.fire(this,"refresh",this.user);var t=$("#logged-in-template").text(),i=Handlebars.compile(t),n={};n.username=this.user[0].wb_username;var o=i(n);$("#profile").append($(o)),$(".logout").on("click",this.logout.bind(this))}},t.prototype.toggleVisible=function(){console.log("[Profile] toggleVisible"),$("#login").toggleClass("hidden")},t}()},{"./UserHandler":13}],12:[function(e,t){t.exports=function(){function e(e){console.log("[Tags] constructor"),this.$el=e;var t=e.find(".tag-input");if(t.val()){var i=$("#tags-template").text(),n=Handlebars.compile(i),o={tags:[{}]};Handlebars.registerHelper("tag",function(){return new Handlebars.SafeString("<li>"+t.val()+"<button class='btn deleteTag'>X</button></li>")});var s=n(o);this.$el.find("#tag-list").append($(s)),this.bindDeletebutton(),t.val("")}}return e.prototype.bindDeletebutton=function(){console.log("[Tags] bindDeletebutton"),this.deletebuton=document.querySelectorAll(".deleteTag"),console.log(this.deletebuton),this.deletebuton[this.deletebuton.length-1].addEventListener("click",this.deleteClickHandler.bind(this))},e.prototype.deleteClickHandler=function(e){console.log("[Participant] deleteClickHandler"),bean.fire(this,"delete",e.path[1])},e}()},{}],13:[function(e,t){t.exports=function(){function e(){console.log("[OverviewHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/"}return e.prototype.login=function(e,t){console.log("[UserHandler] login"),$.ajax({type:"POST",data:{content:"content"},url:this.url+"users/login/"+e+"/"+t,success:function(e){console.log("user found",[e]),bean.fire(this,"user-found",[e])}.bind(this)})},e.prototype.register=function(e,t,i){console.log("[UserHandler] register"),$.ajax({type:"POST",data:{content:"content"},url:this.url+"users/register/"+e+"/"+t+"/"+i,success:function(e){console.log("new user created",[e]),bean.fire(this,"user-found",[e])}.bind(this)})},e}()},{}],14:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[Whiteboard] constructor"),this.$el=e,this.admin=i,this.boardInfo=t,this.createWhiteboard(),this.addWhiteboardSettings()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.admin===!0&&this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el,this.admin,this.boardInfo)},t}()},{"./WhiteboardSettings":15}],15:[function(e,t){t.exports=function(){function t(e,t,i){if(console.log("[WhiteboardSettings] constructor"),this.$el=e,this.admin=t,this.admin)var n=$("#settings-template").text();else var n=$("#info-template").text();var o=Handlebars.compile(n),s={};s.title=i.title,s.creation_date=i.creation_date,s.creator="CREATOR";var r=o(s);$("#container").append($(r)),this.bindHandler()}var i=e("./Participant"),n=e("./Tags");return t.prototype.bindHandler=function(){console.log("[WhiteboardSettings] bindHandler"),this.$el.find(".hide-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".show-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".addParticipant").on("click",this.createParticipant.bind(this)),this.$el.find(".addTag").on("click",this.createTag.bind(this))},t.prototype.toggleVisible=function(){console.log("[WhiteboardSettings] toggleVisible"),this.$el.find("#hide").toggleClass("hidden"),this.$el.find("#show").toggleClass("hidden")},t.prototype.createParticipant=function(){console.log("[WhiteboardSettings] addClickedHandler"),this.participant=new i(this.$el),bean.on(this.participant,"delete",this.deleteParticipant.bind(this))},t.prototype.createTag=function(){console.log("[WhiteboardSettings] createTag"),this.tag=new n(this.$el),bean.on(this.tag,"delete",this.deleteTag.bind(this))},t.prototype.hideSettingsHandler=function(){console.log("[WhiteboardSettings] hideSettingsHandler"),this.$el.find(".hide_section").toggleClass("hidden"),this.$el.find(".show-button").toggleClass("hidden")},t.prototype.deleteParticipant=function(e){console.log("[WhiteboardSettings] deleteParticipant");var t=document.querySelector("#participant-list");t.removeChild(e)},t.prototype.deleteTag=function(e){console.log("[WhiteboardSettings] deleteParticipant");var t=document.querySelector("#tag-list");t.removeChild(e)},t}()},{"./Participant":10,"./Tags":12}],16:[function(e,t){t.exports=function(){function t(e,t){console.log("[Motion] constructor"),this.$el=e,this.changed=!1,i=this,t&&(this.vidSrc=t)}var i,n=e("./MotionEdit");return t.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.vidSrc?"motion/"+this.vidSrc+".mp4":"";var n=t(i);return $(n)},t.prototype.playSelectedFile=function(e){console.log("[Motion] playSelectedFile");var t=this.$el.find("#"+this.elementId+" > .motion > video");if(URL){console.log("URL BESTAAD");var n=URL.createObjectURL(e);t.attr("src",n),t.autoPlay=!0}var o=new FileReader;o.onload=function(e){console.log("loaded"),i.confirm(e.target.result)},o.readAsDataURL(e)},t.prototype.edit=function(e,t){console.log("[Motion] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new n(this.vidSrc,t)),this.videoInput=this.$el.find("#"+t+" >.motion-edit"),this.videoInput.change(function(){var e=this.files[0];i.playSelectedFile(e),i.changed=!0})},t.prototype.confirm=function(e){console.log("[Motion] confirm"),this.changed===!0&&(console.log(this.changed),this.vidSrc=this.$el.find("#"+this.elementId+" .motion-edit").val(),bean.fire(this,"video-changed",e),this.changed=!1),this.endEdit()},t.prototype.endEdit=function(){console.log("[Motion] endEdit"),this.$el.find("#"+this.elementId+" > .motion-edit").remove()},t}()},{"./MotionEdit":17}],17:[function(e,t){t.exports=function(){function e(e){console.log("[MotionEdit] constructor");var t=$("#motion-edit-template").text(),i=Handlebars.compile(t),n={};n.vidSrc=e;var o=i(n);return $(o)}return e}()},{}],18:[function(e,t){t.exports=function(){function t(e){console.log("[Picture] constructor"),i=this,this.changed=!1,this.imgSrc=e,this.imgSrc||(this.imgSrc=""),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support")}var i,n=e("./PictureEdit");return t.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};if(this.imgSrc){i.imgSrc="statics/"+this.imgSrc+".png";var n=t(i);return $(n)}},t.prototype.edit=function(e,t){console.log("[Picture] edit"),this.$el=e,this.elementId=t;var o=new n(this.$el,this.imgSrc,t);this.$el.find("#"+t).append(o),this.imgInputs=this.$el.find("#"+t+" >.input-picture"),this.imgInputs.change(function(){var e=this.files[0];i.createThumb(e),i.changed=!0})},t.prototype.createThumb=function(e){console.log("[Picture] createThumb");var t=new FileReader;t.onload=function(e){console.log("loaded");var t=i.$el.find("#"+i.elementId+" >.picture .image-preview");t.attr("src",e.target.result),i.confirm(e.target.result)},t.readAsDataURL(e)},t.prototype.confirm=function(e){console.log("[Picture] confirm"),this.imgSrc=this.$el.find("#"+this.elementId+" .input-picture").val(),this.changed===!0&&(bean.fire(this,"image-changed",e),i.changed=!1),this.endEdit()},t.prototype.endEdit=function(){console.log("[Picture] endEdit"),this.$el.find("#"+this.elementId+" > .input-picture").remove()},t}()},{"./PictureEdit":19}],19:[function(e,t){t.exports=function(){function e(e,t){console.log("[PictureEdit] constructor"),this.$el=e;var i=$("#picture-edit-template").text(),n=Handlebars.compile(i),o={};o.txt=t;var s=n(o);return $(s)}return e}()},{}],20:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.changed=!0,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":21}],21:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");
var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRGF0YUhhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9FZGl0TWVudS5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9FbGVtZW50UGlja2VyLmpzIiwianMvc3JjL2NsYXNzZXMvT3ZlcnZpZXcuanMiLCJqcy9zcmMvY2xhc3Nlcy9PdmVydmlld0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9PdmVydmlld0hhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9QYXJ0aWNpcGFudC5qcyIsImpzL3NyYy9jbGFzc2VzL1Byb2ZpbGUuanMiLCJqcy9zcmMvY2xhc3Nlcy9UYWdzLmpzIiwianMvc3JjL2NsYXNzZXMvVXNlckhhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkLmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZFNldHRpbmdzLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uRWRpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1BpY3R1cmUuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9QaWN0dXJlRWRpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdEVkaXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLE9BQUEsS0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLHVCQUFBLEVBQUEsSUFBQSxNQUFBLEdBQUEsS0FBQSxtQkFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsU0FBQSxJQ0FBLFdBTUEsUUFBQSxLQUNBLEtBQUEsU0FBQSxHQUFBLEdBQUEsRUFBQSxjQUFBLEtBQUEsTUFDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEVBQUEsYUFDQSxLQUFBLEdBQUEsS0FBQSxRQUFBLFVBQUEsRUFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsU0FBQSxpQkFBQSxFQUFBLEtBQUEsT0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxVQUFBLEVBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEVBQUEsY0FBQSxLQUFBLElBQ0EsbUJBQUEsTUFBQSxZQUNBLEtBQUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxjQUFBLEtBQUEsVUFBQSxJQUdBLEtBQUEsU0FEQSxtQkFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxJQUVBLEdBQUEsR0FBQSxFQUFBLGVBeEJBLEdBQUEsR0FBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLEVBQUEscUJBQ0EsTUFBQSxRQXlCQSw0RkM3QkEsRUFBQSxRQUFBLFdBUUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLGFBQUEsRUFBQSxHQUNBLEtBQUEsT0FBQSxFQUNBLEtBQUEsTUFBQSxRQUFBLEVBQUEsVUFBQSxLQUFBLFFBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxPQUFBLFVBQUEsVUFBQSxVQUNBLEtBQUEsRUFBQSxFQUNBLEtBQUEsZUFFQSxLQUFBLFlBQ0EsS0FBQSxZQUFBLEdBQUEsR0FDQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsS0FBQSxPQUNBLEtBQUEsY0FBQSxHQUFBLEdBQUEsS0FBQSxLQUVBLEtBQUEsR0FBQSxLQUFBLFlBQUEsZUFBQSxLQUFBLGlCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxXQUFBLHFCQUFBLEtBQUEseUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLGNBQUEseUJBQUEsS0FBQSw0QkFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLE9BRUEsS0FBQSxhQTFCQSxHQUFBLEdBQUEsRUFBQSxnQkFDQSxFQUFBLEVBQUEsbUJBQ0EsRUFBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLGdCQTBHQSxPQS9FQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSxxQ0FDQSxFQUFBLGNBQUEsS0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLEVBQUEsY0FBQSxLQUFBLFNBSUEsRUFBQSxVQUFBLHlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsa0NBQ0EsS0FBQSxjQUFBLGdCQUNBLEtBQUEsY0FBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxTQUFBLEdBR0EsRUFBQSxVQUFBLDRCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEscUNBQ0EsS0FBQSxjQUFBLGVBQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsTUFBQSxXQUFBLEVBQUEsRUFBQSxXQUNBLEtBQUEsR0FBQSxFQUFBLG1CQUFBLEtBQUEsdUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLGdCQUFBLEtBQUEsb0JBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLGdCQUFBLEtBQUEsb0JBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLGlCQUFBLEtBQUEsY0FBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEVBQUEsZUFBQSxLQUFBLFlBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxXQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLEtBQUEsR0FBQSxLQUFBLE1BQUEsTUFDQSxLQUFBLFlBQUEsa0JBQUEsS0FBQSxNQUFBLEdBQUEsS0FBQSxlQUlBLEVBQUEsVUFBQSxpQkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsV0FBQSxJQUdBLEVBQUEsVUFBQSxXQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsbUJBQ0EsSUFBQSxHQUFBLENBQ0EsS0FBQSxHQUFBLEtBQUEsR0FBQSxDQUNBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxRQUNBLElBQ0EsR0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLEtBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxZQUNBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsUUFDQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLE1BQUEsU0FBQSxJQUNBLEtBQUEsR0FBQSxFQUFBLGlCQUFBLEtBQUEsY0FBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEVBQUEsZUFBQSxLQUFBLFlBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLG1CQUFBLEtBQUEsdUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLGdCQUFBLEtBQUEsb0JBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxFQUFBLGdCQUFBLEtBQUEsb0JBQUEsS0FBQSxVQUtBLEVBQUEsVUFBQSxvQkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDZCQUNBLEtBQUEsWUFBQSxZQUFBLEVBQUEsWUFBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLEtBQUEsZUFHQSxFQUFBLFVBQUEsb0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLFlBQUEsWUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxLQUFBLGVBR0EsRUFBQSxVQUFBLFlBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLFlBQUEsWUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxLQUFBLGVBR0EsRUFBQSxVQUFBLGNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLFlBQUEsbUJBQUEsRUFBQSxZQUFBLEVBQUEsVUFBQSxLQUFBLGVBR0EsRUFBQSxVQUFBLFdBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsWUFBQSxnQkFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLEtBQUEsZUFHQSxFQUFBLFVBQUEsdUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLFlBQUEsZUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxJQUFBLFFBQUEsRUFBQSxRQUFBLElBQUEsT0FBQSxLQUFBLGVBRUEsK0dDL0dBLEVBQUEsUUFBQSxXQUVBLFFBQUEsS0FBQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxJQUFBLGlFQUNBLEVBQUEsS0FDQSxLQUFBLGFBSkEsR0FBQSxFQXdKQSxPQWpKQSxHQUFBLFVBQUEsYUFBQSxTQUFBLEdBQ0EsTUFEQSxTQUFBLElBQUEsOEJBQ0EsRUFBQSxNQUNBLEtBQUEsTUFDQSxJQUFBLEtBQUEsSUFBQSxVQUFBLEVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsS0FBQSxLQUFBLEVBQUEsY0FBQSxRQUtBLEVBQUEsVUFBQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxNQURBLFNBQUEsSUFBQSxtQ0FDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxPQUFBLEdBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsS0FBQSxLQUFBLEVBQUEsZ0JBQUEsUUFLQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSxvQ0FDQSxHQUNBLElBQUEsVUFDQSxLQUFBLGtCQUFBLFVBQUEsRUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsa0JBQUEsVUFBQSxFQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxrQkFBQSxTQUFBLEVBQUEsS0FLQSxFQUFBLFVBQUEsa0JBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsV0FDQSxNQUFBLFlBQUEsRUFBQSxjQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLGFBQUEsT0FLQSxFQUFBLFVBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGlDQUNBLEdBQ0EsSUFBQSxVQUNBLEtBQUEsV0FBQSxVQUFBLEVBQUEsRUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsV0FBQSxVQUFBLEVBQUEsRUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUFBLFFBQUEsSUFBQSxVQUFBLEdBQ0EsS0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEtBS0EsRUFBQSxVQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxjQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxPQUNBLE1BQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLGFBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxTQUNBLFFBQUEsSUFBQSxPQUtBLEVBQUEsVUFBQSxlQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGlDQUNBLEdBQ0EsSUFBQSxVQUNBLEtBQUEsWUFBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxZQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxLQUtBLEVBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxtQkFDQSxNQUFBLGNBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxTQUNBLFFBQUEsSUFBQSxPQUtBLEVBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSw2QkFDQSxHQUNBLElBQUEsVUFDQSxLQUFBLFdBQUEsVUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFdBQUEsVUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsS0FLQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEtBQUEsT0FDQSxJQUFBLEtBQUEsSUFBQSxFQUFBLGtCQUNBLE1BQUEsY0FBQSxFQUFBLFlBQUEsRUFBQSxRQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLFdBQUEsSUFFQSxNQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsU0FDQSxRQUFBLElBQUEsT0FLQSxFQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSw4QkFDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLFVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsS0FBQSxjQUFBLEtBQUEsSUFDQSxLQUFBLFNBSUEsMkJDekpBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLHVCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFVBQ0EsU0FBQSxTQUFBLEtBQUEsYUFDQSxTQUFBLE9BQUEsS0FBQSxhQUNBLFNBQUEsU0FBQSxLQUFBLGdCQUdBLFlBQUEsZUFBQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLFdBQUEsaUJBQUEsS0FBQSxVQUNBLEVBQUEsV0FBQSxpQkFBQSxLQUFBLEtBRUEsT0FBQSxJQUFBLFlBQUEsV0FDQSxVQUFBLEVBQUEsSUFBQSxFQUFBLFVBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxZQUFBLFVBQ0EsS0FBQSxlQUNBLEtBQUEsZ0JBMEJBLE1BdkJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLGVBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsT0FBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsMkJBQ0EsZUFBQSxFQUFBLE9BQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxnQkFDQSxLQUFBLG9CQUNBLENBQ0EsR0FBQSxLQUNBLEdBQUEsU0FBQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEtBQUEsS0FBQSxLQUFBLGlCQUFBLEtBS0EsMkJDckRBLEVBQUEsUUFBQSxXQVFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLEtBQUEsWUFBQSxFQUNBLEtBQUEsVUFBQSxFQUVBLEtBQUEsVUFEQSxLQUFBLFVBQ0EsRUFFQSxLQUFBLGVBRUEsS0FBQSxTQUFBLEVBQ0EsS0FBQSxzQkFqQkEsR0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxzQkFDQSxFQUFBLEVBQUEsb0JBMkxBLE9BM0tBLEdBQUEsVUFBQSxvQkFBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLElBQUEsS0FBQSxlQUFBLE9BQUEsOENBQ0EsS0FBQSxJQUFBLEtBQUEsZ0NBQUEsS0FBQSxLQUFBLEtBQUEsVUFDQSxJQUFBLEtBQ0EsR0FBQSxJQUFBLEtBQUEsU0FBQSxLQUNBLEVBQUEsS0FBQSxLQUFBLFNBQUEsS0FDQSxFQUFBLE9BQUEsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLEdBQ0EsS0FBQSxpQkFDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxpQkFHQSxFQUFBLFVBQUEsY0FBQSxXQUNBLE9BREEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsYUFDQSxJQUFBLFVBQ0EsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLFNBQ0EsS0FBQSxRQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGlCQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGdCQUNBLEtBQUEsUUFBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsS0FBQSxTQUFBLGlCQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGFBQ0EsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLFFBQUEsS0FBQSxXQUNBLEtBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxpQkFDQSxLQUFBLEdBQUEsS0FBQSxRQUFBLGdCQUFBLEtBQUEsb0JBQUEsS0FBQSxTQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGlCQUNBLEtBQUEsUUFBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsS0FBQSxHQUFBLEtBQUEsUUFBQSxnQkFBQSxLQUFBLG9CQUFBLEtBQUEsT0FDQSxLQUFBLFNBQUEsZ0JBRUEsTUFDQSxLQUFBLFNBRUEsS0FBQSxRQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxRQUFBLEtBQUEsV0FDQSxLQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsZ0JBQ0EsS0FBQSxHQUFBLEtBQUEsUUFBQSxnQkFBQSxLQUFBLG9CQUFBLEtBQUEsU0FFQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxnQkFDQSxLQUFBLFFBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxXQUNBLEtBQUEsR0FBQSxLQUFBLFFBQUEsZ0JBQUEsS0FBQSxvQkFBQSxLQUFBLE9BQ0EsS0FBQSxTQUFBLGlCQUVBLEtBQUEsWUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsY0FLQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxHQUFBLFlBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxXQUFBLEdBR0EsRUFBQSxVQUFBLG9CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsZ0NBQ0EsSUFBQSxLQUNBLEdBQUEsUUFBQSxFQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsWUFDQSxLQUFBLEtBQUEsS0FBQSxnQkFBQSxHQUNBLEtBQUEsU0FBQSxpQkFHQSxFQUFBLFVBQUEsb0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxJQUFBLEtBQ0EsR0FBQSxRQUFBLEVBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEtBQUEsS0FBQSxLQUFBLGdCQUFBLEdBQ0EsS0FBQSxTQUFBLGlCQUdBLEVBQUEsVUFBQSxpQkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDhCQUNBLEVBQUEsT0FBQSxLQUFBLEtBQUEsWUFDQSxLQUFBLFdBQUEsRUFDQSxLQUFBLFlBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxRQUNBLEtBQUEsV0FBQSxFQUFBLEVBQUEsUUFBQSxJQUFBLE9BQ0EsS0FBQSxrQkFBQSxLQUFBLGlCQUFBLEtBQUEsTUFDQSxLQUFBLGdCQUFBLEtBQUEsZUFBQSxLQUFBLE1BQ0EsS0FBQSxRQUFBLEVBQUEsUUFDQSxLQUFBLFFBQUEsRUFBQSxVQUNBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxTQUFBLEdBQ0EsU0FBQSxLQUFBLGlCQUFBLFlBQUEsS0FBQSxtQkFDQSxTQUFBLEtBQUEsaUJBQUEsVUFBQSxLQUFBLG1CQUlBLEVBQUEsVUFBQSxlQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsV0FDQSxLQUFBLEdBQUEsS0FBQSxTQUFBLGVBQUEsS0FBQSxtQkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsU0FBQSxpQkFBQSxLQUFBLHFCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsbUJBQUEsV0FBQSxRQUFBLElBQUEsZ0NBQ0EsS0FBQSxRQUFBLEtBQUEsS0FBQSxJQUFBLEtBQUEsWUFHQSxFQUFBLFVBQUEscUJBQUEsU0FBQSxHQUNBLE9BREEsUUFBQSxJQUFBLGtDQUNBLEVBQUEsVUFDQSxJQUFBLFNBQUEsUUFBQSxJQUFBLFVBQ0EsS0FBQSxTQUFBLGdCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxXQUFBLFFBQ0EsSUFBQSxLQUNBLEdBQUEsVUFBQSxLQUFBLFVBQ0EsRUFBQSxZQUFBLEtBQUEsWUFDQSxLQUFBLEtBQUEsS0FBQSxpQkFBQSxHQUNBLFFBQUEsSUFBQSxFQUNBLE1BQ0EsS0FBQSxPQUNBLEtBQUEsUUFBQSxVQUNBLEtBQUEsU0FBQSxnQkFDQSxLQUFBLFFBQUEsV0FBQSxJQUNBLEtBQ0EsRUFBQSxZQUFBLEtBQUEsWUFDQSxFQUFBLFVBQUEsS0FBQSxVQUNBLEVBQUEsUUFBQSxLQUFBLFFBQUEsSUFDQSxLQUFBLEtBQUEsS0FBQSxlQUFBLEdBRUEsTUFDQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLFVBQ0EsS0FBQSxTQUFBLGtCQUtBLEVBQUEsVUFBQSxpQkFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsOEJBQ0EsS0FBQSxhQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLEVBQUEsUUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLE9BQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxXQUlBLEVBQUEsVUFBQSxlQUFBLFNBQUEsR0FLQSxHQUxBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLFdBQUEsRUFDQSxTQUFBLEtBQUEsb0JBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxvQkFBQSxVQUFBLEtBQUEsaUJBRUEsS0FBQSxhQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsUUFBQSxLQUFBLGNBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxRQUFBLENBQ0EsR0FBQSxLQUNBLEdBQUEsUUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsS0FBQSxZQUNBLEVBQUEsVUFBQSxLQUFBLFVBQ0EsS0FBQSxLQUFBLEtBQUEsbUJBQUEsS0FJQSxFQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsa0JBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUNBLEdBQUEsTUFDQSxFQUFBLENBQ0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBR0EsT0FEQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLElBQ0EsT0FBQSxPQUFBLEVBQUEsSUFBQSxHQUVBLE1BQUEsS0FJQSwrR0NqTUEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLCtCQUNBLEtBQUEsSUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLDRCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFdBQ0EsUUFBQSxVQUFBLEtBQUEsWUFDQSxRQUFBLFNBQUEsS0FBQSxVQUNBLFFBQUEsU0FBQSxLQUFBLFVBR0EsWUFBQSxlQUFBLFNBQUEsV0FDQSxHQUFBLEdBQUEsV0FBQSxpQkFBQSxLQUFBLFNBQ0EsRUFBQSxXQUFBLGlCQUFBLEtBQUEsS0FFQSxPQUFBLElBQUEsWUFBQSxXQUNBLFVBQUEsRUFBQSxJQUFBLEVBQUEsVUFJQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLGVBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxnQkFDQSxLQUFBLGNBdUJBLE1BcEJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsOEJBQ0EsSUFBQSxJQUNBLElBQUEsRUFDQSxLQUFBLEVBRUEsTUFBQSxJQUFBLEtBQUEsbUJBQUEsSUFBQSxJQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLCtCQUNBLEtBQUEsSUFBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsZ0NBQ0EsS0FBQSxLQUFBLEtBQUEseUJBQUEsRUFBQSxPQUFBLEtBR0EsMkJDakRBLEVBQUEsUUFBQSxXQUtBLFFBQUEsR0FBQSxFQUFBLEdBSUEsR0FKQSxRQUFBLElBQUEsMEJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxLQUFBLEVBQ0EsS0FBQSxnQkFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsMEJBQUEsTUFDQSxHQUFBLGNBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxhQUFBLEdBQUEsUUFBQSxLQUFBLFNBQUEsS0FBQSxPQUNBLEVBQUEsS0FBQSxhQUFBLEdBQUEsUUFBQSxLQUFBLFNBQUEsS0FBQSxPQUNBLEVBQUEsS0FBQSxjQUFBLEdBQUEsUUFBQSxLQUFBLFVBQUEsS0FBQSxPQUdBLEtBQUEsR0FBQSxLQUFBLGdCQUFBLGVBQUEsS0FBQSxlQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxnQkFBQSxrQkFBQSxLQUFBLGVBQUEsS0FBQSxPQUNBLEtBQUEsZ0JBQUEsZUFsQkEsR0FBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLG9CQTJFQSxPQXhEQSxHQUFBLFVBQUEsZUFBQSxTQUFBLEdBS0EsSUFMQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxhQUNBLEVBQUEsa0JBQUEsU0FDQSxLQUFBLFVBQUEsS0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEtBQUEsVUFBQSxHQUFBLE9BQUEsSUFDQSxLQUFBLGdCQUFBLEdBQUEsR0FBQSxLQUFBLFVBQUEsR0FBQSxHQUFBLEtBQUEsTUFDQSxLQUFBLEdBQUEsS0FBQSxnQkFBQSxvQkFBQSxLQUFBLGlCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxnQkFBQSxrQkFBQSxLQUFBLGVBQUEsS0FBQSxRQUlBLEVBQUEsVUFBQSxlQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxLQUFBLEtBQUEsaUJBQUEsR0FDQSxRQUFBLElBQUEsR0FDQSxFQUFBLGNBQUEsS0FBQSxJQUNBLEdBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxLQUFBLE1BQ0EsS0FBQSxLQUFBLEtBQUEsaUJBQUEsSUFHQSxFQUFBLFVBQUEsU0FBQSxXQUFBLFFBQUEsSUFBQSx1QkFDQSxRQUFBLElBQUEsS0FBQSxNQUNBLEtBQUEsTUFDQSxLQUFBLGdCQUFBLGNBQUEsV0FBQSxLQUFBLE9BSUEsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxnQkFBQSxZQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLFVBSUEsRUFBQSxVQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLGdCQUFBLFlBQUEsS0FBQSxNQUNBLFFBQUEsSUFBQSxLQUFBLE1BQ0EsS0FBQSxjQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsY0FBQSxZQUFBLGFBR0EsRUFBQSxVQUFBLFVBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLGdCQUFBLGVBQ0EsS0FBQSxjQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsYUFBQSxZQUFBLGFBR0EsRUFBQSxVQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLEtBQUEsRUFBQSxHQUNBLEtBQUEsZ0JBQUEsZ0JBSUEsRUFBQSxVQUFBLGNBQUEsU0FBQSxHQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxPQUFBLFVBQUEsSUFBQSxTQUFBLGFBR0EsZ0ZDOUVBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsTUFBQSxFQUNBLEtBQUEsUUFBQSxFQUFBLEdBQ0EsS0FBQSxPQUFBLEVBQ0EsS0FBQSxvQkFBQSxHQU5BLEVBQUEsUUF3Q0EsT0EvQkEsR0FBQSxVQUFBLG9CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsd0NBQ0EsSUFBQSxHQUFBLEVBQUEsMkJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxVQUNBLEVBQUEsY0FBQSxFQUFBLGFBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLGNBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxZQUFBLEVBQUEsRUFBQSxHQUFBLEtBR0EsRUFBQSxVQUFBLFlBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxpQ0FDQSxFQUFBLFNBQUEsS0FBQSxTQUNBLEVBQUEsSUFBQSxFQUFBLEdBQUEsY0FBQSxZQUFBLFVBQ0EsRUFBQSxJQUFBLEVBQUEsR0FBQSxjQUFBLEdBQUEsUUFBQSxLQUFBLGNBQUEsS0FBQSxRQUVBLEVBQUEsSUFBQSxFQUFBLEdBQUEsWUFBQSxHQUFBLFFBQUEsS0FBQSxZQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSxtQ0FDQSxLQUFBLEtBQUEsS0FBQSxvQkFBQSxLQUFBLFVBR0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxLQUFBLEtBQUEsa0JBQUEsS0FBQSxRQUtBLG9DQ3pDQSxFQUFBLFFBQUEsV0FDQSxRQUFBLEtBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxpRUFpREEsTUE5Q0EsR0FBQSxVQUFBLGFBQUEsV0FDQSxNQURBLFNBQUEsSUFBQSxrQ0FDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLFVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLG9CQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsZ0JBQUEsS0FDQSxLQUFBLFNBSUEsRUFBQSxVQUFBLFlBQUEsU0FBQSxHQUNBLE1BREEsU0FBQSxJQUFBLGlDQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsVUFBQSxFQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLEtBQUEsS0FBQSxLQUFBLGdCQUFBLEtBQ0EsS0FBQSxTQUlBLEVBQUEsVUFBQSxZQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsaUNBQ0EsRUFBQSxNQUNBLEtBQUEsTUFDQSxJQUFBLEtBQUEsSUFBQSxpQkFBQSxFQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxhQUFBLE9BS0EsRUFBQSxVQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLGNBQUEsRUFBQSxJQUFBLEVBQ0EsTUFBQSxRQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLG9CQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsbUJBQUEsS0FDQSxLQUFBLFNBSUEsNEJDbkRBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLHFCQUNBLElBQUEsRUFBQSxNQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEseUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLEdBQUEsa0JBQ0EsWUFBQSxlQUFBLGNBQUEsV0FDQSxNQUFBLElBQUEsWUFBQSxXQUNBLGFBQUEsRUFBQSxNQUFBLG1EQUdBLElBQUEsR0FBQSxFQUFBLEVBQ0EsTUFBQSxJQUFBLEtBQUEscUJBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxtQkFDQSxFQUFBLHNCQUFBLElBQUEsS0FZQSxNQVJBLEdBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSxrQ0FDQSxLQUFBLFlBQUEsU0FBQSxpQkFBQSxlQUNBLEtBQUEsWUFBQSxLQUFBLFlBQUEsT0FBQSxHQUFBLGlCQUFBLFFBQUEsS0FBQSxtQkFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLG1CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsb0NBQ0EsS0FBQSxLQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsS0FFQSw0QkM3QkEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx5QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFFBQ0EsS0FBQSxZQUFBLEdBQUEsR0FHQSxLQUFBLFNBQUEsRUFDQSxLQUFBLE1BQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxtQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsS0FHQSxFQUFBLEVBQUEsRUFDQSxHQUFBLFlBQUEsT0FBQSxFQUFBLEdBR0EsSUFBQSxHQUFBLEVBQUEsc0JBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLEtBR0EsRUFBQSxFQUFBLEVBQ0EsR0FBQSxZQUFBLE9BQUEsRUFBQSxJQUVBLEtBQUEsSUFBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxLQUFBLFNBQUEsS0FBQSxPQUNBLEVBQUEsYUFBQSxHQUFBLFFBQUEsS0FBQSxRQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsS0FBQSxVQUFBLEdBQUEsUUFBQSxLQUFBLE1BQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFlBQUEsYUFBQSxLQUFBLFNBQUEsS0FBQSxPQTlCQSxHQUFBLEdBQUEsRUFBQSxnQkF3RkEsT0F2REEsR0FBQSxVQUFBLFNBQUEsV0FBQSxRQUFBLElBQUEsc0JBQ0EsRUFBQSxhQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLFNBQUEsS0FBQSxJQUFBLEtBQUEsa0JBQUEsTUFDQSxLQUFBLE1BQUEsS0FBQSxJQUFBLEtBQUEsbUJBQUEsTUFDQSxLQUFBLFNBQUEsS0FBQSxJQUFBLEtBQUEsc0JBQUEsTUFDQSxLQUFBLFdBQUEsS0FBQSxJQUFBLEtBQUEsd0JBQUEsTUFFQSxLQUFBLFVBQUEsS0FBQSxZQUVBLEtBQUEsWUFBQSxTQUFBLEtBQUEsU0FBQSxLQUFBLE1BQUEsS0FBQSxXQUlBLEVBQUEsVUFBQSxNQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxNQUNBLEtBQUEsU0FBQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxNQUNBLEtBQUEsWUFBQSxNQUFBLEtBQUEsTUFBQSxLQUFBLFdBR0EsRUFBQSxVQUFBLE9BQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxRQUNBLEtBQUEsZ0JBQ0EsRUFBQSxvQkFBQSxZQUFBLFVBQ0EsRUFBQSxXQUFBLFNBRUEsS0FBQSxLQUFBLEtBQUEsVUFBQSxLQUFBLE9BR0EsRUFBQSxVQUFBLFNBQUEsU0FBQSxHQUVBLEdBRkEsUUFBQSxJQUFBLHNCQUNBLEtBQUEsTUFBQSxHQUNBLEtBQUEsS0FBQSxHQUFBLENBQ0EsRUFBQSxTQUFBLElBQUEsSUFDQSxFQUFBLG9CQUFBLFNBQUEsVUFDQSxFQUFBLGFBQUEsU0FBQSxVQUNBLEtBQUEsZ0JBQ0EsS0FBQSxLQUFBLEtBQUEsVUFBQSxLQUFBLEtBR0EsSUFBQSxHQUFBLEVBQUEsdUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxTQUFBLEtBQUEsS0FBQSxHQUFBLFdBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLFlBQUEsT0FBQSxFQUFBLElBQ0EsRUFBQSxXQUFBLEdBQUEsUUFBQSxLQUFBLE9BQUEsS0FBQSxTQUlBLEVBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDJCQUNBLEVBQUEsVUFBQSxZQUFBLFdBR0EsOENDekZBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxzQkFDQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLGFBQ0EsSUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxrQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsR0FBQSxVQUNBLFlBQUEsZUFBQSxNQUFBLFdBQ0EsTUFBQSxJQUFBLFlBQUEsV0FDQSxPQUFBLEVBQUEsTUFBQSxrREFHQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLGFBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxtQkFDQSxFQUFBLElBQUEsS0FjQSxNQVZBLEdBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSwyQkFDQSxLQUFBLFlBQUEsU0FBQSxpQkFBQSxjQUNBLFFBQUEsSUFBQSxLQUFBLGFBQ0EsS0FBQSxZQUFBLEtBQUEsWUFBQSxPQUFBLEdBQUEsaUJBQUEsUUFBQSxLQUFBLG1CQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLEtBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxLQUdBLDRCQy9CQSxFQUFBLFFBQUEsV0FDQSxRQUFBLEtBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxpRUEwQkEsTUF2QkEsR0FBQSxVQUFBLE1BQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHVCQUNBLEVBQUEsTUFDQSxLQUFBLE9BQ0EsTUFBQSxRQUFBLFdBQ0EsSUFBQSxLQUFBLElBQUEsZUFBQSxFQUFBLElBQUEsRUFDQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsY0FBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLGNBQUEsS0FDQSxLQUFBLFNBSUEsRUFBQSxVQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMEJBQ0EsRUFBQSxNQUNBLEtBQUEsT0FDQSxNQUFBLFFBQUEsV0FDQSxJQUFBLEtBQUEsSUFBQSxrQkFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLG9CQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsY0FBQSxLQUNBLEtBQUEsU0FHQSw0QkM1QkEsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLE1BQUEsRUFDQSxLQUFBLFVBQUEsRUFDQSxLQUFBLG1CQUNBLEtBQUEsd0JBUEEsR0FBQSxHQUFBLEVBQUEsdUJBb0NBLE9BMUJBLEdBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLE1BQUEsS0FBQSxJQUFBLE9BQUEsK0JBQ0EsS0FBQSxlQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsU0FBQSxHQUNBLEtBQUEsTUFBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFJQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLElBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLFNBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLElBQUEsU0FBQSxJQUNBLElBQ0EsR0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQ0EsZUFBQSxFQUFBLE9BQUEsSUFDQSxLQUFBLEtBQUEsS0FBQSxxQkFBQSxJQUlBLEVBQUEsVUFBQSxzQkFBQSxXQUFBLFFBQUEsSUFBQSxzQ0FDQSxLQUFBLG1CQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxNQUFBLEtBQUEsWUFHQSxxREN0Q0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUlBLEdBSkEsUUFBQSxJQUFBLG9DQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsTUFBQSxFQUVBLEtBQUEsTUFDQSxHQUFBLEdBQUEsRUFBQSxzQkFBQSxXQUdBLElBQUEsR0FBQSxFQUFBLGtCQUFBLE1BRUEsSUFBQSxHQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLGNBQUEsRUFBQSxjQUNBLEVBQUEsUUFBQSxTQUNBLElBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxjQUFBLE9BQUEsRUFBQSxJQUNBLEtBQUEsY0FwQkEsR0FBQSxHQUFBLEVBQUEsaUJBQ0EsRUFBQSxFQUFBLFNBNERBLE9BdENBLEdBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLG9DQUNBLEtBQUEsSUFBQSxLQUFBLGdCQUFBLEdBQUEsUUFBQSxLQUFBLG9CQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsS0FBQSxvQkFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsbUJBQUEsR0FBQSxRQUFBLEtBQUEsa0JBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxLQUFBLFdBQUEsR0FBQSxRQUFBLEtBQUEsVUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEsc0NBQ0EsS0FBQSxJQUFBLEtBQUEsU0FBQSxZQUFBLFVBQ0EsS0FBQSxJQUFBLEtBQUEsU0FBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLGtCQUFBLFdBQUEsUUFBQSxJQUFBLDBDQUNBLEtBQUEsWUFBQSxHQUFBLEdBQUEsS0FBQSxLQUNBLEtBQUEsR0FBQSxLQUFBLFlBQUEsU0FBQSxLQUFBLGtCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsVUFBQSxXQUFBLFFBQUEsSUFBQSxrQ0FDQSxLQUFBLElBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLEdBQUEsS0FBQSxJQUFBLFNBQUEsS0FBQSxVQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsb0JBQUEsV0FBQSxRQUFBLElBQUEsNENBQ0EsS0FBQSxJQUFBLEtBQUEsaUJBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLGdCQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsa0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx5Q0FDQSxJQUFBLEdBQUEsU0FBQSxjQUFBLG9CQUNBLEdBQUEsWUFBQSxJQUlBLEVBQUEsVUFBQSxVQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEseUNBQ0EsSUFBQSxHQUFBLFNBQUEsY0FBQSxZQUNBLEdBQUEsWUFBQSxJQUdBLDBEQzlEQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFNBQUEsRUFDQSxFQUFBLEtBQ0EsSUFDQSxLQUFBLE9BQUEsR0FSQSxHQUNBLEdBREEsRUFBQSxFQUFBLGVBaUVBLE9BckRBLEdBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHVCQUNBLElBQUEsR0FBQSxFQUFBLG9CQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUVBLEdBQUEsT0FEQSxLQUFBLE9BQ0EsVUFBQSxLQUFBLE9BQUEsT0FFQSxFQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBR0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsSUFBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLHFCQUVBLElBQUEsSUFBQSxDQUFBLFFBQUEsSUFBQSxjQUNBLElBQUEsR0FBQSxJQUFBLGdCQUFBLEVBQ0EsR0FBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLFVBQUEsRUFFQSxHQUFBLEdBQUEsR0FBQSxXQUNBLEdBQUEsT0FBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLFVBQ0EsRUFBQSxRQUFBLEVBQUEsT0FBQSxTQUVBLEVBQUEsY0FBQSxJQUdBLEVBQUEsVUFBQSxLQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxpQkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFVBQUEsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLElBQ0EsS0FBQSxXQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxrQkFDQSxLQUFBLFdBQUEsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLE1BQUEsRUFDQSxHQUFBLGlCQUFBLEdBQ0EsRUFBQSxTQUFBLEtBSUEsRUFBQSxVQUFBLFFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLFdBQUEsSUFBQSxRQUFBLElBQUEsS0FBQSxTQUNBLEtBQUEsT0FBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxpQkFBQSxNQUNBLEtBQUEsS0FBQSxLQUFBLGdCQUFBLEdBQ0EsS0FBQSxTQUFBLEdBRUEsS0FBQSxXQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLFVBR0EsNkNDbEVBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxJQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FBQSxHQUdBLE1BQUEsNkJDWEEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLHlCQUNBLEVBQUEsS0FDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLE9BQUEsRUFDQSxLQUFBLFNBQ0EsS0FBQSxPQUFBLElBR0EsT0FBQSxNQUNBLE9BQUEsWUFDQSxPQUFBLFVBQ0EsT0FBQSxNQUVBLFFBQUEsSUFBQSxxQkFmQSxHQUNBLEdBREEsRUFBQSxFQUFBLGdCQWtFQSxPQS9DQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSx5QkFDQSxJQUFBLEdBQUEsRUFBQSxxQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxJQUFBLEtBQUEsT0FBQSxDQUNBLEVBQUEsT0FBQSxXQUFBLEtBQUEsT0FBQSxNQUNBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLEtBSUEsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGtCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsT0FBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxPQUFBLEdBQ0EsS0FBQSxVQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxvQkFDQSxLQUFBLFVBQUEsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLE1BQUEsRUFDQSxHQUFBLFlBQUEsR0FDQSxFQUFBLFNBQUEsS0FJQSxFQUFBLFVBQUEsWUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHdCQUNBLElBQUEsR0FBQSxHQUFBLFdBQ0EsR0FBQSxPQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFVBQUEsNEJBQ0EsR0FBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLFFBQ0EsRUFBQSxRQUFBLEVBQUEsT0FBQSxTQUVBLEVBQUEsY0FBQSxJQUdBLEVBQUEsVUFBQSxRQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxPQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLE1BQ0EsS0FBQSxXQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsZ0JBQUEsR0FDQSxFQUFBLFNBQUEsR0FFQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEscUJBQUEsVUFHQSw4Q0NuRUEsRUFBQSxRQUFBLFdBRUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsNkJBQ0EsS0FBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsMEJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsR0FHQSxNQUFBLDZCQ1pBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLE1BQ0EsS0FBQSxJQUFBLGlCQU5BLEdBQUEsR0FBQSxFQUFBLGVBcUNBLE9BM0JBLEdBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHdCQUNBLElBQUEsR0FBQSxFQUFBLG9CQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUNBLEdBQUEsSUFBQSxLQUFBLEdBQ0EsSUFBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBQUEsSUFHQSxFQUFBLFVBQUEsS0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsaUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxVQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLGtCQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsS0FBQSxPQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxpQkFBQSxNQUNBLEtBQUEsV0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxTQUFBLFVBQUEsS0FBQSxLQUFBLEtBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsbUJBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsVUFBQSxrQkFBQSxZQUFBLFdBR0EsNkNDdkNBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQTtHQUFBLEdBQUEsRUFBQSx5QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsRUFBQSxFQUVBLE9BQUEsR0FBQSxHQUlBLE1BQUEiLCJmaWxlIjoic2NyaXB0LmRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbigpe1xuXHR2YXIgUHJvZmlsZSA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9Qcm9maWxlJyk7XG5cdHZhciBBcHAgPSByZXF1aXJlKCcuL2NsYXNzZXMvQXBwJyk7XG5cdHZhciBPdmVydmlldyA9IHJlcXVpcmUoJy4vY2xhc3Nlcy9PdmVydmlldycpO1xuXHR0aGlzLnVzZXIgPSBbXTtcblxuXHRmdW5jdGlvbiBpbml0KCnCoHtcblx0XHR0aGlzLm92ZXJ2aWV3ID0gbmV3IE92ZXJ2aWV3KCQoJyNjb250YWluZXInKSwgdGhpcy51c2VyKTtcblx0XHR0aGlzLnByb2ZpbGUgPSBuZXcgUHJvZmlsZSgkKCcjcHJvZmlsZScpKTtcdFx0XG5cdFx0YmVhbi5vbih0aGlzLnByb2ZpbGUgLCAncmVmcmVzaCcsIHdpbmRvd1JlZnJlc2guYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLm92ZXJ2aWV3LCAnbGVhay1ib2FyZERhdGEnLCBzdG9yZUJvYXJkSW5mby5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHN0b3JlQm9hcmRJbmZvKGJvYXJkSW5mbyl7IGNvbnNvbGUubG9nKCdbU2NyaXB0XSBzdG9yZUJvYXJkSW5mbycpO1xuXHRcdHRoaXMuYm9hcmRJbmZvID0gYm9hcmRJbmZvO1xuXHR9XG5cblx0ZnVuY3Rpb24gd2luZG93UmVmcmVzaCh1c2VyKXsgY29uc29sZS5sb2coJ1tTY3JpcHRdIHdpbmRvd1JlZnJlc2gnKTtcblx0XHQkKFwiI2NvbnRhaW5lclwiKS5odG1sKFwiXCIpO1xuXHRcdGlmKHR5cGVvZiB0aGlzLmJvYXJkSW5mbyAhPT0gXCJ1bmRlZmluZWRcIil7XG5cdFx0XHR0aGlzLmFwcCA9IG5ldyBBcHAoJCgnI2NvbnRhaW5lcicpLCB0aGlzLmJvYXJkSW5mbyAsIHVzZXIpO1xuXHRcdH1cblx0XHRpZih0eXBlb2YgdXNlciAhPT0gXCJ1bmRlZmluZWRcIil7XG5cdFx0XHR0aGlzLm92ZXJ2aWV3ID0gbmV3IE92ZXJ2aWV3KCQoJyNjb250YWluZXInKSwgdXNlci5pZCk7XG5cdFx0fWVsc2V7XG5cdFx0XHR0aGlzLm92ZXJ2aWV3ID0gbmV3IE92ZXJ2aWV3KCQoJyNjb250YWluZXInKSk7XG5cdFx0fVxuXHR9XG5cblx0aW5pdCgpO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmQgPSByZXF1aXJlKCcuL1doaXRlYm9hcmQnKTtcblx0dmFyIEVsZW1lbnRQaWNrZXIgPSByZXF1aXJlKCcuL0VsZW1lbnRQaWNrZXInKTtcblx0dmFyIEVsZW1lbnQgPSByZXF1aXJlKCcuL0VsZW1lbnQnKTtcblx0dmFyIERhdGFIYW5kbGVyID0gcmVxdWlyZSgnLi9EYXRhSGFuZGxlcicpO1xuXG5cblx0ZnVuY3Rpb24gQXBwKCRlbCwgYm9hcmRJbmZvLCB1c2VySWQpIHsgY29uc29sZS5sb2coJ1tBcHBdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy53aGl0ZWJvYXJkSWQgPSBib2FyZEluZm8uaWQ7XG5cdFx0dGhpcy51c2VySWQgPSB1c2VySWQ7XG5cdFx0dGhpcy5hZG1pbiA9IEJvb2xlYW4oYm9hcmRJbmZvLmNyZWF0b3IgPT09IHRoaXMudXNlcklkKTtcblx0XHR0aGlzLmJvYXJkSW5mbyA9IGJvYXJkSW5mbztcblx0XHR0aGlzLnR5cGVzID0gWydwb3N0aXRzJywgJ3N0YXRpY3MnLCAnbW90aW9uJ107XG5cdFx0dGhpcy5pID0gMDtcblx0XHR0aGlzLmVsZW1lbnRMaXN0ID0gW107XG5cblx0XHR0aGlzLnBvc2l0aW9uID0ge307XG5cdFx0dGhpcy5kYXRhSGFuZGxlciA9IG5ldyBEYXRhSGFuZGxlcigpO1xuXHRcdHRoaXMud2hpdGVib2FyZCA9IG5ldyBXaGl0ZWJvYXJkKHRoaXMuJGVsLCB0aGlzLmJvYXJkSW5mbywgdGhpcy5hZG1pbik7XG5cdFx0dGhpcy5lbGVtZW50UGlja2VyID0gbmV3IEVsZW1lbnRQaWNrZXIodGhpcy4kZWwpO1xuXHRcdC8vTFVJU1RFUkVOXG5cdFx0YmVhbi5vbih0aGlzLmRhdGFIYW5kbGVyLCBcImRhdGEtc3VjY2Vzc1wiLCB0aGlzLmFkZFRvRWxlbWVudExpc3QuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLndoaXRlYm9hcmQsIFwid2hpdGVib2FyZC1jbGlja2VkXCIsIHRoaXMud2hpdGVib2FyZENsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24odGhpcy5lbGVtZW50UGlja2VyLCBcImVsZW1lbnQtcGlja2VyLWNsaWNrZWRcIiwgdGhpcy5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmNsb3NlLWJ1dHRvbicpLm9uKCdjbGljaycsIHRoaXMuY2xvc2VQcm9qZWN0LmJpbmQodGhpcykpO1xuXHRcdC8vVUlUVk9FUkVOXG5cdFx0dGhpcy5idWlsZEJvYXJkKCk7XG5cdH1cblxuXG5cdEFwcC5wcm90b3R5cGUuY2xvc2VQcm9qZWN0ID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gY2xvc2VQcm9qZWN0Jyk7XG5cdFx0XHQkKFwiI2NvbnRhaW5lclwiKS5odG1sKFwiXCIpO1xuXHRcdFx0dmFyIE92ZXJ2aWV3ID0gcmVxdWlyZSgnLi9PdmVydmlldycpO1xuXHRcdFx0bmV3IE92ZXJ2aWV3KCQoJyNjb250YWluZXInKSwgdGhpcy51c2VySWQpO1xuXHR9O1xuXG5cblx0QXBwLnByb3RvdHlwZS53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSB3aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci5zZXRMb2NhdGlvbihldmVudC54UG9zLCBldmVudC55UG9zKTtcblx0XHR0aGlzLnBvc2l0aW9uID0gZXZlbnQ7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBlbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXInKTsgXG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnRvZ2dsZVZpc2libGUoKTtcblx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLGV2ZW50LHRoaXMucG9zaXRpb24pO1xuXHRcdHRoaXMubmV3RWxlbWVudChldmVudCwgZWxlbWVudC5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24oZWxlbWVudCwgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIHRoaXMucG9zaXRpb25DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKGVsZW1lbnQsIFwiaW1hZ2UtY2hhbmdlZFwiLCB0aGlzLmltYWdlQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbihlbGVtZW50LCBcInZpZGVvLWNoYW5nZWRcIiwgdGhpcy52aWRlb0NoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdGJlYW4ub24oZWxlbWVudCwgXCJyZW1vdmUtY2xpY2tlZFwiLCB0aGlzLnJlbW92ZUhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbihlbGVtZW50LCBcImVkaXQtY2xpY2tlZFwiLCB0aGlzLmVkaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYnVpbGRCb2FyZCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbQXBwXSBidWlsZEJvYXJkJyk7XG5cdFx0Zm9yKHZhciB0eXBlIGluIHRoaXMudHlwZXMpIHtcbiAgXHRcdFx0dGhpcy5kYXRhSGFuZGxlci5sb2FkQm9hcmRFbGVtZW50cyh0aGlzLnR5cGVzW3R5cGVdLHRoaXMud2hpdGVib2FyZElkKTtcblx0XHR9XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5hZGRUb0VsZW1lbnRMaXN0ID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gYWRkVG9FbGVtZW50TGlzdCcpO1xuXHRcdHRoaXMuYWRkVG9Cb2FyZChldmVudCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5hZGRUb0JvYXJkID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gYWRkVG9Cb2FyZCcpOyBcblx0XHR2YXIgbGlzdCA9IGV2ZW50O1xuXHRcdGZvcih2YXIgZWxlbWVudEl0ZW0gaW4gbGlzdCkge1xuXHRcdFx0Y29uc29sZS5sb2cobGlzdFtlbGVtZW50SXRlbV0pO1xuICBcdFx0XHR2YXIgdHlwZSA9IGxpc3RbZWxlbWVudEl0ZW1dLmVsX3R5cGU7XG4gIFx0XHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICBcdFx0XHRwb3NpdGlvbi55UG9zID0gTnVtYmVyKGxpc3RbZWxlbWVudEl0ZW1dLnBvc3kpO1xuICBcdFx0XHRwb3NpdGlvbi54UG9zID0gTnVtYmVyKGxpc3RbZWxlbWVudEl0ZW1dLnBvc3gpO1xuICBcdFx0XHR2YXIgZWxlbWVudElkID0gbGlzdFtlbGVtZW50SXRlbV0uaWRfb25fYm9hcmQ7XG4gIFx0XHRcdHZhciBpZCA9IGxpc3RbZWxlbWVudEl0ZW1dLmlkO1xuICBcdFx0XHR2YXIgY29udGVudCA9IGxpc3RbZWxlbWVudEl0ZW1dLmNvbnRlbnQ7XG4gIFx0XHRcdHZhciBlbGVtZW50ID0gbmV3IEVsZW1lbnQodGhpcy4kZWwsdHlwZSxwb3NpdGlvbixlbGVtZW50SWQsY29udGVudCwgaWQpO1xuICBcdFx0XHRpZih0aGlzLmFkbWluID09PSB0cnVlKXtcbiAgXHRcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicmVtb3ZlLWNsaWNrZWRcIiwgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICBcdFx0XHRcdGJlYW4ub24oZWxlbWVudCwgXCJlZGl0LWNsaWNrZWRcIiwgdGhpcy5lZGl0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgXHRcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicG9zaXRpb24tY2hhbmdlZFwiLCB0aGlzLnBvc2l0aW9uQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIFx0XHRcdFx0YmVhbi5vbihlbGVtZW50LCBcImltYWdlLWNoYW5nZWRcIiwgdGhpcy5pbWFnZUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuICBcdFx0XHRcdGJlYW4ub24oZWxlbWVudCwgXCJ2aWRlby1jaGFuZ2VkXCIsIHRoaXMudmlkZW9DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRBcHAucHJvdG90eXBlLnZpZGVvQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSB2aWRlb0NoYW5nZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5kYXRhSGFuZGxlci5lZGl0Q29udGVudChldmVudC5lbGVtZW50VHlwZSxldmVudC5lbGVtZW50SWQsZXZlbnQuY29udGVudCx0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5pbWFnZUNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gaW1hZ2VDaGFuZ2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZGF0YUhhbmRsZXIuZWRpdENvbnRlbnQoZXZlbnQuZWxlbWVudFR5cGUsZXZlbnQuZWxlbWVudElkLGV2ZW50LmNvbnRlbnQsdGhpcy53aGl0ZWJvYXJkSWQpO1xuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuZWRpdEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBlZGl0SGFuZGxlcicpO1xuXHRcdHRoaXMuZGF0YUhhbmRsZXIuZWRpdENvbnRlbnQoZXZlbnQuZWxlbWVudFR5cGUsZXZlbnQuZWxlbWVudElkLGV2ZW50LmNvbnRlbnQsdGhpcy53aGl0ZWJvYXJkSWQpO1xuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHJlbW92ZUhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5yZW1vdmVCb2FyZEVsZW1lbnQoZXZlbnQuZWxlbWVudFR5cGUsIGV2ZW50LmVsZW1lbnRJZCwgdGhpcy53aGl0ZWJvYXJkSWQpO1xuXHR9O1xuXHRcblx0QXBwLnByb3RvdHlwZS5uZXdFbGVtZW50ID0gZnVuY3Rpb24odHlwZSxpZE9uQm9hcmQpeyBjb25zb2xlLmxvZygnW0FwcF0gbmV3RWxlbWVudEhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5uZXdCb2FyZEVsZW1lbnQodHlwZSxpZE9uQm9hcmQsdGhpcy5wb3NpdGlvbix0aGlzLndoaXRlYm9hcmRJZCk7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5wb3NpdGlvbkNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gcG9zaXRpb25DaGFuZ2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZGF0YUhhbmRsZXIucG9zaXRpb25DaGFuZ2UoZXZlbnQuZWxlbWVudFR5cGUsZXZlbnQuZWxlbWVudElkLGV2ZW50LmVUYXJnZXQuY3NzKCdsZWZ0JyksZXZlbnQuZVRhcmdldC5jc3MoJ3RvcCcpLHRoaXMud2hpdGVib2FyZElkKTtcblx0fTtcblx0cmV0dXJuIEFwcDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgdGhhdDtcblx0ZnVuY3Rpb24gRGF0YUhhbmRsZXIoKSB7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy51cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODg4OC9jcDMvd2hpdGVib2FyZC93aGl0ZWJvYXJkL2FwaS9pbmRleC5waHAvXCI7XG5cdFx0dGhhdCA9IHRoaXM7XG5cdFx0dGhpcy5ib2FyZExpc3QgPSBbXTtcblx0fVxuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5nZXRCb2FyZEluZm8gPSBmdW5jdGlvbihib2FyZElkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0Qm9hcmRJbmZvJyk7XG5cdFx0cmV0dXJuICQuYWpheCh7XG5cdCAgXHRcdFx0XHR0eXBlOiBcIkdFVFwiLFxuXHQgIFx0XHRcdFx0dXJsOiB0aGlzLnVybCsnYm9hcmRzLycrYm9hcmRJZCxcblx0ICBcdFx0XHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0XHRcdGJlYW4uZmlyZSh0aGF0LCBcImJvYXJkLWluZm9cIiwgW2RhdGFdKTtcblx0ICBcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmxvYWRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24odHlwZSx3aGl0ZWJvYXJkSWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBsb2FkQm9hcmRFbGVtZW50cycpO1xuXHRcdHJldHVybiAkLmFqYXgoe1xuXHQgIFx0XHRcdFx0dHlwZTogXCJHRVRcIixcblx0ICBcdFx0XHRcdHVybDogdGhpcy51cmwrdHlwZSsnLycrU3RyaW5nKHdoaXRlYm9hcmRJZCksXG5cdCAgXHRcdFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdFx0XHRiZWFuLmZpcmUodGhhdCwgXCJkYXRhLXN1Y2Nlc3NcIiwgW2RhdGFdKTtcblx0ICBcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUJvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHdoaXRlYm9hcmRJZCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIHJlbW92ZUJvYXJkRWxlbWVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMucmVtb3ZlRWxlbWVudEJ5SWQoJ3Bvc3RpdHMnLGlkX29uX2JvYXJkLCB3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdzdGF0aWNzJyxpZF9vbl9ib2FyZCwgd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgnbW90aW9uJyxpZF9vbl9ib2FyZCwgd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUucmVtb3ZlRWxlbWVudEJ5SWQgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZF9vbl9ib2FyZCx3aGl0ZWJvYXJkX2lkKXsgXG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJQT1NUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrZWxlbWVudFR5cGUrJy9kZWxldGUvJyxcblx0ICBcdFx0ZGF0YToge2lkX29uX2JvYXJkOiBpZF9vbl9ib2FyZCwgd2hpdGVib2FyZF9pZDogd2hpdGVib2FyZF9pZH0sXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwiZGVsZXRlZCA9IFwiK2RhdGEpO1xuXHQgIFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld0JvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHBvc2l0aW9uLHdoaXRlYm9hcmRJZCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIG5ld0JvYXJkRWxlbWVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMubmV3RWxlbWVudCgncG9zdGl0cycsaWRfb25fYm9hcmQsIHBvc2l0aW9uLCB3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ3N0YXRpY3MnLGlkX29uX2JvYXJkLCBwb3NpdGlvbiwgd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6IGNvbnNvbGUubG9nKFwidHlwZSA6IFwiK2VsZW1lbnRUeXBlKTtcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ21vdGlvbicsaWRfb25fYm9hcmQsIHBvc2l0aW9uLCB3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5uZXdFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWRfb25fYm9hcmQscG9zaXRpb24sd2hpdGVib2FyZElkKXsgY29uc29sZS5sb2coXCJORVdFTEVNRU5UXCIpO1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK2VsZW1lbnRUeXBlKycvYWRkJyxcblx0ICBcdFx0ZGF0YToge2lkX29uX2JvYXJkOiBpZF9vbl9ib2FyZCwgeHBvczogcG9zaXRpb24ueFBvcywgeXBvczogcG9zaXRpb24ueVBvcywgd2hpdGVib2FyZElkOiB3aGl0ZWJvYXJkSWR9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3M6JywgZGF0YSk7XG5cdCAgXHRcdH0sXG5cdCAgXHRcdGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5wb3NpdGlvbkNoYW5nZSA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHhwb3MseXBvcyx3aGl0ZWJvYXJkSWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBuZXdCb2FyZEVsZW1lbnQnKTtcblx0XHRzd2l0Y2goZWxlbWVudFR5cGUpIHtcblx0XHQgICAgY2FzZSBcInBvc3QtaXRcIjpcblx0XHQgICAgXHR0aGlzLm5ld1Bvc2l0aW9uKCdwb3N0aXRzJyxpZF9vbl9ib2FyZCwgeHBvcywgeXBvcyx3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLm5ld1Bvc2l0aW9uKCdzdGF0aWNzJyxpZF9vbl9ib2FyZCwgeHBvcywgeXBvcyx3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJtb3Rpb25cIjpcblx0XHQgICAgXHR0aGlzLm5ld1Bvc2l0aW9uKCdtb3Rpb24nLGlkX29uX2JvYXJkLCB4cG9zLCB5cG9zLHdoaXRlYm9hcmRJZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld1Bvc2l0aW9uID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWRfb25fYm9hcmQseHBvcyx5cG9zLHdoaXRlYm9hcmRJZCl7XG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJQT1NUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrZWxlbWVudFR5cGUrJy9jaGFuZ2UvcG9zaXRpb24nLFxuXHQgIFx0XHRkYXRhOiB7d2hpdGVib2FyZF9pZDogd2hpdGVib2FyZElkLGlkX29uX2JvYXJkOiBpZF9vbl9ib2FyZCwgeHBvczogeHBvcywgeXBvczogeXBvc30sXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzczonLCBkYXRhKTtcblx0ICBcdFx0fSxcblx0ICBcdFx0ZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJyk7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHQgIFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmVkaXRDb250ZW50ID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWRfb25fYm9hcmQsY29udGVudCx3aGl0ZWJvYXJkSWQpeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBlZGl0Q29udGVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMubmV3Q29udGVudCgncG9zdGl0cycsaWRfb25fYm9hcmQsY29udGVudCx3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLm5ld0NvbnRlbnQoJ3N0YXRpY3MnLGlkX29uX2JvYXJkLGNvbnRlbnQsd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5uZXdDb250ZW50KCdtb3Rpb24nLGlkX29uX2JvYXJkLGNvbnRlbnQsd2hpdGVib2FyZElkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUubmV3Q29udGVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLGNvbnRlbnQsd2hpdGVib2FyZElkKXtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtlbGVtZW50VHlwZSsnL2NoYW5nZS9jb250ZW50Jyxcblx0ICBcdFx0ZGF0YToge3doaXRlYm9hcmRfaWQ6IHdoaXRlYm9hcmRJZCxpZF9vbl9ib2FyZDogaWRfb25fYm9hcmQsIGNvbnRlbnQ6IGNvbnRlbnR9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3M6JywgZGF0YSk7XG5cdCAgXHRcdH0sXG5cdCAgXHRcdGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0ICBcdFx0fVxuXHQgIFx0fSk7XG5cdCAgfTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUuZ2V0QWxsQm9hcmRzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0QWxsQm9hcmRzJyk7XG5cdFx0ICQuYWpheCh7XG5cdFx0ICBcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ICBcdHVybDogdGhpcy51cmwrJ2JvYXJkcy8nLFxuXHRcdCAgXHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0XHQgIFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdFx0ICBcdFx0dGhpcy5ib2FyZEVsZW1lbnRzLnB1c2goZGF0YSk7XG5cdFx0ICBcdH0uYmluZCh0aGlzKVxuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBEYXRhSGFuZGxlcjtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIEVkaXRNZW51KCRlbCxlbGVtZW50SWQpIHsgY29uc29sZS5sb2coJ1tFZGl0TWVudV0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI2VkaXQtbWVudS10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHtcblx0XHQgIGFjdGlvbnM6IFtcdFxuXHRcdCAgXHRcdFx0e2FjdGlvbklkOiBcImNhbmNlbFwiLCBuYW1lOiBcImFubnVsZWVyXCJ9LFxuXHRcdCAgXHRcdFx0e2FjdGlvbklkOiBcImVkaXRcIiwgbmFtZTogXCJ3aWp6aWdlblwifSxcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJyZW1vdmVcIiwgbmFtZTogXCJ2ZXJ3aWpkZXJlblwifVxuICBcdFx0XHRcdF1cbiAgXHRcdFx0fTtcblx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2VkaXRtZW51JywgZnVuY3Rpb24oKSB7XG5cdFx0XHQgIHZhciBhY3Rpb25JZCA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLmFjdGlvbklkKSxcblx0XHRcdCAgICAgIG5hbWUgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5uYW1lKTtcblxuXHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdCAgICBcIjxsaSBpZD1cIithY3Rpb25JZCtcIj5cIituYW1lK1wiPC9saT5cIlxuXHRcdFx0ICApO1xuXHRcdFx0fSk7XG5cdFx0XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKGh0bWwpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgPiBwJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXJzKCk7XG5cdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdH1cblxuXHRFZGl0TWVudS5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIHRvZ2dsZVZpc2libGUnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnIC5lZGl0LW1lbnUnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLmJpbmRIYW5kbGVycyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGJpbmRIYW5kbGVycycpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgPiBwJykub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyBsaScpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVkaXRNZW51LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGNsaWNrSGFuZGxlcicpO1xuXHRcdGlmKGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09IFwiZWRpdEJ1dHRvblwiKXtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcImVkaXQtY2xpY2tlZFwiKTtcblx0XHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdH1lbHNle1xuXHRcdFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG4gICBcdFx0XHRhY3Rpb25FdmVudC50YXJnZXRJZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgIFx0XHRcdGFjdGlvbkV2ZW50LmVsZW1lbnRJZCA9IHRoaXMuZWxlbWVudElkO1xuXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwiYWN0aW9uLWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdH1cblxuXHR9O1xuXG5cdHJldHVybiBFZGl0TWVudTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBFZGl0TWVudSA9IHJlcXVpcmUoJy4vRWRpdE1lbnUnKTtcbiAgICB2YXIgekluZGV4Q291bnRlciA9IDE7XG5cdHZhciBQb3N0aXQgPSByZXF1aXJlKCcuL2VsZW1lbnRzL1Bvc3RpdCcpO1xuXHR2YXIgUGljdHVyZSA9IHJlcXVpcmUoJy4vZWxlbWVudHMvUGljdHVyZScpO1xuXHR2YXIgTW90aW9uID0gcmVxdWlyZSgnLi9lbGVtZW50cy9Nb3Rpb24nKTtcblxuXHRmdW5jdGlvbiBFbGVtZW50KCRlbCxlbGVtZW50VHlwZSxwb3NpdGlvbixlbGVtZW50SWQsY29udGVudCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jb250ZW50ID0gY29udGVudDtcblx0XHR0aGlzLmVsZW1lbnRUeXBlID0gZWxlbWVudFR5cGU7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0aWYodGhpcy5lbGVtZW50SWQpe1xuXHRcdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0fWVsc2Uge1xuXHRcdFx0dGhpcy5lbGVtZW50SWQgPSB0aGlzLnNldEVsZW1lbnRJZCgpO1xuXHRcdH1cblx0XHR0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG5cdFx0dGhpcy5jcmVhdGVFbGVtZW50SG9sZGVyKCk7XG5cdH1cblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50SG9sZGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFbGVtZW50SG9sZGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLmFwcGVuZChcIjxzZWN0aW9uIGNsYXNzPSdlbGVtZW50LWhvbGRlcic+PC9zZWN0aW9uPlwiKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiLmVsZW1lbnQtaG9sZGVyOmxhc3Qtb2YtdHlwZVwiKS5hdHRyKCdpZCcsIHRoaXMuZWxlbWVudElkKTtcblx0XHR2YXIgcG9zaXRpb24gPSB7fTtcblx0XHRwb3NpdGlvbi50b3AgPSB0aGlzLnBvc2l0aW9uLnlQb3M7XG5cdFx0cG9zaXRpb24ubGVmdCA9IHRoaXMucG9zaXRpb24ueFBvcztcblx0XHRwb3NpdGlvbi56SW5kZXggPSAwO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcyhwb3NpdGlvbik7XG5cdFx0XHR0aGlzLmNyZWF0ZUVkaXRNZW51KCk7XG5cdFx0XHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBjcmVhdGVFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKHRoaXMuZWxlbWVudFR5cGUpIHtcblx0XHRjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQb3N0aXQodGhpcy5jb250ZW50KTtcblx0XHQgICAgXHRpZih0aGlzLmNvbnRlbnQpe1xuXHRcdCAgICBcdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQb3N0aXQoKSk7XG5cdFx0ICAgIFx0fSBlbHNle1xuXHRcdCAgICBcdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQb3N0aXQoKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVsZW1lbnQuZWRpdCh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0fVxuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmFwcGVuZCh0aGlzLmVsZW1lbnQuY3JlYXRlUG9zdGl0KTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdFx0Y2FzZSBcInN0YXRpY1wiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQaWN0dXJlKHRoaXMuY29udGVudCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdGlmKHRoaXMuY29udGVudCl7XG5cdFx0ICAgIFx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBpY3R1cmUoKSk7XG5cdFx0ICAgIFx0XHRiZWFuLm9uKHRoaXMuZWxlbWVudCwgXCJpbWFnZS1jaGFuZ2VkXCIsIHRoaXMuaW1hZ2VDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQgICAgXHR9IGVsc2V7XG5cdFx0ICAgIFx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBpY3R1cmUoKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVsZW1lbnQuZWRpdCh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdFx0YmVhbi5vbih0aGlzLmVsZW1lbnQsIFwiaW1hZ2UtY2hhbmdlZFwiLCB0aGlzLmltYWdlQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgICAgICBicmVhaztcblx0XHRcdGNhc2UgXCJtb3Rpb25cIjpcblxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBNb3Rpb24odGhpcy4kZWwsdGhpcy5jb250ZW50LCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0ICAgIFx0aWYodGhpcy5jb250ZW50KXtcblx0XHQgICAgXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmFwcGVuZCh0aGlzLmVsZW1lbnQuY3JlYXRlTW90aW9uKCkpO1xuXHRcdCAgICBcdFx0YmVhbi5vbih0aGlzLmVsZW1lbnQsIFwidmlkZW8tY2hhbmdlZFwiLCB0aGlzLnZpZGVvQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0ICAgIFx0fSBlbHNle1xuXHRcdCAgICBcdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVNb3Rpb24oKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVsZW1lbnQuZWRpdCh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdCAgICBcdFx0YmVhbi5vbih0aGlzLmVsZW1lbnQsIFwidmlkZW8tY2hhbmdlZFwiLCB0aGlzLnZpZGVvQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0ICAgIFx0XHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigkZWwpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkub24oJ21vdXNlZG93bicsIHRoaXMubW91c2Vkb3duSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLnZpZGVvQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gdmlkZW9DaGFuZ2VkSGFuZGxlcicpO1xuXHRcdHZhciBhY3Rpb25FdmVudCA9IHt9O1xuXHRcdGFjdGlvbkV2ZW50LmNvbnRlbnQgPSBldmVudDtcblx0XHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcblx0XHRhY3Rpb25FdmVudC5lbGVtZW50VHlwZSA9IHRoaXMuZWxlbWVudFR5cGU7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwidmlkZW8tY2hhbmdlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuaW1hZ2VDaGFuZ2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBpbWFnZUNoYW5nZWRIYW5kbGVyJyk7XG5cdFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG5cdFx0YWN0aW9uRXZlbnQuY29udGVudCA9IGV2ZW50O1xuXHRcdGFjdGlvbkV2ZW50LmVsZW1lbnRJZCA9IHRoaXMuZWxlbWVudElkO1xuXHRcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJpbWFnZS1jaGFuZ2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5tb3VzZWRvd25IYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNlZG93bkhhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuaWQgPT09IHRoaXMuZWxlbWVudElkKXtcbiAgICAgICAgXHR0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgXHRcdHRoaXMuY3VycmVudExlZnQgPSAkKGV2ZW50LnRhcmdldCkuY3NzKCdsZWZ0Jyk7XG4gICAgICAgXHRcdHRoaXMuY3VycmVudFRvcCA9ICQoZXZlbnQudGFyZ2V0KS5jc3MoJ3RvcCcpO1xuICAgICAgICBcdHRoaXMuX21vdXNlTW92ZUhhbmRsZXIgPSB0aGlzLm1vdXNlTW92ZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgICAgXHR0aGlzLl9tb3VzZVVwSGFuZGxlciA9IHRoaXMubW91c2VVcEhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgICAgXHR0aGlzLm9mZnNldFggPSBldmVudC5vZmZzZXRYO1xuICAgICAgICBcdHRoaXMub2Zmc2V0WSA9IGV2ZW50Lm9mZnNldFk7XG4gICAgICAgIFx0Kyt6SW5kZXhDb3VudGVyO1xuICAgICAgICBcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcygnekluZGV4JywgekluZGV4Q291bnRlcik7XG4gICAgICAgIFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgXHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIH1cblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFZGl0TWVudSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWRpdE1lbnUnKTtcblx0XHR0aGlzLmVkaXRNZW51ID0gbmV3IEVkaXRNZW51KHRoaXMuJGVsLCB0aGlzLmVsZW1lbnRJZCk7XG5cdFx0YmVhbi5vbih0aGlzLmVkaXRNZW51LCBcImVkaXQtY2xpY2tlZFwiLCB0aGlzLmVkaXRDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMuZWRpdE1lbnUsIFwiYWN0aW9uLWNsaWNrZWRcIiwgdGhpcy5hY3Rpb25DbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5lZGl0Q2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGVkaXRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZWxlbWVudC5lZGl0KHRoaXMuJGVsLCB0aGlzLmVsZW1lbnRJZCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuYWN0aW9uQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYWN0aW9uQ2xpY2tlZEhhbmRsZXInKTtcblx0XHRzd2l0Y2goZXZlbnQudGFyZ2V0SWQpIHtcblx0XHQgICAgY2FzZSBcInJlbW92ZVwiOiBjb25zb2xlLmxvZygncmVtb3ZlJyk7XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZCgnIycrZXZlbnQuZWxlbWVudElkKS5yZW1vdmUoKTtcblx0XHQgICAgXHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcblx0XHQgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcblx0XHQgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50VHlwZSA9IHRoaXMuZWxlbWVudFR5cGU7XG5cdFx0ICAgIFx0YmVhbi5maXJlKHRoaXMsIFwicmVtb3ZlLWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdCAgICBcdGNvbnNvbGUubG9nKGFjdGlvbkV2ZW50KTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiZWRpdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudC5jb25maXJtKCk7XG5cdFx0ICAgIFx0dGhpcy5lZGl0TWVudS50b2dnbGVWaXNpYmxlKCk7XG5cdFx0ICAgIFx0aWYodGhpcy5lbGVtZW50LmNoYW5nZWQgPT09IHRydWUpe1xuXHRcdCAgICBcdFx0YWN0aW9uRXZlbnQgPSB7fTtcblx0XHQgICAgXHRcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcblx0XHQgICAgXHRcdGFjdGlvbkV2ZW50LmVsZW1lbnRJZCA9IHRoaXMuZWxlbWVudElkO1xuXHRcdCAgICBcdFx0YWN0aW9uRXZlbnQuY29udGVudCA9IHRoaXMuZWxlbWVudC50eHQ7XG5cdFx0ICAgIFx0XHRiZWFuLmZpcmUodGhpcywgXCJlZGl0LWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdCAgICBcdH1cblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiY2FuY2VsXCI6XG5cdFx0ICAgIFx0dGhpcy5lbGVtZW50LmVuZEVkaXQoKTtcblx0XHQgICAgXHR0aGlzLmVkaXRNZW51LnRvZ2dsZVZpc2libGUoKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZW1vdmVIYW5kbGVyJyk7XG4gICAgICAgIGlmKHRoaXMubW91c2VEb3duID09PSB0cnVlKXtcbiAgICAgICAgICAgIHZhciBtb3VzZVggPSBwYXJzZUludChlLmNsaWVudFgpO1xuICAgICAgICAgICAgdmFyIG1vdXNlWSA9IHBhcnNlSW50KGUuY2xpZW50WSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MoJ2xlZnQnLCBtb3VzZVggLSB0aGlzLm9mZnNldFgpO1xuICAgICAgICAgICAgdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKCd0b3AnLCBtb3VzZVkgLSB0aGlzLm9mZnNldFkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gbW91c2V1cEhhbmRsZXInKTtcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIGlmKHRoaXMuY3VycmVudFRvcCAhPT0gJChlLnRhcmdldCkuY3NzKCd0b3AnKSB8fCB0aGlzLmN1cnJlbnRMZWZ0ICE9PSAkKGUudGFyZ2V0KS5jc3MoJ2xlZnQnKSl7XG4gICAgICAgIFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG4gICAgICAgIFx0YWN0aW9uRXZlbnQuZVRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICBcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcbiAgICAgICAgXHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcbiAgICAgICAgXHRiZWFuLmZpcmUodGhpcywgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIGFjdGlvbkV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRFbGVtZW50SWQgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBzZXRFbGVtZW50SWQnKTtcbiAgICBcdHZhciBob2xkZXJzID0gdGhpcy4kZWwuZmluZChcIi5lbGVtZW50LWhvbGRlclwiKTtcbiAgICBcdGlmKGhvbGRlcnMubGVuZ3RoID4gMCl7XG4gICAgXHRcdHZhciBpZEhvbGRlciA9W107XG4gICAgXHRcdHZhciBpID0gMDtcblx0XHRcdGZvcihpID0gMDtpIDwgaG9sZGVycy5sZW5ndGg7IGkrKyApe1xuXHRcdFx0XHRpZEhvbGRlci5wdXNoKGhvbGRlcnNbaV0uaWQpO1xuXHRcdFx0fVxuXHRcdFx0aWRIb2xkZXIuc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYi1hO30pO1xuXHRcdFx0cmV0dXJuIFN0cmluZyhOdW1iZXIoaWRIb2xkZXJbMF0pKzEpO1xuICAgIFx0fSBlbHNle1xuICAgIFx0XHRyZXR1cm4gXCIwXCI7XG4gICAgXHR9XG5cdH07XG5cblx0cmV0dXJuIEVsZW1lbnQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXG5cdGZ1bmN0aW9uIEVsZW1lbnRQaWNrZXIoJGVsKSB7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI2VsZW1lbnQtcGlja2VyLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge1xuXHRcdCAgZWxlbWVudHM6IFtcdFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwicG9zdC1pdFwiLCBuYW1lOiBcInBvc3QtaXRcIn0sXG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJzdGF0aWNcIiwgbmFtZTogXCJpbWFnZVwifSxcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcIm1vdGlvblwiLCBuYW1lOiBcInZpZGVvXCJ9XG4gIFx0XHRcdFx0XVxuICBcdFx0XHR9O1xuXHRcdFx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncGlja2VyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQgIHZhciBlbGVtZW50ID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMuZWxlbWVudCksXG5cdFx0XHQgICAgICBuYW1lID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMubmFtZSk7XG5cblx0XHRcdCAgcmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHQgICAgXCI8bGkgaWQ9XCIrZWxlbWVudCtcIj5cIituYW1lK1wiPC9saT5cIlxuXHRcdFx0ICApO1xuXHRcdFx0fSk7XG5cdFx0XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI3doaXRlYm9hcmRcIikuYXBwZW5kKCAkKGh0bWwpICk7XG5cdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0dGhpcy5iaW5kSGFuZGxlcigpO1xuXHR9XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gdG9nZ2xlVmlzaWJsZScpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyNlbGVtZW50LXBpY2tlcicpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLnNldExvY2F0aW9uID0gZnVuY3Rpb24oeFBvcywgeVBvcyl7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gc2V0TG9jYXRpb24nKTtcblx0XHR2YXIgcG9zaXRpb24gPSB7XG5cdFx0XHR0b3AgOiB5UG9zLFxuXHRcdFx0bGVmdCA6IHhQb3Ncblx0XHR9O1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjZWxlbWVudC1waWNrZXJcIikuY3NzKHBvc2l0aW9uKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjZWxlbWVudC1waWNrZXIgPiB1bCA+IGxpJykub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGNsaWNrSGFuZGxlcicpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCBcImVsZW1lbnQtcGlja2VyLWNsaWNrZWRcIiwgZXZlbnQudGFyZ2V0LmlkKTtcblx0fTtcblxuXHRyZXR1cm4gRWxlbWVudFBpY2tlcjtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9BcHAnKTtcblx0dmFyIE92ZXJ2aWV3RWxlbWVudCA9IHJlcXVpcmUoJy4vT3ZlcnZpZXdFbGVtZW50Jyk7XG5cdHZhciBPdmVydmlld0hhbmRsZXIgPSByZXF1aXJlKCcuL092ZXJ2aWV3SGFuZGxlcicpO1xuXG5cdGZ1bmN0aW9uIE92ZXJ2aWV3KCRlbCwgdXNlcklkKSB7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIGNvbnN0cnVjdG9yJyk7XG5cdHRoaXMuJGVsID0gJGVsO1xuXHR0aGlzLnVzZXIgPSB1c2VySWQ7XG5cdHRoaXMub3ZlcnZpZXdIYW5kbGVyID0gbmV3IE92ZXJ2aWV3SGFuZGxlcigpO1xuXHRpZih1c2VySWQgPiAwKXtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI292ZXJ2aWV3QnRucy10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHQkKCcjY29udGFpbmVyJykuYXBwZW5kKGVudHJ5VGV4dCk7XG5cdFx0JGVsLmZpbmQoXCIuYWRkQm9hcmRcIikub24oJ2NsaWNrJywgdGhpcy5hZGRCb2FyZC5iaW5kKHRoaXMpKTtcblx0XHQkZWwuZmluZChcIi5teUJvYXJkc1wiKS5vbignY2xpY2snLCB0aGlzLm15Qm9hcmRzLmJpbmQodGhpcykpO1xuXHRcdCRlbC5maW5kKFwiLmFsbEJvYXJkc1wiKS5vbignY2xpY2snLCB0aGlzLmFsbEJvYXJkcy5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdGJlYW4ub24odGhpcy5vdmVydmlld0hhbmRsZXIsIFwiZGF0YS1zdWNjZXNzXCIsIHRoaXMuYWRkVG9Cb2FyZExpc3QuYmluZCh0aGlzKSk7XG5cdGJlYW4ub24odGhpcy5vdmVydmlld0hhbmRsZXIsIFwidmlldy13aGl0ZWJvYXJkXCIsIHRoaXMudmlld1doaXRlYm9hcmQuYmluZCh0aGlzKSk7XG5cdHRoaXMub3ZlcnZpZXdIYW5kbGVyLmdldEFsbEJvYXJkcygpO1xuXHR9XG5cblx0T3ZlcnZpZXcucHJvdG90eXBlLmFkZFRvQm9hcmRMaXN0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gYWRkVG9Cb2FyZExpc3QnKTtcblx0XHR0aGlzLmJvYXJkTGlzdCA9IFtdO1xuXHRcdCQoJy5vdmVydmlld1RodW1iJykucmVtb3ZlKCk7XG5cdFx0dGhpcy5ib2FyZExpc3QucHVzaChldmVudCk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgIHRoaXMuYm9hcmRMaXN0WzBdLmxlbmd0aDsgaSsrKSB7IFxuXHRcdFx0dGhpcy5vdmVydmlld0VsZW1lbnQgPSBuZXcgT3ZlcnZpZXdFbGVtZW50KHRoaXMuYm9hcmRMaXN0WzBdW2ldLCB0aGlzLnVzZXIpO1xuXHRcdFx0YmVhbi5vbih0aGlzLm92ZXJ2aWV3RWxlbWVudCwgXCJyZW1vdmUtd2hpdGVib2FyZFwiLCB0aGlzLnJlbW92ZVdoaXRlYm9hcmQuYmluZCh0aGlzKSk7XG5cdFx0XHRiZWFuLm9uKHRoaXMub3ZlcnZpZXdFbGVtZW50LCBcInZpZXctd2hpdGVib2FyZFwiLCB0aGlzLnZpZXdXaGl0ZWJvYXJkLmJpbmQodGhpcykpO1xuXHRcdH1cblx0fTtcblxuXHRPdmVydmlldy5wcm90b3R5cGUudmlld1doaXRlYm9hcmQgPSBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSB2aWV3V2hpdGVib2FyZCcpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCAnbGVhay1ib2FyZERhdGEnLCBldmVudCk7XG5cdFx0Y29uc29sZS5sb2coZXZlbnQpO1xuXHRcdCQoXCIjY29udGFpbmVyXCIpLmh0bWwoXCJcIik7XG5cdFx0bmV3IEFwcCgkKCcjY29udGFpbmVyJyksIGV2ZW50LCB0aGlzLnVzZXIpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCAnbGVhay1ib2FyZERhdGEnLCBldmVudCk7XG5cdH07XG5cblx0T3ZlcnZpZXcucHJvdG90eXBlLmFkZEJvYXJkID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gYWRkQm9hcmQnKTtcblx0Y29uc29sZS5sb2codGhpcy51c2VyKTtcblx0XHRpZih0aGlzLnVzZXIpe1xuXHRcdFx0dGhpcy5vdmVydmlld0hhbmRsZXIuYWRkV2hpdGVib2FyZChcIlVudGl0bGVkXCIsIHRoaXMudXNlcik7XG5cdFx0fVxuXHR9O1xuXG5cdE92ZXJ2aWV3LnByb3RvdHlwZS5yZW1vdmVXaGl0ZWJvYXJkID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tPdmVydmlld10gcmVtb3ZlV2hpdGVib2FyZCcpO1xuXHRcdHRoaXMub3ZlcnZpZXdIYW5kbGVyLnJlbW92ZUJvYXJkKGV2ZW50KTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJytldmVudCkucmVtb3ZlKCk7XG5cdFx0Ly9vb2sgYWxsZSBwb3N0aXRzIHZlcndpamRlcmVuLi4uXG5cdH07XG5cblx0T3ZlcnZpZXcucHJvdG90eXBlLm15Qm9hcmRzID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3XSBteUJvYXJkcycpO1xuXHRcdHRoaXMub3ZlcnZpZXdIYW5kbGVyLmdldE15Qm9hcmRzKHRoaXMudXNlcik7XG5cdFx0Y29uc29sZS5sb2codGhpcy51c2VyKTtcblx0XHR0aGlzLnRvZ2dsZVZpc2libGUoZXZlbnQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5hbGxCb2FyZHMnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcblx0fVxuXG5cdE92ZXJ2aWV3LnByb3RvdHlwZS5hbGxCb2FyZHMgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXddIGFsbEJvYXJkcycpO1xuXHRcdHRoaXMub3ZlcnZpZXdIYW5kbGVyLmdldEFsbEJvYXJkcygpO1xuXHRcdHRoaXMudG9nZ2xlVmlzaWJsZShldmVudCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLm15Qm9hcmRzJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG5cdH1cblxuXHRPdmVydmlldy5wcm90b3R5cGUuc2VuZFVzZXIgPSBmdW5jdGlvbih1c2VyKXsgY29uc29sZS5sb2coJ1tPdmVydmlld10gc2VuZFVzZXInKTtcblx0XHR0aGlzLnVzZXIgPSB1c2VyLmlkO1xuXHRcdHRoaXMub3ZlcnZpZXdIYW5kbGVyLmdldEFsbEJvYXJkcygpO1xuXG5cdH1cblxuXHRPdmVydmlldy5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHR0aGlzLiRlbC5maW5kKCcuJytldmVudC50YXJnZXQuY2xhc3NMaXN0WzBdKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcblx0fVxuXG5cdHJldHVybiBPdmVydmlldztcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9BcHAnKTtcblxuXHRmdW5jdGlvbiBPdmVydmlld0VsZW1lbnQoYm9hcmQsIHVzZXJJZCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3RWxlbWVudF0gY29uc3RydWN0b3InKTtcblx0dGhpcy5ib2FyZCA9IGJvYXJkO1xuXHR0aGlzLmJvYXJkSWQgPSBib2FyZC5pZDtcblx0dGhpcy51c2VySWQgPSB1c2VySWQ7XG5cdHRoaXMuY3JlYXRlT3ZlcnZpZXdUaHVtYihib2FyZCk7XG5cdH1cblxuXHRPdmVydmlld0VsZW1lbnQucHJvdG90eXBlLmNyZWF0ZU92ZXJ2aWV3VGh1bWIgPSBmdW5jdGlvbihib2FyZCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3RWxlbWVudF0gY3JlYXRlT3ZlcnZpZXdUaHVtYicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjb3ZlcnZpZXdUaHVtYi10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudGl0bGUgPSBib2FyZC50aXRsZTtcblx0XHRjb250ZXh0LmlkID0gYm9hcmQuaWQ7XG5cdFx0Y29udGV4dC5jcmVhdG9yID0gXCJDUkVBVE9SXCI7XG5cdFx0Y29udGV4dC5jcmVhdGlvbl9kYXRlID0gYm9hcmQuY3JlYXRpb25fZGF0ZTtcdFx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdCQoJyNjb250YWluZXInKS5hcHBlbmQoJChodG1sKSk7XG5cdFx0dGhpcy5iaW5kSGFuZGxlcihib2FyZCwgJChodG1sKVswXSk7XG5cdH07XG5cblx0T3ZlcnZpZXdFbGVtZW50LnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKGJvYXJkLCBlbCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXdFbGVtZW50XSBiaW5kSGFuZGxlcicpO1xuXHRcdGlmKGJvYXJkLmNyZWF0b3IgPT0gIHRoaXMudXNlcklkKXtcblx0XHRcdCQoXCIjXCIrYm9hcmQuaWQgK1wiID4gLnJlbW92ZVwiKS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcblx0XHRcdCQoXCIjXCIrYm9hcmQuaWQgICtcIiA+IC5yZW1vdmVcIikub24oJ2NsaWNrJywgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdH1cblx0XHQkKFwiI1wiK2JvYXJkLmlkICArXCIgPiAudmlld1wiKS5vbignY2xpY2snLCB0aGlzLnZpZXdIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdE92ZXJ2aWV3RWxlbWVudC5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tPdmVydmlld0VsZW1lbnRdIHJlbW92ZUhhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgJ3JlbW92ZS13aGl0ZWJvYXJkJywgdGhpcy5ib2FyZElkKTtcblx0fTtcblxuXHRPdmVydmlld0VsZW1lbnQucHJvdG90eXBlLnZpZXdIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3RWxlbWVudF0gdmlld0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgJ3ZpZXctd2hpdGVib2FyZCcsIHRoaXMuYm9hcmQpO1xuXHR9O1xuXG5cdFxuXG5cdHJldHVybiBPdmVydmlld0VsZW1lbnQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0ZnVuY3Rpb24gT3ZlcnZpZXdIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4ODg4L2NwMy93aGl0ZWJvYXJkL3doaXRlYm9hcmQvYXBpL2luZGV4LnBocC9cIjtcblx0fVxuXHRcblx0T3ZlcnZpZXdIYW5kbGVyLnByb3RvdHlwZS5nZXRBbGxCb2FyZHMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gZ2V0QWxsQm9hcmRzJyk7XG5cdFx0cmV0dXJuICQuYWpheCh7XG5cdFx0ICBcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ICBcdHVybDogdGhpcy51cmwrJ2JvYXJkcy8nLFxuXHRcdCAgXHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0XHQgIFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdFx0ICBcdFx0Y29uc29sZS5sb2coXCJ2aWV3LXdoaXRlYm9hcmQgXCIrW2RhdGFdKTtcblx0ICBcdFx0XHRiZWFuLmZpcmUodGhpcywgXCJkYXRhLXN1Y2Nlc3NcIiwgW2RhdGFdKTtcblx0XHQgIFx0fS5iaW5kKHRoaXMpXG5cdFx0fSk7XG5cdH07XG5cblx0T3ZlcnZpZXdIYW5kbGVyLnByb3RvdHlwZS5nZXRNeUJvYXJkcyA9IGZ1bmN0aW9uKHVzZXJpZCl7IGNvbnNvbGUubG9nKCdbT3ZlcnZpZXdIYW5kbGVyXSBnZXRNeUJvYXJkcycpO1xuXHRcdHJldHVybiAkLmFqYXgoe1xuXHRcdCAgXHR0eXBlOiBcIkdFVFwiLFxuXHRcdCAgXHR1cmw6IHRoaXMudXJsKydib2FyZHMvJyt1c2VyaWQsXG5cdFx0ICBcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHRcdCAgXHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0ICBcdFx0XHRiZWFuLmZpcmUodGhpcywgXCJkYXRhLXN1Y2Nlc3NcIiwgW2RhdGFdKTtcblx0XHQgIFx0fS5iaW5kKHRoaXMpXG5cdFx0fSk7XG5cdH07XG5cblx0T3ZlcnZpZXdIYW5kbGVyLnByb3RvdHlwZS5yZW1vdmVCb2FyZCA9IGZ1bmN0aW9uKGlkKXsgY29uc29sZS5sb2coJ1tPdmVydmlld0hhbmRsZXJdIHJlbW92ZUJvYXJkJyk7XG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJHRVRcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCsnYm9hcmRzLycrJ2RlbGV0ZS8nK2lkLFxuXHQgIFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSl7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coXCJkZWxldGVkID0gXCIrZGF0YSk7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRPdmVydmlld0hhbmRsZXIucHJvdG90eXBlLmFkZFdoaXRlYm9hcmQgPSBmdW5jdGlvbih0aXRsZSwgY3JlYXRvcklkKXtcblx0XHRyZXR1cm4gJC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJQT1NUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrJ2JvYXJkcy8nKydhZGQvJyt0aXRsZSsnLycrY3JlYXRvcklkLFxuXHRcdCAgXHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwidmlldy13aGl0ZWJvYXJkIFwiK1tkYXRhXSk7XG5cdCAgXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwidmlldy13aGl0ZWJvYXJkXCIsIFtkYXRhXSk7XG5cdCAgXHRcdH0uYmluZCh0aGlzKVxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIE92ZXJ2aWV3SGFuZGxlcjtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFBhcnRpY2lwYW50KCRlbCl7IGNvbnNvbGUubG9nKCdbUGFydGljaXBhbnRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGlucHV0ID0gJGVsLmZpbmQoJy5wYXJ0aWNpcGFudC1pbnB1dCcpO1xuXHRcdGlmKGlucHV0LnZhbCgpKXtcblx0XHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcGFydGljaXBhbnQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0IFx0XHR2YXIgY29udGV4dCA9IHsgcGFydGljaXBhbnRzOiBbe31dfTtcblx0XHRcdFx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncGFydGljaXBhbnQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdFx0ICAgIFwiPGxpIGlkPScnPlwiK2lucHV0LnZhbCgpK1wiPGJ1dHRvbiBjbGFzcz0nYnRuIGRlbGV0ZVBhcnQnPlg8L2J1dHRvbj48L2xpPlwiXG5cdFx0XHRcdCAgKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdFx0dGhpcy4kZWwuZmluZChcIiNwYXJ0aWNpcGFudC1saXN0XCIpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcdHRoaXMuYmluZERlbGV0ZWJ1dHRvbigpO1xuXHRcdFx0JCgnLnBhcnRpY2lwYW50LWlucHV0JykudmFsKFwiXCIpO1xuXHRcdH1cblx0fVxuXG5cdFBhcnRpY2lwYW50LnByb3RvdHlwZS5iaW5kRGVsZXRlYnV0dG9uID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQYXJ0aWNpcGFudF0gYmluZERlbGV0ZWJ1dHRvbicpO1xuXHRcdHRoaXMuZGVsZXRlYnV0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVsZXRlUGFydCcpO1xuXHRcdHRoaXMuZGVsZXRlYnV0b25bdGhpcy5kZWxldGVidXRvbi5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRlbGV0ZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRQYXJ0aWNpcGFudC5wcm90b3R5cGUuZGVsZXRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZyhcIltQYXJ0aWNpcGFudF0gZGVsZXRlQ2xpY2tIYW5kbGVyXCIpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCBcImRlbGV0ZVwiLCBldmVudC5wYXRoWzFdKTtcblx0fTtcblx0cmV0dXJuIFBhcnRpY2lwYW50O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBVc2VySGFuZGxlciA9IHJlcXVpcmUoJy4vVXNlckhhbmRsZXInKTtcblxuXHRmdW5jdGlvbiBQcm9maWxlKCRlbCwgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCkgeyBjb25zb2xlLmxvZygnW1Byb2ZpbGVdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy51c2VyID0gIFtdO1xuXHRcdHRoaXMudXNlckhhbmRsZXIgPSBuZXcgVXNlckhhbmRsZXIoKTtcblx0XHRcdFxuXHRcdC8vTE9HSU4tVEVNUExBVEVcblx0XHR0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG5cdFx0dGhpcy5lbWFpbCA9IGVtYWlsO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbG9naW4tdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHQvL2NvbnRleHQudXNlcm5hbWUgPSB0aGlzLnVzZXJuYW1lO1xuXHRcdC8vY29udGV4dC5lbWFpbCA9IHRoaXMuZW1haWw7XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHQkKCcjcHJvZmlsZScpLmFwcGVuZCgkKGh0bWwpKTtcblxuXHRcdC8vUkVHSVNURVItVEVNUExBVEVcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3JlZ2lzdGVyLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Ly9jb250ZXh0LnVzZXJuYW1lID0gdGhpcy51c2VybmFtZTtcblx0XHQvL2NvbnRleHQuZW1haWwgPSB0aGlzLmVtYWlsO1xuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnI3Byb2ZpbGUnKS5hcHBlbmQoJChodG1sKSk7XG5cblx0XHR0aGlzLiRlbC5maW5kKFwiI3JlZ2lzdGVyLWJ1dHRvblwiKS5vbignY2xpY2snLCB0aGlzLnJlZ2lzdGVyLmJpbmQodGhpcykpO1xuXHRcdCQoJy5yZWdpc3RlcicpLm9uKFwiY2xpY2tcIiwgdGhpcy5hZGRVc2VyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIubG9naW5cIikub24oJ2NsaWNrJywgdGhpcy5sb2dpbi5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMudXNlckhhbmRsZXIsIFwidXNlci1mb3VuZFwiLCB0aGlzLmJpbmRVc2VyLmJpbmQodGhpcykpO1xuXHR9XG5cblx0UHJvZmlsZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSByZWdpc3RlcicpO1xuXHRcdCQoXCIjcmVnaXN0ZXJcIikudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHR9O1xuXG5cdFByb2ZpbGUucHJvdG90eXBlLmFkZFVzZXIgPSBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ1tQcm9maWxlXSBhZGRVc2VyJyk7XG5cdFx0dGhpcy51c2VybmFtZSA9IHRoaXMuJGVsLmZpbmQoJy5yZWdpc3Rlcl9uYW1lJykudmFsKCk7XG5cdFx0dGhpcy5lbWFpbCA9IHRoaXMuJGVsLmZpbmQoJy5yZWdpc3Rlcl9lbWFpbCcpLnZhbCgpO1xuXHRcdHRoaXMucGFzc3dvcmQgPSB0aGlzLiRlbC5maW5kKCcucmVnaXN0ZXJfcGFzc3dvcmQnKS52YWwoKTtcblx0XHR0aGlzLnBhc3N3b3JkXzIgPSB0aGlzLiRlbC5maW5kKCcucmVnaXN0ZXJfcGFzc3dvcmRfMicpLnZhbCgpO1xuXG5cdFx0aWYodGhpcy5wYXNzd29yZD09dGhpcy5wYXNzd29yZF8yKXtcblx0XHRcdC8vZXhpc3RpbmcgdXNlciBub2cgY2hlY2tlbiFcblx0XHRcdHRoaXMudXNlckhhbmRsZXIucmVnaXN0ZXIodGhpcy51c2VybmFtZSwgdGhpcy5lbWFpbCwgdGhpcy5wYXNzd29yZCk7XG5cdFx0fVxuXHR9O1xuXG5cdFByb2ZpbGUucHJvdG90eXBlLmxvZ2luID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gbG9naW4nKTtcblx0XHR0aGlzLmVtYWlsID0gdGhpcy4kZWwuZmluZCgnLmxvZ2luX2VtYWlsJykudmFsKCk7XG5cdFx0dGhpcy5wYXNzd29yZCA9IHRoaXMuJGVsLmZpbmQoJy5sb2dpbl9wYXNzd29yZCcpLnZhbCgpO1xuXHRcdHRoaXMudXNlckhhbmRsZXIubG9naW4odGhpcy5lbWFpbCwgdGhpcy5wYXNzd29yZCk7XG5cdH07XG5cblx0UHJvZmlsZS5wcm90b3R5cGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gbG9nb3V0Jyk7XG5cdFx0dGhpcy51c2VyID0gW107XG5cdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdFx0JChcIiNyZWdpc3Rlci1idXR0b25cIikucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdCQoXCIjbG9nb3V0XCIpLnJlbW92ZSgpO1xuXHRcdC8vaHVpZGlnZSBzaXR1YXRlIHJlZnJlc2hlbi5cblx0XHRiZWFuLmZpcmUodGhpcywgXCJyZWZyZXNoXCIsIHRoaXMudXNlcik7XG5cdH07XG5cblx0UHJvZmlsZS5wcm90b3R5cGUuYmluZFVzZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbUHJvZmlsZV0gYmluZFVzZXInKTtcblx0XHR0aGlzLnVzZXI9IFtldmVudF07XG5cdFx0aWYodGhpcy51c2VyWzBdKXtcblx0XHRcdCQoJ2lucHV0JykudmFsKFwiXCIpO1xuXHRcdFx0JChcIiNyZWdpc3Rlci1idXR0b25cIikuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0JChcIiNyZWdpc3RlclwiKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcInJlZnJlc2hcIiwgdGhpcy51c2VyKTtcblxuXHRcdFx0Ly9MT0dHRUQtSU4tVEVNUExBVEVcblx0XHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbG9nZ2VkLWluLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdFx0Y29udGV4dC51c2VybmFtZSA9IHRoaXMudXNlclswXS53Yl91c2VybmFtZTtcblx0XHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0XHQkKCcjcHJvZmlsZScpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcdCQoXCIubG9nb3V0XCIpLm9uKCdjbGljaycsIHRoaXMubG9nb3V0LmJpbmQodGhpcykpO1xuXHRcdH1cblx0fVxuXG5cdFByb2ZpbGUucHJvdG90eXBlLnRvZ2dsZVZpc2libGUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1Byb2ZpbGVdIHRvZ2dsZVZpc2libGUnKTtcblx0XHQkKFwiI2xvZ2luXCIpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0fTtcblxuXHRyZXR1cm4gUHJvZmlsZTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFRhZ3MoJGVsKXsgY29uc29sZS5sb2coJ1tUYWdzXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBpbnB1dCA9ICRlbC5maW5kKCcudGFnLWlucHV0Jyk7XG5cdFx0aWYoaW5wdXQudmFsKCkpe1xuXHRcdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyN0YWdzLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdCBcdFx0dmFyIGNvbnRleHQgPSB7IHRhZ3M6IFt7fV19O1xuXHRcdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd0YWcnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdFx0ICAgIFwiPGxpPlwiK2lucHV0LnZhbCgpK1wiPGJ1dHRvbiBjbGFzcz0nYnRuIGRlbGV0ZVRhZyc+WDwvYnV0dG9uPjwvbGk+XCJcblx0XHRcdFx0ICApO1xuXHRcdFx0XHR9KTtcblx0XHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0XHR0aGlzLiRlbC5maW5kKFwiI3RhZy1saXN0XCIpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcdHRoaXMuYmluZERlbGV0ZWJ1dHRvbigpO1xuXHRcdFx0aW5wdXQudmFsKFwiXCIpO1xuXHRcdH1cblx0fVxuXG5cdFRhZ3MucHJvdG90eXBlLmJpbmREZWxldGVidXR0b24gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1RhZ3NdIGJpbmREZWxldGVidXR0b24nKTtcblx0XHR0aGlzLmRlbGV0ZWJ1dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlbGV0ZVRhZycpO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMuZGVsZXRlYnV0b24pO1xuXHRcdHRoaXMuZGVsZXRlYnV0b25bdGhpcy5kZWxldGVidXRvbi5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRlbGV0ZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRUYWdzLnByb3RvdHlwZS5kZWxldGVDbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKFwiW1BhcnRpY2lwYW50XSBkZWxldGVDbGlja0hhbmRsZXJcIik7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiZGVsZXRlXCIsIGV2ZW50LnBhdGhbMV0pO1xuXHR9O1xuXG5cdHJldHVybiBUYWdzO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdGZ1bmN0aW9uIFVzZXJIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW092ZXJ2aWV3SGFuZGxlcl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLnVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4ODg4L2NwMy93aGl0ZWJvYXJkL3doaXRlYm9hcmQvYXBpL2luZGV4LnBocC9cIjtcblx0fVxuXG5cdFVzZXJIYW5kbGVyLnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzd29yZCl7IGNvbnNvbGUubG9nKCdbVXNlckhhbmRsZXJdIGxvZ2luJyk7XG5cdFx0JC5hamF4KHtcblx0ICBcdFx0dHlwZTogXCJQT1NUXCIsXG5cdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK1widXNlcnNcIisnL2xvZ2luLycrZW1haWwrXCIvXCIrcGFzc3dvcmQsXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwidXNlciBmb3VuZFwiLCBbZGF0YV0pO1xuXHQgIFx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcInVzZXItZm91bmRcIiwgW2RhdGFdKTtcblx0ICBcdFx0fS5iaW5kKHRoaXMpXG5cdFx0fSk7XG5cdH07XG5cblx0VXNlckhhbmRsZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24odXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCl7IGNvbnNvbGUubG9nKCdbVXNlckhhbmRsZXJdIHJlZ2lzdGVyJyk7XG5cdFx0XHQkLmFqYXgoe1xuXHRcdCAgXHRcdHR5cGU6IFwiUE9TVFwiLFxuXHRcdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHRcdCAgXHRcdHVybDogdGhpcy51cmwrXCJ1c2Vyc1wiK1wiL3JlZ2lzdGVyL1wiK3VzZXJuYW1lK1wiL1wiK2VtYWlsK1wiL1wiK3Bhc3N3b3JkLFxuXHRcdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgXHRcdFx0Y29uc29sZS5sb2coXCJuZXcgdXNlciBjcmVhdGVkXCIsIFtkYXRhXSk7XG5cdFx0ICBcdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ1c2VyLWZvdW5kXCIsIFtkYXRhXSk7XG5cdFx0ICBcdFx0fS5iaW5kKHRoaXMpXG5cdFx0XHR9KTtcblx0XHR9O1xuXHRyZXR1cm4gVXNlckhhbmRsZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgV2hpdGVib2FyZFNldHRpbmdzID0gcmVxdWlyZSAoJy4vV2hpdGVib2FyZFNldHRpbmdzJyk7XG5cblx0ZnVuY3Rpb24gV2hpdGVib2FyZCgkZWwsIGJvYXJkSW5mbywgYWRtaW4pIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuYWRtaW4gPSBhZG1pbjtcblx0XHR0aGlzLmJvYXJkSW5mbyA9IGJvYXJkSW5mbztcblx0XHR0aGlzLmNyZWF0ZVdoaXRlYm9hcmQoKTtcblx0XHR0aGlzLmFkZFdoaXRlYm9hcmRTZXR0aW5ncygpO1xuXHR9XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuY3JlYXRlV2hpdGVib2FyZCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gY3JlYXRlV2hpdGVib2FyZCcpO1xuXHRcdHRoaXMuYm9hcmQgPSB0aGlzLiRlbC5hcHBlbmQoXCI8ZGl2IGlkPSd3aGl0ZWJvYXJkJz48L2Rpdj5cIik7XG5cdFx0dGhpcy5iaW5kSGFuZGxlcigpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBiaW5kSGFuZGxlcicpO1xuXHRcdGlmKHRoaXMuYWRtaW4gPT09IHRydWUpe1xuXHRcdFx0dGhpcy5ib2FyZC5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR9XG5cdH07XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNsaWNrSGFuZGxlcicpO1xuXHRcdHZhciB4UG9zID0gZXZlbnQucGFnZVggLSB0aGlzLiRlbC5vZmZzZXQoKS5sZWZ0O1xuICAgXHRcdHZhciB5UG9zID0gZXZlbnQucGFnZVkgLSB0aGlzLiRlbC5vZmZzZXQoKS50b3A7XG4gICBcdFx0dmFyIHBvc2l0aW9uID0ge307XG4gICBcdFx0cG9zaXRpb24ueFBvcyA9IHhQb3M7XG4gICBcdFx0cG9zaXRpb24ueVBvcyA9IHlQb3M7XG5cdFx0aWYoZXZlbnQudGFyZ2V0LmlkID09PSBcIndoaXRlYm9hcmRcIil7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgcG9zaXRpb24pO1xuXHRcdH1cblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5hZGRXaGl0ZWJvYXJkU2V0dGluZ3MgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGFkZFdoaXRlYm9hcmRTZXR0aW5ncycpO1xuXHRcdHRoaXMud2hpdGVib2FyZFNldHRpbmdzID0gbmV3IFdoaXRlYm9hcmRTZXR0aW5ncyh0aGlzLiRlbCwgdGhpcy5hZG1pbiwgdGhpcy5ib2FyZEluZm8pO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdHZhciBQYXJ0aWNpcGFudCA9IHJlcXVpcmUgKCcuL1BhcnRpY2lwYW50Jyk7XG5cdHZhciBUYWcgPSByZXF1aXJlKCcuL1RhZ3MnKTtcblxuXHRmdW5jdGlvbiBXaGl0ZWJvYXJkU2V0dGluZ3MoJGVsLCBhZG1pbiwgYm9hcmRJbmZvKSB7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuYWRtaW4gPSBhZG1pbjtcblxuXHRcdGlmKHRoaXMuYWRtaW4pe1xuXHRcdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNzZXR0aW5ncy10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdHZhciBlbnRyeVRleHQgPSAkKCcjaW5mby10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR9XG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHQgXHR2YXIgY29udGV4dCA9IHt9O1xuXHQgXHRcdGNvbnRleHQudGl0bGUgPSBib2FyZEluZm8udGl0bGU7XG5cdFx0IFx0Y29udGV4dC5jcmVhdGlvbl9kYXRlID0gYm9hcmRJbmZvLmNyZWF0aW9uX2RhdGU7XG5cdFx0IFx0Y29udGV4dC5jcmVhdG9yID0gXCJDUkVBVE9SXCI7XHRcdFx0XG5cdFx0IFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRcdCQoXCIjY29udGFpbmVyXCIpLmFwcGVuZCgkKGh0bWwpKTtcblx0XHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fVxuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuYmluZEhhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuaGlkZS1idXR0b24nKS5vbignY2xpY2snLCB0aGlzLmhpZGVTZXR0aW5nc0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLnNob3ctYnV0dG9uJykub24oJ2NsaWNrJywgdGhpcy5oaWRlU2V0dGluZ3NIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5hZGRQYXJ0aWNpcGFudCcpLm9uKCdjbGljaycsIHRoaXMuY3JlYXRlUGFydGljaXBhbnQuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmFkZFRhZycpLm9uKCdjbGljaycsIHRoaXMuY3JlYXRlVGFnLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2hpZGUnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI3Nob3cnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5jcmVhdGVQYXJ0aWNpcGFudCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGFkZENsaWNrZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5wYXJ0aWNpcGFudCA9IG5ldyBQYXJ0aWNpcGFudCh0aGlzLiRlbCk7XG5cdFx0YmVhbi5vbih0aGlzLnBhcnRpY2lwYW50LCBcImRlbGV0ZVwiLCB0aGlzLmRlbGV0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuY3JlYXRlVGFnID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gY3JlYXRlVGFnJyk7XG5cdFx0dGhpcy50YWcgPSBuZXcgVGFnKHRoaXMuJGVsKTtcblx0XHRiZWFuLm9uKHRoaXMudGFnLCBcImRlbGV0ZVwiLCB0aGlzLmRlbGV0ZVRhZy5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmhpZGVTZXR0aW5nc0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBoaWRlU2V0dGluZ3NIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmhpZGVfc2VjdGlvbicpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuc2hvdy1idXR0b24nKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cdFxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmRlbGV0ZVBhcnRpY2lwYW50ID0gZnVuY3Rpb24ocGFydGljaXBhbnQpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGRlbGV0ZVBhcnRpY2lwYW50Jyk7XG5cdFx0dmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhcnRpY2lwYW50LWxpc3QnKTtcblx0XHRlbC5yZW1vdmVDaGlsZChwYXJ0aWNpcGFudCk7XG5cdH07XG5cblxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmRlbGV0ZVRhZyA9IGZ1bmN0aW9uKHRhZykgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gZGVsZXRlUGFydGljaXBhbnQnKTtcblx0XHR2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFnLWxpc3QnKTtcblx0XHRlbC5yZW1vdmVDaGlsZCh0YWcpO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkU2V0dGluZ3M7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIE1vdGlvbkVkaXQgPSByZXF1aXJlKCcuL01vdGlvbkVkaXQnKTtcblx0dmFyIHRoYXQ7XG5cblx0ZnVuY3Rpb24gTW90aW9uKCRlbCx2aWRTcmMpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jaGFuZ2VkID0gZmFsc2U7XG5cdFx0dGhhdCA9IHRoaXM7XG5cdFx0aWYodmlkU3JjKXtcblx0XHRcdHRoaXMudmlkU3JjID0gdmlkU3JjO1xuXHRcdH1cblx0fVxuXG5cdE1vdGlvbi5wcm90b3R5cGUuY3JlYXRlTW90aW9uID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGNyZWF0TW90aW9uJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNtb3Rpb24tdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRpZih0aGlzLnZpZFNyYyl7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9ICdtb3Rpb24vJyt0aGlzLnZpZFNyYysnLm1wNCc7XG5cdFx0fWVsc2V7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9IFwiXCI7XG5cdFx0fVxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblx0fTtcblx0XG4gXHRNb3Rpb24ucHJvdG90eXBlLnBsYXlTZWxlY3RlZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBwbGF5U2VsZWN0ZWRGaWxlJyk7XG5cdFx0dmFyIHZpZCA9IHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgPiAubW90aW9uID4gdmlkZW8nKTtcbiAgICAgICAgLy92YXIgdHlwZSA9IGZpbGUudHlwZTtcbiAgICAgICAgaWYoVVJMKXsgY29uc29sZS5sb2coJ1VSTCBCRVNUQUFEJyk7XG4gICAgICAgIFx0dmFyIGZpbGVVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICBcdHZpZC5hdHRyKCdzcmMnLCBmaWxlVVJMKTtcbiAgICAgICAgXHR2aWQuYXV0b1BsYXkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihmaWxlKXsgY29uc29sZS5sb2coJ2xvYWRlZCcpO1xuXHRcdFx0dGhhdC5jb25maXJtKGZpbGUudGFyZ2V0LnJlc3VsdCk7XG5cdFx0fTtcblx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblx0fTtcblxuXHRNb3Rpb24ucHJvdG90eXBlLmVkaXQgPSBmdW5jdGlvbigkZWwsZWxlbWVudElkKXsgIGNvbnNvbGUubG9nKCdbTW90aW9uXSBlZGl0Jyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHRcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBNb3Rpb25FZGl0KHRoaXMudmlkU3JjLCBlbGVtZW50SWQpKTtcblx0XHR0aGlzLnZpZGVvSW5wdXQgPSB0aGlzLiRlbC5maW5kKCcjJytlbGVtZW50SWQrJyA+Lm1vdGlvbi1lZGl0Jyk7XG5cdFx0dGhpcy52aWRlb0lucHV0LmNoYW5nZShmdW5jdGlvbigpe1xuXHRcdFx0dmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuXHRcdFx0dGhhdC5wbGF5U2VsZWN0ZWRGaWxlKGZpbGUpO1xuXHRcdFx0dGhhdC5jaGFuZ2VkID0gdHJ1ZTtcblx0XHR9KTtcblx0fTtcblxuXHRNb3Rpb24ucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbih2aWRlbyl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjb25maXJtJyk7XG5cdFx0aWYodGhpcy5jaGFuZ2VkID09PSB0cnVlKXsgY29uc29sZS5sb2codGhpcy5jaGFuZ2VkKTtcblx0XHRcdHRoaXMudmlkU3JjID0gdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiAubW90aW9uLWVkaXRcIikudmFsKCk7XG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ2aWRlby1jaGFuZ2VkXCIsICB2aWRlbyk7XG5cdFx0XHR0aGlzLmNoYW5nZWQgPSBmYWxzZTtcblx0XHR9XG5cdFx0dGhpcy5lbmRFZGl0KCk7XG5cdH07XG5cblx0TW90aW9uLnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGVuZEVkaXQnKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLm1vdGlvbi1lZGl0XCIpLnJlbW92ZSgpO1xuXHR9O1xuXG5cdHJldHVybiBNb3Rpb247XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBNb3Rpb25FZGl0KHZpZFNyYywgZWxlbWVudElkKSB7IGNvbnNvbGUubG9nKCdbTW90aW9uRWRpdF0gY29uc3RydWN0b3InKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI21vdGlvbi1lZGl0LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Y29udGV4dC52aWRTcmMgPSB2aWRTcmM7XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXHR9XG5cblx0cmV0dXJuIE1vdGlvbkVkaXQ7XG5cbn0pKCk7XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIFBpY3R1cmVFZGl0ID0gcmVxdWlyZSgnLi9QaWN0dXJlRWRpdCcpO1xuXHR2YXIgdGhhdDtcblx0ZnVuY3Rpb24gUGljdHVyZShpbWdTcmMpIHsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoYXQgPSB0aGlzO1xuXHRcdHRoaXMuY2hhbmdlZCA9IGZhbHNlO1xuXHRcdHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuXHRcdGlmKCF0aGlzLmltZ1NyYyl7XG5cdFx0XHR0aGlzLmltZ1NyYyA9IFwiXCI7XG5cdFx0fVxuXHRcdGlmIChcblx0XHRcdHdpbmRvdy5GaWxlICYmIFxuXHRcdFx0d2luZG93LkZpbGVSZWFkZXIgJiYgXG5cdFx0XHR3aW5kb3cuRmlsZUxpc3QgJiYgXG5cdFx0XHR3aW5kb3cuQmxvYlxuXHRcdCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJGdWxsIGZpbGUgc3VwcG9ydFwiKTtcblx0XHR9XG5cdH1cblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jcmVhdGVQaWN0dXJlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjcmVhdFBpY3R1cmUnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3BpY3R1cmUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRpZih0aGlzLmltZ1NyYyl7XG5cdFx0XHRjb250ZXh0LmltZ1NyYyA9ICdzdGF0aWNzLycrdGhpcy5pbWdTcmMrXCIucG5nXCI7XG5cdFx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpOyBcblx0XHRcdHJldHVybigkKGh0bWwpKTtcblx0XHR9XG5cdH07XG5cdFxuXHRQaWN0dXJlLnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gZWRpdCcpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuXHRcdHZhciBwaWN0dXJlRWRpdCA9IG5ldyBQaWN0dXJlRWRpdCh0aGlzLiRlbCx0aGlzLmltZ1NyYyxlbGVtZW50SWQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkKS5hcHBlbmQocGljdHVyZUVkaXQpO1xuXHRcdHRoaXMuaW1nSW5wdXRzID0gdGhpcy4kZWwuZmluZCgnIycrZWxlbWVudElkKycgPi5pbnB1dC1waWN0dXJlJyk7XG5cdFx0dGhpcy5pbWdJbnB1dHMuY2hhbmdlKGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XG5cdFx0XHR0aGF0LmNyZWF0ZVRodW1iKGZpbGUpO1xuXHRcdFx0dGhhdC5jaGFuZ2VkID0gdHJ1ZTtcblx0XHR9KTtcblx0fTtcblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jcmVhdGVUaHVtYiA9IGZ1bmN0aW9uKGZpbGUpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNyZWF0ZVRodW1iJyk7XG5cdFx0XHR2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0XHRcdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihmaWxlKXsgY29uc29sZS5sb2coJ2xvYWRlZCcpO1xuXHRcdFx0XHR2YXIgaW1nID0gdGhhdC4kZWwuZmluZChcIiNcIit0aGF0LmVsZW1lbnRJZCsnID4ucGljdHVyZScrJyAuaW1hZ2UtcHJldmlldycpO1xuXHRcdFx0XHRpbWcuYXR0cignc3JjJywgZmlsZS50YXJnZXQucmVzdWx0KTtcblx0XHRcdFx0dGhhdC5jb25maXJtKGZpbGUudGFyZ2V0LnJlc3VsdCk7XG5cdFx0XHR9O1xuXHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKGZpbGUpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNvbmZpcm0nKTtcblx0XHR0aGlzLmltZ1NyYyA9IHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgLmlucHV0LXBpY3R1cmVcIikudmFsKCk7XG5cdFx0aWYodGhpcy5jaGFuZ2VkID09PSB0cnVlKXtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcImltYWdlLWNoYW5nZWRcIiwgZmlsZSk7XG5cdFx0XHR0aGF0LmNoYW5nZWQgPSBmYWxzZTtcblx0XHR9XG5cdFx0dGhpcy5lbmRFZGl0KCk7XG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAuaW5wdXQtcGljdHVyZVwiKS5yZW1vdmUoKTtcblx0fTtcblxuXHRyZXR1cm4gUGljdHVyZTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFBpY3R1cmVFZGl0KCRlbCx0eHQsZWxlbWVudElkKSB7IGNvbnNvbGUubG9nKCdbUGljdHVyZUVkaXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwaWN0dXJlLWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHR4dDtcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHJldHVybiAoJChodG1sKSk7XG5cdH1cblxuXHRyZXR1cm4gUGljdHVyZUVkaXQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgUG9zdGl0RWRpdCA9IHJlcXVpcmUoJy4vUG9zdGl0RWRpdCcpO1xuXG5cdGZ1bmN0aW9uIFBvc3RpdCh0eHQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy50eHQgPSB0eHQ7XG5cdFx0dGhpcy5jaGFuZ2VkID0gdHJ1ZTtcblx0XHRpZighdGhpcy50eHQpe1xuXHRcdFx0dGhpcy50eHQgPSBcIk5pZXV3ZSBQb3N0aXRcIjtcblx0XHR9XG5cdH1cblxuXHRQb3N0aXQucHJvdG90eXBlLmNyZWF0ZVBvc3RpdCA9IGZ1bmN0aW9uKHR4dCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjcmVhdGVQb3N0aXQnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudHh0ID0gdGhpcy50eHQ7XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKCRlbCxlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gZWRpdCcpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitlbGVtZW50SWQpLmFwcGVuZChuZXcgUG9zdGl0RWRpdCh0aGlzLnR4dCkpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjb25maXJtJyk7XG5cdFx0dGhpcy50eHQgPSB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiIC5wb3N0aXQtZWRpdFwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS5hZGRDbGFzcyhcImhpZGRlblwiKS50ZXh0KHRoaXMudHh0KTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdC1lZGl0XCIpLnJlbW92ZSgpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0fTtcblxuXHRyZXR1cm4gUG9zdGl0O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gUG9zdGl0RWRpdCh0eHQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRFZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcG9zdGl0LWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHR4dDtcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXG5cdH1cblx0XG5cdHJldHVybiBQb3N0aXRFZGl0O1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==