!function e(t,i,n){function o(s,r){if(!i[s]){if(!t[s]){var d="function"==typeof require&&require;if(!r&&d)return d(s,!0);if(l)return l(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var l="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e){!function(){function t(){new i($("#container"))}var i=e("./classes/App");t()}()},{"./classes/App":2}],2:[function(e,t){t.exports=function(){function t(e){console.log("[App] constructor"),this.$el=e,this.types=["postits"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new l,this.whiteboard=new i(this.$el),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),l=e("./DataHandler");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();new o(this.$el,e,this.position)},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e])},t.prototype.addToElementList=function(){console.log("[App] addToElementList"),this.elementList.push(this.dataHandler.getBoardElements()),this.i++,this.i==this.types.length&&this.addToBoard()},t.prototype.addToBoard=function(){console.log("[App] addToBoard");var e=this.elementList[0][0];console.log(e);for(var t in e){console.log(e[t].el_type);var i=e[t].el_type,n={};n.yPos=Number(e[t].posy),n.xPos=Number(e[t].posx);var l=e[t].id_on_board,s=e[t].id,r=e[t].content,t=new o(this.$el,i,n,l,r,s);bean.on(t,"remove-clicked",this.removeHandler.bind(this))}},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.id)},t}()},{"./DataHandler":3,"./Element":5,"./ElementPicker":6,"./Whiteboard":8}],3:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/",t=this,this.boardElements=[]}var t;return e.prototype.loadBoardElements=function(e){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/1",data:{content:"content"},success:function(e){t.boardElements.push(e),bean.fire(t,"data-success")}})},e.prototype.getBoardElements=function(){return console.log("[DataHandler] getBoardElements"),this.boardElements},e.prototype.removeBoardElement=function(e,t){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t);break;case"static":break;case"motion":}},e.prototype.removeElementById=function(e,t){console.log(this.url+e+"/delete/"+t),$.ajax({type:"GET",url:this.url+e+"/delete/"+t,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e}()},{}],4:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var l=n(o);this.$el.find("#"+this.elementId).append(l),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked",t),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],5:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Element] constructor"),this.$el=e,this.elementType=t,this.elementId=n,this.elementId=this.elementId?n:t+"_"+this.$el.find(".element-holder").length,this.position=i,this.createElementHolder()}var i=e("./EditMenu"),n=1,o=e("./elements/Postit"),l=e("./elements/Picture"),s=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={top:this.position.yPos,left:this.position.xPos,zIndex:0};this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new o,this.$el.find("#"+this.elementId).append(this.element.createPostit),this.bindHandler(this.$el.find("#"+this.elementId));break;case"static":this.element=new l(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createPicture),this.bindHandler(this.$el.find("#"+this.elementId)),this.element.initImageInputs();break;case"motion":this.element=new s(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createMotion(this.$el.find("#"+this.elementId))),this.bindHandler(this.$el.find("#"+this.elementId))}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),this.mouseDown=!1},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),"whiteboard"!==e.target.id&&this.$el.find("#element-picker").removeClass("hidden"),this.mouseDown=!0,this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++n,document.body.querySelector("#"+this.elementId).style.zIndex=n,document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler)},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new i(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();break;case"edit":console.log("EDITE"),this.element.confirm(),this.editMenu.toggleVisible();break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);document.body.querySelector("#"+this.elementId).style.left=t-this.offsetX+"px",document.body.querySelector("#"+this.elementId).style.top=i-this.offsetY+"px"}},t.prototype.mouseUpHandler=function(){console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler)},t}()},{"./EditMenu":4,"./elements/Motion":10,"./elements/Picture":12,"./elements/Postit":13}],6:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],7:[function(e,t){t.exports=function(){function e(e){console.log("[Participant] constructor"),this.$el=e;var t=e.find(".participant-input");if(console.log(t.val()),t.val()){var i=$("#settings-template").text(),n=Handlebars.compile(i),o={elements:[{}]};Handlebars.registerHelper("picker",function(){return new Handlebars.SafeString("<li id=''>"+t.val()+"<button class='btn btn-delete'>X</button></li>")});var l=n(o);this.$el.find("#participant-list").append($(l)),this.bindDeletebutton(),$(".participant-input").val("")}}return e.prototype.bindDeletebutton=function(){console.log("[Participant] bindDeletebutton"),this.deletebuton=document.querySelectorAll(".btn-delete"),this.deletebuton[this.deletebuton.length-1].addEventListener("click",this.deleteClickHandler.bind(this))},e.prototype.deleteClickHandler=function(e){console.log("[Participant] deleteClickHandler"),bean.fire(this,"delete",e.path[1])},e}()},{}],8:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e,this.createWhiteboard(),this.addWhiteboardSettings()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el)},t}()},{"./WhiteboardSettings":9}],9:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[WhiteboardSettings] constructor"),this.$el=e,this.$participants=t,this.$title=i,this.bindHandler()}var i=e("./Participant");return t.prototype.toggleVisible=function(){console.log("[WhiteboardSettings] toggleVisible"),this.$el.find("#hide").toggleClass("hidden"),this.$el.find("#show").toggleClass("hidden")},t.prototype.bindHandler=function(){console.log("[WhiteboardSettings] bindHandler"),this.$el.find(".hide-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".show-button").on("click",this.hideSettingsHandler.bind(this)),this.$el.find(".add-button").on("click",this.createParticipant.bind(this))},t.prototype.createParticipant=function(){console.log("[WhiteboardSettings] addClickedHandler"),this.participant=new i(this.$el),bean.on(this.participant,"delete",this.deleteParticipant.bind(this))},t.prototype.hideSettingsHandler=function(){console.log("[WhiteboardSettings] hideSettingsHandler"),this.$el.find(".hide_section").toggleClass("hidden"),this.$el.find(".show-button").toggleClass("hidden")},t.prototype.deleteParticipant=function(e){console.log("[WhiteboardSettings] deleteParticipant");var t=document.querySelector("#participant-list");t.removeChild(e)},t}()},{"./Participant":7}],10:[function(e,t){t.exports=function(){function t(e,t,i,n){console.log("[Motion] constructor"),this.$el=e,n&&(this.vidSrc=n)}var i=e("./MotionEdit");return t.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.vidSrc?this.vidSrc:"";var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Motion] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t).append(new i(this.vidSrc,t))},t.prototype.confirm=function(){console.log("[Motion] confirm"),this.vidSrc=this.$el.find("#"+this.elementId+" .motion-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Motion] endEdit"),this.$el.find("#"+this.elementId+" > .motion-edit").remove()},t}()},{"./MotionEdit":11}],11:[function(e,t){t.exports=function(){function e(e,i){console.log("[MotionEdit] constructor");var n=$("#motion-edit-template").text(),o=Handlebars.compile(n),l={};l.vidSrc=e;var s=o(l);return setTimeout(function(){t(i)},100),$(s)}function t(e){console.log("[Motion] initMotionInput");var t=document.querySelector("#"+e+"> input[type=file]");console.log(t),t.addEventListener("change",i)}function i(e){console.log("[Motion] playSelectedFile");var t=e.target.parentNode.id,i=document.querySelector("#"+t+"> .motion > video");console.log(i);var n=this.files[0],o=n.type,l=i.canPlayType(o);l=""===l?"no":l;var s="no"===l;if(!s&&URL){var r=URL.createObjectURL(n);i.src=r,i.autoPlay=!0,console.log(i)}}return e}()},{}],12:[function(e,t){t.exports=function(){function e(e,t,i,n){console.log("[Picture] constructor"),this.$el=e,console.log(e),n&&(this.imgSrc=n),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support")}function t(e){e.classList.add("image-input-js");var t=e.querySelector("input[type=file]");t.addEventListener("change",i);var n=document.createElement("div");n.classList.add("image-input-preview"),e.insertBefore(n,t)}function i(){if(this.files&&this.files[0]&&this.files[0].type.match("image.*")){var e=new FileReader,t=this.parentNode.querySelector(".image-input-preview");e.onload=function(e){var i=document.createElement("img");i.setAttribute("src",e.target.result),i.setAttribute("width",i.width),i.setAttribute("height",i.height),i.onload=function(){0===n.length?(t.style.backgroundImage="url('"+e.target.result+"')",t.style.height=i.width+"px",t.style.width=i.height+"px"):(alert(n.join("\n")),n=[])}},e.readAsDataURL(this.files[0])}else n.push("File is not a valid image")}var n=[];return e.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};i.imgSrc=this.txt?this.imgSrc:"";var n=t(i);return $(n)},e.prototype.initImageInputs=function(){console.log("[Picture] initImageinputs");var e=this.$el.find(".image-input")[0];t(e)},e.prototype.edit=function(){console.log("[Picture] edit")},e.prototype.confirm=function(){console.log("[Picture] confirm")},e.prototype.endEdit=function(){console.log("[Picture] endEdit")},e}()},{}],13:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":14}],14:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRGF0YUhhbmRsZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9FZGl0TWVudS5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9FbGVtZW50UGlja2VyLmpzIiwianMvc3JjL2NsYXNzZXMvUGFydGljaXBhbnQuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkLmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZFNldHRpbmdzLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uRWRpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1BpY3R1cmUuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Qb3N0aXQuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Qb3N0aXRFZGl0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxPQUFBLEtBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSx1QkFBQSxFQUFBLElBQUEsTUFBQSxHQUFBLEtBQUEsbUJBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLFdBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLFFBQUEsU0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsS0FBQSxHQUFBLFNBQUEsSUNBQSxXQUlBLFFBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxlQUhBLEdBQUEsR0FBQSxFQUFBLGdCQU1BLCtDQ1JBLEVBQUEsUUFBQSxXQU9BLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLE9BQUEsV0FDQSxLQUFBLEVBQUEsRUFDQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLEtBQUEsWUFBQSxHQUFBLEdBQ0EsS0FBQSxXQUFBLEdBQUEsR0FBQSxLQUFBLEtBQ0EsS0FBQSxjQUFBLEdBQUEsR0FBQSxLQUFBLEtBRUEsS0FBQSxHQUFBLEtBQUEsWUFBQSxlQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFdBQUEscUJBQUEsS0FBQSx5QkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsY0FBQSx5QkFBQSxLQUFBLDRCQUFBLEtBQUEsT0FFQSxLQUFBLGFBbkJBLEdBQUEsR0FBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEVBQUEsZ0JBaUVBLE9BOUNBLEdBQUEsVUFBQSx5QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGtDQUNBLEtBQUEsY0FBQSxnQkFDQSxLQUFBLGNBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsU0FBQSxHQUdBLEVBQUEsVUFBQSw0QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHFDQUNBLEtBQUEsY0FBQSxlQUNBLElBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFdBQUEsV0FBQSxRQUFBLElBQUEsbUJBQ0EsS0FBQSxHQUFBLEtBQUEsTUFBQSxNQUNBLEtBQUEsWUFBQSxrQkFBQSxLQUFBLE1BQUEsS0FJQSxFQUFBLFVBQUEsaUJBQUEsV0FBQSxRQUFBLElBQUEsMEJBQ0EsS0FBQSxZQUFBLEtBQUEsS0FBQSxZQUFBLG9CQUNBLEtBQUEsSUFDQSxLQUFBLEdBQUEsS0FBQSxNQUFBLFFBQ0EsS0FBQSxjQUlBLEVBQUEsVUFBQSxXQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLElBQUEsR0FBQSxLQUFBLFlBQUEsR0FBQSxFQUNBLFNBQUEsSUFBQSxFQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsQ0FDQSxRQUFBLElBQUEsRUFBQSxHQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxRQUNBLElBQ0EsR0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLEtBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxZQUNBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsUUFDQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLE1BQUEsR0FBQSxFQUFBLGlCQUFBLEtBQUEsY0FBQSxLQUFBLFNBSUEsRUFBQSxVQUFBLGNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLFlBQUEsbUJBQUEsRUFBQSxZQUFBLEVBQUEsS0FHQSwrRkN0RUEsRUFBQSxRQUFBLFdBRUEsUUFBQSxLQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsaUVBQ0EsRUFBQSxLQUNBLEtBQUEsaUJBSkEsR0FBQSxFQStDQSxPQXhDQSxHQUFBLFVBQUEsa0JBQUEsU0FBQSxHQUNBLE1BREEsU0FBQSxJQUFBLG1DQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxLQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLEVBQUEsY0FBQSxLQUFBLEdBQ0EsS0FBQSxLQUFBLEVBQUEsb0JBS0EsRUFBQSxVQUFBLGlCQUFBLFdBQ0EsTUFEQSxTQUFBLElBQUEsa0NBQ0EsS0FBQSxlQUdBLEVBQUEsVUFBQSxtQkFBQSxTQUFBLEVBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSxvQ0FDQSxHQUNBLElBQUEsVUFDQSxLQUFBLGtCQUFBLFVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUNBLEtBQUEsWUFLQSxFQUFBLFVBQUEsa0JBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFdBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsV0FBQSxFQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxhQUFBLE9BS0EsMkJDaERBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLHVCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFVBQ0EsU0FBQSxTQUFBLEtBQUEsYUFDQSxTQUFBLE9BQUEsS0FBQSxhQUNBLFNBQUEsU0FBQSxLQUFBLGdCQUdBLFlBQUEsZUFBQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLFdBQUEsaUJBQUEsS0FBQSxVQUNBLEVBQUEsV0FBQSxpQkFBQSxLQUFBLEtBRUEsT0FBQSxJQUFBLFlBQUEsV0FDQSxVQUFBLEVBQUEsSUFBQSxFQUFBLFVBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxZQUFBLFVBQ0EsS0FBQSxlQUNBLEtBQUEsZ0JBMEJBLE1BdkJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLGVBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsT0FBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsMkJBQ0EsZUFBQSxFQUFBLE9BQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxlQUFBLEdBQ0EsS0FBQSxvQkFDQSxDQUNBLEdBQUEsS0FDQSxHQUFBLFNBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxpQkFBQSxLQUtBLDJCQ3JEQSxFQUFBLFFBQUEsV0FTQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEseUJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQ0EsS0FBQSxVQUFBLEVBRUEsS0FBQSxVQURBLEtBQUEsVUFDQSxFQUVBLEVBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxPQUdBLEtBQUEsU0FBQSxFQUNBLEtBQUEsc0JBbEJBLEdBQUEsR0FBQSxFQUFBLGNBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxxQkFDQSxFQUFBLEVBQUEsc0JBQ0EsRUFBQSxFQUFBLG9CQXlIQSxPQXhHQSxHQUFBLFVBQUEsb0JBQUEsV0FBQSxRQUFBLElBQUEsaUNBQ0EsS0FBQSxJQUFBLEtBQUEsZUFBQSxPQUFBLDhDQUNBLEtBQUEsSUFBQSxLQUFBLGdDQUFBLEtBQUEsS0FBQSxLQUFBLFVBQ0EsSUFBQSxJQUNBLElBQUEsS0FBQSxTQUFBLEtBQ0EsS0FBQSxLQUFBLFNBQUEsS0FDQSxPQUFBLEVBRUEsTUFBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsSUFBQSxHQUNBLEtBQUEsaUJBQ0EsS0FBQSxpQkFHQSxFQUFBLFVBQUEsY0FBQSxXQUNBLE9BREEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsYUFDQSxJQUFBLFVBQ0EsS0FBQSxRQUFBLEdBQUEsR0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEtBQUEsUUFBQSxjQUNBLEtBQUEsWUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGVBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsUUFBQSxpQkFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxZQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGFBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLGFBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxjQUtBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLEdBQUEsWUFBQSxLQUFBLGlCQUFBLEtBQUEsT0FDQSxLQUFBLFdBQUEsR0FHQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw4QkFDQSxlQUFBLEVBQUEsT0FBQSxJQUNBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFlBQUEsVUFHQSxLQUFBLFdBQUEsRUFFQSxLQUFBLGtCQUFBLEtBQUEsaUJBQUEsS0FBQSxNQUNBLEtBQUEsZ0JBQUEsS0FBQSxlQUFBLEtBQUEsTUFFQSxLQUFBLFFBQUEsRUFBQSxRQUNBLEtBQUEsUUFBQSxFQUFBLFVBRUEsRUFDQSxTQUFBLEtBQUEsY0FBQSxJQUFBLEtBQUEsV0FBQSxNQUFBLE9BQUEsRUFFQSxTQUFBLEtBQUEsaUJBQUEsWUFBQSxLQUFBLG1CQUNBLFNBQUEsS0FBQSxpQkFBQSxVQUFBLEtBQUEsa0JBR0EsRUFBQSxVQUFBLGVBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxTQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxXQUNBLEtBQUEsR0FBQSxLQUFBLFNBQUEsZUFBQSxLQUFBLG1CQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxTQUFBLGlCQUFBLEtBQUEscUJBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxtQkFBQSxXQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLFFBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxZQUdBLEVBQUEsVUFBQSxxQkFBQSxTQUFBLEdBQ0EsT0FEQSxRQUFBLElBQUEsa0NBQ0EsRUFBQSxVQUNBLElBQUEsU0FDQSxLQUFBLFNBQUEsZ0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLFdBQUEsUUFDQSxNQUNBLEtBQUEsT0FBQSxRQUFBLElBQUEsU0FDQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsZUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsa0JBSUEsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FDQSxHQURBLFFBQUEsSUFBQSw4QkFDQSxLQUFBLGFBQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUVBLFVBQUEsS0FBQSxjQUFBLElBQUEsS0FBQSxXQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsUUFBQSxLQUNBLFNBQUEsS0FBQSxjQUFBLElBQUEsS0FBQSxXQUFBLE1BQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxPQUlBLEVBQUEsVUFBQSxlQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUVBLEtBQUEsV0FBQSxFQUVBLFNBQUEsS0FBQSxvQkFBQSxZQUFBLEtBQUEsbUJBQ0EsU0FBQSxLQUFBLG9CQUFBLFVBQUEsS0FBQSxrQkFHQSwrR0MvSEEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLCtCQUNBLEtBQUEsSUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLDRCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFdBQ0EsUUFBQSxVQUFBLEtBQUEsWUFDQSxRQUFBLFNBQUEsS0FBQSxVQUNBLFFBQUEsU0FBQSxLQUFBLFVBR0EsWUFBQSxlQUFBLFNBQUEsV0FDQSxHQUFBLEdBQUEsV0FBQSxpQkFBQSxLQUFBLFNBQ0EsRUFBQSxXQUFBLGlCQUFBLEtBQUEsS0FFQSxPQUFBLElBQUEsWUFBQSxXQUNBLFVBQUEsRUFBQSxJQUFBLEVBQUEsVUFJQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLGVBQUEsT0FBQSxFQUFBLElBQ0EsS0FBQSxnQkFDQSxLQUFBLGNBdUJBLE1BcEJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsOEJBQ0EsSUFBQSxJQUNBLElBQUEsRUFDQSxLQUFBLEVBRUEsTUFBQSxJQUFBLEtBQUEsbUJBQUEsSUFBQSxJQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLCtCQUNBLEtBQUEsSUFBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsZ0NBQ0EsS0FBQSxLQUFBLEtBQUEseUJBQUEsRUFBQSxPQUFBLEtBR0EsMkJDakRBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLHFCQUVBLElBREEsUUFBQSxJQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxzQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsR0FBQSxjQUNBLFlBQUEsZUFBQSxTQUFBLFdBQ0EsTUFBQSxJQUFBLFlBQUEsV0FDQSxhQUFBLEVBQUEsTUFBQSxtREFJQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE1BQUEsSUFBQSxLQUFBLHFCQUFBLE9BQUEsRUFBQSxJQUNBLEtBQUEsbUJBQ0EsRUFBQSxzQkFBQSxJQUFBLEtBYUEsTUFUQSxHQUFBLFVBQUEsaUJBQUEsV0FBQSxRQUFBLElBQUEsa0NBQ0EsS0FBQSxZQUFBLFNBQUEsaUJBQUEsZUFDQSxLQUFBLFlBQUEsS0FBQSxZQUFBLE9BQUEsR0FBQSxpQkFBQSxRQUFBLEtBQUEsbUJBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxtQkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLG9DQUNBLEtBQUEsS0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLEtBR0EsMkJDaENBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLElBQUEsRUFDQSxLQUFBLG1CQUNBLEtBQUEsd0JBTEEsR0FBQSxHQUFBLEVBQUEsdUJBaUNBLE9BeEJBLEdBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLE1BQUEsS0FBQSxJQUFBLE9BQUEsK0JBQ0EsS0FBQSxlQUdBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsTUFBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLElBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLFNBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLElBQUEsU0FBQSxJQUNBLElBQ0EsR0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQ0EsZUFBQSxFQUFBLE9BQUEsSUFDQSxLQUFBLEtBQUEsS0FBQSxxQkFBQSxJQUlBLEVBQUEsVUFBQSxzQkFBQSxXQUFBLFFBQUEsSUFBQSxzQ0FDQSxLQUFBLG1CQUFBLEdBQUEsR0FBQSxLQUFBLE1BR0EsbURDbkNBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsb0NBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxjQUFBLEVBQ0EsS0FBQSxPQUFBLEVBQ0EsS0FBQSxjQVBBLEdBQUEsR0FBQSxFQUFBLGdCQXFDQSxPQTFCQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSxzQ0FDQSxLQUFBLElBQUEsS0FBQSxTQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxTQUFBLFlBQUEsV0FHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSxvQ0FDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsS0FBQSxvQkFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsZ0JBQUEsR0FBQSxRQUFBLEtBQUEsb0JBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLEtBQUEsa0JBQUEsS0FBQSxRQUVBLEVBQUEsVUFBQSxrQkFBQSxXQUFBLFFBQUEsSUFBQSwwQ0FDQSxLQUFBLFlBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLEdBQUEsS0FBQSxZQUFBLFNBQUEsS0FBQSxrQkFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLG9CQUFBLFdBQUEsUUFBQSxJQUFBLDRDQUNBLEtBQUEsSUFBQSxLQUFBLGlCQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxnQkFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLGtCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEseUNBQ0EsSUFBQSxHQUFBLFNBQUEsY0FBQSxvQkFDQSxHQUFBLFlBQUEsSUFJQSw2Q0N0Q0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHdCQUNBLEtBQUEsSUFBQSxFQUNBLElBQ0EsS0FBQSxPQUFBLEdBTkEsR0FBQSxHQUFBLEVBQUEsZUFnREEsT0FyQ0EsR0FBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEsdUJBQ0EsSUFBQSxHQUFBLEVBQUEsb0JBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxPQURBLEtBQUEsT0FDQSxLQUFBLE9BRUEsRUFHQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FBQSxJQUlBLEVBQUEsVUFBQSxLQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSxpQkFFQSxLQUFBLElBQUEsRUFDQSxLQUFBLFVBQUEsRUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsS0FBQSxPQUFBLEtBT0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxPQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLGlCQUFBLE1BQ0EsS0FBQSxXQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLG9CQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLFVBSUEsNkNDakRBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDJCQUNBLElBQUEsR0FBQSxFQUFBLHlCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUNBLEdBQUEsT0FBQSxDQUVBLElBQUEsR0FBQSxFQUFBLEVBSUEsT0FIQSxZQUFBLFdBQUEsRUFBQSxJQUNBLEtBRUEsRUFBQSxHQUlBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwyQkFDQSxJQUFBLEdBQUEsU0FBQSxjQUFBLElBQUEsRUFBQSxxQkFDQSxTQUFBLElBQUEsR0FDQSxFQUFBLGlCQUFBLFNBQUEsR0FLQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsSUFBQSxHQUFBLEVBQUEsT0FBQSxXQUFBLEdBQ0EsRUFBQSxTQUFBLGNBQUEsSUFBQSxFQUFBLG9CQUNBLFNBQUEsSUFBQSxFQUNBLElBQUEsR0FBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsWUFBQSxFQUNBLEdBQUEsS0FBQSxFQUFBLEtBQUEsQ0FDQSxJQUNBLEdBQUEsT0FBQSxDQUVBLEtBQUEsR0FHQSxJQUFBLENBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQUEsRUFDQSxHQUFBLElBQUEsRUFDQSxFQUFBLFVBQUEsRUFFQSxRQUFBLElBQUEsSUFLQSxNQUFBLDZCQ2hEQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEseUJBQ0EsS0FBQSxJQUFBLEVBQ0EsUUFBQSxJQUFBLEdBQ0EsSUFDQSxLQUFBLE9BQUEsR0FJQSxPQUFBLE1BQ0EsT0FBQSxZQUNBLE9BQUEsVUFDQSxPQUFBLE1BRUEsUUFBQSxJQUFBLHFCQTBCQSxRQUFBLEdBQUEsR0FDQSxFQUFBLFVBQUEsSUFBQSxpQkFFQSxJQUFBLEdBQUEsRUFBQSxjQUFBLG1CQUNBLEdBQUEsaUJBQUEsU0FBQSxFQUVBLElBQUEsR0FBQSxTQUFBLGNBQUEsTUFDQSxHQUFBLFVBQUEsSUFBQSx1QkFHQSxFQUFBLGFBQUEsRUFBQSxHQUdBLFFBQUEsS0FFQSxHQUNBLEtBQUEsT0FDQSxLQUFBLE1BQUEsSUFDQSxLQUFBLE1BQUEsR0FBQSxLQUFBLE1BQUEsV0FDQSxDQUNBLEdBQUEsR0FBQSxHQUFBLFlBQ0EsRUFBQSxLQUFBLFdBQUEsY0FBQSx1QkFFQSxHQUFBLE9BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsTUFFQSxHQUFBLGFBQUEsTUFBQSxFQUFBLE9BQUEsUUFDQSxFQUFBLGFBQUEsUUFBQSxFQUFBLE9BQ0EsRUFBQSxhQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxXQUVBLElBQUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxnQkFBQSxRQUFBLEVBQUEsT0FBQSxPQUFBLEtBQ0EsRUFBQSxNQUFBLE9BQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxNQUFBLE1BQUEsRUFBQSxPQUFBLE9BR0EsTUFBQSxFQUFBLEtBQUEsT0FDQSxRQU1BLEVBQUEsY0FBQSxLQUFBLE1BQUEsUUFHQSxHQUFBLEtBQUEsNkJBeEZBLEdBQUEsS0E2R0EsT0F6RkEsR0FBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEseUJBQ0EsSUFBQSxHQUFBLEVBQUEscUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxPQURBLEtBQUEsSUFDQSxLQUFBLE9BRUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FBQSxJQUtBLEVBQUEsVUFBQSxnQkFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsZ0JBQUEsRUFDQSxHQUFBLElBOERBLEVBQUEsVUFBQSxLQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLHNCQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLHNCQUdBLDRCQzlHQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsd0JBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxNQUNBLEtBQUEsSUFBQSxpQkFMQSxHQUFBLEdBQUEsRUFBQSxlQW9DQSxPQTNCQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx3QkFDQSxJQUFBLEdBQUEsRUFBQSxvQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsS0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBR0EsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxrQkFBQSxZQUFBLFVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEtBQUEsT0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsaUJBQUEsTUFDQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsa0JBQUEsU0FBQSxVQUFBLEtBQUEsS0FBQSxLQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsa0JBQUEsWUFBQSxXQUdBLDZDQ3RDQSxFQUFBLFFBQUEsV0FFQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsSUFBQSxHQUFBLEVBQUEseUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxJQUFBLENBRUEsSUFBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEdBQUEsR0FJQSxNQUFBIiwiZmlsZSI6InNjcmlwdC5kaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKXtcblxuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9jbGFzc2VzL0FwcCcpO1xuXG5cdGZ1bmN0aW9uIGluaXQoKcKge1xuXHRcdG5ldyBBcHAoJCgnI2NvbnRhaW5lcicpKTtcblx0fVxuXG5cdGluaXQoKTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBXaGl0ZWJvYXJkID0gcmVxdWlyZSgnLi9XaGl0ZWJvYXJkJyk7XG5cdHZhciBFbGVtZW50UGlja2VyID0gcmVxdWlyZSgnLi9FbGVtZW50UGlja2VyJyk7XG5cdHZhciBFbGVtZW50ID0gcmVxdWlyZSgnLi9FbGVtZW50Jyk7XG5cdHZhciBEYXRhSGFuZGxlciA9IHJlcXVpcmUoJy4vRGF0YUhhbmRsZXInKTtcblxuXHRmdW5jdGlvbiBBcHAoJGVsKSB7IGNvbnNvbGUubG9nKCdbQXBwXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMudHlwZXMgPSBbJ3Bvc3RpdHMnXTtcblx0XHR0aGlzLmkgPSAwO1xuXHRcdHRoaXMuZWxlbWVudExpc3QgPSBbXTtcblx0XHR0aGlzLnBvc2l0aW9uID0ge307XG5cdFx0dGhpcy5kYXRhSGFuZGxlciA9IG5ldyBEYXRhSGFuZGxlcigpO1xuXHRcdHRoaXMud2hpdGVib2FyZCA9IG5ldyBXaGl0ZWJvYXJkKHRoaXMuJGVsKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIgPSBuZXcgRWxlbWVudFBpY2tlcih0aGlzLiRlbCk7XG5cdFx0Ly9MVUlTVEVSRU5cblx0XHRiZWFuLm9uKHRoaXMuZGF0YUhhbmRsZXIsIFwiZGF0YS1zdWNjZXNzXCIsIHRoaXMuYWRkVG9FbGVtZW50TGlzdC5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMud2hpdGVib2FyZCwgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgdGhpcy53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVsZW1lbnRQaWNrZXIsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCB0aGlzLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQvL1VJVFZPRVJFTlxuXHRcdHRoaXMuYnVpbGRCb2FyZCgpO1xuXHR9XG5cblx0QXBwLnByb3RvdHlwZS53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSB3aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci5zZXRMb2NhdGlvbihldmVudC54UG9zLCBldmVudC55UG9zKTtcblx0XHR0aGlzLnBvc2l0aW9uID0gZXZlbnQ7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBlbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXInKTsgXG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnRvZ2dsZVZpc2libGUoKTtcblx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLGV2ZW50LHRoaXMucG9zaXRpb24pO1xuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYnVpbGRCb2FyZCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbQXBwXSBidWlsZEJvYXJkJyk7XG5cdFx0Zm9yKHZhciB0eXBlIGluIHRoaXMudHlwZXMpIHtcbiAgXHRcdFx0dGhpcy5kYXRhSGFuZGxlci5sb2FkQm9hcmRFbGVtZW50cyh0aGlzLnR5cGVzW3R5cGVdKTtcblx0XHR9XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5hZGRUb0VsZW1lbnRMaXN0ID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gYWRkVG9FbGVtZW50TGlzdCcpO1xuXHRcdHRoaXMuZWxlbWVudExpc3QucHVzaCh0aGlzLmRhdGFIYW5kbGVyLmdldEJvYXJkRWxlbWVudHMoKSk7XG5cdFx0dGhpcy5pKys7XG5cdFx0aWYodGhpcy5pID09IHRoaXMudHlwZXMubGVuZ3RoKXtcblx0XHRcdHRoaXMuYWRkVG9Cb2FyZCgpO1xuXHRcdH1cblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmFkZFRvQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYWRkVG9Cb2FyZCcpOyBcblx0XHR2YXIgbGlzdCA9IHRoaXMuZWxlbWVudExpc3RbMF1bMF07XG5cdFx0Y29uc29sZS5sb2cobGlzdCk7XG5cdFx0Zm9yKHZhciBlbGVtZW50IGluIGxpc3QpIHtcblx0XHRcdGNvbnNvbGUubG9nKGxpc3RbZWxlbWVudF0uZWxfdHlwZSk7XG4gIFx0XHRcdHZhciB0eXBlID0gbGlzdFtlbGVtZW50XS5lbF90eXBlO1xuICBcdFx0XHR2YXIgcG9zaXRpb24gPSB7fTtcbiAgXHRcdFx0cG9zaXRpb24ueVBvcyA9IE51bWJlcihsaXN0W2VsZW1lbnRdLnBvc3kpO1xuICBcdFx0XHRwb3NpdGlvbi54UG9zID0gTnVtYmVyKGxpc3RbZWxlbWVudF0ucG9zeCk7XG4gIFx0XHRcdHZhciBlbGVtZW50SWQgPSBsaXN0W2VsZW1lbnRdLmlkX29uX2JvYXJkO1xuICBcdFx0XHR2YXIgaWQgPSBsaXN0W2VsZW1lbnRdLmlkO1xuICBcdFx0XHR2YXIgY29udGVudCA9IGxpc3RbZWxlbWVudF0uY29udGVudDtcbiAgXHRcdFx0dmFyIGVsZW1lbnQgPSBuZXcgRWxlbWVudCh0aGlzLiRlbCx0eXBlLHBvc2l0aW9uLGVsZW1lbnRJZCxjb250ZW50LGlkKTtcbiAgXHRcdFx0YmVhbi5vbihlbGVtZW50LCBcInJlbW92ZS1jbGlja2VkXCIsIHRoaXMucmVtb3ZlSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR9XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5yZW1vdmVIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0FwcF0gcmVtb3ZlSGFuZGxlcicpOyBcblx0XHR0aGlzLmRhdGFIYW5kbGVyLnJlbW92ZUJvYXJkRWxlbWVudChldmVudC5lbGVtZW50VHlwZSwgZXZlbnQuaWQpO1xuXHR9O1xuXG5cdHJldHVybiBBcHA7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIHRoYXQ7XG5cdGZ1bmN0aW9uIERhdGFIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMudXJsID0gXCJodHRwOi8vbG9jYWxob3N0Ojg4ODgvY3AzL3doaXRlYm9hcmQvd2hpdGVib2FyZC9hcGkvaW5kZXgucGhwL1wiO1xuXHRcdHRoYXQgPSB0aGlzO1xuXHRcdHRoaXMuYm9hcmRFbGVtZW50cyA9IFtdO1xuXHR9XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmxvYWRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24odHlwZSl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIGxvYWRCb2FyZEVsZW1lbnRzJyk7XG5cdFx0cmV0dXJuICQuYWpheCh7XG5cdCAgXHRcdFx0XHR0eXBlOiBcIkdFVFwiLFxuXHQgIFx0XHRcdFx0dXJsOiB0aGlzLnVybCt0eXBlKycvMScsXG5cdCAgXHRcdFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdFx0XHR0aGF0LmJvYXJkRWxlbWVudHMucHVzaChkYXRhKTtcblx0ICBcdFx0XHRcdFx0YmVhbi5maXJlKHRoYXQsIFwiZGF0YS1zdWNjZXNzXCIpO1xuXHQgIFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUuZ2V0Qm9hcmRFbGVtZW50cyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIGdldEJvYXJkRWxlbWVudHMnKTtcblx0XHRyZXR1cm4gdGhpcy5ib2FyZEVsZW1lbnRzO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5yZW1vdmVCb2FyZEVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIHJlbW92ZUJvYXJkRWxlbWVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMucmVtb3ZlRWxlbWVudEJ5SWQoJ3Bvc3RpdHMnLGlkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwic3RhdGljXCI6XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcIm1vdGlvblwiOlxuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5yZW1vdmVFbGVtZW50QnlJZCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkKXtcblx0XHRjb25zb2xlLmxvZyh0aGlzLnVybCtlbGVtZW50VHlwZSsnL2RlbGV0ZS8nK2lkKTtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIkdFVFwiLFxuXHQgIFx0XHR1cmw6IHRoaXMudXJsK2VsZW1lbnRUeXBlKycvZGVsZXRlLycraWQsXG5cdCAgXHRcdGRhdGE6IHtjb250ZW50OiAnY29udGVudCd9LFxuXHQgIFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhcImRlbGV0ZWQgPSBcIitkYXRhKTtcblx0ICBcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBEYXRhSGFuZGxlcjtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIEVkaXRNZW51KCRlbCxlbGVtZW50SWQpIHsgY29uc29sZS5sb2coJ1tFZGl0TWVudV0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI2VkaXQtbWVudS10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHtcblx0XHQgIGFjdGlvbnM6IFtcdFxuXHRcdCAgXHRcdFx0e2FjdGlvbklkOiBcImNhbmNlbFwiLCBuYW1lOiBcImFubnVsZWVyXCJ9LFxuXHRcdCAgXHRcdFx0e2FjdGlvbklkOiBcImVkaXRcIiwgbmFtZTogXCJ3aWp6aWdlblwifSxcblx0XHQgIFx0XHRcdHthY3Rpb25JZDogXCJyZW1vdmVcIiwgbmFtZTogXCJ2ZXJ3aWpkZXJlblwifVxuICBcdFx0XHRcdF1cbiAgXHRcdFx0fTtcblx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2VkaXRtZW51JywgZnVuY3Rpb24oKSB7XG5cdFx0XHQgIHZhciBhY3Rpb25JZCA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLmFjdGlvbklkKSxcblx0XHRcdCAgICAgIG5hbWUgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5uYW1lKTtcblxuXHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdCAgICBcIjxsaSBpZD1cIithY3Rpb25JZCtcIj5cIituYW1lK1wiPC9saT5cIlxuXHRcdFx0ICApO1xuXHRcdFx0fSk7XG5cdFx0XG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKGh0bWwpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgPiBwJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXJzKCk7XG5cdFx0dGhpcy50b2dnbGVWaXNpYmxlKCk7XG5cdH1cblxuXHRFZGl0TWVudS5wcm90b3R5cGUudG9nZ2xlVmlzaWJsZSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIHRvZ2dsZVZpc2libGUnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnID4gcCcpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnIC5lZGl0LW1lbnUnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLmJpbmRIYW5kbGVycyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGJpbmRIYW5kbGVycycpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgPiBwJykub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyBsaScpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVkaXRNZW51LnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWRpdE1lbnVdIGNsaWNrSGFuZGxlcicpO1xuXHRcdGlmKGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09IFwiZWRpdEJ1dHRvblwiKXtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcImVkaXQtY2xpY2tlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHR9ZWxzZXtcblx0XHRcdHZhciBhY3Rpb25FdmVudCA9IHt9O1xuICAgXHRcdFx0YWN0aW9uRXZlbnQudGFyZ2V0SWQgPSBldmVudC50YXJnZXQuaWQ7XG4gICBcdFx0XHRhY3Rpb25FdmVudC5lbGVtZW50SWQgPSB0aGlzLmVsZW1lbnRJZDtcblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcImFjdGlvbi1jbGlja2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHR9XG5cblx0fTtcblxuXHRyZXR1cm4gRWRpdE1lbnU7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgRWRpdE1lbnUgPSByZXF1aXJlKCcuL0VkaXRNZW51Jyk7XG4gICAgdmFyIHpJbmRleENvdW50ZXIgPSAxO1xuXHR2YXIgUG9zdGl0ID0gcmVxdWlyZSgnLi9lbGVtZW50cy9Qb3N0aXQnKTtcblx0dmFyIFBpY3R1cmUgPSByZXF1aXJlKCcuL2VsZW1lbnRzL1BpY3R1cmUnKTtcblx0dmFyIE1vdGlvbiA9IHJlcXVpcmUoJy4vZWxlbWVudHMvTW90aW9uJyk7XG5cblxuXHRmdW5jdGlvbiBFbGVtZW50KCRlbCxlbGVtZW50VHlwZSxwb3NpdGlvbixpZCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50VHlwZSA9IGVsZW1lbnRUeXBlO1xuXHRcdHRoaXMuZWxlbWVudElkID0gaWQ7XG5cdFx0aWYodGhpcy5lbGVtZW50SWQpe1xuXHRcdFx0dGhpcy5lbGVtZW50SWQgPSBpZDtcblx0XHR9ZWxzZSB7XG5cdFx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRUeXBlK1wiX1wiK3RoaXMuJGVsLmZpbmQoXCIuZWxlbWVudC1ob2xkZXJcIikubGVuZ3RoO1xuXHRcdH1cblxuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnRIb2xkZXIoKTtcblx0fVxuXG5cdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnRIb2xkZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNyZWF0ZUVsZW1lbnRIb2xkZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI3doaXRlYm9hcmRcIikuYXBwZW5kKFwiPHNlY3Rpb24gY2xhc3M9J2VsZW1lbnQtaG9sZGVyJz48L3NlY3Rpb24+XCIpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIuZWxlbWVudC1ob2xkZXI6bGFzdC1vZi10eXBlXCIpLmF0dHIoJ2lkJywgdGhpcy5lbGVtZW50SWQpO1xuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IHRoaXMucG9zaXRpb24ueVBvcyxcblx0XHRcdGxlZnQgOiB0aGlzLnBvc2l0aW9uLnhQb3MsXG5cdFx0XHR6SW5kZXg6IDBcblx0XHR9O1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcyhwb3NpdGlvbik7XG5cdFx0dGhpcy5jcmVhdGVFZGl0TWVudSgpO1xuXHRcdHRoaXMuY3JlYXRlRWxlbWVudCgpO1xuXHR9O1xuXG5cdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNyZWF0ZUVsZW1lbnQnKTtcblx0XHRzd2l0Y2godGhpcy5lbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQb3N0aXQoKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBvc3RpdCk7XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcInN0YXRpY1wiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQaWN0dXJlKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBpY3R1cmUpO1xuXHRcdCAgICBcdHRoaXMuYmluZEhhbmRsZXIodGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkpO1xuXHRcdCAgICBcdHRoaXMuZWxlbWVudC5pbml0SW1hZ2VJbnB1dHMoKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5lbGVtZW50ID0gbmV3IE1vdGlvbih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVNb3Rpb24odGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkpKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5vbignbW91c2Vkb3duJywgdGhpcy5tb3VzZWRvd25IYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMubW91c2VEb3duID0gZmFsc2U7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUubW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNlZG93bkhhbmRsZXInKVxuXHRcdGlmKGUudGFyZ2V0LmlkICE9PSBcIndoaXRlYm9hcmRcIil7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHRcdH1cblxuICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5tb3VzZU1vdmVIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX21vdXNlVXBIYW5kbGVyID0gdGhpcy5tb3VzZVVwSGFuZGxlci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IGUub2Zmc2V0WDtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gZS5vZmZzZXRZO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICArK3pJbmRleENvdW50ZXI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignIycrdGhpcy5lbGVtZW50SWQpLnN0eWxlLnpJbmRleCA9IHpJbmRleENvdW50ZXI7XG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWRpdE1lbnUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNyZWF0ZUVkaXRNZW51Jyk7XG5cdFx0dGhpcy5lZGl0TWVudSA9IG5ldyBFZGl0TWVudSh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24odGhpcy5lZGl0TWVudSwgXCJlZGl0LWNsaWNrZWRcIiwgdGhpcy5lZGl0Q2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVkaXRNZW51LCBcImFjdGlvbi1jbGlja2VkXCIsIHRoaXMuYWN0aW9uQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuZWRpdENsaWNrZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGVkaXRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZWxlbWVudC5lZGl0KHRoaXMuJGVsLCB0aGlzLmVsZW1lbnRJZCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuYWN0aW9uQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYWN0aW9uQ2xpY2tlZEhhbmRsZXInKTtcblx0XHRzd2l0Y2goZXZlbnQudGFyZ2V0SWQpIHtcblx0XHQgICAgY2FzZSBcInJlbW92ZVwiOlxuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoJyMnK2V2ZW50LmVsZW1lbnRJZCkucmVtb3ZlKCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcImVkaXRcIjogY29uc29sZS5sb2coXCJFRElURVwiKTtcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuY29uZmlybSgpO1xuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJjYW5jZWxcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuZW5kRWRpdCgpO1xuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZW1vdmVIYW5kbGVyJyk7XG4gICAgICAgIGlmKHRoaXMubW91c2VEb3duID09PSB0cnVlKXtcblxuICAgICAgICAgICAgdmFyIG1vdXNlWCA9IHBhcnNlSW50KGUuY2xpZW50WCk7XG4gICAgICAgICAgICB2YXIgbW91c2VZID0gcGFyc2VJbnQoZS5jbGllbnRZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcjJyt0aGlzLmVsZW1lbnRJZCkuc3R5bGUubGVmdCA9IChtb3VzZVggLSB0aGlzLm9mZnNldFgpICsgXCJweFwiO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcjJyt0aGlzLmVsZW1lbnRJZCkuc3R5bGUudG9wID0gKG1vdXNlWSAtIHRoaXMub2Zmc2V0WSkgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgRWxlbWVudC5wcm90b3R5cGUubW91c2VVcEhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZXVwSGFuZGxlcicpO1xuXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG4gICAgfTtcblxuXHRyZXR1cm4gRWxlbWVudDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cblx0ZnVuY3Rpb24gRWxlbWVudFBpY2tlcigkZWwpIHsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjZWxlbWVudC1waWNrZXItdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBlbGVtZW50czogW1x0XG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJwb3N0LWl0XCIsIG5hbWU6IFwicG9zdC1pdFwifSxcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcInN0YXRpY1wiLCBuYW1lOiBcImltYWdlXCJ9LFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwibW90aW9uXCIsIG5hbWU6IFwidmlkZW9cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdwaWNrZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdCAgdmFyIGVsZW1lbnQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5lbGVtZW50KSxcblx0XHRcdCAgICAgIG5hbWUgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5uYW1lKTtcblxuXHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdCAgICBcIjxsaSBpZD1cIitlbGVtZW50K1wiPlwiK25hbWUrXCI8L2xpPlwiXG5cdFx0XHQgICk7XG5cdFx0XHR9KTtcblx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoICQoaHRtbCkgKTtcblx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVyKCk7XG5cdH1cblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS50b2dnbGVWaXNpYmxlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2VsZW1lbnQtcGlja2VyJykudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbih4UG9zLCB5UG9zKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBzZXRMb2NhdGlvbicpO1xuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IHlQb3MsXG5cdFx0XHRsZWZ0IDogeFBvc1xuXHRcdH07XG5cdFx0dGhpcy4kZWwuZmluZChcIiNlbGVtZW50LXBpY2tlclwiKS5jc3MocG9zaXRpb24pO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyNlbGVtZW50LXBpY2tlciA+IHVsID4gbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gY2xpY2tIYW5kbGVyJyk7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCBldmVudC50YXJnZXQuaWQpO1xuXHR9O1xuXG5cdHJldHVybiBFbGVtZW50UGlja2VyO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gUGFydGljaXBhbnQoJGVsKXsgY29uc29sZS5sb2coJ1tQYXJ0aWNpcGFudF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR2YXIgaW5wdXQgPSAkZWwuZmluZCgnLnBhcnRpY2lwYW50LWlucHV0Jyk7XG5cdFx0Y29uc29sZS5sb2coaW5wdXQudmFsKCkpXG5cdFx0aWYoaW5wdXQudmFsKCkpe1xuXHRcdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNzZXR0aW5ncy10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHQgXHRcdHZhciBjb250ZXh0ID0geyBlbGVtZW50czogW3t9XX07XG5cdFx0XHRcdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BpY2tlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKFxuXHRcdFx0XHQgICAgXCI8bGkgaWQ9Jyc+XCIraW5wdXQudmFsKCkrXCI8YnV0dG9uIGNsYXNzPSdidG4gYnRuLWRlbGV0ZSc+WDwvYnV0dG9uPjwvbGk+XCJcblx0XHRcdFx0ICApO1xuXHRcdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRcdHRoaXMuJGVsLmZpbmQoXCIjcGFydGljaXBhbnQtbGlzdFwiKS5hcHBlbmQoJChodG1sKSk7XG5cdFx0XHR0aGlzLmJpbmREZWxldGVidXR0b24oKTtcblx0XHRcdCQoJy5wYXJ0aWNpcGFudC1pbnB1dCcpLnZhbChcIlwiKTtcblx0XHR9XG5cdH1cblxuXHRQYXJ0aWNpcGFudC5wcm90b3R5cGUuYmluZERlbGV0ZWJ1dHRvbiA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGFydGljaXBhbnRdIGJpbmREZWxldGVidXR0b24nKTtcblx0XHR0aGlzLmRlbGV0ZWJ1dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1kZWxldGUnKTtcblx0XHR0aGlzLmRlbGV0ZWJ1dG9uW3RoaXMuZGVsZXRlYnV0b24ubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5kZWxldGVDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0UGFydGljaXBhbnQucHJvdG90eXBlLmRlbGV0ZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coXCJbUGFydGljaXBhbnRdIGRlbGV0ZUNsaWNrSGFuZGxlclwiKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJkZWxldGVcIiwgZXZlbnQucGF0aFsxXSk7XG5cdH07XG5cblx0cmV0dXJuIFBhcnRpY2lwYW50O1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmRTZXR0aW5ncyA9IHJlcXVpcmUgKCcuL1doaXRlYm9hcmRTZXR0aW5ncycpO1xuXG5cdGZ1bmN0aW9uIFdoaXRlYm9hcmQoJGVsLCBib2FyZE5hbWUpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuY3JlYXRlV2hpdGVib2FyZCgpO1xuXHRcdHRoaXMuYWRkV2hpdGVib2FyZFNldHRpbmdzKCk7XG5cblx0fVxuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNyZWF0ZVdoaXRlYm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNyZWF0ZVdoaXRlYm9hcmQnKTtcblx0XHR0aGlzLmJvYXJkID0gdGhpcy4kZWwuYXBwZW5kKFwiPGRpdiBpZD0nd2hpdGVib2FyZCc+PC9kaXY+XCIpO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLmJvYXJkLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjbGlja0hhbmRsZXInKTtcblx0XHR2YXIgeFBvcyA9IGV2ZW50LnBhZ2VYIC0gdGhpcy4kZWwub2Zmc2V0KCkubGVmdDtcbiAgIFx0XHR2YXIgeVBvcyA9IGV2ZW50LnBhZ2VZIC0gdGhpcy4kZWwub2Zmc2V0KCkudG9wO1xuICAgXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICAgXHRcdHBvc2l0aW9uLnhQb3MgPSB4UG9zO1xuICAgXHRcdHBvc2l0aW9uLnlQb3MgPSB5UG9zO1xuXHRcdGlmKGV2ZW50LnRhcmdldC5pZCA9PT0gXCJ3aGl0ZWJvYXJkXCIpeyAvL2FuZGVycyBrbGlrdCBoaWogXCJkb29yXCIgZWxlbWVudGVuXG5cdFx0XHRiZWFuLmZpcmUodGhpcywgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgcG9zaXRpb24pO1xuXHRcdH1cblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5hZGRXaGl0ZWJvYXJkU2V0dGluZ3MgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGFkZFdoaXRlYm9hcmRTZXR0aW5ncycpO1xuXHRcdHRoaXMud2hpdGVib2FyZFNldHRpbmdzID0gbmV3IFdoaXRlYm9hcmRTZXR0aW5ncyh0aGlzLiRlbCk7XG5cdH07XG5cblx0cmV0dXJuIFdoaXRlYm9hcmQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIFBhcnRpY2lwYW50ID0gcmVxdWlyZSAoJy4vUGFydGljaXBhbnQnKTtcblxuXG5cdGZ1bmN0aW9uIFdoaXRlYm9hcmRTZXR0aW5ncygkZWwsICRwYXJ0aWNpcGFudHMsICR0aXRsZSkgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLiRwYXJ0aWNpcGFudHMgPSAkcGFydGljaXBhbnRzO1xuXHRcdHRoaXMuJHRpdGxlID0gJHRpdGxlO1xuXHRcdHRoaXMuYmluZEhhbmRsZXIoKTtcblxuXHR9XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS50b2dnbGVWaXNpYmxlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIHRvZ2dsZVZpc2libGUnKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjaGlkZScpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjc2hvdycpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGJpbmRIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmhpZGUtYnV0dG9uJykub24oJ2NsaWNrJywgdGhpcy5oaWRlU2V0dGluZ3NIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5zaG93LWJ1dHRvbicpLm9uKCdjbGljaycsIHRoaXMuaGlkZVNldHRpbmdzSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuYWRkLWJ1dHRvbicpLm9uKCdjbGljaycsIHRoaXMuY3JlYXRlUGFydGljaXBhbnQuYmluZCh0aGlzKSk7XG5cdH07XG5cdFdoaXRlYm9hcmRTZXR0aW5ncy5wcm90b3R5cGUuY3JlYXRlUGFydGljaXBhbnQgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBhZGRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMucGFydGljaXBhbnQgPSBuZXcgUGFydGljaXBhbnQodGhpcy4kZWwpO1xuXHRcdGJlYW4ub24odGhpcy5wYXJ0aWNpcGFudCwgXCJkZWxldGVcIiwgdGhpcy5kZWxldGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmhpZGVTZXR0aW5nc0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZFNldHRpbmdzXSBoaWRlU2V0dGluZ3NIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnLmhpZGVfc2VjdGlvbicpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0XHR0aGlzLiRlbC5maW5kKCcuc2hvdy1idXR0b24nKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdH07XG5cdFxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmRlbGV0ZVBhcnRpY2lwYW50ID0gZnVuY3Rpb24ocGFydGljaXBhbnQpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGRlbGV0ZVBhcnRpY2lwYW50Jyk7XG5cdFx0dmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhcnRpY2lwYW50LWxpc3QnKTtcblx0XHRlbC5yZW1vdmVDaGlsZChwYXJ0aWNpcGFudCk7XG5cdFx0cmV0dXJuO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkU2V0dGluZ3M7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIE1vdGlvbkVkaXQgPSByZXF1aXJlKCcuL01vdGlvbkVkaXQnKTtcblxuXG5cdGZ1bmN0aW9uIE1vdGlvbigkZWwseFBvcyx5UG9zLHZpZFNyYykgeyBjb25zb2xlLmxvZygnW01vdGlvbl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHRpZih2aWRTcmMpe1xuXHRcdHRoaXMudmlkU3JjID0gdmlkU3JjO1xuXHRcdH07XG5cdFx0XG5cdH1cblxuXHRNb3Rpb24ucHJvdG90eXBlLmNyZWF0ZU1vdGlvbiA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjcmVhdE1vdGlvbicpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjbW90aW9uLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnZpZFNyYyl7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9IHRoaXMudmlkU3JjO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC52aWRTcmMgPSBcIlwiO1xuXHRcdH1cblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuKCQoaHRtbCkpO1xuXHRcdFxuXHR9O1xuXHRcblx0TW90aW9uLnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7ICBjb25zb2xlLmxvZygnW01vdGlvbl0gZWRpdCcpO1xuXG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHRcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBNb3Rpb25FZGl0KHRoaXMudmlkU3JjLCBlbGVtZW50SWQpKTtcblxuXHR9O1xuXG5cblxuXG5cdE1vdGlvbi5wcm90b3R5cGUuY29uZmlybSA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbTW90aW9uXSBjb25maXJtJyk7XG5cdFx0dGhpcy52aWRTcmMgPSB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiIC5tb3Rpb24tZWRpdFwiKS52YWwoKTtcblx0XHR0aGlzLmVuZEVkaXQoKTtcblx0fTtcblxuXHRNb3Rpb24ucHJvdG90eXBlLmVuZEVkaXQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW01vdGlvbl0gZW5kRWRpdCcpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAubW90aW9uLWVkaXRcIikucmVtb3ZlKCk7XG5cdH07XG5cblxuXHRyZXR1cm4gTW90aW9uO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gTW90aW9uRWRpdCh2aWRTcmMsIGVsZW1lbnRJZCkgeyBjb25zb2xlLmxvZygnW01vdGlvbkVkaXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNtb3Rpb24tZWRpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudmlkU3JjID0gdmlkU3JjO1xuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aW5pdE1vdGlvbklucHV0KGVsZW1lbnRJZCk7XG4gXHRcdH0sIDEwMCk7XG5cblx0XHRyZXR1cm4gKCQoaHRtbCkpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0TW90aW9uSW5wdXQoZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGluaXRNb3Rpb25JbnB1dCcpO1xuXHRcdHZhciBmaWxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytlbGVtZW50SWQrJz4gaW5wdXRbdHlwZT1maWxlXScpO1xuXHRcdGNvbnNvbGUubG9nKGZpbGVJbnB1dCk7XG5cdCAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcGxheVNlbGVjdGVkRmlsZSk7XG5cblx0fVxuXG5cbiBcdGZ1bmN0aW9uIHBsYXlTZWxlY3RlZEZpbGUoZXZlbnQpIHsgY29uc29sZS5sb2coJ1tNb3Rpb25dIHBsYXlTZWxlY3RlZEZpbGUnKTtcblx0XHRcdHZhciBlbGVtZW50SWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZDtcblx0XHRcdHZhciB2aWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytlbGVtZW50SWQrJz4gLm1vdGlvbiA+IHZpZGVvJyk7XG5cdFx0XHRjb25zb2xlLmxvZyh2aWQpO1xuICAgICAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWxlLnR5cGU7XG4gICAgICAgICAgICB2YXIgY2FuUGxheSA9IHZpZC5jYW5QbGF5VHlwZSh0eXBlKTtcbiAgICAgICAgICAgIGNhblBsYXkgPSAoY2FuUGxheSA9PT0gJycgPyAnbm8nIDogY2FuUGxheSk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdDYW4gcGxheSB0eXBlIFwiJyArIHR5cGUgKyAnXCI6ICcgKyBjYW5QbGF5O1xuICAgICAgICAgICAgdmFyIGlzRXJyb3IgPSBjYW5QbGF5ID09PSAnbm8nO1xuXG4gICAgICAgICAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKFVSTCl7XG4gICAgICAgICAgICB2YXIgZmlsZVVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgICAgICB2aWQuc3JjID0gZmlsZVVSTDtcbiAgICAgICAgICAgIHZpZC5hdXRvUGxheSA9IHRydWU7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZCk7XG4gICAgICAgIFx0fVxuICAgIFxuXHR9O1xuXHRcblx0cmV0dXJuIE1vdGlvbkVkaXQ7XG5cbn0pKCk7XG5cblxuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIGVycm9ycyA9IFtdO1xuXG5cdGZ1bmN0aW9uIFBpY3R1cmUoJGVsLHhQb3MseVBvcywgaW1nU3JjKSB7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHRjb25zb2xlLmxvZygkZWwpO1xuXHRcdGlmKGltZ1NyYyl7XG5cdFx0dGhpcy5pbWdTcmMgPSBpbWdTcmM7XG5cdFx0fTtcblxuXHRcdGlmIChcblx0XHRcdHdpbmRvdy5GaWxlICYmIFxuXHRcdFx0d2luZG93LkZpbGVSZWFkZXIgJiYgXG5cdFx0XHR3aW5kb3cuRmlsZUxpc3QgJiYgXG5cdFx0XHR3aW5kb3cuQmxvYlxuXHRcdCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJGdWxsIGZpbGUgc3VwcG9ydFwiKTtcblxuXHRcdH07XG5cdH1cblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jcmVhdGVQaWN0dXJlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjcmVhdFBpY3R1cmUnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3BpY3R1cmUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblxuXHRcdGlmKHRoaXMudHh0KXtcblx0XHRcdGNvbnRleHQuaW1nU3JjID0gdGhpcy5pbWdTcmM7XG5cdFx0fWVsc2V7XG5cdFx0XHRjb250ZXh0LmltZ1NyYyA9IFwiXCI7XG5cdFx0fVxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuKCQoaHRtbCkpO1xuXG5cdH07XG5cblx0XG5cdFBpY3R1cmUucHJvdG90eXBlLmluaXRJbWFnZUlucHV0cz0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBpbml0SW1hZ2VpbnB1dHMnKTtcblx0XHRcdHZhciBpbWdJbnB1dHMgPSB0aGlzLiRlbC5maW5kKCcuaW1hZ2UtaW5wdXQnKVswXTtcblx0XHRcdGluaXRJbWFnZUltcHV0KGltZ0lucHV0cyk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbml0SW1hZ2VJbXB1dChlbCl7XG5cdFx0ZWwuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtaW5wdXQtanMnKTtcblxuXHRcdHZhciBmaWxlSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWZpbGVdJyk7XG5cdFx0ZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNyZWF0ZVRodW1iKTtcblx0XHRcblx0XHR2YXIgcHJldmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHByZXZpZXdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtaW5wdXQtcHJldmlldycpO1xuXG5cdFx0XG5cdFx0ZWwuaW5zZXJ0QmVmb3JlKHByZXZpZXdDb250YWluZXIsIGZpbGVJbnB1dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVRodW1iKGUpe1xuXG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5maWxlcyAmJiBcblx0XHRcdHRoaXMuZmlsZXNbMF0gJiYgXG5cdFx0XHR0aGlzLmZpbGVzWzBdLnR5cGUubWF0Y2goJ2ltYWdlLionKVxuXHRcdCkge1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgcHJldmlld0NvbnRhaW5lciA9IHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtaW5wdXQtcHJldmlldycpO1xuXG5cdFx0XHRyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuXHRcdFx0XHRpbWcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGltZy53aWR0aCk7XG5cdFx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGltZy5oZWlnaHQpO1xuXHRcdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0XHRcdGlmKGVycm9ycy5sZW5ndGggPT09IDApe1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIrIGUudGFyZ2V0LnJlc3VsdCArXCInKVwiO1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBpbWcud2lkdGgrXCJweFwiO1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGltZy5oZWlnaHQrXCJweFwiO1xuXG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRhbGVydChlcnJvcnMuam9pbihcIlxcblwiKSk7XG5cdFx0XHRcdFx0XHRlcnJvcnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcblx0XHRcdH1cblxuXHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1swXSk7XG5cblx0XHR9ZWxzZXtcblx0XHRcdGVycm9ycy5wdXNoKFwiRmlsZSBpcyBub3QgYSB2YWxpZCBpbWFnZVwiKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRXJyb3JzKCl7XG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA9PT0gMCl7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRQaWN0dXJlLnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gZWRpdCcpO1xuXHR9O1xuXG5cdFBpY3R1cmUucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGNvbmZpcm0nKTtcblx0fTtcblxuXHRQaWN0dXJlLnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBlbmRFZGl0Jyk7XG5cdH07XG5cblx0cmV0dXJuIFBpY3R1cmU7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgUG9zdGl0RWRpdCA9IHJlcXVpcmUoJy4vUG9zdGl0RWRpdCcpO1xuXG5cdGZ1bmN0aW9uIFBvc3RpdCh0eHQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy50eHQgPSB0eHQ7XG5cdFx0aWYoIXRoaXMudHh0KXtcblx0XHRcdHRoaXMudHh0ID0gXCJOaWV1d2UgUG9zdGl0XCI7XG5cdFx0fVxuXHR9XG5cblx0UG9zdGl0LnByb3RvdHlwZS5jcmVhdGVQb3N0aXQgPSBmdW5jdGlvbih0eHQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY3JlYXRlUG9zdGl0Jyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwb3N0aXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHRoaXMudHh0O1xuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmVkaXQgPSBmdW5jdGlvbigkZWwsZWxlbWVudElkKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGVkaXQnKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCtcIiA+IC5wb3N0aXQgPiBwXCIpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrZWxlbWVudElkKS5hcHBlbmQobmV3IFBvc3RpdEVkaXQodGhpcy50eHQpKTtcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLmNvbmZpcm0gPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY29uZmlybScpO1xuXHRcdHRoaXMudHh0ID0gdGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiAucG9zdGl0LWVkaXRcIikudmFsKCk7XG5cdFx0dGhpcy5lbmRFZGl0KCk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5lbmRFZGl0ID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGVuZEVkaXQnKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikuYWRkQ2xhc3MoXCJoaWRkZW5cIikudGV4dCh0aGlzLnR4dCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiA+IC5wb3N0aXQtZWRpdFwiKS5yZW1vdmUoKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkK1wiID4gLnBvc3RpdCA+IHBcIikudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdH07XG5cblx0cmV0dXJuIFBvc3RpdDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFBvc3RpdEVkaXQodHh0KSB7IGNvbnNvbGUubG9nKCdbUG9zdGl0RWRpdF0gY29uc3RydWN0b3InKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC1lZGl0LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Y29udGV4dC50eHQgPSB0eHQ7XG5cblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXG5cdFx0cmV0dXJuICgkKGh0bWwpKTtcblxuXHR9XG5cdFxuXHRyZXR1cm4gUG9zdGl0RWRpdDtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=