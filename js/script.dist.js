!function e(t,o,i){function n(l,c){if(!o[l]){if(!t[l]){var s="function"==typeof require&&require;if(!c&&s)return s(l,!0);if(r)return r(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var d=o[l]={exports:{}};t[l][0].call(d.exports,function(e){var o=t[l][1][e];return n(o?o:e)},d,d.exports,e,t,o,i)}return o[l].exports}for(var r="function"==typeof require&&require,l=0;l<i.length;l++)n(i[l]);return n}({1:[function(e){!function(){function t(){new o($("#container"))}var o=e("./classes/App");t()}()},{"./classes/App":2}],2:[function(e,t){t.exports=function(){function t(e){console.log("[App] constructor"),this.$el=e,this.whiteboard=new n(this.$el),this.whiteboard.createBlanc(),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.whiteboard.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this))}var o,i,n=e("./Whiteboard"),r=e("./elements/Postit"),l=e("./elements/PostitCreator");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler - position: X="+e.xPos+" Y="+e.yPos),o=e.xPos,i=e.yPos,console.log(o),console.log(i);var t={top:e.yPos,left:e.xPos};this.$el.find("#element-picker").css(t)},t.prototype.elementPickerClickedHandler=function(e){switch(console.log("[App] elementPickerClickedHandler - id = "+e),e){case"postit":console.log("postit gekozen");var t=new l(this.$el,o,i);bean.on(t,"create-postit-clicked",this.createPostitHandler.bind(this));break;case"image":console.log("image");break;case"video":console.log("video")}},t.prototype.createPostitHandler=function(e){console.log("[App] createPostitHandler");var t=new r(this.$el,o,i);t.createPostit(e)},t}()},{"./Whiteboard":4,"./elements/Postit":5,"./elements/PostitCreator":6}],3:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e,this.$el.find("#whiteboard").append("<div id='element-picker'><span id='postit'>post-it</span><span id='image'>image</span><span id='video'>video</span></div>"),this.$el.find("#element-picker").addClass("hidden"),this.bindClickHandlers()}return e.prototype.bindClickHandlers=function(){console.log("[ElementPicker] bindClickHandlers"),this.$el.find("span").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],4:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e}var o=e("./ElementPicker");return t.prototype.createBlanc=function(){console.log("[Whiteboard] createsBlanc"),this.$el.append("<article id='whiteboard'></article>"),this.addElementPicker(),this.bindClickHandler()},t.prototype.bindClickHandler=function(){console.log("[Whiteboard] bindClickHandler"),this.$el.find("#whiteboard").on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,o=e.pageY-this.$el.offset().top,i={};i.xPos=t,i.yPos=o,this.$el.find("#element-picker").toggleClass("hidden"),bean.fire(this,"whiteboard-clicked",i)},t.prototype.addElementPicker=function(){console.log("[Whiteboard] addElementPicker"),this.elementPicker=new o(this.$el)},t}()},{"./ElementPicker":3}],5:[function(e,t){t.exports=function(){function e(e,t,o){console.log("[Postit] constructor"),this.$el=e,this.xPos=t,this.yPos=o}return e.prototype.createPostit=function(e){console.log("[Postit] createPostit");var t=$("#postit-template").text(),o=Handlebars.compile(t),i={};i.text=e?e:"Nieuwe Postit";var n=o(i);$("#whiteboard").append($(n));var r={top:this.yPos,left:this.xPos},l=this.$el.find(".postit").length,c=this.$el.find(".postit").last().attr("id",l).css(r);this.bindClickHandlers(c)},e.prototype.bindClickHandlers=function(e){console.log("[Postit] bindClickHandlers"),e.find(".edit-button").on("click",this.editClickHandler.bind(this)),e.on("mousedown",this.mousedownHandler.bind(this))},e.prototype.editClickHandler=function(e){console.log("[Postit] clickHandler"),e.stopPropagation()},e.prototype.mousedownHandler=function(e){console.log("[Postit] mousedownHandler"),e.stopPropagation()},e}()},{}],6:[function(e,t){t.exports=function(){function t(e){console.log("[PostitCreator] constructor"),this.$el=e,this.creator()}e("./Postit");return t.prototype.creator=function(){console.log("[PostitCreator] creator"),this.$el.find("#whiteboard").append("<span id='postit-creator'><textarea id='postit-content' rows='4' cols='50'>textveld</textarea><p id='create'>aanmaken</p><p id='cancel'>annuleren</p></span>"),this.bindClickHandlers()},t.prototype.bindClickHandlers=function(){console.log("[PostitCreator] bindClickHandlers"),this.$el.find("#create").on("click",this.createClickHandler.bind(this)),this.$el.find("#cancel").on("click",this.cancelClickHandler.bind(this))},t.prototype.createClickHandler=function(e){console.log("[PostitCreator] createClickHandler"),e.stopPropagation();var t=this.$el.find("#postit-content").val();bean.fire(this,"create-postit-clicked",t),this.$el.find("#postit-creator").remove()},t.prototype.cancelClickHandler=function(e){console.log("[PostitCreator] cancelClickHandler"),e.stopPropagation(),this.$el.find("#postit-creator").remove()},t}()},{"./Postit":5}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRWxlbWVudFBpY2tlci5qcyIsImpzL3NyYy9jbGFzc2VzL1doaXRlYm9hcmQuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Qb3N0aXQuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Qb3N0aXRDcmVhdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxPQUFBLEtBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSx1QkFBQSxFQUFBLElBQUEsTUFBQSxHQUFBLEtBQUEsbUJBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLFdBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLFFBQUEsU0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsS0FBQSxHQUFBLFNBQUEsSUNBQSxXQUlBLFFBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxlQUhBLEdBQUEsR0FBQSxFQUFBLGdCQU1BLCtDQ1JBLEVBQUEsUUFBQSxXQVFBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLElBQUEsRUFFQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLFdBQUEsY0FHQSxLQUFBLEdBQUEsS0FBQSxXQUFBLHFCQUFBLEtBQUEseUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFdBQUEsY0FBQSx5QkFBQSxLQUFBLDRCQUFBLEtBQUEsT0FkQSxHQUdBLEdBQ0EsRUFKQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSwyQkFzREEsT0F0Q0EsR0FBQSxVQUFBLHlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsZ0RBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxLQUVBLFFBQUEsSUFBQSxHQUNBLFFBQUEsSUFBQSxFQUVBLElBQUEsSUFDQSxJQUFBLEVBQUEsS0FDQSxLQUFBLEVBQUEsS0FHQSxNQUFBLElBQUEsS0FBQSxtQkFBQSxJQUFBLElBR0EsRUFBQSxVQUFBLDRCQUFBLFNBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSw0Q0FBQSxHQUNBLEdBQ0EsSUFBQSxTQUNBLFFBQUEsSUFBQSxpQkFHQSxJQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQ0EsTUFBQSxHQUFBLEVBQUEsd0JBQUEsS0FBQSxvQkFBQSxLQUFBLE1BQ0EsTUFDQSxLQUFBLFFBQ0EsUUFBQSxJQUFBLFFBQ0EsTUFDQSxLQUFBLFFBQ0EsUUFBQSxJQUFBLFdBS0EsRUFBQSxVQUFBLG9CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUNBLEdBQUEsYUFBQSxJQUdBLDhGQzFEQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsZUFBQSxPQUFBLDZIQUNBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFNBQUEs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QUEsSUFBQSxLQUFBLG1CQUFBLFVBR0EsRUFBQSxVQUFBLG1CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsc0NBQ0EsRUFBQSxrQkFDQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxVQUdBIiwiZmlsZSI6InNjcmlwdC5kaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKXtcblxuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9jbGFzc2VzL0FwcCcpO1xuXG5cdGZ1bmN0aW9uIGluaXQoKcKge1xuXHRcdG5ldyBBcHAoJCgnI2NvbnRhaW5lcicpKTtcblx0fVxuXG5cdGluaXQoKTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBXaGl0ZWJvYXJkID0gcmVxdWlyZSgnLi9XaGl0ZWJvYXJkJyk7XG5cdHZhciBQb3N0aXQgPSByZXF1aXJlKCcuL2VsZW1lbnRzL1Bvc3RpdCcpO1xuXHR2YXIgUG9zdGl0Q3JlYXRvciA9IHJlcXVpcmUoJy4vZWxlbWVudHMvUG9zdGl0Q3JlYXRvcicpO1xuXHR2YXIgeFBvcztcblx0dmFyIHlQb3M7XG5cblx0ZnVuY3Rpb24gQXBwKCRlbCkgeyBjb25zb2xlLmxvZygnW0FwcF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblxuXHRcdHRoaXMud2hpdGVib2FyZCA9IG5ldyBXaGl0ZWJvYXJkKCB0aGlzLiRlbCApO1xuXHRcdHRoaXMud2hpdGVib2FyZC5jcmVhdGVCbGFuYygpO1xuXG5cdFx0Ly9MVUlTVEVSRU5cblx0XHRiZWFuLm9uKHRoaXMud2hpdGVib2FyZCwgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgdGhpcy53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLndoaXRlYm9hcmQuZWxlbWVudFBpY2tlciwgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIHRoaXMuZWxlbWVudFBpY2tlckNsaWNrZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXG5cdH1cblxuXHRBcHAucHJvdG90eXBlLndoaXRlYm9hcmRDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbQXBwXSB3aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIgLSBwb3NpdGlvbjogWD0nICsgZXZlbnQueFBvcyArXCIgWT1cIitldmVudC55UG9zICk7XG5cdFx0eFBvcyA9IGV2ZW50LnhQb3M7XG5cdFx0eVBvcyA9IGV2ZW50LnlQb3M7XG5cblx0XHRjb25zb2xlLmxvZyh4UG9zKTtcblx0XHRjb25zb2xlLmxvZyh5UG9zKTtcblxuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IGV2ZW50LnlQb3MsXG5cdFx0XHRsZWZ0IDogZXZlbnQueFBvc1xuXHRcdH07XG5cblx0XHR0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLmNzcyhwb3NpdGlvbik7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCkgeyBjb25zb2xlLmxvZygnW0FwcF0gZWxlbWVudFBpY2tlckNsaWNrZWRIYW5kbGVyIC0gaWQgPSAnICsgZXZlbnQgKTtcblx0XHRzd2l0Y2goZXZlbnQpIHtcblx0XHQgICAgY2FzZSBcInBvc3RpdFwiOlxuXHRcdCAgICBjb25zb2xlLmxvZyhcInBvc3RpdCBnZWtvemVuXCIpO1xuXHRcdCAgICAgICAgLy92YXIgcG9zdGl0ID0gbmV3IFBvc3RpdCh0aGlzLiRlbCx4UG9zLHlQb3MpO1xuXHRcdCAgICAgICAgLy9wb3N0aXQuY3JlYXRlUG9zdGl0KCk7XG5cdFx0ICAgICAgICB2YXIgcG9zdGl0Q3JlYXRvciA9IG5ldyBQb3N0aXRDcmVhdG9yKHRoaXMuJGVsLHhQb3MseVBvcyk7XG5cdFx0ICAgICAgICBiZWFuLm9uKHBvc3RpdENyZWF0b3IsIFwiY3JlYXRlLXBvc3RpdC1jbGlja2VkXCIsIHRoaXMuY3JlYXRlUG9zdGl0SGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwiaW1hZ2VcIjpcblx0XHQgICAgICAgIGNvbnNvbGUubG9nKFwiaW1hZ2VcIik7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcInZpZGVvXCI6XG5cdFx0ICAgICAgICBjb25zb2xlLmxvZyhcInZpZGVvXCIpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuY3JlYXRlUG9zdGl0SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbQXBwXSBjcmVhdGVQb3N0aXRIYW5kbGVyJyk7XG5cdFx0dmFyIHBvc3RpdCA9IG5ldyBQb3N0aXQodGhpcy4kZWwseFBvcyx5UG9zKTtcblx0XHRwb3N0aXQuY3JlYXRlUG9zdGl0KGV2ZW50KTtcblx0fTtcblxuXHRyZXR1cm4gQXBwO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblxuXHRmdW5jdGlvbiBFbGVtZW50UGlja2VyKCRlbCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLmFwcGVuZCggXCI8ZGl2IGlkPSdlbGVtZW50LXBpY2tlcic+PHNwYW4gaWQ9J3Bvc3RpdCc+cG9zdC1pdDwvc3Bhbj48c3BhbiBpZD0naW1hZ2UnPmltYWdlPC9zcGFuPjxzcGFuIGlkPSd2aWRlbyc+dmlkZW88L3NwYW4+PC9kaXY+XCIgKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI2VsZW1lbnQtcGlja2VyXCIpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xuXG5cdFx0dGhpcy5iaW5kQ2xpY2tIYW5kbGVycygpO1xuXHR9XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuYmluZENsaWNrSGFuZGxlcnMgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGJpbmRDbGlja0hhbmRsZXJzJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcInNwYW5cIikub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRQaWNrZXJdIGNsaWNrSGFuZGxlcicpO1xuXHRcdGJlYW4uZmlyZSh0aGlzLCBcImVsZW1lbnQtcGlja2VyLWNsaWNrZWRcIiwgZXZlbnQudGFyZ2V0LmlkKTsgXG5cdH07XG5cblx0cmV0dXJuIEVsZW1lbnRQaWNrZXI7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHQvL1RPRE86IElOU1RFTExJTkdFTiBLQURFUiBUT0VWT0VHRU4gVklBIEhBTkRMRUJBUlNcblx0dmFyIEVsZW1lbnRQaWNrZXIgPSByZXF1aXJlKCcuL0VsZW1lbnRQaWNrZXInKTtcblx0XG5cdGZ1bmN0aW9uIFdoaXRlYm9hcmQoJGVsKSB7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0fVxuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNyZWF0ZUJsYW5jID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjcmVhdGVzQmxhbmMnKTtcblx0XHR0aGlzLiRlbC5hcHBlbmQoIFwiPGFydGljbGUgaWQ9J3doaXRlYm9hcmQnPjwvYXJ0aWNsZT5cIiApO1xuXHRcdHRoaXMuYWRkRWxlbWVudFBpY2tlcigpO1xuXHRcdHRoaXMuYmluZENsaWNrSGFuZGxlcigpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmJpbmRDbGlja0hhbmRsZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGJpbmRDbGlja0hhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI3doaXRlYm9hcmRcIikub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNsaWNrSGFuZGxlcicpO1xuICAgXHRcdHZhciB4UG9zID0gZXZlbnQucGFnZVggLSB0aGlzLiRlbC5vZmZzZXQoKS5sZWZ0O1xuICAgXHRcdHZhciB5UG9zID0gZXZlbnQucGFnZVkgLSB0aGlzLiRlbC5vZmZzZXQoKS50b3A7XG4gICBcdFx0dmFyIHBvc2l0aW9uID0ge307XG4gICBcdFx0cG9zaXRpb24ueFBvcyA9IHhQb3M7XG4gICBcdFx0cG9zaXRpb24ueVBvcyA9IHlQb3M7XG5cdFx0XG5cdFx0dGhpcy4kZWwuZmluZChcIiNlbGVtZW50LXBpY2tlclwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblxuXHRcdGJlYW4uZmlyZSh0aGlzLCBcIndoaXRlYm9hcmQtY2xpY2tlZFwiLCBwb3NpdGlvbik7IFxuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmFkZEVsZW1lbnRQaWNrZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGFkZEVsZW1lbnRQaWNrZXInKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIgPSBuZXcgRWxlbWVudFBpY2tlciggdGhpcy4kZWwgKTtcblx0fTtcblxuXHRyZXR1cm4gV2hpdGVib2FyZDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIFBvc3RpdCgkZWwseFBvcyx5UG9zKSB7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMueFBvcyA9IHhQb3M7XG5cdFx0dGhpcy55UG9zID0geVBvcztcblx0fVxuXG5cdFBvc3RpdC5wcm90b3R5cGUuY3JlYXRlUG9zdGl0ID0gZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjcmVhdGVQb3N0aXQnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXG5cdFx0aWYodGV4dCl7XG5cdFx0XHRjb250ZXh0LnRleHQgPSB0ZXh0O1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC50ZXh0ID0gXCJOaWV1d2UgUG9zdGl0XCI7XG5cdFx0fVxuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblx0XHQkKCcjd2hpdGVib2FyZCcpLmFwcGVuZCggJChodG1sKSApO1xuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IHRoaXMueVBvcyxcblx0XHRcdGxlZnQgOiB0aGlzLnhQb3Ncblx0XHR9O1xuXHRcdHZhciBpZCA9IHRoaXMuJGVsLmZpbmQoXCIucG9zdGl0XCIpLmxlbmd0aDtcblx0XHR2YXIgJGxhc3RQb3N0aXQgPSB0aGlzLiRlbC5maW5kKCcucG9zdGl0JykubGFzdCgpLmF0dHIoJ2lkJywgaWQpLmNzcyhwb3NpdGlvbik7XG5cdFx0dGhpcy5iaW5kQ2xpY2tIYW5kbGVycygkbGFzdFBvc3RpdCk7XG5cdH07XG5cblx0XHRQb3N0aXQucHJvdG90eXBlLmJpbmRDbGlja0hhbmRsZXJzID0gZnVuY3Rpb24oJHBvc3RpdCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBiaW5kQ2xpY2tIYW5kbGVycycpO1xuXHRcdFx0JHBvc3RpdC5maW5kKFwiLmVkaXQtYnV0dG9uXCIpLm9uKCdjbGljaycsIHRoaXMuZWRpdENsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRcdCRwb3N0aXQub24oJ21vdXNlZG93bicsIHRoaXMubW91c2Vkb3duSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZWRpdENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNsaWNrSGFuZGxlcicpO1xuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdC8vYmVhbi5maXJlKHRoaXMsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCBldmVudC50YXJnZXQuaWQpOyBcblx0fTtcblxuXHRQb3N0aXQucHJvdG90eXBlLm1vdXNlZG93bkhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBtb3VzZWRvd25IYW5kbGVyJyk7XG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0Ly9iZWFuLmZpcmUodGhpcywgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIGV2ZW50LnRhcmdldC5pZCk7IFxuXHR9O1xuXG5cdHJldHVybiBQb3N0aXQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgUG9zdGl0ID0gcmVxdWlyZSgnLi9Qb3N0aXQnKTtcblxuXHRmdW5jdGlvbiBQb3N0aXRDcmVhdG9yKCRlbCkgeyBjb25zb2xlLmxvZygnW1Bvc3RpdENyZWF0b3JdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jcmVhdG9yKCk7XG5cdH1cblxuXHRQb3N0aXRDcmVhdG9yLnByb3RvdHlwZS5jcmVhdG9yID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQb3N0aXRDcmVhdG9yXSBjcmVhdG9yJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLmFwcGVuZCggXCI8c3BhbiBpZD0ncG9zdGl0LWNyZWF0b3InPjx0ZXh0YXJlYSBpZD0ncG9zdGl0LWNvbnRlbnQnIHJvd3M9JzQnIGNvbHM9JzUwJz50ZXh0dmVsZDwvdGV4dGFyZWE+PHAgaWQ9J2NyZWF0ZSc+YWFubWFrZW48L3A+PHAgaWQ9J2NhbmNlbCc+YW5udWxlcmVuPC9wPjwvc3Bhbj5cIiApO1xuXHRcdHRoaXMuYmluZENsaWNrSGFuZGxlcnMoKTtcblx0fTtcblxuXHRQb3N0aXRDcmVhdG9yLnByb3RvdHlwZS5iaW5kQ2xpY2tIYW5kbGVycyA9IGZ1bmN0aW9uKCRwb3N0aXQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdENyZWF0b3JdIGJpbmRDbGlja0hhbmRsZXJzJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNjcmVhdGVcIikub24oJ2NsaWNrJywgdGhpcy5jcmVhdGVDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNjYW5jZWxcIikub24oJ2NsaWNrJywgdGhpcy5jYW5jZWxDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0UG9zdGl0Q3JlYXRvci5wcm90b3R5cGUuY3JlYXRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdENyZWF0b3JdIGNyZWF0ZUNsaWNrSGFuZGxlcicpO1xuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdHZhciBwb3N0aXRDb250ZW50ID0gdGhpcy4kZWwuZmluZChcIiNwb3N0aXQtY29udGVudFwiKS52YWwoKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJjcmVhdGUtcG9zdGl0LWNsaWNrZWRcIiwgcG9zdGl0Q29udGVudCk7IFxuXHRcdHRoaXMuJGVsLmZpbmQoXCIjcG9zdGl0LWNyZWF0b3JcIikucmVtb3ZlKCk7XG5cdH07XG5cblx0UG9zdGl0Q3JlYXRvci5wcm90b3R5cGUuY2FuY2VsQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdENyZWF0b3JdIGNhbmNlbENsaWNrSGFuZGxlcicpO1xuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjcG9zdGl0LWNyZWF0b3JcIikucmVtb3ZlKCk7XG5cdH07XG5cblx0cmV0dXJuIFBvc3RpdENyZWF0b3I7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9