!function t(e,i,n){function o(s,r){if(!i[s]){if(!e[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(l)return l(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var i=e[s][1][t];return o(i?i:t)},d,d.exports,t,e,i,n)}return i[s].exports}for(var l="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t){!function(){function e(){new i($("#container"))}var i=t("./classes/App");e()}()},{"./classes/App":2}],2:[function(t,e){e.exports=function(){function e(t){console.log("[App] constructor"),this.$el=t,this.whiteboard=new o(this.$el),this.whiteboard.createBlanc(),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.whiteboard.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this))}var i,n,o=t("./Whiteboard"),l=t("./elements/Postit");return e.prototype.whiteboardClickedHandler=function(t){console.log("[App] whiteboardClickedHandler - position: X="+t.xPos+" Y="+t.yPos),i=t.xPos,n=t.yPos;var e={top:t.yPos,left:t.xPos};this.$el.find("#element-picker").css(e)},e.prototype.elementPickerClickedHandler=function(t){switch(console.log("[App] elementPickerClickedHandler - id = "+t),t){case"postit":var e=new l(this.$el,i,n);e.createPostit(),bean.on(e.postitEdit,"remove-clicked",this.removeElementHandler.bind(this));break;case"image":console.log("image");break;case"video":console.log("video")}},e.prototype.removeElementHandler=function(t){console.log("[App] removeElementHandler"),this.$el.find("#"+t).remove()},e}()},{"./Whiteboard":4,"./elements/Postit":5}],3:[function(t,e){e.exports=function(){function t(t){console.log("[ElementPicker] constructor"),this.$el=t,this.$el.find("#whiteboard").append("<div id='element-picker'><span id='postit'>post-it</span><span id='image'>image</span><span id='video'>video</span></div>"),this.$el.find("#element-picker").addClass("hidden"),this.bindClickHandlers()}return t.prototype.bindClickHandlers=function(){console.log("[ElementPicker] bindClickHandlers"),this.$el.find("span").on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(t){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",t.target.id)},t}()},{}],4:[function(t,e){e.exports=function(){function e(t){console.log("[Whiteboard] constructor"),this.$el=t}var i=t("./ElementPicker");return e.prototype.createBlanc=function(){console.log("[Whiteboard] createsBlanc"),this.$el.append("<article id='whiteboard'></article>"),this.addElementPicker(),this.bindClickHandler()},e.prototype.bindClickHandler=function(){console.log("[Whiteboard] bindClickHandler"),this.$el.find("#whiteboard").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(t){console.log("[Whiteboard] clickHandler");var e=t.pageX-this.$el.offset().left,i=t.pageY-this.$el.offset().top,n={};n.xPos=e,n.yPos=i,this.$el.find("#element-picker").toggleClass("hidden"),bean.fire(this,"whiteboard-clicked",n)},e.prototype.addElementPicker=function(){console.log("[Whiteboard] addElementPicker"),this.elementPicker=new i(this.$el)},e}()},{"./ElementPicker":3}],5:[function(t,e){e.exports=function(){function e(t,e,i,n){console.log("[Postit] constructor"),this.$el=t,this.xPos=e,this.yPos=i,n&&(this.txt=n)}var i=t("./PostitEdit");return e.prototype.createPostit=function(){console.log("[Postit] createPostit");var t=$("#postit-template").text(),e=Handlebars.compile(t),i={};i.txt=this.txt?this.txt:"Nieuwe Postit";var n=e(i);$("#whiteboard").append($(n));var o={top:this.yPos,left:this.xPos},l=this.$el.find(".postit").length,s=this.$el.find(".postit").last().attr("id",l).css(o);this.bindClickHandlers(s),this.txt||this.editPostit(l)},e.prototype.bindClickHandlers=function(t){console.log("[Postit] bindClickHandlers"),t.find(".edit-button").on("click",this.editClickHandler.bind(this))},e.prototype.editClickHandler=function(t){console.log("[Postit] editClickHandler"),t.stopPropagation();var e=$(t.target).parent().attr("id");this.editPostit(e)},e.prototype.editPostit=function(t){console.log("[Postit] editPostit"),this.$el.find("#"+t+"> p").toggleClass("hidden"),this.$el.find("#"+t+"> .edit-button").toggleClass("hidden"),this.postitEdit=new i(this.$el,this.$el.find("#"+t+"> p").text(),t),bean.on(this.postitEdit,"apply-clicked",this.applyHandler.bind(this))},e.prototype.applyHandler=function(t){console.log("[PostitEdit] applyHandler"),this.$el.find("#"+t.targetId+"> p").toggleClass("hidden").text(t.txt),this.$el.find("#"+t.targetId+"> .edit-button").toggleClass("hidden")},e}()},{"./PostitEdit":6}],6:[function(t,e){e.exports=function(){function t(t,e,i){console.log("[PostitEdit] constructor"),this.$el=t,this.originalContent;var n=$("#postit-edit-template").text(),o=Handlebars.compile(n),l={};l.txt=e;var s=o(l);$("#"+i).append($(s)),this.bindClickHandlers(i)}return t.prototype.bindClickHandlers=function(t){console.log("[PostitEdit] bindClickHandlers"),this.originalContent=this.$el.find("#"+t+"> p").text(),this.$el.find("#"+t+" > .apply-button").on("click",this.applyClickHandler.bind(this,t)),this.$el.find("#"+t+" > .cancel-button").on("click",this.cancelClickHandler.bind(this,t)),this.$el.find("#"+t+" > .remove-button").on("click",this.removeClickHandler.bind(this,t))},t.prototype.applyClickHandler=function(t){console.log("[PostitEdit] applyClickHandler"),applyData={},applyData.targetId=t,applyData.txt=this.$el.find("#"+t+" > .postit-edit").val(),bean.fire(this,"apply-clicked",applyData),this.removeEditElements(t)},t.prototype.cancelClickHandler=function(t){console.log("[PostitEdit] cancelClickHandler"),applyData={},applyData.targetId=t,applyData.txt=this.originalContent,bean.fire(this,"apply-clicked",applyData),this.removeEditElements(t)},t.prototype.removeClickHandler=function(t){console.log("[PostitEdit] removeClickHandler"),bean.fire(this,"remove-clicked",t),this.removeEditElements(t)},t.prototype.removeEditElements=function(t){this.$el.find("#"+t+" > .postit-edit").remove(),this.$el.find("#"+t+" > .apply-button").remove(),this.$el.find("#"+t+" > .cancel-button").remove(),this.$el.find("#"+t+" > .remove-button").remove()},t}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQXBwLmpzIiwianMvc3JjL2NsYXNzZXMvRWxlbWVudFBpY2tlci5qcyIsImpzL3NyYy9jbGFzc2VzL1doaXRlYm9hcmQuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Qb3N0aXQuanMiLCJqcy9zcmMvY2xhc3Nlcy9lbGVtZW50cy9Qb3N0aXRFZGl0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLENBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxPQUFBLEtBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsR0FBQSxHQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSx1QkFBQSxFQUFBLElBQUEsTUFBQSxHQUFBLEtBQUEsbUJBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLFdBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLFFBQUEsU0FBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxHQUFBLEdBQUEsa0JBQUEsVUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsS0FBQSxHQUFBLFNBQUEsSUNBQSxXQUlBLFFBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxlQUhBLEdBQUEsR0FBQSxFQUFBLGdCQU1BLCtDQ1JBLEVBQUEsUUFBQSxXQU1BLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSxxQkFDQSxLQUFBLElBQUEsRUFFQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLFdBQUEsY0FHQSxLQUFBLEdBQUEsS0FBQSxXQUFBLHFCQUFBLEtBQUEseUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFdBQUEsY0FBQSx5QkFBQSxLQUFBLDRCQUFBLEtBQUEsT0FaQSxHQUVBLEdBQUEsRUFGQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLG9CQTZDQSxPQTlCQSxHQUFBLFVBQUEseUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnREFBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLElBQ0EsSUFBQSxJQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxLQUVBLE1BQUEsSUFBQSxLQUFBLG1CQUFBLElBQUEsSUFHQSxFQUFBLFVBQUEsNEJBQUEsU0FBQSxHQUNBLE9BREEsUUFBQSxJQUFBLDRDQUFBLEdBQ0EsR0FDQSxJQUFBLFNBQ0EsR0FBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUNBLEdBQUEsZUFDQSxLQUFBLEdBQUEsRUFBQSxXQUFBLGlCQUFBLEtBQUEscUJBQUEsS0FBQSxNQUNBLE1BQ0EsS0FBQSxRQUNBLFFBQUEsSUFBQSxRQUNBLE1BQ0EsS0FBQSxRQUNBLFFBQUEsSUFBQSxXQUtBLEVBQUEsVUFBQSxxQkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLDhCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsR0FBQSxVQUdBLGlFQ2hEQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsK0JBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLEtBQUEsZUFBQSxPQUFBLDZIQUNBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFNBQUEsVUFFQSxLQUFBLG9CQVdBLE1BUkEsR0FBQSxVQUFBLGtCQUFBLFdBQUEsUUFBQSxJQUFBLHFDQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxnQ0FDQSxLQUFBLEtBQUEsS0FBQSx5QkFBQSxFQUFBLE9BQUEsS0FHQSwyQkNuQkEsRUFBQSxRQUFBLFdBS0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxFQUhBLEdBQUEsR0FBQSxFQUFBLGtCQWdDQSxPQTFCQSxHQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsT0FBQSx1Q0FDQSxLQUFBLG1CQUNBLEtBQUEsb0JBR0EsRUFBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxTQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLFNBQUEsSUFDQSxJQUNBLEdBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUVBLEtBQUEsSUFBQSxLQUFBLG1CQUFBLFlBQUEsVUFFQSxLQUFBLEtBQUEsS0FBQSxxQkFBQSxJQUdBLEVBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLGNBQUEsR0FBQSxHQUFBLEtBQUEsTUFHQSw4Q0NuQ0EsRUFBQSxRQUFBLFdBSUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHdCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsS0FBQSxFQUNBLEtBQUEsS0FBQSxFQUNBLElBQ0EsS0FBQSxJQUFBLEdBUEEsR0FBQSxHQUFBLEVBQUEsZUE0REEsT0FqREEsR0FBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEsd0JBQ0EsSUFBQSxHQUFBLEVBQUEsb0JBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxJQURBLEtBQUEsSUFDQSxLQUFBLElBRUEsZUFFQSxJQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsZUFBQSxPQUFBLEVBQUEsR0FFQSxJQUFBLElBQ0EsSUFBQSxLQUFBLEtBQ0EsS0FBQSxLQUFBLE1BRUEsRUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQ0EsRUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxLQUFBLEdBQUEsSUFBQSxFQUVBLE1BQUEsa0JBQUEsR0FDQSxLQUFBLEtBQ0EsS0FBQSxXQUFBLElBSUEsRUFBQSxVQUFBLGtCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsOEJBQ0EsRUFBQSxLQUFBLGdCQUFBLEdBQUEsUUFBQSxLQUFBLGlCQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw2QkFDQSxFQUFBLGlCQUNBLElBQUEsR0FBQSxFQUFBLEVBQUEsUUFBQSxTQUFBLEtBQUEsS0FDQSxNQUFBLFdBQUEsSUFHQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLHVCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxPQUFBLFlBQUEsVUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsa0JBQUEsWUFBQSxVQUNBLEtBQUEsV0FBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxPQUFBLE9BQUEsR0FFQSxLQUFBLEdBQUEsS0FBQSxXQUFBLGdCQUFBLEtBQUEsYUFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsU0FBQSxPQUFBLFlBQUEsVUFBQSxLQUFBLEVBQUEsS0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsU0FBQSxrQkFBQSxZQUFBLFdBR0EsMkNDOURBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxlQUNBLElBQUEsR0FBQSxFQUFBLHlCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUNBLEdBQUEsSUFBQSxDQUVBLElBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxJQUFBLEdBQUEsT0FBQSxFQUFBLElBRUEsS0FBQSxrQkFBQSxHQXNDQSxNQW5DQSxHQUFBLFVBQUEsa0JBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxrQ0FDQSxLQUFBLGdCQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxPQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLG9CQUFBLEdBQUEsUUFBQSxLQUFBLGtCQUFBLEtBQUEsS0FBQSxJQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxxQkFBQSxHQUFBLFFBQUEsS0FBQSxtQkFBQSxLQUFBLEtBQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEscUJBQUEsR0FBQSxRQUFBLEtBQUEsbUJBQUEsS0FBQSxLQUFBLEtBR0EsRUFBQSxVQUFBLGtCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsa0NBQ0EsYUFDQSxVQUFBLFNBQUEsRUFDQSxVQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLG1CQUFBLE1BQ0EsS0FBQSxLQUFBLEtBQUEsZ0JBQUEsV0FDQSxLQUFBLG1CQUFBLElBR0EsRUFBQSxVQUFBLG1CQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsbUNBQ0EsYUFDQSxVQUFBLFNBQUEsRUFDQSxVQUFBLElBQUEsS0FBQSxnQkFDQSxLQUFBLEtBQUEsS0FBQSxnQkFBQSxXQUNBLEtBQUEsbUJBQUEsSUFHQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSxtQ0FDQSxLQUFBLEtBQUEsS0FBQSxpQkFBQSxHQUNBLEtBQUEsbUJBQUEsSUFHQSxFQUFBLFVBQUEsbUJBQUEsU0FBQSxHQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxtQkFBQSxTQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxvQkFBQSxTQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxxQkFBQSxTQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxxQkFBQSxVQUdBIiwiZmlsZSI6InNjcmlwdC5kaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKXtcblxuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9jbGFzc2VzL0FwcCcpO1xuXG5cdGZ1bmN0aW9uIGluaXQoKcKge1xuXHRcdG5ldyBBcHAoJCgnI2NvbnRhaW5lcicpKTtcblx0fVxuXG5cdGluaXQoKTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBXaGl0ZWJvYXJkID0gcmVxdWlyZSgnLi9XaGl0ZWJvYXJkJyk7XG5cdHZhciBQb3N0aXQgPSByZXF1aXJlKCcuL2VsZW1lbnRzL1Bvc3RpdCcpO1xuXHR2YXIgeFBvcywgeVBvcztcblxuXHRmdW5jdGlvbiBBcHAoJGVsKSB7IGNvbnNvbGUubG9nKCdbQXBwXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXG5cdFx0dGhpcy53aGl0ZWJvYXJkID0gbmV3IFdoaXRlYm9hcmQoIHRoaXMuJGVsICk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkLmNyZWF0ZUJsYW5jKCk7XG5cblx0XHQvL0xVSVNURVJFTlxuXHRcdGJlYW4ub24odGhpcy53aGl0ZWJvYXJkLCBcIndoaXRlYm9hcmQtY2xpY2tlZFwiLCB0aGlzLndoaXRlYm9hcmRDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMud2hpdGVib2FyZC5lbGVtZW50UGlja2VyLCBcImVsZW1lbnQtcGlja2VyLWNsaWNrZWRcIiwgdGhpcy5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cblx0fVxuXG5cdEFwcC5wcm90b3R5cGUud2hpdGVib2FyZENsaWNrZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coJ1tBcHBdIHdoaXRlYm9hcmRDbGlja2VkSGFuZGxlciAtIHBvc2l0aW9uOiBYPScgKyBldmVudC54UG9zICtcIiBZPVwiK2V2ZW50LnlQb3MgKTtcblx0XHR4UG9zID0gZXZlbnQueFBvcztcblx0XHR5UG9zID0gZXZlbnQueVBvcztcblx0XHR2YXIgcG9zaXRpb24gPSB7XG5cdFx0XHR0b3AgOiBldmVudC55UG9zLFxuXHRcdFx0bGVmdCA6IGV2ZW50LnhQb3Ncblx0XHR9O1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjZWxlbWVudC1waWNrZXJcIikuY3NzKHBvc2l0aW9uKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbQXBwXSBlbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgLSBpZCA9ICcgKyBldmVudCApO1xuXHRcdHN3aXRjaChldmVudCkge1xuXHRcdCAgICBjYXNlIFwicG9zdGl0XCI6XG5cdFx0ICAgICAgICB2YXIgcG9zdGl0ID0gbmV3IFBvc3RpdCh0aGlzLiRlbCx4UG9zLHlQb3MpO1xuXHRcdCAgICAgICAgcG9zdGl0LmNyZWF0ZVBvc3RpdCgpO1xuXHRcdCAgICAgICAgYmVhbi5vbihwb3N0aXQucG9zdGl0RWRpdCwgXCJyZW1vdmUtY2xpY2tlZFwiLCB0aGlzLnJlbW92ZUVsZW1lbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJpbWFnZVwiOlxuXHRcdCAgICAgICAgY29uc29sZS5sb2coXCJpbWFnZVwiKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwidmlkZW9cIjpcblx0XHQgICAgICAgIGNvbnNvbGUubG9nKFwidmlkZW9cIik7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5yZW1vdmVFbGVtZW50SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNvbnNvbGUubG9nKCdbQXBwXSByZW1vdmVFbGVtZW50SGFuZGxlcicgKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJytldmVudCkucmVtb3ZlKCk7XG5cdH07XG5cblx0cmV0dXJuIEFwcDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cblx0ZnVuY3Rpb24gRWxlbWVudFBpY2tlcigkZWwpIHsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoIFwiPGRpdiBpZD0nZWxlbWVudC1waWNrZXInPjxzcGFuIGlkPSdwb3N0aXQnPnBvc3QtaXQ8L3NwYW4+PHNwYW4gaWQ9J2ltYWdlJz5pbWFnZTwvc3Bhbj48c3BhbiBpZD0ndmlkZW8nPnZpZGVvPC9zcGFuPjwvZGl2PlwiICk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNlbGVtZW50LXBpY2tlclwiKS5hZGRDbGFzcyhcImhpZGRlblwiKTtcblxuXHRcdHRoaXMuYmluZENsaWNrSGFuZGxlcnMoKTtcblx0fVxuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmJpbmRDbGlja0hhbmRsZXJzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBiaW5kQ2xpY2tIYW5kbGVycycpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCJzcGFuXCIpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjbGlja0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJlbGVtZW50LXBpY2tlci1jbGlja2VkXCIsIGV2ZW50LnRhcmdldC5pZCk7IFxuXHR9O1xuXG5cdHJldHVybiBFbGVtZW50UGlja2VyO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0Ly9UT0RPOiBJTlNURUxMSU5HRU4gS0FERVIgVE9FVk9FR0VOIFZJQSBIQU5ETEVCQVJTXG5cdHZhciBFbGVtZW50UGlja2VyID0gcmVxdWlyZSgnLi9FbGVtZW50UGlja2VyJyk7XG5cdFxuXHRmdW5jdGlvbiBXaGl0ZWJvYXJkKCRlbCkgeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdH1cblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5jcmVhdGVCbGFuYyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gY3JlYXRlc0JsYW5jJyk7XG5cdFx0dGhpcy4kZWwuYXBwZW5kKCBcIjxhcnRpY2xlIGlkPSd3aGl0ZWJvYXJkJz48L2FydGljbGU+XCIgKTtcblx0XHR0aGlzLmFkZEVsZW1lbnRQaWNrZXIoKTtcblx0XHR0aGlzLmJpbmRDbGlja0hhbmRsZXIoKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5iaW5kQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBiaW5kQ2xpY2tIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiN3aGl0ZWJvYXJkXCIpLm9uKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjbGlja0hhbmRsZXInKTtcbiAgIFx0XHR2YXIgeFBvcyA9IGV2ZW50LnBhZ2VYIC0gdGhpcy4kZWwub2Zmc2V0KCkubGVmdDtcbiAgIFx0XHR2YXIgeVBvcyA9IGV2ZW50LnBhZ2VZIC0gdGhpcy4kZWwub2Zmc2V0KCkudG9wO1xuICAgXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICAgXHRcdHBvc2l0aW9uLnhQb3MgPSB4UG9zO1xuICAgXHRcdHBvc2l0aW9uLnlQb3MgPSB5UG9zO1xuXHRcdFxuXHRcdHRoaXMuJGVsLmZpbmQoXCIjZWxlbWVudC1waWNrZXJcIikudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cblx0XHRiZWFuLmZpcmUodGhpcywgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgcG9zaXRpb24pOyBcblx0fTtcblxuXHRXaGl0ZWJvYXJkLnByb3RvdHlwZS5hZGRFbGVtZW50UGlja2VyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBhZGRFbGVtZW50UGlja2VyJyk7XG5cdFx0dGhpcy5lbGVtZW50UGlja2VyID0gbmV3IEVsZW1lbnRQaWNrZXIoIHRoaXMuJGVsICk7XG5cdH07XG5cblx0cmV0dXJuIFdoaXRlYm9hcmQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHR2YXIgUG9zdGl0RWRpdCA9IHJlcXVpcmUoJy4vUG9zdGl0RWRpdCcpO1xuXG5cdGZ1bmN0aW9uIFBvc3RpdCgkZWwseFBvcyx5UG9zLHR4dCkgeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHR0aGlzLnhQb3MgPSB4UG9zO1xuXHRcdHRoaXMueVBvcyA9IHlQb3M7XG5cdFx0aWYodHh0KXtcblx0XHR0aGlzLnR4dCA9IHR4dDtcblx0XHR9XG5cdH1cblxuXHRQb3N0aXQucHJvdG90eXBlLmNyZWF0ZVBvc3RpdCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjcmVhdGVQb3N0aXQnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3Bvc3RpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXG5cdFx0aWYodGhpcy50eHQpe1xuXHRcdFx0Y29udGV4dC50eHQgPSB0aGlzLnR4dDtcblx0XHR9ZWxzZXtcblx0XHRcdGNvbnRleHQudHh0ID0gXCJOaWV1d2UgUG9zdGl0XCI7XG5cdFx0fVxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnI3doaXRlYm9hcmQnKS5hcHBlbmQoICQoaHRtbCkgKTtcblxuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IHRoaXMueVBvcyxcblx0XHRcdGxlZnQgOiB0aGlzLnhQb3Ncblx0XHR9O1xuXHRcdHZhciBpZCA9IHRoaXMuJGVsLmZpbmQoXCIucG9zdGl0XCIpLmxlbmd0aDtcblx0XHR2YXIgJGxhc3RQb3N0aXQgPSB0aGlzLiRlbC5maW5kKCcucG9zdGl0JykubGFzdCgpLmF0dHIoJ2lkJywgaWQpLmNzcyhwb3NpdGlvbik7XG5cblx0XHR0aGlzLmJpbmRDbGlja0hhbmRsZXJzKCRsYXN0UG9zdGl0KTtcblx0XHRpZighdGhpcy50eHQpe1xuXHRcdFx0dGhpcy5lZGl0UG9zdGl0KGlkKTtcblx0XHR9XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5iaW5kQ2xpY2tIYW5kbGVycyA9IGZ1bmN0aW9uKCRwb3N0aXQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdF0gYmluZENsaWNrSGFuZGxlcnMnKTtcblx0XHQkcG9zdGl0LmZpbmQoXCIuZWRpdC1idXR0b25cIikub24oJ2NsaWNrJywgdGhpcy5lZGl0Q2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZWRpdENsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGVkaXRDbGlja0hhbmRsZXInKTtcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR2YXIgaWQgPSAkKGV2ZW50LnRhcmdldCkucGFyZW50KCkuYXR0cignaWQnKTtcblx0XHR0aGlzLmVkaXRQb3N0aXQoaWQpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZWRpdFBvc3RpdCA9IGZ1bmN0aW9uKGlkKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGVkaXRQb3N0aXQnKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2lkK1wiPiBwXCIpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIraWQrXCI+IC5lZGl0LWJ1dHRvblwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0XHR0aGlzLnBvc3RpdEVkaXQgPSBuZXcgUG9zdGl0RWRpdCh0aGlzLiRlbCwgdGhpcy4kZWwuZmluZChcIiNcIitpZCtcIj4gcFwiKS50ZXh0KCksIGlkKTtcblx0XHQvL0xVSVNURVJFTlxuXHRcdGJlYW4ub24odGhpcy5wb3N0aXRFZGl0LCBcImFwcGx5LWNsaWNrZWRcIiwgdGhpcy5hcHBseUhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5hcHBseUhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0RWRpdF0gYXBwbHlIYW5kbGVyJyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitldmVudC50YXJnZXRJZCtcIj4gcFwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKS50ZXh0KGV2ZW50LnR4dCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitldmVudC50YXJnZXRJZCtcIj4gLmVkaXQtYnV0dG9uXCIpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHR9O1xuXG5cdHJldHVybiBQb3N0aXQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBQb3N0aXRFZGl0KCRlbCx0eHQsaWQpIHsgY29uc29sZS5sb2coJ1tQb3N0aXRFZGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMub3JpZ2luYWxDb250ZW50O1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcG9zdGl0LWVkaXQtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblx0XHRjb250ZXh0LnR4dCA9IHR4dDtcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnIycraWQpLmFwcGVuZCggJChodG1sKSApO1xuXG5cdFx0dGhpcy5iaW5kQ2xpY2tIYW5kbGVycyhpZCk7XG5cdH1cblxuXHRQb3N0aXRFZGl0LnByb3RvdHlwZS5iaW5kQ2xpY2tIYW5kbGVycyA9IGZ1bmN0aW9uKGlkKXsgY29uc29sZS5sb2coJ1tQb3N0aXRFZGl0XSBiaW5kQ2xpY2tIYW5kbGVycycpO1xuXHRcdHRoaXMub3JpZ2luYWxDb250ZW50ID0gdGhpcy4kZWwuZmluZChcIiNcIitpZCtcIj4gcFwiKS50ZXh0KCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitpZCtcIiA+IC5hcHBseS1idXR0b25cIikub24oJ2NsaWNrJywgdGhpcy5hcHBseUNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIGlkKSk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitpZCtcIiA+IC5jYW5jZWwtYnV0dG9uXCIpLm9uKCdjbGljaycsIHRoaXMuY2FuY2VsQ2xpY2tIYW5kbGVyLmJpbmQodGhpcywgaWQpKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2lkK1wiID4gLnJlbW92ZS1idXR0b25cIikub24oJ2NsaWNrJywgdGhpcy5yZW1vdmVDbGlja0hhbmRsZXIuYmluZCh0aGlzLCBpZCkpO1xuXHR9O1xuXG5cdFBvc3RpdEVkaXQucHJvdG90eXBlLmFwcGx5Q2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oaWQpeyBjb25zb2xlLmxvZygnW1Bvc3RpdEVkaXRdIGFwcGx5Q2xpY2tIYW5kbGVyJyk7XG5cdFx0YXBwbHlEYXRhID0ge307XG5cdFx0YXBwbHlEYXRhLnRhcmdldElkID0gaWQ7XG5cdFx0YXBwbHlEYXRhLnR4dCA9IHRoaXMuJGVsLmZpbmQoXCIjXCIraWQrXCIgPiAucG9zdGl0LWVkaXRcIikudmFsKCk7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiYXBwbHktY2xpY2tlZFwiLCBhcHBseURhdGEpO1xuXHRcdHRoaXMucmVtb3ZlRWRpdEVsZW1lbnRzKGlkKTtcblx0fTtcblxuXHRQb3N0aXRFZGl0LnByb3RvdHlwZS5jYW5jZWxDbGlja0hhbmRsZXIgPSBmdW5jdGlvbihpZCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0RWRpdF0gY2FuY2VsQ2xpY2tIYW5kbGVyJyk7XG5cdFx0YXBwbHlEYXRhID0ge307XG5cdFx0YXBwbHlEYXRhLnRhcmdldElkID0gaWQ7XG5cdFx0YXBwbHlEYXRhLnR4dCA9IHRoaXMub3JpZ2luYWxDb250ZW50O1xuXHRcdGJlYW4uZmlyZSh0aGlzLCBcImFwcGx5LWNsaWNrZWRcIiwgYXBwbHlEYXRhKTsgXG5cdFx0dGhpcy5yZW1vdmVFZGl0RWxlbWVudHMoaWQpO1xuXHR9O1xuXG5cdFBvc3RpdEVkaXQucHJvdG90eXBlLnJlbW92ZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGlkKXsgY29uc29sZS5sb2coJ1tQb3N0aXRFZGl0XSByZW1vdmVDbGlja0hhbmRsZXInKTtcblx0XHRiZWFuLmZpcmUodGhpcywgXCJyZW1vdmUtY2xpY2tlZFwiLCBpZCk7XG5cdFx0dGhpcy5yZW1vdmVFZGl0RWxlbWVudHMoaWQpO1xuXHR9O1xuXG5cdFBvc3RpdEVkaXQucHJvdG90eXBlLnJlbW92ZUVkaXRFbGVtZW50cyA9IGZ1bmN0aW9uKGlkKXtcdFxuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIraWQrXCIgPiAucG9zdGl0LWVkaXRcIikucmVtb3ZlKCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitpZCtcIiA+IC5hcHBseS1idXR0b25cIikucmVtb3ZlKCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitpZCtcIiA+IC5jYW5jZWwtYnV0dG9uXCIpLnJlbW92ZSgpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIraWQrXCIgPiAucmVtb3ZlLWJ1dHRvblwiKS5yZW1vdmUoKTtcblx0fVxuXG5cdHJldHVybiBQb3N0aXRFZGl0O1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==