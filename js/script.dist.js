!function e(t,i,n){function o(l,r){if(!i[l]){if(!t[l]){var d="function"==typeof require&&require;if(!r&&d)return d(l,!0);if(s)return s(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[l]={exports:{}};t[l][0].call(c.exports,function(e){var i=t[l][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[l].exports}for(var s="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(e){!function(){function t(){new i($("#container"))}var i=e("./classes/App");t()}()},{"./classes/App":3}],2:[function(e,t){t.exports=function(){function e(e){console.log("[AddContributor] constructor"),this.$el=e,this.input=this.$el.find(".input-contributor")[0],this.$el.find(".input-contributor")[0].addEventListener("submit",this.submitHandler.bind(this))}return e.prototype.submitHandler=function(e){e.preventDefault(),console.log("SUBMUT"),this.input.value=""},e}()},{}],3:[function(e,t){t.exports=function(){function t(e){console.log("[App] constructor"),this.$el=e,this.whiteboardId=1,this.types=["postits"],this.i=0,this.elementList=[],this.position={},this.dataHandler=new s,this.whiteboard=new i(this.$el),this.elementPicker=new n(this.$el),bean.on(this.dataHandler,"data-success",this.addToElementList.bind(this)),bean.on(this.whiteboard,"whiteboard-clicked",this.whiteboardClickedHandler.bind(this)),bean.on(this.elementPicker,"element-picker-clicked",this.elementPickerClickedHandler.bind(this)),this.buildBoard()}var i=e("./Whiteboard"),n=e("./ElementPicker"),o=e("./Element"),s=e("./DataHandler");return t.prototype.whiteboardClickedHandler=function(e){console.log("[App] whiteboardClickedHandler"),this.elementPicker.toggleVisible(),this.elementPicker.setLocation(e.xPos,e.yPos),this.position=e},t.prototype.elementPickerClickedHandler=function(e){console.log("[App] elementPickerClickedHandler"),this.elementPicker.toggleVisible();var t=new o(this.$el,e,this.position);this.newElement(e,t.elementId),bean.on(t,"position-changed",this.positionChangedHandler.bind(this))},t.prototype.buildBoard=function(){console.log("[App] buildBoard");for(var e in this.types)this.dataHandler.loadBoardElements(this.types[e])},t.prototype.addToElementList=function(){console.log("[App] addToElementList"),this.elementList.push(this.dataHandler.getBoardElements()),this.i++,this.i==this.types.length&&this.addToBoard()},t.prototype.addToBoard=function(){console.log("[App] addToBoard");var e=this.elementList[0][0];for(var t in e){var i=e[t].el_type,n={};n.yPos=Number(e[t].posy),n.xPos=Number(e[t].posx);var s=e[t].id_on_board,l=e[t].id,r=e[t].content,t=new o(this.$el,i,n,s,r,l);bean.on(t,"remove-clicked",this.removeHandler.bind(this)),bean.on(t,"position-changed",this.positionChangedHandler.bind(this))}},t.prototype.removeHandler=function(e){console.log("[App] removeHandler"),this.dataHandler.removeBoardElement(e.elementType,e.id)},t.prototype.newElement=function(e,t){console.log("[App] newElementHandler"),this.dataHandler.newBoardElement(e,t,this.position,this.whiteboardId)},t.prototype.positionChangedHandler=function(e){console.log("[App] positionChangedHandler"),this.dataHandler.positionChange(e.elementType,e.elementId,e.eTarget.css("left"),e.eTarget.css("top"),this.whiteboardId)},t}()},{"./DataHandler":4,"./Element":6,"./ElementPicker":7,"./Whiteboard":8}],4:[function(e,t){t.exports=function(){function e(){console.log("[DataHandler] constructor"),this.url="http://localhost:8888/cp3/whiteboard/whiteboard/api/index.php/",t=this,this.boardElements=[]}var t;return e.prototype.loadBoardElements=function(e){return console.log("[DataHandler] loadBoardElements"),$.ajax({type:"GET",url:this.url+e+"/1",data:{content:"content"},success:function(e){t.boardElements.push(e),bean.fire(t,"data-success",[e])}})},e.prototype.getBoardElements=function(){return console.log("[DataHandler] getBoardElements"),this.boardElements},e.prototype.removeBoardElement=function(e,t){switch(console.log("[DataHandler] removeBoardElement"),e){case"post-it":this.removeElementById("postits",t);break;case"static":this.removeElementById("static",t);break;case"motion":this.removeElementById("motion",t)}},e.prototype.removeElementById=function(e,t){$.ajax({type:"GET",url:this.url+e+"/delete/"+t,data:{content:"content"},success:function(e){console.log("deleted = "+e)}})},e.prototype.newBoardElement=function(e,t,i,n){switch(console.log("[DataHandler] newBoardElement"),e){case"post-it":this.newElement("postits",t,i,n);break;case"static":this.newElement("static",id);break;case"motion":this.newElement("motion",id)}},e.prototype.newElement=function(e,t,i){$.ajax({type:"POST",url:this.url+elementType+"/add",data:{id_on_board:e,xpos:t.xPos,ypos:t.yPos,whiteboardId:i},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e.prototype.positionChange=function(e,t,i,n,o){$.ajax({type:"POST",url:this.url+"postits/change/position",data:{whiteboard_id:o,id_on_board:t,xpos:i,ypos:n},success:function(e){console.log("success:",e)},error:function(e){console.log("error"),console.log(e)}})},e}()},{}],5:[function(e,t){t.exports=function(){function e(e,t){console.log("[EditMenu] constructor"),this.$el=e,this.elementId=t;var i=$("#edit-menu-template").text(),n=Handlebars.compile(i),o={actions:[{actionId:"cancel",name:"annuleer"},{actionId:"edit",name:"wijzigen"},{actionId:"remove",name:"verwijderen"}]};Handlebars.registerHelper("editmenu",function(){var e=Handlebars.escapeExpression(this.actionId),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var s=n(o);this.$el.find("#"+this.elementId).append(s),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.bindHandlers(),this.toggleVisible()}return e.prototype.toggleVisible=function(){console.log("[EditMenu] toggleVisible"),this.$el.find("#"+this.elementId+" > p").toggleClass("hidden"),this.$el.find("#"+this.elementId+" .edit-menu").toggleClass("hidden")},e.prototype.bindHandlers=function(){console.log("[EditMenu] bindHandlers"),this.$el.find("#"+this.elementId+" > p").on("click",this.clickHandler.bind(this)),this.$el.find("#"+this.elementId+" li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){if(console.log("[EditMenu] clickHandler"),"editButton"===e.target.className)bean.fire(this,"edit-clicked",t),this.toggleVisible();else{var t={};t.targetId=e.target.id,t.elementId=this.elementId,bean.fire(this,"action-clicked",t)}},e}()},{}],6:[function(e,t){t.exports=function(){function t(e,t,i,n,o,s){console.log("[Element] constructor"),this.$el=e,this.content=o,this.elementType=t,this.elementId=n,this.elementId?this.elementId=n:(this.elementId=this.setElementId(),console.log("element id = "+this.elementId)),this.position=i,s&&(this.id=s),this.createElementHolder()}var n=e("./EditMenu"),o=1,s=e("./elements/Postit"),l=e("./elements/Picture"),r=e("./elements/Motion");return t.prototype.createElementHolder=function(){console.log("[Element] createElementHolder"),this.$el.find("#whiteboard").append("<section class='element-holder'></section>"),this.$el.find(".element-holder:last-of-type").attr("id",this.elementId);var e={};e.top=this.position.yPos,e.left=this.position.xPos,e.zIndex=0,this.$el.find("#"+this.elementId).css(e),this.createEditMenu(),this.createElement()},t.prototype.createElement=function(){switch(console.log("[Element] createElement"),this.elementType){case"post-it":this.element=new s(this.content),this.$el.find("#"+this.elementId).append(this.element.createPostit()),this.$el.find("#"+this.elementId).append(this.element.createPostit),this.bindHandler(this.$el.find("#"+this.elementId));break;case"static":this.element=new l(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createPicture),this.bindHandler(this.$el.find("#"+this.elementId)),this.element.initImageInputs();break;case"motion":this.element=new r(this.$el.find("#"+this.elementId)),this.$el.find("#"+this.elementId).append(this.element.createMotion),this.bindHandler(this.$el.find("#"+this.elementId)),this.element.initMotionInputs()}},t.prototype.bindHandler=function(){console.log("[Element] bindHandler"),this.$el.find("#"+this.elementId).on("mousedown",this.mousedownHandler.bind(this)),this.mouseDown=!1},t.prototype.mousedownHandler=function(e){console.log("[Element] mousedownHandler"),event.target.id===this.elementId&&("whiteboard"!==e.target.id&&this.$el.find("#element-picker").removeClass("hidden"),this.mouseDown=!0,this.currentLeft=$(e.target).css("left"),this.currentTop=$(e.target).css("top"),this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),this.offsetX=e.offsetX,this.offsetY=e.offsetY,++o,this.$el.find("#"+this.elementId).css("zIndex",o),document.body.addEventListener("mousemove",this._mouseMoveHandler),document.body.addEventListener("mouseup",this._mouseUpHandler))},t.prototype.createEditMenu=function(){console.log("[Element] createEditMenu"),this.editMenu=new n(this.$el,this.elementId),bean.on(this.editMenu,"edit-clicked",this.editClickedHandler.bind(this)),bean.on(this.editMenu,"action-clicked",this.actionClickedHandler.bind(this))},t.prototype.editClickedHandler=function(){console.log("[Element] editClickedHandler"),this.element.edit(this.$el,this.elementId)},t.prototype.actionClickedHandler=function(e){switch(console.log("[Element] actionClickedHandler"),e.targetId){case"remove":this.editMenu.toggleVisible(),this.$el.find("#"+e.elementId).remove();var t={};t.id=this.id,t.elementType=this.elementType,bean.fire(this,"remove-clicked",t);break;case"edit":this.element.confirm(),this.editMenu.toggleVisible();break;case"cancel":this.element.endEdit(),this.editMenu.toggleVisible()}},t.prototype.mouseMoveHandler=function(e){if(console.log("[Element] mousemoveHandler"),this.mouseDown===!0){var t=parseInt(e.clientX),i=parseInt(e.clientY);this.$el.find("#"+this.elementId).css("left",t-this.offsetX),this.$el.find("#"+this.elementId).css("top",i-this.offsetY)}},t.prototype.mouseUpHandler=function(e){if(console.log("[Element] mouseupHandler"),this.mouseDown=!1,document.body.removeEventListener("mousemove",this._mouseMoveHandler),document.body.removeEventListener("mouseup",this._mouseUpHandler),this.currentTop!==$(e.target).css("top")||this.currentLeft!==$(e.target).css("left")){var t={};t.eTarget=$(e.target),t.elementType=this.elementType,t.elementId=this.elementId,bean.fire(this,"position-changed",t)}},t.prototype.setElementId=function(){console.log("[Element] setElementId");var e=this.$el.find(".element-holder");if(e.length>0){var t=[];for(i=0;i<e.length;i++)t.push(e[i].id);return t.sort(function(e,t){return t-e}),String(Number(t[0])+1)}return"0"},t}()},{"./EditMenu":5,"./elements/Motion":10,"./elements/Picture":11,"./elements/Postit":12}],7:[function(e,t){t.exports=function(){function e(e){console.log("[ElementPicker] constructor"),this.$el=e;var t=$("#element-picker-template").text(),i=Handlebars.compile(t),n={elements:[{element:"post-it",name:"post-it"},{element:"static",name:"image"},{element:"motion",name:"video"}]};Handlebars.registerHelper("picker",function(){var e=Handlebars.escapeExpression(this.element),t=Handlebars.escapeExpression(this.name);return new Handlebars.SafeString("<li id="+e+">"+t+"</li>")});var o=i(n);this.$el.find("#whiteboard").append($(o)),this.toggleVisible(),this.bindHandler()}return e.prototype.toggleVisible=function(){console.log("[ElementPicker] toggleVisible"),this.$el.find("#element-picker").toggleClass("hidden")},e.prototype.setLocation=function(e,t){console.log("[ElementPicker] setLocation");var i={top:t,left:e};this.$el.find("#element-picker").css(i)},e.prototype.bindHandler=function(){console.log("[ElementPicker] bindHandler"),this.$el.find("#element-picker > ul > li").on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){console.log("[ElementPicker] clickHandler"),bean.fire(this,"element-picker-clicked",e.target.id)},e}()},{}],8:[function(e,t){t.exports=function(){function t(e){console.log("[Whiteboard] constructor"),this.$el=e,this.createWhiteboard()}var i=e("./WhiteboardSettings");return t.prototype.createWhiteboard=function(){console.log("[Whiteboard] createWhiteboard"),this.board=this.$el.append("<div id='whiteboard'></div>"),this.bindHandler()},t.prototype.bindHandler=function(){console.log("[Whiteboard] bindHandler"),this.board.on("click",this.clickHandler.bind(this))},t.prototype.clickHandler=function(e){console.log("[Whiteboard] clickHandler");var t=e.pageX-this.$el.offset().left,i=e.pageY-this.$el.offset().top,n={};n.xPos=t,n.yPos=i,"whiteboard"===e.target.id&&bean.fire(this,"whiteboard-clicked",n)},t.prototype.addWhiteboardSettings=function(){console.log("[Whiteboard] addWhiteboardSettings"),this.whiteboardSettings=new i(this.$el),this.whiteboardSettings.createSettingPanel(),this.whiteboardSettings.addContributor()},t}()},{"./WhiteboardSettings":9}],9:[function(e,t){t.exports=function(){function t(e,t,i){console.log("[WhiteboardSettings] constructor"),this.$el=e,this.contributors=t,i&&(this.prjct_title=i)}var i=e("./AddContributor");return t.prototype.createSettingPanel=function(){console.log("[WhiteboardSettings] createSettingPanel");var e=$("#setting-template").text(),t=Handlebars.compile(e),i={};i.prjct_title=this.prjct_title?this.prjct_title:"Untitled",i.contributor=this.contributor;var n=t(i);$("#whiteboard").append($(n))},t.prototype.addContributor=function(){console.log("[WhiteboardSettings] addContributor"),this.addContributor=new i(this.$el.find(".contributor-form")),console.log(this.$el)},t}()},{"./AddContributor":2}],10:[function(e,t){t.exports=function(){function e(e,t,i,n){console.log("[Motion] constructor"),this.$el=e,console.log(e),n&&(this.vidSrc=n),window.File&&window.FileReader&&window.FileList&&window.Blob}function t(e){console.log("[Motion] initMotionInput"),e.classList.add("motion-input-js");var t=e.querySelector("input[type=file]");t.addEventListener("change",i);var n=document.createElement("div");n.classList.add("motion-input-preview"),e.insertBefore(n,t)}function i(){if(console.log("Input changed"),this.files&&this.files[0]&&this.files[0].type.match("video.*")){var e=new FileReader,t=this.parentNode.querySelector(".motion-input-preview");e.onload=function(e){var i=document.createElement("video");i.onload=function(){console.log(i),i.width>300?(newWidth=i.width/img.width*300,newHeight=i.height/img.width*300):(newWidth=i.width,newHeight=i.height),0===errors.length?t.style.src="'"+e.target.result+"'":(alert(errors.join("\n")),errors=[])},i.setAttribute("src",e.target.result)},e.readAsDataURL(this.files[0])}else errors.push("File is not a valid video")}return e.prototype.createMotion=function(){console.log("[Motion] creatMotion");var e=$("#motion-template").text(),t=Handlebars.compile(e),i={};i.vidSrc=this.txt?this.vidSrc:"";var n=t(i);return $(n)},e.prototype.initMotionInputs=function(){console.log("[Motion] initMotionInputs");var e=this.$el.find(".motion-input")[0];t(e)},e}()},{}],11:[function(e,t){t.exports=function(){function e(e,t,i,n){console.log("[Picture] constructor"),this.$el=e,console.log(e),n&&(this.imgSrc=n),window.File&&window.FileReader&&window.FileList&&window.Blob&&console.log("Full file support")}function t(e){e.classList.add("image-input-js");var t=e.querySelector("input[type=file]");t.addEventListener("change",i);var n=document.createElement("div");n.classList.add("image-input-preview"),e.insertBefore(n,t)}function i(){if(console.log("Input changed"),this.files&&this.files[0]&&this.files[0].type.match("image.*")){var e=new FileReader,t=this.parentNode.querySelector(".image-input-preview");e.onload=function(e){var i=document.createElement("img");i.onload=function(){i.width>300?(newWidth=i.width/i.width*300,newHeight=i.height/i.width*300):(newWidth=i.width,newHeight=i.height),0===n.length?(t.style.backgroundImage="url('"+e.target.result+"')",t.style.height=newHeight+"px",t.style.width=newWidth+"px"):(alert(n.join("\n")),n=[])},i.setAttribute("src",e.target.result),i.setAttribute("width",i.width),i.setAttribute("height",i.height)},e.readAsDataURL(this.files[0])}else n.push("File is not a valid image")}var n=[];return e.prototype.createPicture=function(){console.log("[Picture] creatPicture");var e=$("#picture-template").text(),t=Handlebars.compile(e),i={};i.imgSrc=this.txt?this.imgSrc:"";var n=t(i);return $(n)},e.prototype.initImageInputs=function(){console.log("[Picture] initImageinputs");var e=this.$el.find(".image-input")[0];t(e)},e.prototype.edit=function(){console.log("[Picture] edit")},e.prototype.confirm=function(){console.log("[Picture] confirm")},e.prototype.endEdit=function(){console.log("[Picture] endEdit")},e}()},{}],12:[function(e,t){t.exports=function(){function t(e){console.log("[Postit] constructor"),this.txt=e,this.txt||(this.txt="Nieuwe Postit")}var i=e("./PostitEdit");return t.prototype.createPostit=function(){console.log("[Postit] createPostit");var e=$("#postit-template").text(),t=Handlebars.compile(e),i={};i.txt=this.txt;var n=t(i);return $(n)},t.prototype.edit=function(e,t){console.log("[Postit] edit"),this.$el=e,this.elementId=t,this.$el.find("#"+t+" > .postit > p").toggleClass("hidden"),this.$el.find("#"+t).append(new i(this.txt))},t.prototype.confirm=function(){console.log("[Postit] confirm"),this.txt=this.$el.find("#"+this.elementId+" .postit-edit").val(),this.endEdit()},t.prototype.endEdit=function(){console.log("[Postit] endEdit"),this.$el.find("#"+this.elementId+" > .postit > p").addClass("hidden").text(this.txt),this.$el.find("#"+this.elementId+" > .postit-edit").remove(),this.$el.find("#"+this.elementId+" > .postit > p").toggleClass("hidden")},t}()},{"./PostitEdit":13}],13:[function(e,t){t.exports=function(){function e(e){console.log("[PostitEdit] constructor");var t=$("#postit-edit-template").text(),i=Handlebars.compile(t),n={};n.txt=e;var o=i(n);return $(o)}return e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvQWRkQ29udHJpYnV0b3IuanMiLCJqcy9zcmMvY2xhc3Nlcy9BcHAuanMiLCJqcy9zcmMvY2xhc3Nlcy9EYXRhSGFuZGxlci5qcyIsImpzL3NyYy9jbGFzc2VzL0VkaXRNZW51LmpzIiwianMvc3JjL2NsYXNzZXMvRWxlbWVudC5qcyIsImpzL3NyYy9jbGFzc2VzL0VsZW1lbnRQaWNrZXIuanMiLCJqcy9zcmMvY2xhc3Nlcy9XaGl0ZWJvYXJkLmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZFNldHRpbmdzLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvTW90aW9uLmpzIiwianMvc3JjL2NsYXNzZXMvZWxlbWVudHMvUGljdHVyZS5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdC5qcyIsImpzL3NyYy9jbGFzc2VzL2VsZW1lbnRzL1Bvc3RpdEVkaXQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLE9BQUEsS0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLHVCQUFBLEVBQUEsSUFBQSxNQUFBLEdBQUEsS0FBQSxtQkFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsU0FBQSxJQ0FBLFdBSUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLGVBSEEsR0FBQSxHQUFBLEVBQUEsZ0JBTUEsK0NDUkEsRUFBQSxRQUFBLFdBR0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsS0FBQSxzQkFBQSxHQUNBLEtBQUEsSUFBQSxLQUFBLHNCQUFBLEdBQUEsaUJBQUEsU0FBQSxLQUFBLGNBQUEsS0FBQSxPQVdBLE1BUkEsR0FBQSxVQUFBLGNBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQ0EsUUFBQSxJQUFBLFVBRUEsS0FBQSxNQUFBLE1BQUEsSUFJQSwyQkNqQkEsRUFBQSxRQUFBLFdBT0EsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLHFCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsYUFBQSxFQUNBLEtBQUEsT0FBQSxXQUNBLEtBQUEsRUFBQSxFQUNBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsS0FBQSxZQUFBLEdBQUEsR0FDQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLGNBQUEsR0FBQSxHQUFBLEtBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxZQUFBLGVBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEtBQUEsV0FBQSxxQkFBQSxLQUFBLHlCQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsS0FBQSxjQUFBLHlCQUFBLEtBQUEsNEJBQUEsS0FBQSxPQUVBLEtBQUEsYUFwQkEsR0FBQSxHQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLG1CQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxnQkEyRUEsT0F2REEsR0FBQSxVQUFBLHlCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsa0NBQ0EsS0FBQSxjQUFBLGdCQUNBLEtBQUEsY0FBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxTQUFBLEdBR0EsRUFBQSxVQUFBLDRCQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEscUNBQ0EsS0FBQSxjQUFBLGVBQ0EsSUFBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsTUFBQSxXQUFBLEVBQUEsRUFBQSxXQUNBLEtBQUEsR0FBQSxFQUFBLG1CQUFBLEtBQUEsdUJBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxXQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUNBLEtBQUEsR0FBQSxLQUFBLE1BQUEsTUFDQSxLQUFBLFlBQUEsa0JBQUEsS0FBQSxNQUFBLEtBSUEsRUFBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsWUFBQSxLQUFBLEtBQUEsWUFBQSxvQkFDQSxLQUFBLElBQ0EsS0FBQSxHQUFBLEtBQUEsTUFBQSxRQUNBLEtBQUEsY0FJQSxFQUFBLFVBQUEsV0FBQSxXQUFBLFFBQUEsSUFBQSxtQkFDQSxJQUFBLEdBQUEsS0FBQSxZQUFBLEdBQUEsRUFDQSxLQUFBLEdBQUEsS0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxRQUNBLElBQ0EsR0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxHQUFBLEtBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxZQUNBLEVBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsUUFDQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLE1BQUEsR0FBQSxFQUFBLGlCQUFBLEtBQUEsY0FBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEVBQUEsbUJBQUEsS0FBQSx1QkFBQSxLQUFBLFNBSUEsRUFBQSxVQUFBLGNBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSx1QkFDQSxLQUFBLFlBQUEsbUJBQUEsRUFBQSxZQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsS0FBQSxZQUFBLGdCQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsS0FBQSxlQUdBLEVBQUEsVUFBQSx1QkFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsWUFBQSxlQUFBLEVBQUEsWUFBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLElBQUEsUUFBQSxFQUFBLFFBQUEsSUFBQSxPQUFBLEtBQUEsZUFHQSwrRkNoRkEsRUFBQSxRQUFBLFdBRUEsUUFBQSxLQUFBLFFBQUEsSUFBQSw2QkFDQSxLQUFBLElBQUEsaUVBQ0EsRUFBQSxLQUNBLEtBQUEsaUJBSkEsR0FBQSxFQTRGQSxPQXJGQSxHQUFBLFVBQUEsa0JBQUEsU0FBQSxHQUNBLE1BREEsU0FBQSxJQUFBLG1DQUNBLEVBQUEsTUFDQSxLQUFBLE1BQ0EsSUFBQSxLQUFBLElBQUEsRUFBQSxLQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLEVBQUEsY0FBQSxLQUFBLEdBQ0EsS0FBQSxLQUFBLEVBQUEsZ0JBQUEsUUFLQSxFQUFBLFVBQUEsaUJBQUEsV0FDQSxNQURBLFNBQUEsSUFBQSxrQ0FDQSxLQUFBLGVBR0EsRUFBQSxVQUFBLG1CQUFBLFNBQUEsRUFBQSxHQUNBLE9BREEsUUFBQSxJQUFBLG9DQUNBLEdBQ0EsSUFBQSxVQUNBLEtBQUEsa0JBQUEsVUFBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsa0JBQUEsU0FBQSxFQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsa0JBQUEsU0FBQSxLQUtBLEVBQUEsVUFBQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxNQUNBLElBQUEsS0FBQSxJQUFBLEVBQUEsV0FBQSxFQUNBLE1BQUEsUUFBQSxXQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxhQUFBLE9BS0EsRUFBQSxVQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSxpQ0FDQSxHQUNBLElBQUEsVUFDQSxLQUFBLFdBQUEsVUFBQSxFQUFBLEVBQUEsRUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFdBQUEsU0FBQSxHQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsV0FBQSxTQUFBLE1BS0EsRUFBQSxVQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLFlBQUEsT0FDQSxNQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FBQSxhQUFBLEdBQ0EsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLFdBQUEsSUFFQSxNQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsU0FDQSxRQUFBLElBQUEsT0FLQSxFQUFBLFVBQUEsZUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsS0FBQSxPQUNBLElBQUEsS0FBQSxJQUFBLDBCQUNBLE1BQUEsY0FBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxHQUNBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxXQUFBLElBRUEsTUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLFNBQ0EsUUFBQSxJQUFBLE9BS0EsMkJDN0ZBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDBCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxFQUFBLHVCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxHQUNBLFVBQ0EsU0FBQSxTQUFBLEtBQUEsYUFDQSxTQUFBLE9BQUEsS0FBQSxhQUNBLFNBQUEsU0FBQSxLQUFBLGdCQUdBLFlBQUEsZUFBQSxXQUFBLFdBQ0EsR0FBQSxHQUFBLFdBQUEsaUJBQUEsS0FBQSxVQUNBLEVBQUEsV0FBQSxpQkFBQSxLQUFBLEtBRUEsT0FBQSxJQUFBLFlBQUEsV0FDQSxVQUFBLEVBQUEsSUFBQSxFQUFBLFVBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxPQUFBLEdBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsUUFBQSxZQUFBLFVBQ0EsS0FBQSxlQUNBLEtBQUEsZ0JBMEJBLE1BdkJBLEdBQUEsVUFBQSxjQUFBLFdBQUEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsWUFBQSxVQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLGVBQUEsWUFBQSxXQUdBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLDJCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLEtBQUEsYUFBQSxLQUFBLE9BQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsT0FBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQ0EsR0FEQSxRQUFBLElBQUEsMkJBQ0EsZUFBQSxFQUFBLE9BQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxlQUFBLEdBQ0EsS0FBQSxvQkFDQSxDQUNBLEdBQUEsS0FDQSxHQUFBLFNBQUEsRUFBQSxPQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxpQkFBQSxLQUtBLDJCQ3JEQSxFQUFBLFFBQUEsV0FRQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLEtBQUEsWUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsVUFDQSxLQUFBLFVBQUEsR0FFQSxLQUFBLFVBQUEsS0FBQSxlQUNBLFFBQUEsSUFBQSxnQkFBQSxLQUFBLFlBRUEsS0FBQSxTQUFBLEVBQ0EsSUFDQSxLQUFBLEdBQUEsR0FFQSxLQUFBLHNCQXJCQSxHQUFBLEdBQUEsRUFBQSxjQUNBLEVBQUEsRUFDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLHNCQUNBLEVBQUEsRUFBQSxvQkFzSkEsT0FsSUEsR0FBQSxVQUFBLG9CQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsSUFBQSxLQUFBLGVBQUEsT0FBQSw4Q0FDQSxLQUFBLElBQUEsS0FBQSxnQ0FBQSxLQUFBLEtBQUEsS0FBQSxVQUNBLElBQUEsS0FDQSxHQUFBLElBQUEsS0FBQSxTQUFBLEtBQ0EsRUFBQSxLQUFBLEtBQUEsU0FBQSxLQUNBLEVBQUEsT0FBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsR0FDQSxLQUFBLGlCQUNBLEtBQUEsaUJBR0EsRUFBQSxVQUFBLGNBQUEsV0FDQSxPQURBLFFBQUEsSUFBQSwyQkFDQSxLQUFBLGFBQ0EsSUFBQSxVQUNBLEtBQUEsUUFBQSxHQUFBLEdBQUEsS0FBQSxTQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGdCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxRQUFBLGNBQ0EsS0FBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsUUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsZUFDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxRQUFBLGlCQUNBLE1BQ0EsS0FBQSxTQUNBLEtBQUEsUUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFdBQUEsT0FBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFlBQ0EsS0FBQSxRQUFBLHFCQUtBLEVBQUEsVUFBQSxZQUFBLFdBQUEsUUFBQSxJQUFBLHlCQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLEdBQUEsWUFBQSxLQUFBLGlCQUFBLEtBQUEsT0FDQSxLQUFBLFdBQUEsR0FHQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUFBLFFBQUEsSUFBQSw4QkFDQSxNQUFBLE9BQUEsS0FBQSxLQUFBLFlBRUEsZUFBQSxFQUFBLE9BQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxZQUFBLFVBR0EsS0FBQSxXQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsUUFDQSxLQUFBLFdBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxPQUNBLEtBQUEsa0JBQUEsS0FBQSxpQkFBQSxLQUFBLE1BQ0EsS0FBQSxnQkFBQSxLQUFBLGVBQUEsS0FBQSxNQUVBLEtBQUEsUUFBQSxFQUFBLFFBQ0EsS0FBQSxRQUFBLEVBQUEsVUFDQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsU0FBQSxHQUNBLFNBQUEsS0FBQSxpQkFBQSxZQUFBLEtBQUEsbUJBQ0EsU0FBQSxLQUFBLGlCQUFBLFVBQUEsS0FBQSxtQkFJQSxFQUFBLFVBQUEsZUFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxLQUFBLFNBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLFdBQ0EsS0FBQSxHQUFBLEtBQUEsU0FBQSxlQUFBLEtBQUEsbUJBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxLQUFBLFNBQUEsaUJBQUEsS0FBQSxxQkFBQSxLQUFBLFFBR0EsRUFBQSxVQUFBLG1CQUFBLFdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsUUFBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFlBR0EsRUFBQSxVQUFBLHFCQUFBLFNBQUEsR0FDQSxPQURBLFFBQUEsSUFBQSxrQ0FDQSxFQUFBLFVBQ0EsSUFBQSxTQUNBLEtBQUEsU0FBQSxnQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsV0FBQSxRQUNBLElBQUEsS0FDQSxHQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsWUFBQSxLQUFBLFlBQ0EsS0FBQSxLQUFBLEtBQUEsaUJBQUEsRUFDQSxNQUNBLEtBQUEsT0FDQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsZUFDQSxNQUNBLEtBQUEsU0FDQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFNBQUEsa0JBS0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FDQSxHQURBLFFBQUEsSUFBQSw4QkFDQSxLQUFBLGFBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUNBLE1BQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxXQUFBLElBQUEsT0FBQSxFQUFBLEtBQUEsU0FDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsV0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLFdBSUEsRUFBQSxVQUFBLGVBQUEsU0FBQSxHQUtBLEdBTEEsUUFBQSxJQUFBLDRCQUNBLEtBQUEsV0FBQSxFQUNBLFNBQUEsS0FBQSxvQkFBQSxZQUFBLEtBQUEsbUJBQ0EsU0FBQSxLQUFBLG9CQUFBLFVBQUEsS0FBQSxpQkFFQSxLQUFBLGFBQUEsRUFBQSxFQUFBLFFBQUEsSUFBQSxRQUFBLEtBQUEsY0FBQSxFQUFBLEVBQUEsUUFBQSxJQUFBLFFBQUEsQ0FDQSxHQUFBLEtBQ0EsR0FBQSxRQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxLQUFBLFlBQ0EsRUFBQSxVQUFBLEtBQUEsVUFDQSxLQUFBLEtBQUEsS0FBQSxtQkFBQSxLQUlBLEVBQUEsVUFBQSxhQUFBLFdBQUEsUUFBQSxJQUFBLHlCQUNBLElBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxrQkFDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxHQUdBLE9BREEsR0FBQSxLQUFBLFNBQUEsRUFBQSxHQUFBLE1BQUEsR0FBQSxJQUNBLE9BQUEsT0FBQSxFQUFBLElBQUEsR0FFQSxNQUFBLEtBSUEsK0dDNUpBLEVBQUEsUUFBQSxXQUdBLFFBQUEsR0FBQSxHQUFBLFFBQUEsSUFBQSwrQkFDQSxLQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSw0QkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsR0FDQSxXQUNBLFFBQUEsVUFBQSxLQUFBLFlBQ0EsUUFBQSxTQUFBLEtBQUEsVUFDQSxRQUFBLFNBQUEsS0FBQSxVQUdBLFlBQUEsZUFBQSxTQUFBLFdBQ0EsR0FBQSxHQUFBLFdBQUEsaUJBQUEsS0FBQSxTQUNBLEVBQUEsV0FBQSxpQkFBQSxLQUFBLEtBRUEsT0FBQSxJQUFBLFlBQUEsV0FDQSxVQUFBLEVBQUEsSUFBQSxFQUFBLFVBSUEsSUFBQSxHQUFBLEVBQUEsRUFDQSxNQUFBLElBQUEsS0FBQSxlQUFBLE9BQUEsRUFBQSxJQUNBLEtBQUEsZ0JBQ0EsS0FBQSxjQXVCQSxNQXBCQSxHQUFBLFVBQUEsY0FBQSxXQUFBLFFBQUEsSUFBQSxpQ0FDQSxLQUFBLElBQUEsS0FBQSxtQkFBQSxZQUFBLFdBR0EsRUFBQSxVQUFBLFlBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLDhCQUNBLElBQUEsSUFDQSxJQUFBLEVBQ0EsS0FBQSxFQUVBLE1BQUEsSUFBQSxLQUFBLG1CQUFBLElBQUEsSUFHQSxFQUFBLFVBQUEsWUFBQSxXQUFBLFFBQUEsSUFBQSwrQkFDQSxLQUFBLElBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsS0FBQSxhQUFBLEtBQUEsUUFHQSxFQUFBLFVBQUEsYUFBQSxTQUFBLEdBQUEsUUFBQSxJQUFBLGdDQUNBLEtBQUEsS0FBQSxLQUFBLHlCQUFBLEVBQUEsT0FBQSxLQUdBLDJCQ2pEQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxtQkFKQSxHQUFBLEdBQUEsRUFBQSx1QkFpQ0EsT0ExQkEsR0FBQSxVQUFBLGlCQUFBLFdBQUEsUUFBQSxJQUFBLGlDQUNBLEtBQUEsTUFBQSxLQUFBLElBQUEsT0FBQSwrQkFDQSxLQUFBLGVBR0EsRUFBQSxVQUFBLFlBQUEsV0FBQSxRQUFBLElBQUEsNEJBQ0EsS0FBQSxNQUFBLEdBQUEsUUFBQSxLQUFBLGFBQUEsS0FBQSxRQUdBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FBQSxRQUFBLElBQUEsNEJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLElBQUEsU0FBQSxLQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxTQUFBLElBQ0EsSUFDQSxHQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsRUFDQSxlQUFBLEVBQUEsT0FBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLHFCQUFBLElBSUEsRUFBQSxVQUFBLHNCQUFBLFdBQUEsUUFBQSxJQUFBLHNDQUNBLEtBQUEsbUJBQUEsR0FBQSxHQUFBLEtBQUEsS0FDQSxLQUFBLG1CQUFBLHFCQUNBLEtBQUEsbUJBQUEsa0JBR0EsbURDbkNBLEVBQUEsUUFBQSxXQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEsb0NBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxhQUFBLEVBQ0EsSUFDQSxLQUFBLFlBQUEsR0FOQSxHQUFBLEdBQUEsRUFBQSxtQkFrQ0EsT0F2QkEsR0FBQSxVQUFBLG1CQUFBLFdBQUEsUUFBQSxJQUFBLDBDQUNBLElBQUEsR0FBQSxFQUFBLHFCQUFBLE9BQ0EsRUFBQSxXQUFBLFFBQUEsR0FDQSxJQUdBLEdBQUEsWUFEQSxLQUFBLFlBQ0EsS0FBQSxZQUVBLFdBR0EsRUFBQSxZQUFBLEtBQUEsV0FFQSxJQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsZUFBQSxPQUFBLEVBQUEsS0FHQSxFQUFBLFVBQUEsZUFBQSxXQUFBLFFBQUEsSUFBQSx1Q0FDQSxLQUFBLGVBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxLQUFBLHNCQUNBLFFBQUEsSUFBQSxLQUFBLE1BSUEsZ0RDcENBLEVBQUEsUUFBQSxXQUVBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsSUFBQSx3QkFDQSxLQUFBLElBQUEsRUFDQSxRQUFBLElBQUEsR0FDQSxJQUNBLEtBQUEsT0FBQSxHQUlBLE9BQUEsTUFDQSxPQUFBLFlBQ0EsT0FBQSxVQUNBLE9BQUEsS0EyQkEsUUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLDRCQUNBLEVBQUEsVUFBQSxJQUFBLGtCQUVBLElBQUEsR0FBQSxFQUFBLGNBQUEsbUJBQ0EsR0FBQSxpQkFBQSxTQUFBLEVBRUEsSUFBQSxHQUFBLFNBQUEsY0FBQSxNQUNBLEdBQUEsVUFBQSxJQUFBLHdCQUdBLEVBQUEsYUFBQSxFQUFBLEdBR0EsUUFBQSxLQUdBLEdBRkEsUUFBQSxJQUFBLGlCQUdBLEtBQUEsT0FDQSxLQUFBLE1BQUEsSUFDQSxLQUFBLE1BQUEsR0FBQSxLQUFBLE1BQUEsV0FDQSxDQUNBLEdBQUEsR0FBQSxHQUFBLFlBQ0EsRUFBQSxLQUFBLFdBQUEsY0FBQSx3QkFFQSxHQUFBLE9BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLGNBQUEsUUFFQSxHQUFBLE9BQUEsV0FDQSxRQUFBLElBQUEsR0FFQSxFQUFBLE1BQUEsS0FDQSxTQUFBLEVBQUEsTUFBQSxJQUFBLE1BQUEsSUFDQSxVQUFBLEVBQUEsT0FBQSxJQUFBLE1BQUEsTUFFQSxTQUFBLEVBQUEsTUFDQSxVQUFBLEVBQUEsUUFHQSxJQUFBLE9BQUEsT0FDQSxFQUFBLE1BQUEsSUFBQSxJQUFBLEVBQUEsT0FBQSxPQUFBLEtBT0EsTUFBQSxPQUFBLEtBQUEsT0FDQSxZQUdBLEVBQUEsYUFBQSxNQUFBLEVBQUEsT0FBQSxTQU9BLEVBQUEsY0FBQSxLQUFBLE1BQUEsUUFFQSxRQUFBLEtBQUEsNkJBY0EsTUE5RkEsR0FBQSxVQUFBLGFBQUEsV0FBQSxRQUFBLElBQUEsdUJBQ0EsSUFBQSxHQUFBLEVBQUEsb0JBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxPQURBLEtBQUEsSUFDQSxLQUFBLE9BRUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FBQSxJQUtBLEVBQUEsVUFBQSxpQkFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsaUJBQUEsRUFDQSxHQUFBLElBNEVBLDRCQ2pIQSxFQUFBLFFBQUEsV0FHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLElBQUEseUJBQ0EsS0FBQSxJQUFBLEVBQ0EsUUFBQSxJQUFBLEdBQ0EsSUFDQSxLQUFBLE9BQUEsR0FJQSxPQUFBLE1BQ0EsT0FBQSxZQUNBLE9BQUEsVUFDQSxPQUFBLE1BRUEsUUFBQSxJQUFBLHFCQXlCQSxRQUFBLEdBQUEsR0FDQSxFQUFBLFVBQUEsSUFBQSxpQkFFQSxJQUFBLEdBQUEsRUFBQSxjQUFBLG1CQUNBLEdBQUEsaUJBQUEsU0FBQSxFQUVBLElBQUEsR0FBQSxTQUFBLGNBQUEsTUFDQSxHQUFBLFVBQUEsSUFBQSx1QkFFQSxFQUFBLGFBQUEsRUFBQSxHQUdBLFFBQUEsS0FHQSxHQUZBLFFBQUEsSUFBQSxpQkFHQSxLQUFBLE9BQ0EsS0FBQSxNQUFBLElBQ0EsS0FBQSxNQUFBLEdBQUEsS0FBQSxNQUFBLFdBQ0EsQ0FDQSxHQUFBLEdBQUEsR0FBQSxZQUNBLEVBQUEsS0FBQSxXQUFBLGNBQUEsdUJBRUEsR0FBQSxPQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxjQUFBLE1BRUEsR0FBQSxPQUFBLFdBRUEsRUFBQSxNQUFBLEtBQ0EsU0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLElBQ0EsVUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLE1BRUEsU0FBQSxFQUFBLE1BQ0EsVUFBQSxFQUFBLFFBR0EsSUFBQSxFQUFBLFFBQ0EsRUFBQSxNQUFBLGdCQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsS0FDQSxFQUFBLE1BQUEsT0FBQSxVQUFBLEtBQ0EsRUFBQSxNQUFBLE1BQUEsU0FBQSxPQUdBLE1BQUEsRUFBQSxLQUFBLE9BQ0EsT0FJQSxFQUFBLGFBQUEsTUFBQSxFQUFBLE9BQUEsUUFDQSxFQUFBLGFBQUEsUUFBQSxFQUFBLE9BQ0EsRUFBQSxhQUFBLFNBQUEsRUFBQSxTQUdBLEVBQUEsY0FBQSxLQUFBLE1BQUEsUUFHQSxHQUFBLEtBQUEsNkJBL0ZBLEdBQUEsS0FvSEEsT0FoR0EsR0FBQSxVQUFBLGNBQUEsV0FBQSxRQUFBLElBQUEseUJBQ0EsSUFBQSxHQUFBLEVBQUEscUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBR0EsR0FBQSxPQURBLEtBQUEsSUFDQSxLQUFBLE9BRUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FBQSxJQUlBLEVBQUEsVUFBQSxnQkFBQSxXQUFBLFFBQUEsSUFBQSw0QkFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLEtBQUEsZ0JBQUEsRUFDQSxHQUFBLElBc0VBLEVBQUEsVUFBQSxLQUFBLFdBQUEsUUFBQSxJQUFBLG1CQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLHNCQUdBLEVBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxJQUFBLHNCQUdBLDRCQ3JIQSxFQUFBLFFBQUEsV0FJQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsd0JBQ0EsS0FBQSxJQUFBLEVBQ0EsS0FBQSxNQUNBLEtBQUEsSUFBQSxpQkFMQSxHQUFBLEdBQUEsRUFBQSxlQW9DQSxPQTNCQSxHQUFBLFVBQUEsYUFBQSxXQUFBLFFBQUEsSUFBQSx3QkFDQSxJQUFBLEdBQUEsRUFBQSxvQkFBQSxPQUNBLEVBQUEsV0FBQSxRQUFBLEdBQ0EsSUFDQSxHQUFBLElBQUEsS0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQUFBLElBR0EsRUFBQSxVQUFBLEtBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxJQUFBLGlCQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsVUFBQSxFQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxrQkFBQSxZQUFBLFVBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEtBQUEsT0FHQSxFQUFBLFVBQUEsUUFBQSxXQUFBLFFBQUEsSUFBQSxvQkFDQSxLQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsaUJBQUEsTUFDQSxLQUFBLFdBR0EsRUFBQSxVQUFBLFFBQUEsV0FBQSxRQUFBLElBQUEsb0JBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsa0JBQUEsU0FBQSxVQUFBLEtBQUEsS0FBQSxLQUNBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLG1CQUFBLFNBQ0EsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsa0JBQUEsWUFBQSxXQUdBLDZDQ3RDQSxFQUFBLFFBQUEsV0FFQSxRQUFBLEdBQUEsR0FBQSxRQUFBLElBQUEsMkJBQ0EsSUFBQSxHQUFBLEVBQUEseUJBQUEsT0FDQSxFQUFBLFdBQUEsUUFBQSxHQUNBLElBQ0EsR0FBQSxJQUFBLENBRUEsSUFBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEdBQUEsR0FJQSxNQUFBIiwiZmlsZSI6InNjcmlwdC5kaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24oKXtcblxuXHR2YXIgQXBwID0gcmVxdWlyZSgnLi9jbGFzc2VzL0FwcCcpO1xuXG5cdGZ1bmN0aW9uIGluaXQoKcKge1xuXHRcdG5ldyBBcHAoJCgnI2NvbnRhaW5lcicpKTtcblx0fVxuXG5cdGluaXQoKTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cblx0ZnVuY3Rpb24gQWRkQ29udHJpYnV0b3IoJGVsKSB7IGNvbnNvbGUubG9nKCdbQWRkQ29udHJpYnV0b3JdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5pbnB1dCA9IHRoaXMuJGVsLmZpbmQoJy5pbnB1dC1jb250cmlidXRvcicpWzBdO1xuXHRcdHRoaXMuJGVsLmZpbmQoJy5pbnB1dC1jb250cmlidXRvcicpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0SGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdEFkZENvbnRyaWJ1dG9yLnByb3RvdHlwZS5zdWJtaXRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGNvbnNvbGUubG9nKFwiU1VCTVVUXCIpO1xuXHRcdC8vYmVhbi5maXJlKHRoaXMsIFwiYWRkQ29udHJpYnV0b3JcIiwgdGhpcy5pbnB1dC52YWx1ZSk7XG5cdFx0dGhpcy5pbnB1dC52YWx1ZSA9ICcnO1xuXHR9O1xuXG5cblx0cmV0dXJuIEFkZENvbnRyaWJ1dG9yO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmQgPSByZXF1aXJlKCcuL1doaXRlYm9hcmQnKTtcblx0dmFyIEVsZW1lbnRQaWNrZXIgPSByZXF1aXJlKCcuL0VsZW1lbnRQaWNrZXInKTtcblx0dmFyIEVsZW1lbnQgPSByZXF1aXJlKCcuL0VsZW1lbnQnKTtcblx0dmFyIERhdGFIYW5kbGVyID0gcmVxdWlyZSgnLi9EYXRhSGFuZGxlcicpO1xuXG5cdGZ1bmN0aW9uIEFwcCgkZWwpIHsgY29uc29sZS5sb2coJ1tBcHBdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy53aGl0ZWJvYXJkSWQgPSAxO1xuXHRcdHRoaXMudHlwZXMgPSBbJ3Bvc3RpdHMnXTtcblx0XHR0aGlzLmkgPSAwO1xuXHRcdHRoaXMuZWxlbWVudExpc3QgPSBbXTtcblx0XHR0aGlzLnBvc2l0aW9uID0ge307XG5cdFx0dGhpcy5kYXRhSGFuZGxlciA9IG5ldyBEYXRhSGFuZGxlcigpO1xuXHRcdHRoaXMud2hpdGVib2FyZCA9IG5ldyBXaGl0ZWJvYXJkKHRoaXMuJGVsKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIgPSBuZXcgRWxlbWVudFBpY2tlcih0aGlzLiRlbCk7XG5cdFx0Ly9MVUlTVEVSRU5cblx0XHRiZWFuLm9uKHRoaXMuZGF0YUhhbmRsZXIsIFwiZGF0YS1zdWNjZXNzXCIsIHRoaXMuYWRkVG9FbGVtZW50TGlzdC5iaW5kKHRoaXMpKTtcblx0XHRiZWFuLm9uKHRoaXMud2hpdGVib2FyZCwgXCJ3aGl0ZWJvYXJkLWNsaWNrZWRcIiwgdGhpcy53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVsZW1lbnRQaWNrZXIsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCB0aGlzLmVsZW1lbnRQaWNrZXJDbGlja2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHQvL1VJVFZPRVJFTlxuXHRcdHRoaXMuYnVpbGRCb2FyZCgpO1xuXHR9XG5cblx0QXBwLnByb3RvdHlwZS53aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSB3aGl0ZWJvYXJkQ2xpY2tlZEhhbmRsZXInKTtcblx0XHR0aGlzLmVsZW1lbnRQaWNrZXIudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdHRoaXMuZWxlbWVudFBpY2tlci5zZXRMb2NhdGlvbihldmVudC54UG9zLCBldmVudC55UG9zKTtcblx0XHR0aGlzLnBvc2l0aW9uID0gZXZlbnQ7XG5cdH07XG5cblx0QXBwLnByb3RvdHlwZS5lbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBlbGVtZW50UGlja2VyQ2xpY2tlZEhhbmRsZXInKTsgXG5cdFx0dGhpcy5lbGVtZW50UGlja2VyLnRvZ2dsZVZpc2libGUoKTtcblx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLGV2ZW50LHRoaXMucG9zaXRpb24pO1xuXHRcdHRoaXMubmV3RWxlbWVudChldmVudCwgZWxlbWVudC5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24oZWxlbWVudCwgXCJwb3NpdGlvbi1jaGFuZ2VkXCIsIHRoaXMucG9zaXRpb25DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmJ1aWxkQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYnVpbGRCb2FyZCcpO1xuXHRcdGZvcih2YXIgdHlwZSBpbiB0aGlzLnR5cGVzKSB7XG4gIFx0XHRcdHRoaXMuZGF0YUhhbmRsZXIubG9hZEJvYXJkRWxlbWVudHModGhpcy50eXBlc1t0eXBlXSk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUuYWRkVG9FbGVtZW50TGlzdCA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIGFkZFRvRWxlbWVudExpc3QnKTtcblx0XHR0aGlzLmVsZW1lbnRMaXN0LnB1c2godGhpcy5kYXRhSGFuZGxlci5nZXRCb2FyZEVsZW1lbnRzKCkpO1xuXHRcdHRoaXMuaSsrXG5cdFx0aWYodGhpcy5pID09IHRoaXMudHlwZXMubGVuZ3RoKXtcblx0XHRcdHRoaXMuYWRkVG9Cb2FyZCgpO1xuXHRcdH1cblx0fTtcblxuXHRBcHAucHJvdG90eXBlLmFkZFRvQm9hcmQgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0FwcF0gYWRkVG9Cb2FyZCcpOyBcblx0XHR2YXIgbGlzdCA9IHRoaXMuZWxlbWVudExpc3RbMF1bMF07XG5cdFx0Zm9yKHZhciBlbGVtZW50IGluIGxpc3QpIHtcbiAgXHRcdFx0dmFyIHR5cGUgPSBsaXN0W2VsZW1lbnRdLmVsX3R5cGU7XG4gIFx0XHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuICBcdFx0XHRwb3NpdGlvbi55UG9zID0gTnVtYmVyKGxpc3RbZWxlbWVudF0ucG9zeSk7XG4gIFx0XHRcdHBvc2l0aW9uLnhQb3MgPSBOdW1iZXIobGlzdFtlbGVtZW50XS5wb3N4KTtcbiAgXHRcdFx0dmFyIGVsZW1lbnRJZCA9IGxpc3RbZWxlbWVudF0uaWRfb25fYm9hcmQ7XG4gIFx0XHRcdHZhciBpZCA9IGxpc3RbZWxlbWVudF0uaWQ7XG4gIFx0XHRcdHZhciBjb250ZW50ID0gbGlzdFtlbGVtZW50XS5jb250ZW50O1xuICBcdFx0XHR2YXIgZWxlbWVudCA9IG5ldyBFbGVtZW50KHRoaXMuJGVsLHR5cGUscG9zaXRpb24sZWxlbWVudElkLGNvbnRlbnQsaWQpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicmVtb3ZlLWNsaWNrZWRcIiwgdGhpcy5yZW1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICBcdFx0XHRiZWFuLm9uKGVsZW1lbnQsIFwicG9zaXRpb24tY2hhbmdlZFwiLCB0aGlzLnBvc2l0aW9uQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0fVxuXHR9O1xuXG5cdEFwcC5wcm90b3R5cGUucmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tBcHBdIHJlbW92ZUhhbmRsZXInKTsgXG5cdFx0dGhpcy5kYXRhSGFuZGxlci5yZW1vdmVCb2FyZEVsZW1lbnQoZXZlbnQuZWxlbWVudFR5cGUsIGV2ZW50LmlkKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLm5ld0VsZW1lbnQgPSBmdW5jdGlvbih0eXBlLGlkT25Cb2FyZCl7IGNvbnNvbGUubG9nKCdbQXBwXSBuZXdFbGVtZW50SGFuZGxlcicpOyBcblx0XHR0aGlzLmRhdGFIYW5kbGVyLm5ld0JvYXJkRWxlbWVudCh0eXBlLGlkT25Cb2FyZCx0aGlzLnBvc2l0aW9uLHRoaXMud2hpdGVib2FyZElkKTtcblx0fTtcblxuXHRBcHAucHJvdG90eXBlLnBvc2l0aW9uQ2hhbmdlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbQXBwXSBwb3NpdGlvbkNoYW5nZWRIYW5kbGVyJyk7XG5cdFx0dGhpcy5kYXRhSGFuZGxlci5wb3NpdGlvbkNoYW5nZShldmVudC5lbGVtZW50VHlwZSxldmVudC5lbGVtZW50SWQsZXZlbnQuZVRhcmdldC5jc3MoJ2xlZnQnKSxldmVudC5lVGFyZ2V0LmNzcygndG9wJyksdGhpcy53aGl0ZWJvYXJkSWQpO1xuXHR9O1xuXG5cdHJldHVybiBBcHA7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIHRoYXQ7XG5cdGZ1bmN0aW9uIERhdGFIYW5kbGVyKCkgeyBjb25zb2xlLmxvZygnW0RhdGFIYW5kbGVyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMudXJsID0gXCJodHRwOi8vbG9jYWxob3N0Ojg4ODgvY3AzL3doaXRlYm9hcmQvd2hpdGVib2FyZC9hcGkvaW5kZXgucGhwL1wiO1xuXHRcdHRoYXQgPSB0aGlzO1xuXHRcdHRoaXMuYm9hcmRFbGVtZW50cyA9IFtdO1xuXHR9XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLmxvYWRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24odHlwZSl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIGxvYWRCb2FyZEVsZW1lbnRzJyk7XG5cdFx0cmV0dXJuICQuYWpheCh7XG5cdCAgXHRcdFx0XHR0eXBlOiBcIkdFVFwiLFxuXHQgIFx0XHRcdFx0dXJsOiB0aGlzLnVybCt0eXBlKycvMScsXG5cdCAgXHRcdFx0XHRkYXRhOiB7Y29udGVudDogJ2NvbnRlbnQnfSxcblx0ICBcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdFx0XHR0aGF0LmJvYXJkRWxlbWVudHMucHVzaChkYXRhKTtcblx0ICBcdFx0XHRcdFx0YmVhbi5maXJlKHRoYXQsIFwiZGF0YS1zdWNjZXNzXCIsIFtkYXRhXSk7XG5cdCAgXHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5nZXRCb2FyZEVsZW1lbnRzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gZ2V0Qm9hcmRFbGVtZW50cycpO1xuXHRcdHJldHVybiB0aGlzLmJvYXJkRWxlbWVudHM7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUJvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkKXsgY29uc29sZS5sb2coJ1tEYXRhSGFuZGxlcl0gcmVtb3ZlQm9hcmRFbGVtZW50Jyk7XG5cdFx0c3dpdGNoKGVsZW1lbnRUeXBlKSB7XG5cdFx0ICAgIGNhc2UgXCJwb3N0LWl0XCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgncG9zdGl0cycsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLnJlbW92ZUVsZW1lbnRCeUlkKCdzdGF0aWMnLGlkKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdCAgICBjYXNlIFwibW90aW9uXCI6XG5cdFx0ICAgIFx0dGhpcy5yZW1vdmVFbGVtZW50QnlJZCgnbW90aW9uJyxpZCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLnJlbW92ZUVsZW1lbnRCeUlkID0gZnVuY3Rpb24oZWxlbWVudFR5cGUsaWQpe1xuXHRcdCQuYWpheCh7XG5cdCAgXHRcdHR5cGU6IFwiR0VUXCIsXG5cdCAgXHRcdHVybDogdGhpcy51cmwrZWxlbWVudFR5cGUrJy9kZWxldGUvJytpZCxcblx0ICBcdFx0ZGF0YToge2NvbnRlbnQ6ICdjb250ZW50J30sXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKFwiZGVsZXRlZCA9IFwiK2RhdGEpO1xuXHQgIFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YUhhbmRsZXIucHJvdG90eXBlLm5ld0JvYXJkRWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnRUeXBlLGlkX29uX2JvYXJkLHBvc2l0aW9uLHdoaXRlYm9hcmRJZCl7IGNvbnNvbGUubG9nKCdbRGF0YUhhbmRsZXJdIG5ld0JvYXJkRWxlbWVudCcpO1xuXHRcdHN3aXRjaChlbGVtZW50VHlwZSkge1xuXHRcdCAgICBjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMubmV3RWxlbWVudCgncG9zdGl0cycsaWRfb25fYm9hcmQsIHBvc2l0aW9uLCB3aGl0ZWJvYXJkSWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ3N0YXRpYycsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJtb3Rpb25cIjpcblx0XHQgICAgXHR0aGlzLm5ld0VsZW1lbnQoJ21vdGlvbicsaWQpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdERhdGFIYW5kbGVyLnByb3RvdHlwZS5uZXdFbGVtZW50ID0gZnVuY3Rpb24oaWRfb25fYm9hcmQscG9zaXRpb24sd2hpdGVib2FyZElkKXtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCtlbGVtZW50VHlwZSsnL2FkZCcsXG5cdCAgXHRcdGRhdGE6IHtpZF9vbl9ib2FyZDogaWRfb25fYm9hcmQsIHhwb3M6IHBvc2l0aW9uLnhQb3MsIHlwb3M6IHBvc2l0aW9uLnlQb3MsIHdoaXRlYm9hcmRJZDogd2hpdGVib2FyZElkfSxcblx0ICBcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuXHQgIFx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzOicsIGRhdGEpO1xuXHQgIFx0XHR9LFxuXHQgIFx0XHRlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0ICBcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdCAgXHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHREYXRhSGFuZGxlci5wcm90b3R5cGUucG9zaXRpb25DaGFuZ2UgPSBmdW5jdGlvbihlbGVtZW50VHlwZSxpZF9vbl9ib2FyZCx4cG9zLHlwb3Msd2hpdGVib2FyZElkKXtcblx0XHQkLmFqYXgoe1xuXHQgIFx0XHR0eXBlOiBcIlBPU1RcIixcblx0ICBcdFx0dXJsOiB0aGlzLnVybCsncG9zdGl0cycrJy9jaGFuZ2UvcG9zaXRpb24nLFxuXHQgIFx0XHRkYXRhOiB7d2hpdGVib2FyZF9pZDogd2hpdGVib2FyZElkLGlkX29uX2JvYXJkOiBpZF9vbl9ib2FyZCwgeHBvczogeHBvcywgeXBvczogeXBvc30sXG5cdCAgXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBcdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzczonLCBkYXRhKTtcblx0ICBcdFx0fSxcblx0ICBcdFx0ZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJyk7XG5cdCAgXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHQgIFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0cmV0dXJuIERhdGFIYW5kbGVyO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0ZnVuY3Rpb24gRWRpdE1lbnUoJGVsLGVsZW1lbnRJZCkgeyBjb25zb2xlLmxvZygnW0VkaXRNZW51XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuZWxlbWVudElkID0gZWxlbWVudElkO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjZWRpdC1tZW51LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge1xuXHRcdCAgYWN0aW9uczogW1x0XG5cdFx0ICBcdFx0XHR7YWN0aW9uSWQ6IFwiY2FuY2VsXCIsIG5hbWU6IFwiYW5udWxlZXJcIn0sXG5cdFx0ICBcdFx0XHR7YWN0aW9uSWQ6IFwiZWRpdFwiLCBuYW1lOiBcIndpanppZ2VuXCJ9LFxuXHRcdCAgXHRcdFx0e2FjdGlvbklkOiBcInJlbW92ZVwiLCBuYW1lOiBcInZlcndpamRlcmVuXCJ9XG4gIFx0XHRcdFx0XVxuICBcdFx0XHR9O1xuXHRcdFx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZWRpdG1lbnUnLCBmdW5jdGlvbigpIHtcblx0XHRcdCAgdmFyIGFjdGlvbklkID0gSGFuZGxlYmFycy5lc2NhcGVFeHByZXNzaW9uKHRoaXMuYWN0aW9uSWQpLFxuXHRcdFx0ICAgICAgbmFtZSA9IEhhbmRsZWJhcnMuZXNjYXBlRXhwcmVzc2lvbih0aGlzLm5hbWUpO1xuXG5cdFx0XHQgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKFxuXHRcdFx0ICAgIFwiPGxpIGlkPVwiK2FjdGlvbklkK1wiPlwiK25hbWUrXCI8L2xpPlwiXG5cdFx0XHQgICk7XG5cdFx0XHR9KTtcblx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKS5hcHBlbmQoaHRtbCk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyA+IHAnKS50b2dnbGVDbGFzcygnaGlkZGVuJyk7XG5cdFx0dGhpcy5iaW5kSGFuZGxlcnMoKTtcblx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0fVxuXG5cdEVkaXRNZW51LnByb3RvdHlwZS50b2dnbGVWaXNpYmxlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFZGl0TWVudV0gdG9nZ2xlVmlzaWJsZScpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgPiBwJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyMnK3RoaXMuZWxlbWVudElkKycgLmVkaXQtbWVudScpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcblx0fTtcblxuXHRFZGl0TWVudS5wcm90b3R5cGUuYmluZEhhbmRsZXJzID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFZGl0TWVudV0gYmluZEhhbmRsZXJzJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnIycrdGhpcy5lbGVtZW50SWQrJyA+IHAnKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0XHR0aGlzLiRlbC5maW5kKCcjJyt0aGlzLmVsZW1lbnRJZCsnIGxpJykub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0RWRpdE1lbnUucHJvdG90eXBlLmNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXsgY29uc29sZS5sb2coJ1tFZGl0TWVudV0gY2xpY2tIYW5kbGVyJyk7XG5cdFx0aWYoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJlZGl0QnV0dG9uXCIpe1xuXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwiZWRpdC1jbGlja2VkXCIsIGFjdGlvbkV2ZW50KTtcblx0XHRcdHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdH1lbHNle1xuXHRcdFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG4gICBcdFx0XHRhY3Rpb25FdmVudC50YXJnZXRJZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgIFx0XHRcdGFjdGlvbkV2ZW50LmVsZW1lbnRJZCA9IHRoaXMuZWxlbWVudElkO1xuXHRcdFx0YmVhbi5maXJlKHRoaXMsIFwiYWN0aW9uLWNsaWNrZWRcIiwgYWN0aW9uRXZlbnQpO1xuXHRcdH1cblxuXHR9O1xuXG5cdHJldHVybiBFZGl0TWVudTtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBFZGl0TWVudSA9IHJlcXVpcmUoJy4vRWRpdE1lbnUnKTtcbiAgICB2YXIgekluZGV4Q291bnRlciA9IDE7XG5cdHZhciBQb3N0aXQgPSByZXF1aXJlKCcuL2VsZW1lbnRzL1Bvc3RpdCcpO1xuXHR2YXIgUGljdHVyZSA9IHJlcXVpcmUoJy4vZWxlbWVudHMvUGljdHVyZScpO1xuXHR2YXIgTW90aW9uID0gcmVxdWlyZSgnLi9lbGVtZW50cy9Nb3Rpb24nKTtcblxuXHRmdW5jdGlvbiBFbGVtZW50KCRlbCxlbGVtZW50VHlwZSxwb3NpdGlvbixlbGVtZW50SWQsY29udGVudCxpZCkgeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jb250ZW50ID0gY29udGVudDtcblx0XHR0aGlzLmVsZW1lbnRUeXBlID0gZWxlbWVudFR5cGU7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0aWYodGhpcy5lbGVtZW50SWQpe1xuXHRcdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0fWVsc2Uge1xuXHRcdFx0dGhpcy5lbGVtZW50SWQgPSB0aGlzLnNldEVsZW1lbnRJZCgpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJlbGVtZW50IGlkID0gXCIrdGhpcy5lbGVtZW50SWQpO1xuXHRcdH1cblx0XHR0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG5cdFx0aWYoaWQpe1xuXHRcdFx0dGhpcy5pZCA9IGlkO1xuXHRcdH1cblx0XHR0aGlzLmNyZWF0ZUVsZW1lbnRIb2xkZXIoKTtcblx0fVxuXG5cdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnRIb2xkZXIgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNyZWF0ZUVsZW1lbnRIb2xkZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI3doaXRlYm9hcmRcIikuYXBwZW5kKFwiPHNlY3Rpb24gY2xhc3M9J2VsZW1lbnQtaG9sZGVyJz48L3NlY3Rpb24+XCIpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIuZWxlbWVudC1ob2xkZXI6bGFzdC1vZi10eXBlXCIpLmF0dHIoJ2lkJywgdGhpcy5lbGVtZW50SWQpO1xuXHRcdHZhciBwb3NpdGlvbiA9IHt9O1xuXHRcdHBvc2l0aW9uLnRvcCA9IHRoaXMucG9zaXRpb24ueVBvcztcblx0XHRwb3NpdGlvbi5sZWZ0ID0gdGhpcy5wb3NpdGlvbi54UG9zO1xuXHRcdHBvc2l0aW9uLnpJbmRleCA9IDA7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuY3NzKHBvc2l0aW9uKTtcblx0XHR0aGlzLmNyZWF0ZUVkaXRNZW51KCk7XG5cdFx0dGhpcy5jcmVhdGVFbGVtZW50KCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gY3JlYXRlRWxlbWVudCcpO1xuXHRcdHN3aXRjaCh0aGlzLmVsZW1lbnRUeXBlKSB7XG5cdFx0XHRjYXNlIFwicG9zdC1pdFwiOlxuXHRcdCAgICBcdHRoaXMuZWxlbWVudCA9IG5ldyBQb3N0aXQodGhpcy5jb250ZW50KTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBvc3RpdCgpKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZVBvc3RpdCk7XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHRcdGNhc2UgXCJzdGF0aWNcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgUGljdHVyZSh0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgIFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCkuYXBwZW5kKHRoaXMuZWxlbWVudC5jcmVhdGVQaWN0dXJlKTtcblx0XHQgICAgXHR0aGlzLmJpbmRIYW5kbGVyKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuaW5pdEltYWdlSW5wdXRzKCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHRcdGNhc2UgXCJtb3Rpb25cIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQgPSBuZXcgTW90aW9uKHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpKTtcblx0XHQgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5hcHBlbmQodGhpcy5lbGVtZW50LmNyZWF0ZU1vdGlvbik7XG5cdFx0ICAgIFx0dGhpcy5iaW5kSGFuZGxlcih0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKSk7XG5cdFx0ICAgIFx0dGhpcy5lbGVtZW50LmluaXRNb3Rpb25JbnB1dHMoKTtcblx0XHQgICAgICAgIGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHRFbGVtZW50LnByb3RvdHlwZS5iaW5kSGFuZGxlciA9IGZ1bmN0aW9uKCRlbCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYmluZEhhbmRsZXInKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5vbignbW91c2Vkb3duJywgdGhpcy5tb3VzZWRvd25IYW5kbGVyLmJpbmQodGhpcykpO1xuXHRcdHRoaXMubW91c2VEb3duID0gZmFsc2U7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUubW91c2Vkb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNlZG93bkhhbmRsZXInKTtcblx0XHRpZihldmVudC50YXJnZXQuaWQgPT09IHRoaXMuZWxlbWVudElkKXtcblx0XHRcdFxuXHRcdFx0aWYoZS50YXJnZXQuaWQgIT09IFwid2hpdGVib2FyZFwiKXtcbiAgICAgICAgXHQgICAgdGhpcy4kZWwuZmluZChcIiNlbGVtZW50LXBpY2tlclwiKS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcblx0XHRcdH1cblx0XG4gICAgICAgIFx0dGhpcy5tb3VzZURvd24gPSB0cnVlO1xuICAgICAgIFx0XHR0aGlzLmN1cnJlbnRMZWZ0ID0gJChlLnRhcmdldCkuY3NzKCdsZWZ0Jyk7XG4gICAgICAgXHRcdHRoaXMuY3VycmVudFRvcCA9ICQoZS50YXJnZXQpLmNzcygndG9wJyk7XG4gICAgICAgIFx0dGhpcy5fbW91c2VNb3ZlSGFuZGxlciA9IHRoaXMubW91c2VNb3ZlSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgICAgICBcdHRoaXMuX21vdXNlVXBIYW5kbGVyID0gdGhpcy5tb3VzZVVwSGFuZGxlci5iaW5kKHRoaXMpO1xuXHRcbiAgICAgICAgXHR0aGlzLm9mZnNldFggPSBlLm9mZnNldFg7XG4gICAgICAgIFx0dGhpcy5vZmZzZXRZID0gZS5vZmZzZXRZO1xuICAgICAgICBcdCsrekluZGV4Q291bnRlcjtcbiAgICAgICAgXHR0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MoJ3pJbmRleCcsIHpJbmRleENvdW50ZXIpO1xuICAgICAgICBcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuICAgICAgICB9XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWRpdE1lbnUgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGNyZWF0ZUVkaXRNZW51Jyk7XG5cdFx0dGhpcy5lZGl0TWVudSA9IG5ldyBFZGl0TWVudSh0aGlzLiRlbCwgdGhpcy5lbGVtZW50SWQpO1xuXHRcdGJlYW4ub24odGhpcy5lZGl0TWVudSwgXCJlZGl0LWNsaWNrZWRcIiwgdGhpcy5lZGl0Q2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdFx0YmVhbi5vbih0aGlzLmVkaXRNZW51LCBcImFjdGlvbi1jbGlja2VkXCIsIHRoaXMuYWN0aW9uQ2xpY2tlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuZWRpdENsaWNrZWRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIGVkaXRDbGlja2VkSGFuZGxlcicpO1xuXHRcdHRoaXMuZWxlbWVudC5lZGl0KHRoaXMuJGVsLCB0aGlzLmVsZW1lbnRJZCk7XG5cdH07XG5cblx0RWxlbWVudC5wcm90b3R5cGUuYWN0aW9uQ2xpY2tlZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudF0gYWN0aW9uQ2xpY2tlZEhhbmRsZXInKTtcblx0XHRzd2l0Y2goZXZlbnQudGFyZ2V0SWQpIHtcblx0XHQgICAgY2FzZSBcInJlbW92ZVwiOlxuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICBcdHRoaXMuJGVsLmZpbmQoJyMnK2V2ZW50LmVsZW1lbnRJZCkucmVtb3ZlKCk7XG5cdFx0ICAgIFx0dmFyIGFjdGlvbkV2ZW50ID0ge307XG5cdFx0ICAgIFx0YWN0aW9uRXZlbnQuaWQgPSB0aGlzLmlkO1xuXHRcdCAgICBcdGFjdGlvbkV2ZW50LmVsZW1lbnRUeXBlID0gdGhpcy5lbGVtZW50VHlwZTtcblx0XHQgICAgXHRiZWFuLmZpcmUodGhpcywgXCJyZW1vdmUtY2xpY2tlZFwiLCBhY3Rpb25FdmVudCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcImVkaXRcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuY29uZmlybSgpO1xuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJjYW5jZWxcIjpcblx0XHQgICAgXHR0aGlzLmVsZW1lbnQuZW5kRWRpdCgpO1xuXHRcdCAgICBcdHRoaXMuZWRpdE1lbnUudG9nZ2xlVmlzaWJsZSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0fVxuXHR9O1xuXG4gICAgRWxlbWVudC5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIG1vdXNlbW92ZUhhbmRsZXInKTtcbiAgICAgICAgaWYodGhpcy5tb3VzZURvd24gPT09IHRydWUpe1xuICAgICAgICAgICAgdmFyIG1vdXNlWCA9IHBhcnNlSW50KGUuY2xpZW50WCk7XG4gICAgICAgICAgICB2YXIgbW91c2VZID0gcGFyc2VJbnQoZS5jbGllbnRZKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQpLmNzcygnbGVmdCcsIG1vdXNlWCAtIHRoaXMub2Zmc2V0WCk7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwiI1wiK3RoaXMuZWxlbWVudElkKS5jc3MoJ3RvcCcsIG1vdXNlWSAtIHRoaXMub2Zmc2V0WSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgRWxlbWVudC5wcm90b3R5cGUubW91c2VVcEhhbmRsZXIgPSBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ1tFbGVtZW50XSBtb3VzZXVwSGFuZGxlcicpO1xuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG5cbiAgICAgICAgaWYodGhpcy5jdXJyZW50VG9wICE9PSAkKGUudGFyZ2V0KS5jc3MoJ3RvcCcpIHx8IHRoaXMuY3VycmVudExlZnQgIT09ICQoZS50YXJnZXQpLmNzcygnbGVmdCcpKXtcbiAgICAgICAgXHR2YXIgYWN0aW9uRXZlbnQgPSB7fTtcbiAgICAgICAgXHRhY3Rpb25FdmVudC5lVGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgIFx0YWN0aW9uRXZlbnQuZWxlbWVudFR5cGUgPSB0aGlzLmVsZW1lbnRUeXBlO1xuICAgICAgICBcdGFjdGlvbkV2ZW50LmVsZW1lbnRJZCA9IHRoaXMuZWxlbWVudElkO1xuICAgICAgICBcdGJlYW4uZmlyZSh0aGlzLCBcInBvc2l0aW9uLWNoYW5nZWRcIiwgYWN0aW9uRXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlLnNldEVsZW1lbnRJZCA9IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnW0VsZW1lbnRdIHNldEVsZW1lbnRJZCcpO1xuICAgIFx0dmFyIGhvbGRlcnMgPSB0aGlzLiRlbC5maW5kKFwiLmVsZW1lbnQtaG9sZGVyXCIpO1xuICAgIFx0aWYoaG9sZGVycy5sZW5ndGggPiAwKXtcbiAgICBcdFx0dmFyIGlkSG9sZGVyID1bXTtcblx0XHRcdGZvcihpID0gMDtpIDwgaG9sZGVycy5sZW5ndGg7IGkrKyApe1xuXHRcdFx0XHRpZEhvbGRlci5wdXNoKGhvbGRlcnNbaV0uaWQpO1xuXHRcdFx0fVxuXHRcdFx0aWRIb2xkZXIuc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gYi1hfSk7XG5cdFx0XHRyZXR1cm4gU3RyaW5nKE51bWJlcihpZEhvbGRlclswXSkrMSk7XG4gICAgXHR9IGVsc2V7XG4gICAgXHRcdHJldHVybiBcIjBcIjtcbiAgICBcdH1cblx0fTtcblxuXHRyZXR1cm4gRWxlbWVudDtcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cblx0ZnVuY3Rpb24gRWxlbWVudFBpY2tlcigkZWwpIHsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjZWxlbWVudC1waWNrZXItdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7XG5cdFx0ICBlbGVtZW50czogW1x0XG5cdFx0ICBcdFx0XHR7ZWxlbWVudDogXCJwb3N0LWl0XCIsIG5hbWU6IFwicG9zdC1pdFwifSxcblx0XHQgIFx0XHRcdHtlbGVtZW50OiBcInN0YXRpY1wiLCBuYW1lOiBcImltYWdlXCJ9LFxuXHRcdCAgXHRcdFx0e2VsZW1lbnQ6IFwibW90aW9uXCIsIG5hbWU6IFwidmlkZW9cIn1cbiAgXHRcdFx0XHRdXG4gIFx0XHRcdH07XG5cdFx0XHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdwaWNrZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdCAgdmFyIGVsZW1lbnQgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5lbGVtZW50KSxcblx0XHRcdCAgICAgIG5hbWUgPSBIYW5kbGViYXJzLmVzY2FwZUV4cHJlc3Npb24odGhpcy5uYW1lKTtcblxuXHRcdFx0ICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdCAgICBcIjxsaSBpZD1cIitlbGVtZW50K1wiPlwiK25hbWUrXCI8L2xpPlwiXG5cdFx0XHQgICk7XG5cdFx0XHR9KTtcblx0XHRcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjd2hpdGVib2FyZFwiKS5hcHBlbmQoICQoaHRtbCkgKTtcblx0XHR0aGlzLnRvZ2dsZVZpc2libGUoKTtcblx0XHR0aGlzLmJpbmRIYW5kbGVyKCk7XG5cdH1cblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS50b2dnbGVWaXNpYmxlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSB0b2dnbGVWaXNpYmxlJyk7XG5cdFx0dGhpcy4kZWwuZmluZCgnI2VsZW1lbnQtcGlja2VyJykudG9nZ2xlQ2xhc3MoXCJoaWRkZW5cIik7XG5cdH07XG5cblx0RWxlbWVudFBpY2tlci5wcm90b3R5cGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbih4UG9zLCB5UG9zKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBzZXRMb2NhdGlvbicpO1xuXHRcdHZhciBwb3NpdGlvbiA9IHtcblx0XHRcdHRvcCA6IHlQb3MsXG5cdFx0XHRsZWZ0IDogeFBvc1xuXHRcdH07XG5cdFx0dGhpcy4kZWwuZmluZChcIiNlbGVtZW50LXBpY2tlclwiKS5jc3MocG9zaXRpb24pO1xuXHR9O1xuXG5cdEVsZW1lbnRQaWNrZXIucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tFbGVtZW50UGlja2VyXSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuJGVsLmZpbmQoJyNlbGVtZW50LXBpY2tlciA+IHVsID4gbGknKS5vbignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHRFbGVtZW50UGlja2VyLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7IGNvbnNvbGUubG9nKCdbRWxlbWVudFBpY2tlcl0gY2xpY2tIYW5kbGVyJyk7XG5cdFx0YmVhbi5maXJlKHRoaXMsIFwiZWxlbWVudC1waWNrZXItY2xpY2tlZFwiLCBldmVudC50YXJnZXQuaWQpO1xuXHR9O1xuXG5cdHJldHVybiBFbGVtZW50UGlja2VyO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFdoaXRlYm9hcmRTZXR0aW5ncyA9IHJlcXVpcmUgKCcuL1doaXRlYm9hcmRTZXR0aW5ncycpO1xuXG5cdGZ1bmN0aW9uIFdoaXRlYm9hcmQoJGVsLCBib2FyZE5hbWUpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMuJGVsID0gJGVsO1xuXHRcdHRoaXMuY3JlYXRlV2hpdGVib2FyZCgpO1xuXHR9XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuY3JlYXRlV2hpdGVib2FyZCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gY3JlYXRlV2hpdGVib2FyZCcpO1xuXHRcdHRoaXMuYm9hcmQgPSB0aGlzLiRlbC5hcHBlbmQoXCI8ZGl2IGlkPSd3aGl0ZWJvYXJkJz48L2Rpdj5cIik7XG5cdFx0dGhpcy5iaW5kSGFuZGxlcigpO1xuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmJpbmRIYW5kbGVyID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkXSBiaW5kSGFuZGxlcicpO1xuXHRcdHRoaXMuYm9hcmQub24oJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG5cdH07XG5cblx0V2hpdGVib2FyZC5wcm90b3R5cGUuY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRdIGNsaWNrSGFuZGxlcicpO1xuXHRcdHZhciB4UG9zID0gZXZlbnQucGFnZVggLSB0aGlzLiRlbC5vZmZzZXQoKS5sZWZ0O1xuICAgXHRcdHZhciB5UG9zID0gZXZlbnQucGFnZVkgLSB0aGlzLiRlbC5vZmZzZXQoKS50b3A7XG4gICBcdFx0dmFyIHBvc2l0aW9uID0ge307XG4gICBcdFx0cG9zaXRpb24ueFBvcyA9IHhQb3M7XG4gICBcdFx0cG9zaXRpb24ueVBvcyA9IHlQb3M7XG5cdFx0aWYoZXZlbnQudGFyZ2V0LmlkID09PSBcIndoaXRlYm9hcmRcIil7IC8vYW5kZXJzIGtsaWt0IGhpaiBcImRvb3JcIiBlbGVtZW50ZW5cblx0XHRcdGJlYW4uZmlyZSh0aGlzLCBcIndoaXRlYm9hcmQtY2xpY2tlZFwiLCBwb3NpdGlvbik7XG5cdFx0fVxuXHR9O1xuXG5cdFdoaXRlYm9hcmQucHJvdG90eXBlLmFkZFdoaXRlYm9hcmRTZXR0aW5ncyA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbV2hpdGVib2FyZF0gYWRkV2hpdGVib2FyZFNldHRpbmdzJyk7XG5cdFx0dGhpcy53aGl0ZWJvYXJkU2V0dGluZ3MgPSBuZXcgV2hpdGVib2FyZFNldHRpbmdzKHRoaXMuJGVsKTtcblx0XHR0aGlzLndoaXRlYm9hcmRTZXR0aW5ncy5jcmVhdGVTZXR0aW5nUGFuZWwoKTtcblx0XHR0aGlzLndoaXRlYm9hcmRTZXR0aW5ncy5hZGRDb250cmlidXRvcigpO1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIEFkZENvbnRyaWJ1dG9yID0gcmVxdWlyZSgnLi9BZGRDb250cmlidXRvcicpO1xuXG5cdGZ1bmN0aW9uIFdoaXRlYm9hcmRTZXR0aW5ncygkZWwsIGNvbnRyaWJ1dG9ycywgcHJqY3RfdGl0bGUpIHsgY29uc29sZS5sb2coJ1tXaGl0ZWJvYXJkU2V0dGluZ3NdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5jb250cmlidXRvcnMgPSBjb250cmlidXRvcnM7XG5cdFx0aWYocHJqY3RfdGl0bGUpe1xuXHRcdFx0dGhpcy5wcmpjdF90aXRsZSA9IHByamN0X3RpdGxlO1xuXHRcdH1cblxuXHR9XG5cblx0V2hpdGVib2FyZFNldHRpbmdzLnByb3RvdHlwZS5jcmVhdGVTZXR0aW5nUGFuZWwgPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gY3JlYXRlU2V0dGluZ1BhbmVsJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNzZXR0aW5nLXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cblx0XHRpZih0aGlzLnByamN0X3RpdGxlKXtcblx0XHRcdGNvbnRleHQucHJqY3RfdGl0bGUgPSB0aGlzLnByamN0X3RpdGxlO1xuXHRcdH1lbHNle1xuXHRcdFx0Y29udGV4dC5wcmpjdF90aXRsZSA9IFwiVW50aXRsZWRcIjtcblx0XHR9XG5cblx0XHRjb250ZXh0LmNvbnRyaWJ1dG9yID0gdGhpcy5jb250cmlidXRvcjtcblxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0JCgnI3doaXRlYm9hcmQnKS5hcHBlbmQoICQoaHRtbCkgKTtcblx0fTtcblxuXHRXaGl0ZWJvYXJkU2V0dGluZ3MucHJvdG90eXBlLmFkZENvbnRyaWJ1dG9yID0gZnVuY3Rpb24oKXtjb25zb2xlLmxvZygnW1doaXRlYm9hcmRTZXR0aW5nc10gYWRkQ29udHJpYnV0b3InKTtcblx0XHR0aGlzLmFkZENvbnRyaWJ1dG9yID0gbmV3IEFkZENvbnRyaWJ1dG9yKHRoaXMuJGVsLmZpbmQoJy5jb250cmlidXRvci1mb3JtJykpO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMuJGVsKTtcblx0XHQvL3RoaXMuQWRkQ29udHJpYnV0b3IuY3JlYXRlU2V0dGluZ1BhbmVsKCk7XG5cdH07XG5cblx0cmV0dXJuIFdoaXRlYm9hcmRTZXR0aW5ncztcblxufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdGZ1bmN0aW9uIE1vdGlvbigkZWwseFBvcyx5UG9zLHZpZFNyYykgeyBjb25zb2xlLmxvZygnW01vdGlvbl0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHRjb25zb2xlLmxvZygkZWwpO1xuXHRcdGlmKHZpZFNyYyl7XG5cdFx0dGhpcy52aWRTcmMgPSB2aWRTcmM7XG5cdFx0fTtcblxuXHRcdGlmIChcblx0XHRcdHdpbmRvdy5GaWxlICYmIFxuXHRcdFx0d2luZG93LkZpbGVSZWFkZXIgJiYgXG5cdFx0XHR3aW5kb3cuRmlsZUxpc3QgJiYgXG5cdFx0XHR3aW5kb3cuQmxvYlxuXHRcdCkge1xuXG5cdFx0fTtcblx0fVxuXG5cdE1vdGlvbi5wcm90b3R5cGUuY3JlYXRlTW90aW9uID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGNyZWF0TW90aW9uJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNtb3Rpb24tdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblxuXHRcdGlmKHRoaXMudHh0KXtcblx0XHRcdGNvbnRleHQudmlkU3JjID0gdGhpcy52aWRTcmM7XG5cdFx0fWVsc2V7XG5cdFx0XHRjb250ZXh0LnZpZFNyYyA9IFwiXCI7XG5cdFx0fVxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuKCQoaHRtbCkpO1xuXG5cdH07XG5cblx0XG5cdE1vdGlvbi5wcm90b3R5cGUuaW5pdE1vdGlvbklucHV0cz0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tNb3Rpb25dIGluaXRNb3Rpb25JbnB1dHMnKTtcblx0XHRcdHZhciBtb3Rpb25JbnB1dHMgPSB0aGlzLiRlbC5maW5kKCcubW90aW9uLWlucHV0JylbMF07XG5cdFx0XHRpbml0TW90aW9uSW5wdXQobW90aW9uSW5wdXRzKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluaXRNb3Rpb25JbnB1dChlbCl7ICBjb25zb2xlLmxvZygnW01vdGlvbl0gaW5pdE1vdGlvbklucHV0Jyk7XG5cdFx0ZWwuY2xhc3NMaXN0LmFkZCgnbW90aW9uLWlucHV0LWpzJyk7XG5cblx0XHR2YXIgZmlsZUlucHV0ID0gZWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1maWxlXScpO1xuXHRcdGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjcmVhdGVUaHVtYik7XG5cdFx0XG5cdFx0dmFyIHByZXZpZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRwcmV2aWV3Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vdGlvbi1pbnB1dC1wcmV2aWV3Jyk7XG5cblx0XHRcblx0XHRlbC5pbnNlcnRCZWZvcmUocHJldmlld0NvbnRhaW5lciwgZmlsZUlucHV0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVGh1bWIoZSl7XG5cdFx0Y29uc29sZS5sb2coXCJJbnB1dCBjaGFuZ2VkXCIpO1xuXG5cdFx0aWYgKFxuXHRcdFx0dGhpcy5maWxlcyAmJiBcblx0XHRcdHRoaXMuZmlsZXNbMF0gJiYgXG5cdFx0XHR0aGlzLmZpbGVzWzBdLnR5cGUubWF0Y2goJ3ZpZGVvLionKVxuXHRcdCkge1xuXHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHR2YXIgcHJldmlld0NvbnRhaW5lciA9IHRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcubW90aW9uLWlucHV0LXByZXZpZXcnKTtcblxuXHRcdFx0XHRyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHZhciB2aWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuXG5cdFx0XHRcdHZpZC5vbmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRjb25zb2xlLmxvZyh2aWQpO1xuXG5cdFx0XHRcdFx0aWYodmlkLndpZHRoID4gMzAwICl7XG5cdFx0XHRcdFx0XHRuZXdXaWR0aCA9IHZpZC53aWR0aC9pbWcud2lkdGgqMzAwO1xuXHRcdFx0XHRcdFx0bmV3SGVpZ2h0ID0gdmlkLmhlaWdodC9pbWcud2lkdGgqMzAwO1xuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0bmV3V2lkdGggPSB2aWQud2lkdGg7XG5cdFx0XHRcdFx0XHRuZXdIZWlnaHQgPSB2aWQuaGVpZ2h0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGVycm9ycy5sZW5ndGggPT09IDApe1xuXHRcdFx0XHRcdFx0cHJldmlld0NvbnRhaW5lci5zdHlsZS5zcmMgPSBcIidcIisgZS50YXJnZXQucmVzdWx0ICtcIidcIjtcblx0XHRcdFx0XHRcdC8vcHJldmlld0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cdFx0XHRcdFx0XHQvL3ByZXZpZXdDb250YWluZXIuc3R5bGUud2lkdGggPSBuZXdXaWR0aDtcblxuXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdGFsZXJ0KGVycm9ycy5qb2luKFwiXFxuXCIpKTtcblx0XHRcdFx0XHRcdGVycm9ycyA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR2aWQuc2V0QXR0cmlidXRlKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xuXHRcdFx0XHQvL3ZpZC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgbmV3SGVpZ2h0KTtcblx0XHRcdFx0Ly92aWQuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBuZXdIZWlnaHQpO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vcmVhZGVyLlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5maWxlc1swXSk7XG5cdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmZpbGVzWzBdKTtcblx0XHR9ZWxzZXtcblx0XHRcdGVycm9ycy5wdXNoKFwiRmlsZSBpcyBub3QgYSB2YWxpZCB2aWRlb1wiKTtcblx0XHR9XG5cdFx0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRXJyb3JzKCl7XG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA9PT0gMCl7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fWVsc2V7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXG5cdHJldHVybiBNb3Rpb247XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0dmFyIGVycm9ycyA9IFtdO1xuXG5cdGZ1bmN0aW9uIFBpY3R1cmUoJGVsLHhQb3MseVBvcywgaW1nU3JjKSB7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gY29uc3RydWN0b3InKTtcblx0XHR0aGlzLiRlbCA9ICRlbDtcblx0XHRjb25zb2xlLmxvZygkZWwpO1xuXHRcdGlmKGltZ1NyYyl7XG5cdFx0dGhpcy5pbWdTcmMgPSBpbWdTcmM7XG5cdFx0fTtcblxuXHRcdGlmIChcblx0XHRcdHdpbmRvdy5GaWxlICYmIFxuXHRcdFx0d2luZG93LkZpbGVSZWFkZXIgJiYgXG5cdFx0XHR3aW5kb3cuRmlsZUxpc3QgJiYgXG5cdFx0XHR3aW5kb3cuQmxvYlxuXHRcdCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJGdWxsIGZpbGUgc3VwcG9ydFwiKTtcblxuXHRcdH07XG5cdH1cblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jcmVhdGVQaWN0dXJlID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjcmVhdFBpY3R1cmUnKTtcblx0XHR2YXIgZW50cnlUZXh0ID0gJCgnI3BpY3R1cmUtdGVtcGxhdGUnKS50ZXh0KCk7XG5cdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGVudHJ5VGV4dCk7XG5cdFx0dmFyIGNvbnRleHQgPSB7fTtcblxuXHRcdGlmKHRoaXMudHh0KXtcblx0XHRcdGNvbnRleHQuaW1nU3JjID0gdGhpcy5pbWdTcmM7XG5cdFx0fWVsc2V7XG5cdFx0XHRjb250ZXh0LmltZ1NyYyA9IFwiXCI7XG5cdFx0fVxuXHRcdHZhciBodG1sID0gdGVtcGxhdGUoY29udGV4dCk7XG5cdFx0cmV0dXJuKCQoaHRtbCkpO1xuXG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuaW5pdEltYWdlSW5wdXRzPSBmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGluaXRJbWFnZWlucHV0cycpO1xuXHRcdFx0dmFyIGltZ0lucHV0cyA9IHRoaXMuJGVsLmZpbmQoJy5pbWFnZS1pbnB1dCcpWzBdO1xuXHRcdFx0aW5pdEltYWdlSW1wdXQoaW1nSW5wdXRzKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluaXRJbWFnZUltcHV0KGVsKXtcblx0XHRlbC5jbGFzc0xpc3QuYWRkKCdpbWFnZS1pbnB1dC1qcycpO1xuXG5cdFx0dmFyIGZpbGVJbnB1dCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9ZmlsZV0nKTtcblx0XHRmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY3JlYXRlVGh1bWIpO1xuXHRcdFxuXHRcdHZhciBwcmV2aWV3Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0cHJldmlld0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdpbWFnZS1pbnB1dC1wcmV2aWV3Jyk7XG5cdFx0XG5cdFx0ZWwuaW5zZXJ0QmVmb3JlKHByZXZpZXdDb250YWluZXIsIGZpbGVJbnB1dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVRodW1iKGUpe1xuXHRcdGNvbnNvbGUubG9nKFwiSW5wdXQgY2hhbmdlZFwiKTtcblxuXHRcdGlmIChcblx0XHRcdHRoaXMuZmlsZXMgJiYgXG5cdFx0XHR0aGlzLmZpbGVzWzBdICYmIFxuXHRcdFx0dGhpcy5maWxlc1swXS50eXBlLm1hdGNoKCdpbWFnZS4qJylcblx0XHQpIHtcblx0XHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0dmFyIHByZXZpZXdDb250YWluZXIgPSB0aGlzLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmltYWdlLWlucHV0LXByZXZpZXcnKTtcblxuXHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHR2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cblx0XHRcdFx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdFx0XHRpZihpbWcud2lkdGggPiAzMDAgKXtcblx0XHRcdFx0XHRcdG5ld1dpZHRoID0gaW1nLndpZHRoL2ltZy53aWR0aCozMDA7XG5cdFx0XHRcdFx0XHRuZXdIZWlnaHQgPSBpbWcuaGVpZ2h0L2ltZy53aWR0aCozMDA7XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRuZXdXaWR0aCA9IGltZy53aWR0aDtcblx0XHRcdFx0XHRcdG5ld0hlaWdodCA9IGltZy5oZWlnaHQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYoZXJyb3JzLmxlbmd0aCA9PT0gMCl7XG5cdFx0XHRcdFx0XHRwcmV2aWV3Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIisgZS50YXJnZXQucmVzdWx0ICtcIicpXCI7XG5cdFx0XHRcdFx0XHRwcmV2aWV3Q29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodCtcInB4XCI7XG5cdFx0XHRcdFx0XHRwcmV2aWV3Q29udGFpbmVyLnN0eWxlLndpZHRoID0gbmV3V2lkdGgrXCJweFwiO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRhbGVydChlcnJvcnMuam9pbihcIlxcblwiKSk7XG5cdFx0XHRcdFx0XHRlcnJvcnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGUudGFyZ2V0LnJlc3VsdCk7XG5cdFx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgaW1nLndpZHRoKTtcblx0XHRcdFx0aW1nLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaW1nLmhlaWdodCk7XG5cdFx0XHR9XG5cblx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pO1xuXG5cdFx0fWVsc2V7XG5cdFx0XHRlcnJvcnMucHVzaChcIkZpbGUgaXMgbm90IGEgdmFsaWQgaW1hZ2VcIik7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0Vycm9ycygpe1xuXHRcdGlmKGVycm9ycy5sZW5ndGggPT09IDApe1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1lbHNle1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblx0UGljdHVyZS5wcm90b3R5cGUuZWRpdCA9IGZ1bmN0aW9uKCRlbCxlbGVtZW50SWQpeyBjb25zb2xlLmxvZygnW1BpY3R1cmVdIGVkaXQnKTtcblx0fTtcblxuXHRQaWN0dXJlLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQaWN0dXJlXSBjb25maXJtJyk7XG5cdH07XG5cblx0UGljdHVyZS5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUGljdHVyZV0gZW5kRWRpdCcpO1xuXHR9O1xuXG5cdHJldHVybiBQaWN0dXJlO1xuXG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIFBvc3RpdEVkaXQgPSByZXF1aXJlKCcuL1Bvc3RpdEVkaXQnKTtcblxuXHRmdW5jdGlvbiBQb3N0aXQodHh0KSB7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBjb25zdHJ1Y3RvcicpO1xuXHRcdHRoaXMudHh0ID0gdHh0O1xuXHRcdGlmKCF0aGlzLnR4dCl7XG5cdFx0XHR0aGlzLnR4dCA9IFwiTmlldXdlIFBvc3RpdFwiO1xuXHRcdH1cblx0fVxuXG5cdFBvc3RpdC5wcm90b3R5cGUuY3JlYXRlUG9zdGl0ID0gZnVuY3Rpb24odHh0KXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNyZWF0ZVBvc3RpdCcpO1xuXHRcdHZhciBlbnRyeVRleHQgPSAkKCcjcG9zdGl0LXRlbXBsYXRlJykudGV4dCgpO1xuXHRcdHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShlbnRyeVRleHQpO1xuXHRcdHZhciBjb250ZXh0ID0ge307XG5cdFx0Y29udGV4dC50eHQgPSB0aGlzLnR4dDtcblx0XHR2YXIgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXHRcdHJldHVybiAoJChodG1sKSk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5lZGl0ID0gZnVuY3Rpb24oJGVsLGVsZW1lbnRJZCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBlZGl0Jyk7XG5cdFx0dGhpcy4kZWwgPSAkZWw7XG5cdFx0dGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIitlbGVtZW50SWQrXCIgPiAucG9zdGl0ID4gcFwiKS50b2dnbGVDbGFzcyhcImhpZGRlblwiKTtcblx0XHR0aGlzLiRlbC5maW5kKFwiI1wiK2VsZW1lbnRJZCkuYXBwZW5kKG5ldyBQb3N0aXRFZGl0KHRoaXMudHh0KSk7XG5cdH07XG5cblx0UG9zdGl0LnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ1tQb3N0aXRdIGNvbmZpcm0nKTtcblx0XHR0aGlzLnR4dCA9IHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgLnBvc3RpdC1lZGl0XCIpLnZhbCgpO1xuXHRcdHRoaXMuZW5kRWRpdCgpO1xuXHR9O1xuXG5cdFBvc3RpdC5wcm90b3R5cGUuZW5kRWRpdCA9IGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdbUG9zdGl0XSBlbmRFZGl0Jyk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiA+IC5wb3N0aXQgPiBwXCIpLmFkZENsYXNzKFwiaGlkZGVuXCIpLnRleHQodGhpcy50eHQpO1xuXHRcdHRoaXMuJGVsLmZpbmQoXCIjXCIrdGhpcy5lbGVtZW50SWQrXCIgPiAucG9zdGl0LWVkaXRcIikucmVtb3ZlKCk7XG5cdFx0dGhpcy4kZWwuZmluZChcIiNcIit0aGlzLmVsZW1lbnRJZCtcIiA+IC5wb3N0aXQgPiBwXCIpLnRvZ2dsZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHR9O1xuXG5cdHJldHVybiBQb3N0aXQ7XG5cbn0pKCk7IiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblxuXHRmdW5jdGlvbiBQb3N0aXRFZGl0KHR4dCkgeyBjb25zb2xlLmxvZygnW1Bvc3RpdEVkaXRdIGNvbnN0cnVjdG9yJyk7XG5cdFx0dmFyIGVudHJ5VGV4dCA9ICQoJyNwb3N0aXQtZWRpdC10ZW1wbGF0ZScpLnRleHQoKTtcblx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoZW50cnlUZXh0KTtcblx0XHR2YXIgY29udGV4dCA9IHt9O1xuXHRcdGNvbnRleHQudHh0ID0gdHh0O1xuXG5cdFx0dmFyIGh0bWwgPSB0ZW1wbGF0ZShjb250ZXh0KTtcblxuXHRcdHJldHVybiAoJChodG1sKSk7XG5cblx0fVxuXHRcblx0cmV0dXJuIFBvc3RpdEVkaXQ7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9